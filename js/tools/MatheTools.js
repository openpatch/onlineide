export function gleich(a, b) {
    return Math.abs(a - b) < 0.000000001;
}
export function drehenUm(drehpunkt, punkt, winkelInGrad) {
    let w = winkelInGrad / 180 * Math.PI;
    let s = Math.sin(w);
    let c = Math.cos(w);
    let dx = punkt.x - drehpunkt.x;
    let dy = punkt.y - drehpunkt.y;
    let dxNeu = dx * c - dy * s;
    let dyNeu = dx * s + dy * c;
    return { x: drehpunkt.x + dxNeu, y: drehpunkt.y + dyNeu };
}
/**
 * Gibt true zurück, wenn die Strecke von (x0, y0) nach (x1, y1) die Strecke von
 * (x2, y2) nach (x3, y3) berührt.
 *
 * @param x0
 * @param y0
 * @param x1
 * @param y1
 * @param x2
 * @param y2
 * @param x3
 * @param y3
 * @return
 */
export function streckeSchneidetStrecke(p0, p1, p2, p3, schnittpunkt) {
    let a1 = p1.x - p0.x;
    let a2 = p1.y - p0.y;
    let b1 = p2.x - p3.x;
    let b2 = p2.y - p3.y;
    let c1 = p2.x - p0.x;
    let c2 = p2.y - p0.y;
    let det = a1 * b2 - a2 * b1;
    if (det * det < 0.000001) {
        return false; // die Strecken sind so gut wie parallel
    }
    let det1 = c1 * b2 - c2 * b1;
    let det2 = a1 * c2 - a2 * c1;
    let s = det1 / det;
    let t = det2 / det;
    // liegt der Schnittpunkt innerhalb von beiden Strecken?
    let schneidet = s >= 0 && s <= 1 && t >= 0 && t <= 1;
    if (schneidet && schnittpunkt != null) {
        schnittpunkt.x = p0.x + s * (p1.x - p0.x);
        schnittpunkt.y = p0.y + s * (p1.y - p0.y);
    }
    return schneidet;
}
export function abstand(p1, p2) {
    let dx = p2.x - p1.x;
    let dy = p2.y - p1.y;
    return Math.sqrt(dx * dx + dy * dy);
}
export function winkelGradZwischenPunkten(p1, p2) {
    let d = {
        x: p2.x - p1.x,
        y: p2.y - p1.y
    };
    return Math.atan2(d.y, d.x) / Math.PI * 180;
}
export function polygonEnthältPunkt(punkte, punkt) {
    let inside = false;
    let vertexCount = punkte.length;
    for (let index = 0; index <= vertexCount - 1; index++) {
        let i = index % vertexCount;
        let j = (index - 1) % vertexCount;
        if (j < 0) {
            j += vertexCount;
        }
        if (((punkte[i].y > punkt.y) != (punkte[j].y > punkt.y)) &&
            (punkt.x < (punkte[j].x - punkte[i].x) * (punkt.y - punkte[i].y) / (punkte[j].y - punkte[i].y) + punkte[i].x))
            inside = !inside;
    }
    return inside;
}
export function kreisSchneidetStrecke(m, r, p1, p2) {
    /*
 * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)
 * Kreis: (x-mx)^2 + (y-my)^2 = r^2
 *
 * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...
 
 */
    let x1 = p1.x;
    let y1 = p1.y;
    let x2 = p2.x;
    let y2 = p2.y;
    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);
    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;
    let determiante = b * b - 4 * a * c;
    if (determiante < 0) {
        return false; // Kreis schneidet die Gerade nicht
    }
    // Kreis schneidet die Gerade -> innerhalb der Strecke?
    let sqrt = Math.sqrt(determiante);
    let t1 = (-b + sqrt) / (2 * a);
    let t2 = (-b - sqrt) / (2 * a);
    if (t1 >= 0 && t1 <= 1) {
        return true;
    }
    if (t2 >= 0 && t2 <= 1) {
        return true;
    }
    return false;
}
export function schnittpunkteKreisStrecke(m, r, p1, p2, schnittpunkte) {
    /*
 * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)
 * Kreis: (x-mx)^2 + (y-my)^2 = r^2
 *
 * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...
 
 */
    let x1 = p1.x;
    let y1 = p1.y;
    let x2 = p2.x;
    let y2 = p2.y;
    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);
    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;
    let determiante = b * b - 4 * a * c;
    if (determiante < 0) {
        return; // Kreis schneidet die Gerade nicht
    }
    // Kreis schneidet die Gerade -> innerhalb der Strecke?
    let sqrt = Math.sqrt(determiante);
    let t1 = (-b + sqrt) / (2 * a);
    let t2 = (-b - sqrt) / (2 * a);
    if (t1 >= 0 && t1 <= 1) {
        schnittpunkte.push({ x: x1 + t1 * (x2 - x1), y: y1 + t1 * (y2 - y1) });
    }
    if (t2 >= 0 && t2 <= 1) {
        schnittpunkte.push({ x: x1 + t2 * (x2 - x1), y: y1 + t2 * (y2 - y1) });
    }
    return;
}
export function KreisBerührtPolygon(m, r, punkte) {
    for (let i = 0; i < punkte.length; i++) {
        if (abstand(punkte[i], m) <= r) {
            return true;
        }
    }
    // Der Kreis enthält keinen Punkt des Vielecks. Enthält es den Mittelpunkt des Kreises?
    if (polygonEnthältPunkt(punkte, m)) {
        return true;
    }
    // schneidet die Kreislinie eine der Vielecksstrecken?
    for (let i = 0; i < punkte.length; i++) {
        let p2 = punkte[(i + 1) % punkte.length];
        if (kreisSchneidetStrecke(m, r, punkte[i], p2)) {
            return true;
        }
    }
    return false;
}
export function polygonBerührtPolygon(punkte1, punkte2) {
    // Nicht-exakte Lösung: prüfe, ob eines der Vielecke einen Eckpunkt des anderen enthält.
    // Jede Kollision beginnt damit, dass ein Eckpunkt eines Polygons eine Seite des anderen schneidet.
    // Falls oft genug geprüft wird, bleiben Kollisionen also nicht unerkannt.
    for (let i = 0; i < punkte1.length; i++) {
        if (polygonEnthältPunkt(punkte2, punkte1[i])) {
            return true;
        }
    }
    for (let i = 0; i < punkte2.length; i++) {
        if (polygonEnthältPunkt(punkte1, punkte2[i])) {
            return true;
        }
    }
    return false;
}
export function abstandPunktZuStrecke(a, b, p) {
    let dx = b.x - a.x;
    let dy = b.y - a.y;
    let q = dx * dx + dy * dy;
    let lambda = ((-a.x + p.x) * dx + (-a.y + p.y) * dy) / q;
    if (lambda < 0) {
        return abstand(a, p);
    }
    if (lambda > 1) {
        return abstand(b, p);
    }
    let fx = a.x + lambda * (b.x - a.x);
    let fy = a.y + lambda * (b.y - a.y);
    let s1 = p.x - fx;
    let s2 = p.y - fy;
    return Math.sqrt(s1 * s1 + s2 * s2);
}
export function abstandPunktZuGerade(a, b, p) {
    let dx = b.x - a.x;
    let dy = b.y - a.y;
    let l = Math.sqrt(dy * dy + dx * dx);
    if (l < 0.000000001) {
        return abstand(a, p);
    }
    return Math.abs(dy * p.x - dx * p.y + b.x * a.y - b.y * a.x) / l;
}
export function polygonBerührtPolygonExakt(punkte1, punkte2, istGeschlossen1 = false, istGeschlossen2 = false, normaleDerBerührtenGerade1 = null) {
    if (punkte1.length == 0 || punkte2.length == 0)
        return false;
    let endIndex1 = punkte1.length + (istGeschlossen1 ? 0 : -1);
    let endIndex2 = punkte2.length + (istGeschlossen2 ? 0 : -1);
    if (istGeschlossen1 && polygonEnthältPunkt(punkte1, punkte2[0])) {
        if (normaleDerBerührtenGerade1 != null) {
            let minAbstand = 100000;
            let minIndex = 0;
            for (let i = 0; i < punkte1.length - 1; i++) {
                let j = (i + 1) % punkte1.length;
                let d = abstandPunktZuStrecke(punkte1[i], punkte1[j], punkte2[0]);
                if (d < minAbstand) {
                    minAbstand = d;
                    minIndex = 0;
                }
            }
            let i2 = (minIndex + 1) % punkte1.length;
            normaleDerBerührtenGerade1.y = punkte1[i2].x - punkte1[minIndex].x;
            normaleDerBerührtenGerade1.x = -(punkte1[i2].y - punkte1[minIndex].y);
        }
        return true;
    }
    if (istGeschlossen1 && polygonEnthältPunkt(punkte2, punkte1[0])) {
        return true;
    }
    for (let i = 0; i < endIndex1; i++) {
        let p1a = punkte1[i];
        let p1b = punkte1[(i + 1) % punkte1.length];
        for (let j = 0; j < endIndex2; j++) {
            let p2a = punkte2[j];
            let p2b = punkte2[(j + 1) % punkte2.length];
            if (streckeSchneidetStrecke(p1a, p1b, p2a, p2b)) {
                return true;
            }
        }
    }
    return false;
}
export function länge(vektor) {
    return Math.sqrt(vektor.x * vektor.x + vektor.y * vektor.y);
}
export function einheitsVektor(vektor) {
    let l = länge(vektor);
    return { x: vektor.x / l, y: vektor.y / l };
}
// export function normalenvektorBeiImpactEinesKreises(punkte: Punkt[], isMove: boolean[], k: Kreis): Punkt {
//     let minAbstand = 100000;
//     let minIndex = 0;
//     let m = k.getMitte();
//     for (let i = 0; i < punkte.length - 1; i++) {
//         if (isMove != null && !isMove[i]) {
//             let j = (i + 1) % punkte.length;
//             let d = abstandPunktZuStrecke(punkte[i], punkte[j], m);
//             if (d < minAbstand) {
//                 minAbstand = d;
//                 minIndex = i;
//             }
//             // console.log("" + i + ": (" + punkte[i].x + "," + punkte[i].y + ")->(" + punkte[j].x + "," + punkte[j].y + "): " + d);
//         }
//     }
//     let i2 = (minIndex + 1) % punkte.length;
//     // let v = {x: punkte[i2].x - punkte[minIndex].x, y: punkte[i2].y - punkte[minIndex].y};
//     let am = { x: m.x - punkte[minIndex].x, y: m.y - punkte[minIndex].y };
//     let n = {
//         y: punkte[i2].x - punkte[minIndex].x,
//         x: -(punkte[i2].y - punkte[minIndex].y)
//     };
//     let sp = skalarprodukt(n, am);
//     if (sp > 0) {
//         return n;
//     } else {
//         return { x: -n.x, y: -n.y };
//     }
// }
// export function normalenvektorBeiImpactAufKreis(punkte: Punkt[], k: Kreis): Punkt {
//     let schnittpunkte = [];
//     let m = k.getMitte();
//     let r = k.getRadius();
//     for (let i = 0; i < punkte.length; i++) {
//         let j = (i + 1) % punkte.length;
//         schnittpunkteKreisStrecke(m, r, punkte[i], punkte[j], schnittpunkte);
//     }
//     if (schnittpunkte.length == 0) {
//         return {
//             x: punkte[0].x - m.x, y: punkte[0].y - m.y
//         }
//     }
//     let schwerpunkt = { x: 0, y: 0 };
//     for (let p of schnittpunkte) {
//         schwerpunkt.x += p.x;
//         schwerpunkt.y += p.y;
//     }
//     schwerpunkt.x /= punkte.length;
//     schwerpunkt.y /= punkte.length;
//     return {
//         x: schwerpunkt.x - m.x,
//         y: schwerpunkt.y - m.y
//     }
// }
export function skalarprodukt(v1, v2) {
    return v1.x * v2.x + v1.y * v2.y;
}
export function zufall(von, bis) {
    return Math.random() * (bis - von) + von;
}
export function intZufall(von, bis) {
    return Math.trunc(Math.random() * (bis - von + 1 - 0.00000001) + von);
}
export function vektorVonPolarkoordinaten(winkelGrad, länge) {
    let winkel = winkelGrad / 180 * Math.PI;
    return {
        x: länge * Math.cos(winkel),
        y: länge * Math.sin(winkel)
    };
}
export function farbeAusRGB(rot, grün, blau) {
    return blau + 256 * (rot + 256 * grün);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF0aGVUb29scy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jbGllbnQvdG9vbHMvTWF0aGVUb29scy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxNQUFNLFVBQVUsTUFBTSxDQUFDLENBQVMsRUFBRSxDQUFTO0lBRXZDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDO0FBRXpDLENBQUM7QUFFRCxNQUFNLFVBQVUsUUFBUSxDQUFDLFNBQWdCLEVBQUUsS0FBWSxFQUFFLFlBQW9CO0lBRXpFLElBQUksQ0FBQyxHQUFHLFlBQVksR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNyQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BCLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFcEIsSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQy9CLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUUvQixJQUFJLEtBQUssR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDNUIsSUFBSSxLQUFLLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRTVCLE9BQU8sRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUM7QUFFOUQsQ0FBQztBQUVEOzs7Ozs7Ozs7Ozs7O0dBYUc7QUFDSCxNQUFNLFVBQVUsdUJBQXVCLENBQUMsRUFBUyxFQUFFLEVBQVMsRUFBRSxFQUFT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QUMvRCxPQUFPLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQzNDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IHR5cGUgUHVua3QgPSB7XHJcbiAgICB4OiBudW1iZXIsXHJcbiAgICB5OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdsZWljaChhOiBudW1iZXIsIGI6IG51bWJlcikge1xyXG5cclxuICAgIHJldHVybiBNYXRoLmFicyhhIC0gYikgPCAwLjAwMDAwMDAwMTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkcmVoZW5VbShkcmVocHVua3Q6IFB1bmt0LCBwdW5rdDogUHVua3QsIHdpbmtlbEluR3JhZDogbnVtYmVyKTogUHVua3Qge1xyXG5cclxuICAgIGxldCB3ID0gd2lua2VsSW5HcmFkIC8gMTgwICogTWF0aC5QSTtcclxuICAgIGxldCBzID0gTWF0aC5zaW4odyk7XHJcbiAgICBsZXQgYyA9IE1hdGguY29zKHcpO1xyXG5cclxuICAgIGxldCBkeCA9IHB1bmt0LnggLSBkcmVocHVua3QueDtcclxuICAgIGxldCBkeSA9IHB1bmt0LnkgLSBkcmVocHVua3QueTtcclxuXHJcbiAgICBsZXQgZHhOZXUgPSBkeCAqIGMgLSBkeSAqIHM7XHJcbiAgICBsZXQgZHlOZXUgPSBkeCAqIHMgKyBkeSAqIGM7XHJcblxyXG4gICAgcmV0dXJuIHsgeDogZHJlaHB1bmt0LnggKyBkeE5ldSwgeTogZHJlaHB1bmt0LnkgKyBkeU5ldSB9O1xyXG5cclxufVxyXG5cclxuLyoqXHJcbiAqIEdpYnQgdHJ1ZSB6dXLDvGNrLCB3ZW5uIGRpZSBTdHJlY2tlIHZvbiAoeDAsIHkwKSBuYWNoICh4MSwgeTEpIGRpZSBTdHJlY2tlIHZvblxyXG4gKiAoeDIsIHkyKSBuYWNoICh4MywgeTMpIGJlcsO8aHJ0LlxyXG4gKlxyXG4gKiBAcGFyYW0geDBcclxuICogQHBhcmFtIHkwXHJcbiAqIEBwYXJhbSB4MVxyXG4gKiBAcGFyYW0geTFcclxuICogQHBhcmFtIHgyXHJcbiAqIEBwYXJhbSB5MlxyXG4gKiBAcGFyYW0geDNcclxuICogQHBhcmFtIHkzXHJcbiAqIEByZXR1cm5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJlY2tlU2NobmVpZGV0U3RyZWNrZShwMDogUHVua3QsIHAxOiBQdW5rdCwgcDI6IFB1bmt0LCBwMzogUHVua3QsIHNjaG5pdHRwdW5rdD86UHVua3QpIHtcclxuXHJcbiAgICBsZXQgYTEgPSBwMS54IC0gcDAueDtcclxuICAgIGxldCBhMiA9IHAxLnkgLSBwMC55O1xyXG4gICAgbGV0IGIxID0gcDIueCAtIHAzLng7XHJcbiAgICBsZXQgYjIgPSBwMi55IC0gcDMueTtcclxuICAgIGxldCBjMSA9IHAyLnggLSBwMC54O1xyXG4gICAgbGV0IGMyID0gcDIueSAtIHAwLnk7XHJcblxyXG4gICAgbGV0IGRldCA9IGExICogYjIgLSBhMiAqIGIxO1xyXG5cclxuICAgIGlmIChkZXQgKiBkZXQgPCAwLjAwMDAwMSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gZGllIFN0cmVja2VuIHNpbmQgc28gZ3V0IHdpZSBwYXJhbGxlbFxyXG4gICAgfVxyXG5cclxuICAgIGxldCBkZXQxID0gYzEgKiBiMiAtIGMyICogYjE7XHJcbiAgICBsZXQgZGV0MiA9IGExICogYzIgLSBhMiAqIGMxO1xyXG5cclxuICAgIGxldCBzID0gZGV0MSAvIGRldDtcclxuICAgIGxldCB0ID0gZGV0MiAvIGRldDtcclxuXHJcbiAgICAvLyBsaWVndCBkZXIgU2Nobml0dHB1bmt0IGlubmVyaGFsYiB2b24gYmVpZGVuIFN0cmVja2VuP1xyXG4gICAgbGV0IHNjaG5laWRldCA9IHMgPj0gMCAmJiBzIDw9IDEgJiYgdCA+PSAwICYmIHQgPD0gMTtcclxuXHJcbiAgICBpZihzY2huZWlkZXQgJiYgc2Nobml0dHB1bmt0ICE9IG51bGwpe1xyXG4gICAgICAgIHNjaG5pdHRwdW5rdC54ID0gcDAueCArIHMqKHAxLnggLSBwMC54KTtcclxuICAgICAgICBzY2huaXR0cHVua3QueSA9IHAwLnkgKyBzKihwMS55IC0gcDAueSlcclxuICAgICAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNjaG5laWRldDtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhYnN0YW5kKHAxOiBQdW5rdCwgcDI6IFB1bmt0KSB7XHJcblxyXG4gICAgbGV0IGR4ID0gcDIueCAtIHAxLng7XHJcbiAgICBsZXQgZHkgPSBwMi55IC0gcDEueTtcclxuXHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3aW5rZWxHcmFkWndpc2NoZW5QdW5rdGVuKHAxOiBQdW5rdCwgcDI6IFB1bmt0KTogbnVtYmVyIHtcclxuICAgIGxldCBkID0ge1xyXG4gICAgICAgIHg6IHAyLnggLSBwMS54LFxyXG4gICAgICAgIHk6IHAyLnkgLSBwMS55XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE1hdGguYXRhbjIoZC55LCBkLngpL01hdGguUEkqMTgwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9seWdvbkVudGjDpGx0UHVua3QocHVua3RlOiBQdW5rdFtdLCBwdW5rdDogUHVua3QpIHtcclxuXHJcbiAgICBsZXQgaW5zaWRlID0gZmFsc2U7XHJcbiAgICBsZXQgdmVydGV4Q291bnQgPSBwdW5rdGUubGVuZ3RoO1xyXG5cclxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPD0gdmVydGV4Q291bnQgLSAxOyBpbmRleCsrKSB7XHJcblxyXG4gICAgICAgIGxldCBpID0gaW5kZXggJSB2ZXJ0ZXhDb3VudDtcclxuICAgICAgICBsZXQgaiA9IChpbmRleCAtIDEpICUgdmVydGV4Q291bnQ7XHJcbiAgICAgICAgaWYgKGogPCAwKSB7XHJcbiAgICAgICAgICAgIGogKz0gdmVydGV4Q291bnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoKChwdW5rdGVbaV0ueSA+IHB1bmt0LnkpICE9IChwdW5rdGVbal0ueSA+IHB1bmt0LnkpKSAmJlxyXG4gICAgICAgICAgICAocHVua3QueCA8IChwdW5rdGVbal0ueCAtIHB1bmt0ZVtpXS54KSAqIChwdW5rdC55IC0gcHVua3RlW2ldLnkpIC8gKHB1bmt0ZVtqXS55IC0gcHVua3RlW2ldLnkpICsgcHVua3RlW2ldLngpKVxyXG4gICAgICAgICAgICBpbnNpZGUgPSAhaW5zaWRlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBpbnNpZGU7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24ga3JlaXNTY2huZWlkZXRTdHJlY2tlKG06IFB1bmt0LCByOiBudW1iZXIsIHAxOiBQdW5rdCwgcDI6IFB1bmt0KTogYm9vbGVhbiB7XHJcbiAgICAvKlxyXG4gKiBHZXJhZGU6ICh4LCB5KSA9ICh4MSwgeDIpICsgdCooeDIteDEsIHkyLXkxKVxyXG4gKiBLcmVpczogKHgtbXgpXjIgKyAoeS1teSleMiA9IHJeMlxyXG4gKlxyXG4gKiBTY2huZWlkZW4gZGVyIGJlaWRlbiBsaWVmZXJ0IGVpbmUgcXVhZHJhdGlzY2hlIEdsZWljaHVuZyBpbiB0LCBkaWUgd2lyIGzDtnNlbi4uLlxyXG4gXHJcbiAqL1xyXG5cclxuICAgIGxldCB4MSA9IHAxLng7XHJcbiAgICBsZXQgeTEgPSBwMS55O1xyXG4gICAgbGV0IHgyID0gcDIueDtcclxuICAgIGxldCB5MiA9IHAyLnk7XHJcblxyXG5cclxuICAgIGxldCBhID0gKHgyIC0geDEpICogKHgyIC0geDEpICsgKHkyIC0geTEpICogKHkyIC0geTEpO1xyXG4gICAgbGV0IGIgPSAyICogKHgxIC0gbS54KSAqICh4MiAtIHgxKSArIDIgKiAoeTEgLSBtLnkpICogKHkyIC0geTEpO1xyXG4gICAgbGV0IGMgPSAoeDEgLSBtLngpICogKHgxIC0gbS54KSArICh5MSAtIG0ueSkgKiAoeTEgLSBtLnkpIC0gciAqIHI7XHJcblxyXG4gICAgbGV0IGRldGVybWlhbnRlID0gYiAqIGIgLSA0ICogYSAqIGM7XHJcblxyXG4gICAgaWYgKGRldGVybWlhbnRlIDwgMCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gS3JlaXMgc2NobmVpZGV0IGRpZSBHZXJhZGUgbmljaHRcclxuICAgIH1cclxuXHJcbiAgICAvLyBLcmVpcyBzY2huZWlkZXQgZGllIEdlcmFkZSAtPiBpbm5lcmhhbGIgZGVyIFN0cmVja2U/XHJcblxyXG4gICAgbGV0IHNxcnQgPSBNYXRoLnNxcnQoZGV0ZXJtaWFudGUpO1xyXG4gICAgbGV0IHQxID0gKC1iICsgc3FydCkgLyAoMiAqIGEpO1xyXG4gICAgbGV0IHQyID0gKC1iIC0gc3FydCkgLyAoMiAqIGEpO1xyXG5cclxuICAgIGlmICh0MSA+PSAwICYmIHQxIDw9IDEpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodDIgPj0gMCAmJiB0MiA8PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNjaG5pdHRwdW5rdGVLcmVpc1N0cmVja2UobTogUHVua3QsIHI6IG51bWJlciwgcDE6IFB1bmt0LCBwMjogUHVua3QsIHNjaG5pdHRwdW5rdGU6IFB1bmt0W10pOiB2b2lkIHtcclxuICAgIC8qXHJcbiAqIEdlcmFkZTogKHgsIHkpID0gKHgxLCB4MikgKyB0Kih4Mi14MSwgeTIteTEpXHJcbiAqIEtyZWlzOiAoeC1teCleMiArICh5LW15KV4yID0gcl4yXHJcbiAqXHJcbiAqIFNjaG5laWRlbiBkZXIgYmVpZGVuIGxpZWZlcnQgZWluZSBxdWFkcmF0aXNjaGUgR2xlaWNodW5nIGluIHQsIGRpZSB3aXIgbMO2c2VuLi4uXHJcbiBcclxuICovXHJcblxyXG4gICAgbGV0IHgxID0gcDEueDtcclxuICAgIGxldCB5MSA9IHAxLnk7XHJcbiAgICBsZXQgeDIgPSBwMi54O1xyXG4gICAgbGV0IHkyID0gcDIueTtcclxuXHJcblxyXG4gICAgbGV0IGEgPSAoeDIgLSB4MSkgKiAoeDIgLSB4MSkgKyAoeTIgLSB5MSkgKiAoeTIgLSB5MSk7XHJcbiAgICBsZXQgYiA9IDIgKiAoeDEgLSBtLngpICogKHgyIC0geDEpICsgMiAqICh5MSAtIG0ueSkgKiAoeTIgLSB5MSk7XHJcbiAgICBsZXQgYyA9ICh4MSAtIG0ueCkgKiAoeDEgLSBtLngpICsgKHkxIC0gbS55KSAqICh5MSAtIG0ueSkgLSByICogcjtcclxuXHJcbiAgICBsZXQgZGV0ZXJtaWFudGUgPSBiICogYiAtIDQgKiBhICogYztcclxuXHJcbiAgICBpZiAoZGV0ZXJtaWFudGUgPCAwKSB7XHJcbiAgICAgICAgcmV0dXJuOyAvLyBLcmVpcyBzY2huZWlkZXQgZGllIEdlcmFkZSBuaWNodFxyXG4gICAgfVxyXG5cclxuICAgIC8vIEtyZWlzIHNjaG5laWRldCBkaWUgR2VyYWRlIC0+IGlubmVyaGFsYiBkZXIgU3RyZWNrZT9cclxuXHJcbiAgICBsZXQgc3FydCA9IE1hdGguc3FydChkZXRlcm1pYW50ZSk7XHJcbiAgICBsZXQgdDEgPSAoLWIgKyBzcXJ0KSAvICgyICogYSk7XHJcbiAgICBsZXQgdDIgPSAoLWIgLSBzcXJ0KSAvICgyICogYSk7XHJcblxyXG4gICAgaWYgKHQxID49IDAgJiYgdDEgPD0gMSkge1xyXG4gICAgICAgIHNjaG5pdHRwdW5rdGUucHVzaCh7IHg6IHgxICsgdDEgKiAoeDIgLSB4MSksIHk6IHkxICsgdDEgKiAoeTIgLSB5MSkgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodDIgPj0gMCAmJiB0MiA8PSAxKSB7XHJcbiAgICAgICAgc2Nobml0dHB1bmt0ZS5wdXNoKHsgeDogeDEgKyB0MiAqICh4MiAtIHgxKSwgeTogeTEgKyB0MiAqICh5MiAtIHkxKSB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm47XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gS3JlaXNCZXLDvGhydFBvbHlnb24obTogUHVua3QsIHI6IG51bWJlciwgcHVua3RlOiBQdW5rdFtdKSB7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwdW5rdGUubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgaWYgKGFic3RhbmQocHVua3RlW2ldLCBtKSA8PSByKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVyIEtyZWlzIGVudGjDpGx0IGtlaW5lbiBQdW5rdCBkZXMgVmllbGVja3MuIEVudGjDpGx0IGVzIGRlbiBNaXR0ZWxwdW5rdCBkZXMgS3JlaXNlcz9cclxuICAgIGlmIChwb2x5Z29uRW50aMOkbHRQdW5rdChwdW5rdGUsIG0pKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2NobmVpZGV0IGRpZSBLcmVpc2xpbmllIGVpbmUgZGVyIFZpZWxlY2tzc3RyZWNrZW4/XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHB1bmt0ZS5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgICAgICBsZXQgcDIgPSBwdW5rdGVbKGkgKyAxKSAlIHB1bmt0ZS5sZW5ndGhdO1xyXG4gICAgICAgIGlmIChrcmVpc1NjaG5laWRldFN0cmVja2UobSwgciwgcHVua3RlW2ldLCBwMikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9seWdvbkJlcsO8aHJ0UG9seWdvbihwdW5rdGUxOiBQdW5rdFtdLCBwdW5rdGUyOiBQdW5rdFtdKSB7XHJcblxyXG4gICAgLy8gTmljaHQtZXhha3RlIEzDtnN1bmc6IHByw7xmZSwgb2IgZWluZXMgZGVyIFZpZWxlY2tlIGVpbmVuIEVja3B1bmt0IGRlcyBhbmRlcmVuIGVudGjDpGx0LlxyXG4gICAgLy8gSmVkZSBLb2xsaXNpb24gYmVnaW5udCBkYW1pdCwgZGFzcyBlaW4gRWNrcHVua3QgZWluZXMgUG9seWdvbnMgZWluZSBTZWl0ZSBkZXMgYW5kZXJlbiBzY2huZWlkZXQuXHJcbiAgICAvLyBGYWxscyBvZnQgZ2VudWcgZ2VwcsO8ZnQgd2lyZCwgYmxlaWJlbiBLb2xsaXNpb25lbiBhbHNvIG5pY2h0IHVuZXJrYW5udC5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHVua3RlMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChwb2x5Z29uRW50aMOkbHRQdW5rdChwdW5rdGUyLCBwdW5rdGUxW2ldKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwdW5rdGUyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHBvbHlnb25FbnRow6RsdFB1bmt0KHB1bmt0ZTEsIHB1bmt0ZTJbaV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcblxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFic3RhbmRQdW5rdFp1U3RyZWNrZShhOiBQdW5rdCwgYjogUHVua3QsIHA6IFB1bmt0KXtcclxuXHJcbiAgICBsZXQgZHggPSBiLnggLSBhLng7XHJcbiAgICBsZXQgZHkgPSBiLnkgLSBhLnk7XHJcblxyXG4gICAgbGV0IHEgPSBkeCpkeCtkeSpkeTtcclxuXHJcbiAgICBsZXQgbGFtYmRhID0gKCgtYS54K3AueCkqZHggKyAoLWEueStwLnkpKmR5KS9xO1xyXG5cclxuICAgIGlmKGxhbWJkYSA8IDApe1xyXG4gICAgICAgIHJldHVybiBhYnN0YW5kKGEsIHApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKGxhbWJkYSA+IDEpe1xyXG4gICAgICAgIHJldHVybiBhYnN0YW5kKGIsIHApO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBmeCA9IGEueCArIGxhbWJkYSAqIChiLnggLSBhLngpO1xyXG4gICAgbGV0IGZ5ID0gYS55ICsgbGFtYmRhICogKGIueSAtIGEueSk7XHJcblxyXG4gICAgbGV0IHMxID0gcC54IC0gZng7XHJcbiAgICBsZXQgczIgPSBwLnkgLSBmeTtcclxuXHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHMxKnMxICsgczIqczIpO1xyXG4gICAgXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhYnN0YW5kUHVua3RadUdlcmFkZShhOiBQdW5rdCwgYjogUHVua3QsIHA6IFB1bmt0KSB7XHJcblxyXG4gICAgbGV0IGR4ID0gYi54IC0gYS54O1xyXG4gICAgbGV0IGR5ID0gYi55IC0gYS55O1xyXG5cclxuICAgIGxldCBsID0gTWF0aC5zcXJ0KGR5ICogZHkgKyBkeCAqIGR4KTtcclxuXHJcbiAgICBpZiAobCA8IDAuMDAwMDAwMDAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGFic3RhbmQoYSwgcCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIE1hdGguYWJzKGR5ICogcC54IC0gZHggKiBwLnkgKyBiLnggKiBhLnkgLSBiLnkgKiBhLngpIC8gbDtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwb2x5Z29uQmVyw7xocnRQb2x5Z29uRXhha3QocHVua3RlMTogUHVua3RbXSwgcHVua3RlMjogUHVua3RbXSwgaXN0R2VzY2hsb3NzZW4xOiBib29sZWFuID0gZmFsc2UsXHJcbiAgICBpc3RHZXNjaGxvc3NlbjI6IGJvb2xlYW4gPSBmYWxzZSwgbm9ybWFsZURlckJlcsO8aHJ0ZW5HZXJhZGUxOiBQdW5rdCA9IG51bGwpIHtcclxuXHJcbiAgICBpZihwdW5rdGUxLmxlbmd0aCA9PSAwIHx8IHB1bmt0ZTIubGVuZ3RoID09IDApIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBsZXQgZW5kSW5kZXgxID0gcHVua3RlMS5sZW5ndGggKyAoaXN0R2VzY2hsb3NzZW4xID8gMCA6IC0xKTtcclxuICAgIGxldCBlbmRJbmRleDIgPSBwdW5rdGUyLmxlbmd0aCArIChpc3RHZXNjaGxvc3NlbjIgPyAwIDogLTEpO1xyXG5cclxuICAgIGlmIChpc3RHZXNjaGxvc3NlbjEgJiYgcG9seWdvbkVudGjDpGx0UHVua3QocHVua3RlMSwgcHVua3RlMlswXSkpIHtcclxuXHJcbiAgICAgICAgaWYgKG5vcm1hbGVEZXJCZXLDvGhydGVuR2VyYWRlMSAhPSBudWxsKSB7XHJcblxyXG4gICAgICAgICAgICBsZXQgbWluQWJzdGFuZCA9IDEwMDAwMDtcclxuICAgICAgICAgICAgbGV0IG1pbkluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHVua3RlMS5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBqID0gKGkgKyAxKSAlIHB1bmt0ZTEubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBkID0gYWJzdGFuZFB1bmt0WnVTdHJlY2tlKHB1bmt0ZTFbaV0sIHB1bmt0ZTFbal0sIHB1bmt0ZTJbMF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGQgPCBtaW5BYnN0YW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluQWJzdGFuZCA9IGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbWluSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgaTIgPSAobWluSW5kZXggKyAxKSAlIHB1bmt0ZTEubGVuZ3RoO1xyXG4gICAgICAgICAgICBub3JtYWxlRGVyQmVyw7xocnRlbkdlcmFkZTEueSA9IHB1bmt0ZTFbaTJdLnggLSBwdW5rdGUxW21pbkluZGV4XS54O1xyXG4gICAgICAgICAgICBub3JtYWxlRGVyQmVyw7xocnRlbkdlcmFkZTEueCA9IC0ocHVua3RlMVtpMl0ueSAtIHB1bmt0ZTFbbWluSW5kZXhdLnkpO1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXN0R2VzY2hsb3NzZW4xICYmIHBvbHlnb25FbnRow6RsdFB1bmt0KHB1bmt0ZTIsIHB1bmt0ZTFbMF0pKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmRJbmRleDE7IGkrKykge1xyXG4gICAgICAgIGxldCBwMWEgPSBwdW5rdGUxW2ldO1xyXG4gICAgICAgIGxldCBwMWIgPSBwdW5rdGUxWyhpICsgMSkgJSBwdW5rdGUxLmxlbmd0aF07XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBlbmRJbmRleDI7IGorKykge1xyXG4gICAgICAgICAgICBsZXQgcDJhID0gcHVua3RlMltqXTtcclxuICAgICAgICAgICAgbGV0IHAyYiA9IHB1bmt0ZTJbKGogKyAxKSAlIHB1bmt0ZTIubGVuZ3RoXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdHJlY2tlU2NobmVpZGV0U3RyZWNrZShwMWEsIHAxYiwgcDJhLCBwMmIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsw6RuZ2UodmVrdG9yOiBQdW5rdCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHZla3Rvci54ICogdmVrdG9yLnggKyB2ZWt0b3IueSAqIHZla3Rvci55KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVpbmhlaXRzVmVrdG9yKHZla3RvcjogUHVua3QpOiBQdW5rdCB7XHJcbiAgICBsZXQgbCA9IGzDpG5nZSh2ZWt0b3IpO1xyXG4gICAgcmV0dXJuIHsgeDogdmVrdG9yLnggLyBsLCB5OiB2ZWt0b3IueSAvIGwgfTtcclxufVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGVudmVrdG9yQmVpSW1wYWN0RWluZXNLcmVpc2VzKHB1bmt0ZTogUHVua3RbXSwgaXNNb3ZlOiBib29sZWFuW10sIGs6IEtyZWlzKTogUHVua3Qge1xyXG5cclxuLy8gICAgIGxldCBtaW5BYnN0YW5kID0gMTAwMDAwO1xyXG4vLyAgICAgbGV0IG1pbkluZGV4ID0gMDtcclxuLy8gICAgIGxldCBtID0gay5nZXRNaXR0ZSgpO1xyXG5cclxuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHVua3RlLmxlbmd0aCAtIDE7IGkrKykge1xyXG4vLyAgICAgICAgIGlmIChpc01vdmUgIT0gbnVsbCAmJiAhaXNNb3ZlW2ldKSB7XHJcbi8vICAgICAgICAgICAgIGxldCBqID0gKGkgKyAxKSAlIHB1bmt0ZS5sZW5ndGg7XHJcblxyXG4vLyAgICAgICAgICAgICBsZXQgZCA9IGFic3RhbmRQdW5rdFp1U3RyZWNrZShwdW5rdGVbaV0sIHB1bmt0ZVtqXSwgbSk7XHJcbi8vICAgICAgICAgICAgIGlmIChkIDwgbWluQWJzdGFuZCkge1xyXG4vLyAgICAgICAgICAgICAgICAgbWluQWJzdGFuZCA9IGQ7XHJcbi8vICAgICAgICAgICAgICAgICBtaW5JbmRleCA9IGk7XHJcbi8vICAgICAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiXCIgKyBpICsgXCI6IChcIiArIHB1bmt0ZVtpXS54ICsgXCIsXCIgKyBwdW5rdGVbaV0ueSArIFwiKS0+KFwiICsgcHVua3RlW2pdLnggKyBcIixcIiArIHB1bmt0ZVtqXS55ICsgXCIpOiBcIiArIGQpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gICAgIGxldCBpMiA9IChtaW5JbmRleCArIDEpICUgcHVua3RlLmxlbmd0aDtcclxuXHJcbi8vICAgICAvLyBsZXQgdiA9IHt4OiBwdW5rdGVbaTJdLnggLSBwdW5rdGVbbWluSW5kZXhdLngsIHk6IHB1bmt0ZVtpMl0ueSAtIHB1bmt0ZVttaW5JbmRleF0ueX07XHJcbi8vICAgICBsZXQgYW0gPSB7IHg6IG0ueCAtIHB1bmt0ZVttaW5JbmRleF0ueCwgeTogbS55IC0gcHVua3RlW21pbkluZGV4XS55IH07XHJcblxyXG4vLyAgICAgbGV0IG4gPSB7XHJcbi8vICAgICAgICAgeTogcHVua3RlW2kyXS54IC0gcHVua3RlW21pbkluZGV4XS54LFxyXG4vLyAgICAgICAgIHg6IC0ocHVua3RlW2kyXS55IC0gcHVua3RlW21pbkluZGV4XS55KVxyXG4vLyAgICAgfTtcclxuXHJcbi8vICAgICBsZXQgc3AgPSBza2FsYXJwcm9kdWt0KG4sIGFtKTtcclxuLy8gICAgIGlmIChzcCA+IDApIHtcclxuLy8gICAgICAgICByZXR1cm4gbjtcclxuLy8gICAgIH0gZWxzZSB7XHJcbi8vICAgICAgICAgcmV0dXJuIHsgeDogLW4ueCwgeTogLW4ueSB9O1xyXG4vLyAgICAgfVxyXG5cclxuLy8gfVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGVudmVrdG9yQmVpSW1wYWN0QXVmS3JlaXMocHVua3RlOiBQdW5rdFtdLCBrOiBLcmVpcyk6IFB1bmt0IHtcclxuXHJcbi8vICAgICBsZXQgc2Nobml0dHB1bmt0ZSA9IFtdO1xyXG4vLyAgICAgbGV0IG0gPSBrLmdldE1pdHRlKCk7XHJcbi8vICAgICBsZXQgciA9IGsuZ2V0UmFkaXVzKCk7XHJcblxyXG4vLyAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwdW5rdGUubGVuZ3RoOyBpKyspIHtcclxuLy8gICAgICAgICBsZXQgaiA9IChpICsgMSkgJSBwdW5rdGUubGVuZ3RoO1xyXG4vLyAgICAgICAgIHNjaG5pdHRwdW5rdGVLcmVpc1N0cmVja2UobSwgciwgcHVua3RlW2ldLCBwdW5rdGVbal0sIHNjaG5pdHRwdW5rdGUpO1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGlmIChzY2huaXR0cHVua3RlLmxlbmd0aCA9PSAwKSB7XHJcbi8vICAgICAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgICAgICAgeDogcHVua3RlWzBdLnggLSBtLngsIHk6IHB1bmt0ZVswXS55IC0gbS55XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGxldCBzY2h3ZXJwdW5rdCA9IHsgeDogMCwgeTogMCB9O1xyXG4vLyAgICAgZm9yIChsZXQgcCBvZiBzY2huaXR0cHVua3RlKSB7XHJcbi8vICAgICAgICAgc2Nod2VycHVua3QueCArPSBwLng7XHJcbi8vICAgICAgICAgc2Nod2VycHVua3QueSArPSBwLnk7XHJcbi8vICAgICB9XHJcbi8vICAgICBzY2h3ZXJwdW5rdC54IC89IHB1bmt0ZS5sZW5ndGg7XHJcbi8vICAgICBzY2h3ZXJwdW5rdC55IC89IHB1bmt0ZS5sZW5ndGg7XHJcblxyXG4vLyAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgICB4OiBzY2h3ZXJwdW5rdC54IC0gbS54LFxyXG4vLyAgICAgICAgIHk6IHNjaHdlcnB1bmt0LnkgLSBtLnlcclxuLy8gICAgIH1cclxuXHJcbi8vIH1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBza2FsYXJwcm9kdWt0KHYxOiBQdW5rdCwgdjI6IFB1bmt0KSB7XHJcbiAgICByZXR1cm4gdjEueCAqIHYyLnggKyB2MS55ICogdjIueTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB6dWZhbGwodm9uOiBudW1iZXIsIGJpczogbnVtYmVyKXtcclxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpKihiaXMgLSB2b24pICsgdm9uO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW50WnVmYWxsKHZvbjogbnVtYmVyLCBiaXM6IG51bWJlcil7XHJcbiAgICByZXR1cm4gTWF0aC50cnVuYyhNYXRoLnJhbmRvbSgpKihiaXMgLSB2b24gKyAxIC0gMC4wMDAwMDAwMSkgKyB2b24pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmVrdG9yVm9uUG9sYXJrb29yZGluYXRlbih3aW5rZWxHcmFkOiBudW1iZXIsIGzDpG5nZTogbnVtYmVyKXtcclxuICAgIGxldCB3aW5rZWwgPSB3aW5rZWxHcmFkLzE4MCpNYXRoLlBJO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiBsw6RuZ2UgKiBNYXRoLmNvcyh3aW5rZWwpLFxyXG4gICAgICAgIHk6IGzDpG5nZSAqIE1hdGguc2luKHdpbmtlbClcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZhcmJlQXVzUkdCKHJvdDogbnVtYmVyLCBncsO8bjogbnVtYmVyLCBibGF1OiBudW1iZXIpOm51bWJlcntcclxuICAgIHJldHVybiBibGF1ICsgMjU2ICogKHJvdCArIDI1NiAqIGdyw7xuKTtcclxufSJdfQ==