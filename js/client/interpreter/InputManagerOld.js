import { stringPrimitiveType, charPrimitiveType, intPrimitiveType } from "../compiler/types/PrimitiveTypes.js";
export class InputManagerOld {
    constructor($runDiv) {
        this.$runDiv = $runDiv;
    }
    readInput(method, parameters, callback) {
        let returnType = method.getReturnType();
        let message = parameters[1].value;
        let defaultValue = parameters.length == 3 ? parameters[2].value : null;
        this.$runDiv.find('.jo_run-input-message').html(message);
        this.$runDiv.find('.jo_run-input-error').html("");
        let dvt = defaultValue == null ? "" : defaultValue;
        this.$runDiv.find('.jo_run-input-input').val(dvt);
        this.$runDiv.find('.jo_run-input').css('display', 'flex');
        let that = this;
        this.$runDiv.find('.jo_run-input-button').on('mousedown', (e) => {
            e.preventDefault();
            that.onSubmit(returnType, callback);
        });
        this.$runDiv.find('.jo_run-input-input').on('keydown', (e) => {
            if (e.key == "Enter") {
                that.onSubmit(returnType, callback);
            }
        }).focus();
    }
    onSubmit(type, callback) {
        let v = (this.$runDiv.find('.jo_run-input-input').val());
        let valueAndError = this.parse(v, type);
        if (valueAndError.error != null) {
            this.$runDiv.find('.jo_run-input-error').html(valueAndError.error);
            return;
        }
        this.hide();
        callback(valueAndError.value);
    }
    parse(v, type) {
        if (type == stringPrimitiveType) {
            return {
                error: null,
                value: { value: v, type: type }
            };
        }
        if (type == charPrimitiveType) {
            if (v.length == 0)
                return { error: "Leere Eingabe. Erwartet wird ein Zeichen.", value: null };
            if (v.length > 1)
                return { error: "Zu lange Eingabe. Erwartet wird ein Zeichen.", value: null };
            return {
                error: null,
                value: { value: v, type: type }
            };
        }
        if (type == charPrimitiveType) {
            if (v != "true" && v != "false")
                return { error: "Erwartet wird true oder false.", value: null };
            return {
                error: null,
                value: { value: v == "true", type: type }
            };
        }
        v = v.replace(",", ".");
        let n = Number(v);
        if (n == null) {
            return { error: "Erwartet wird eine Zahl.", value: null };
        }
        if (type == intPrimitiveType) {
            if (n != Math.round(n))
                return { error: "Erwartet wird eine ganze Zahl.", value: null };
            return {
                error: null,
                value: { value: Math.round(n), type: type }
            };
        }
        return {
            error: null,
            value: { value: n, type: type }
        };
    }
    hide() {
        this.$runDiv.find('.jo_run-input').css('display', 'none');
        this.$runDiv.find('.jo_run-input-button').off('mousedown');
        this.$runDiv.find('.jo_run-input-input').off('keydown');
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5wdXRNYW5hZ2VyT2xkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NsaWVudC9pbnRlcnByZXRlci9JbnB1dE1hbmFnZXJPbGQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLG1CQUFtQixFQUFFLGlCQUFpQixFQUFFLGdCQUFnQixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFFL0csTUFBTSxPQUFPLGVBQWU7SUFFeEIsWUFBb0IsT0FBNEI7UUFBNUIsWUFBTyxHQUFQLE9BQU8sQ0FBcUI7SUFFaEQsQ0FBQztJQUVNLFNBQVMsQ0FBQyxNQUFjLEVBQUUsVUFBbUIsRUFBRSxRQUFnQztRQUVsRixJQUFJLFVBQVUsR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDeEMsSUFBSSxPQUFPLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUNsQyxJQUFJLFlBQVksR0FBRyxVQUFVLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBRXZFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3pELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRWxELElBQUksR0FBRyxHQUFHLFlBQVksSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDO1FBQ25ELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxD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LENBQUMsQ0FBQztRQUVsQixJQUFHLENBQUMsSUFBSSxJQUFJLEVBQUM7WUFDVCxPQUFPLEVBQUMsS0FBSyxFQUFFLDBCQUEwQixFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUMsQ0FBQztTQUMzRDtRQUVELElBQUcsSUFBSSxJQUFJLGdCQUFnQixFQUFDO1lBQ3hCLElBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUFFLE9BQU8sRUFBQyxLQUFLLEVBQUUsZ0NBQWdDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQyxDQUFDO1lBQ3JGLE9BQU87Z0JBQ0gsS0FBSyxFQUFFLElBQUk7Z0JBQ1gsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBQzthQUM1QyxDQUFBO1NBQ0o7UUFFRCxPQUFPO1lBQ0gsS0FBSyxFQUFFLElBQUk7WUFDWCxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUM7U0FDaEMsQ0FBQTtJQUVMLENBQUM7SUFHRCxJQUFJO1FBRUEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUUxRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUUzRCxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUU1RCxDQUFDO0NBR0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUeXBlLCBNZXRob2QsIFZhbHVlIH0gZnJvbSBcIi4uL2NvbXBpbGVyL3R5cGVzL1R5cGVzLmpzXCI7XHJcbmltcG9ydCB7IHN0cmluZ1ByaW1pdGl2ZVR5cGUsIGNoYXJQcmltaXRpdmVUeXBlLCBpbnRQcmltaXRpdmVUeXBlIH0gZnJvbSBcIi4uL2NvbXBpbGVyL3R5cGVzL1ByaW1pdGl2ZVR5cGVzLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSW5wdXRNYW5hZ2VyT2xkIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlICRydW5EaXY6IEpRdWVyeTxIVE1MRWxlbWVudD4pe1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVhZElucHV0KG1ldGhvZDogTWV0aG9kLCBwYXJhbWV0ZXJzOiBWYWx1ZVtdLCBjYWxsYmFjazogKHZhbHVlOiBWYWx1ZSkgPT4gdm9pZCl7XHJcblxyXG4gICAgICAgIGxldCByZXR1cm5UeXBlID0gbWV0aG9kLmdldFJldHVyblR5cGUoKTtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IHBhcmFtZXRlcnNbMV0udmFsdWU7XHJcbiAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZSA9IHBhcmFtZXRlcnMubGVuZ3RoID09IDMgPyBwYXJhbWV0ZXJzWzJdLnZhbHVlIDogbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy4kcnVuRGl2LmZpbmQoJy5qb19ydW4taW5wdXQtbWVzc2FnZScpLmh0bWwobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy4kcnVuRGl2LmZpbmQoJy5qb19ydW4taW5wdXQtZXJyb3InKS5odG1sKFwiXCIpO1xyXG5cclxuICAgICAgICBsZXQgZHZ0ID0gZGVmYXVsdFZhbHVlID09IG51bGwgPyBcIlwiIDogZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgIHRoaXMuJHJ1bkRpdi5maW5kKCcuam9fcnVuLWlucHV0LWlucHV0JykudmFsKGR2dCk7XHJcbiAgICAgICAgdGhpcy4kcnVuRGl2LmZpbmQoJy5qb19ydW4taW5wdXQnKS5jc3MoJ2Rpc3BsYXknLCAnZmxleCcpO1xyXG5cclxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgIHRoaXMuJHJ1bkRpdi5maW5kKCcuam9fcnVuLWlucHV0LWJ1dHRvbicpLm9uKCdtb3VzZWRvd24nLCAoZSk9PntcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGF0Lm9uU3VibWl0KHJldHVyblR5cGUsIGNhbGxiYWNrKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLiRydW5EaXYuZmluZCgnLmpvX3J1bi1pbnB1dC1pbnB1dCcpLm9uKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYoZS5rZXkgPT0gXCJFbnRlclwiKXtcclxuICAgICAgICAgICAgICAgIHRoYXQub25TdWJtaXQocmV0dXJuVHlwZSwgY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuZm9jdXMoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgb25TdWJtaXQodHlwZTogVHlwZSwgY2FsbGJhY2s6ICh2YWx1ZTogVmFsdWUpID0+IHZvaWQpe1xyXG4gICAgICAgIGxldCB2OiBzdHJpbmcgPSA8c3RyaW5nPih0aGlzLiRydW5EaXYuZmluZCgnLmpvX3J1bi1pbnB1dC1pbnB1dCcpLnZhbCgpKTtcclxuXHJcbiAgICAgICAgbGV0IHZhbHVlQW5kRXJyb3IgPSB0aGlzLnBhcnNlKHYsIHR5cGUpO1xyXG5cclxuICAgICAgICBpZih2YWx1ZUFuZEVycm9yLmVycm9yICE9IG51bGwpe1xyXG4gICAgICAgICAgICB0aGlzLiRydW5EaXYuZmluZCgnLmpvX3J1bi1pbnB1dC1lcnJvcicpLmh0bWwodmFsdWVBbmRFcnJvci5lcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5oaWRlKCk7XHJcblxyXG4gICAgICAgIGNhbGxiYWNrKHZhbHVlQW5kRXJyb3IudmFsdWUpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBwYXJzZSh2OiBzdHJpbmcsIHR5cGU6IFR5cGUpOnt2YWx1ZTogVmFsdWUsIGVycm9yOiBzdHJpbmd9IHtcclxuXHJcbiAgICAgICAgaWYodHlwZSA9PSBzdHJpbmdQcmltaXRpdmVUeXBlKXtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHt2YWx1ZTogdiwgdHlwZTogdHlwZX1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodHlwZSA9PSBjaGFyUHJpbWl0aXZlVHlwZSl7XHJcbiAgICAgICAgICAgIGlmKHYubGVuZ3RoID09IDApIHJldHVybiB7ZXJyb3I6IFwiTGVlcmUgRWluZ2FiZS4gRXJ3YXJ0ZXQgd2lyZCBlaW4gWmVpY2hlbi5cIiwgdmFsdWU6IG51bGx9O1xyXG4gICAgICAgICAgICBpZih2Lmxlbmd0aCA+IDEpIHJldHVybiB7ZXJyb3I6IFwiWnUgbGFuZ2UgRWluZ2FiZS4gRXJ3YXJ0ZXQgd2lyZCBlaW4gWmVpY2hlbi5cIiwgdmFsdWU6IG51bGx9O1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZToge3ZhbHVlOiB2LCB0eXBlOiB0eXBlfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0eXBlID09IGNoYXJQcmltaXRpdmVUeXBlKXtcclxuICAgICAgICAgICAgaWYodiAhPSBcInRydWVcIiAmJiB2ICE9IFwiZmFsc2VcIikgcmV0dXJuIHtlcnJvcjogXCJFcndhcnRldCB3aXJkIHRydWUgb2RlciBmYWxzZS5cIiwgdmFsdWU6IG51bGx9O1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZToge3ZhbHVlOiB2ID09IFwidHJ1ZVwiLCB0eXBlOiB0eXBlfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2ID0gdi5yZXBsYWNlKFwiLFwiLCBcIi5cIik7XHJcblxyXG4gICAgICAgIGxldCBuID0gTnVtYmVyKHYpO1xyXG5cclxuICAgICAgICBpZihuID09IG51bGwpe1xyXG4gICAgICAgICAgICByZXR1cm4ge2Vycm9yOiBcIkVyd2FydGV0IHdpcmQgZWluZSBaYWhsLlwiLCB2YWx1ZTogbnVsbH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0eXBlID09IGludFByaW1pdGl2ZVR5cGUpe1xyXG4gICAgICAgICAgICBpZihuICE9IE1hdGgucm91bmQobikpIHJldHVybiB7ZXJyb3I6IFwiRXJ3YXJ0ZXQgd2lyZCBlaW5lIGdhbnplIFphaGwuXCIsIHZhbHVlOiBudWxsfTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHt2YWx1ZTogTWF0aC5yb3VuZChuKSwgdHlwZTogdHlwZX1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgICAgICAgIHZhbHVlOiB7dmFsdWU6IG4sIHR5cGU6IHR5cGV9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgaGlkZSgpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuJHJ1bkRpdi5maW5kKCcuam9fcnVuLWlucHV0JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuXHJcbiAgICAgICAgdGhpcy4kcnVuRGl2LmZpbmQoJy5qb19ydW4taW5wdXQtYnV0dG9uJykub2ZmKCdtb3VzZWRvd24nKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLiRydW5EaXYuZmluZCgnLmpvX3J1bi1pbnB1dC1pbnB1dCcpLm9mZigna2V5ZG93bicpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59Il19