export function gleich(a, b) {
    return Math.abs(a - b) < 0.000000001;
}
export function drehenUm(drehpunkt, punkt, winkelInGrad) {
    let w = winkelInGrad / 180 * Math.PI;
    let s = Math.sin(w);
    let c = Math.cos(w);
    let dx = punkt.x - drehpunkt.x;
    let dy = punkt.y - drehpunkt.y;
    let dxNeu = dx * c - dy * s;
    let dyNeu = dx * s + dy * c;
    return { x: drehpunkt.x + dxNeu, y: drehpunkt.y + dyNeu };
}
/**
 * Gibt true zurück, wenn die Strecke von (x0, y0) nach (x1, y1) die Strecke von
 * (x2, y2) nach (x3, y3) berührt.
 *
 * @param x0
 * @param y0
 * @param x1
 * @param y1
 * @param x2
 * @param y2
 * @param x3
 * @param y3
 * @return
 */
export function streckeSchneidetStrecke(p0, p1, p2, p3, schnittpunkt) {
    let a1 = p1.x - p0.x;
    let a2 = p1.y - p0.y;
    let b1 = p2.x - p3.x;
    let b2 = p2.y - p3.y;
    let c1 = p2.x - p0.x;
    let c2 = p2.y - p0.y;
    let det = a1 * b2 - a2 * b1;
    if (det * det < 0.000001) {
        return false; // die Strecken sind so gut wie parallel
    }
    let det1 = c1 * b2 - c2 * b1;
    let det2 = a1 * c2 - a2 * c1;
    let s = det1 / det;
    let t = det2 / det;
    // liegt der Schnittpunkt innerhalb von beiden Strecken?
    let schneidet = s >= 0 && s <= 1 && t >= 0 && t <= 1;
    if (schneidet && schnittpunkt != null) {
        schnittpunkt.x = p0.x + s * (p1.x - p0.x);
        schnittpunkt.y = p0.y + s * (p1.y - p0.y);
    }
    return schneidet;
}
export function abstand(p1, p2) {
    let dx = p2.x - p1.x;
    let dy = p2.y - p1.y;
    return Math.sqrt(dx * dx + dy * dy);
}
export function winkelGradZwischenPunkten(p1, p2) {
    let d = {
        x: p2.x - p1.x,
        y: p2.y - p1.y
    };
    return Math.atan2(d.y, d.x) / Math.PI * 180;
}
export function polygonEnthältPunkt(punkte, punkt) {
    let inside = false;
    let vertexCount = punkte.length;
    for (let index = 0; index <= vertexCount - 1; index++) {
        let i = index % vertexCount;
        let j = (index - 1) % vertexCount;
        if (j < 0) {
            j += vertexCount;
        }
        if (((punkte[i].y > punkt.y) != (punkte[j].y > punkt.y)) &&
            (punkt.x < (punkte[j].x - punkte[i].x) * (punkt.y - punkte[i].y) / (punkte[j].y - punkte[i].y) + punkte[i].x))
            inside = !inside;
    }
    return inside;
}
export function kreisSchneidetStrecke(m, r, p1, p2) {
    /*
 * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)
 * Kreis: (x-mx)^2 + (y-my)^2 = r^2
 *
 * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...
 
 */
    let x1 = p1.x;
    let y1 = p1.y;
    let x2 = p2.x;
    let y2 = p2.y;
    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);
    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;
    let determiante = b * b - 4 * a * c;
    if (determiante < 0) {
        return false; // Kreis schneidet die Gerade nicht
    }
    // Kreis schneidet die Gerade -> innerhalb der Strecke?
    let sqrt = Math.sqrt(determiante);
    let t1 = (-b + sqrt) / (2 * a);
    let t2 = (-b - sqrt) / (2 * a);
    if (t1 >= 0 && t1 <= 1) {
        return true;
    }
    if (t2 >= 0 && t2 <= 1) {
        return true;
    }
    return false;
}
export function schnittpunkteKreisStrecke(m, r, p1, p2, schnittpunkte) {
    /*
 * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)
 * Kreis: (x-mx)^2 + (y-my)^2 = r^2
 *
 * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...
 
 */
    let x1 = p1.x;
    let y1 = p1.y;
    let x2 = p2.x;
    let y2 = p2.y;
    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);
    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;
    let determiante = b * b - 4 * a * c;
    if (determiante < 0) {
        return; // Kreis schneidet die Gerade nicht
    }
    // Kreis schneidet die Gerade -> innerhalb der Strecke?
    let sqrt = Math.sqrt(determiante);
    let t1 = (-b + sqrt) / (2 * a);
    let t2 = (-b - sqrt) / (2 * a);
    if (t1 >= 0 && t1 <= 1) {
        schnittpunkte.push({ x: x1 + t1 * (x2 - x1), y: y1 + t1 * (y2 - y1) });
    }
    if (t2 >= 0 && t2 <= 1) {
        schnittpunkte.push({ x: x1 + t2 * (x2 - x1), y: y1 + t2 * (y2 - y1) });
    }
    return;
}
export function KreisBerührtPolygon(m, r, punkte) {
    for (let i = 0; i < punkte.length; i++) {
        if (abstand(punkte[i], m) <= r) {
            return true;
        }
    }
    // Der Kreis enthält keinen Punkt des Vielecks. Enthält es den Mittelpunkt des Kreises?
    if (polygonEnthältPunkt(punkte, m)) {
        return true;
    }
    // schneidet die Kreislinie eine der Vielecksstrecken?
    for (let i = 0; i < punkte.length; i++) {
        let p2 = punkte[(i + 1) % punkte.length];
        if (kreisSchneidetStrecke(m, r, punkte[i], p2)) {
            return true;
        }
    }
    return false;
}
export function polygonBerührtPolygon(punkte1, punkte2) {
    // Nicht-exakte Lösung: prüfe, ob eines der Vielecke einen Eckpunkt des anderen enthält.
    // Jede Kollision beginnt damit, dass ein Eckpunkt eines Polygons eine Seite des anderen schneidet.
    // Falls oft genug geprüft wird, bleiben Kollisionen also nicht unerkannt.
    for (let i = 0; i < punkte1.length; i++) {
        if (polygonEnthältPunkt(punkte2, punkte1[i])) {
            return true;
        }
    }
    for (let i = 0; i < punkte2.length; i++) {
        if (polygonEnthältPunkt(punkte1, punkte2[i])) {
            return true;
        }
    }
    return false;
}
export function abstandPunktZuStrecke(a, b, p) {
    let dx = b.x - a.x;
    let dy = b.y - a.y;
    let q = dx * dx + dy * dy;
    let lambda = ((-a.x + p.x) * dx + (-a.y + p.y) * dy) / q;
    if (lambda < 0) {
        return abstand(a, p);
    }
    if (lambda > 1) {
        return abstand(b, p);
    }
    let fx = a.x + lambda * (b.x - a.x);
    let fy = a.y + lambda * (b.y - a.y);
    let s1 = p.x - fx;
    let s2 = p.y - fy;
    return Math.sqrt(s1 * s1 + s2 * s2);
}
export function abstandPunktZuGerade(a, b, p) {
    let dx = b.x - a.x;
    let dy = b.y - a.y;
    let l = Math.sqrt(dy * dy + dx * dx);
    if (l < 0.000000001) {
        return abstand(a, p);
    }
    return Math.abs(dy * p.x - dx * p.y + b.x * a.y - b.y * a.x) / l;
}
export function polygonBerührtPolygonExakt(punkte1, punkte2, istGeschlossen1 = false, istGeschlossen2 = false, normaleDerBerührtenGerade1 = null) {
    let endIndex1 = punkte1.length + (istGeschlossen1 ? 0 : -1);
    let endIndex2 = punkte2.length + (istGeschlossen2 ? 0 : -1);
    if (istGeschlossen1 && polygonEnthältPunkt(punkte1, punkte2[0])) {
        if (normaleDerBerührtenGerade1 != null) {
            let minAbstand = 100000;
            let minIndex = 0;
            for (let i = 0; i < punkte1.length - 1; i++) {
                let j = (i + 1) % punkte1.length;
                let d = abstandPunktZuStrecke(punkte1[i], punkte1[j], punkte2[0]);
                if (d < minAbstand) {
                    minAbstand = d;
                    minIndex = 0;
                }
            }
            let i2 = (minIndex + 1) % punkte1.length;
            normaleDerBerührtenGerade1.y = punkte1[i2].x - punkte1[minIndex].x;
            normaleDerBerührtenGerade1.x = -(punkte1[i2].y - punkte1[minIndex].y);
        }
        return true;
    }
    if (istGeschlossen1 && polygonEnthältPunkt(punkte2, punkte1[0])) {
        return true;
    }
    for (let i = 0; i < endIndex1; i++) {
        let p1a = punkte1[i];
        let p1b = punkte1[(i + 1) % punkte1.length];
        for (let j = 0; j < endIndex2; j++) {
            let p2a = punkte2[j];
            let p2b = punkte2[(j + 1) % punkte2.length];
            if (streckeSchneidetStrecke(p1a, p1b, p2a, p2b)) {
                return true;
            }
        }
    }
    return false;
}
export function länge(vektor) {
    return Math.sqrt(vektor.x * vektor.x + vektor.y * vektor.y);
}
export function einheitsVektor(vektor) {
    let l = länge(vektor);
    return { x: vektor.x / l, y: vektor.y / l };
}
// export function normalenvektorBeiImpactEinesKreises(punkte: Punkt[], isMove: boolean[], k: Kreis): Punkt {
//     let minAbstand = 100000;
//     let minIndex = 0;
//     let m = k.getMitte();
//     for (let i = 0; i < punkte.length - 1; i++) {
//         if (isMove != null && !isMove[i]) {
//             let j = (i + 1) % punkte.length;
//             let d = abstandPunktZuStrecke(punkte[i], punkte[j], m);
//             if (d < minAbstand) {
//                 minAbstand = d;
//                 minIndex = i;
//             }
//             // console.log("" + i + ": (" + punkte[i].x + "," + punkte[i].y + ")->(" + punkte[j].x + "," + punkte[j].y + "): " + d);
//         }
//     }
//     let i2 = (minIndex + 1) % punkte.length;
//     // let v = {x: punkte[i2].x - punkte[minIndex].x, y: punkte[i2].y - punkte[minIndex].y};
//     let am = { x: m.x - punkte[minIndex].x, y: m.y - punkte[minIndex].y };
//     let n = {
//         y: punkte[i2].x - punkte[minIndex].x,
//         x: -(punkte[i2].y - punkte[minIndex].y)
//     };
//     let sp = skalarprodukt(n, am);
//     if (sp > 0) {
//         return n;
//     } else {
//         return { x: -n.x, y: -n.y };
//     }
// }
// export function normalenvektorBeiImpactAufKreis(punkte: Punkt[], k: Kreis): Punkt {
//     let schnittpunkte = [];
//     let m = k.getMitte();
//     let r = k.getRadius();
//     for (let i = 0; i < punkte.length; i++) {
//         let j = (i + 1) % punkte.length;
//         schnittpunkteKreisStrecke(m, r, punkte[i], punkte[j], schnittpunkte);
//     }
//     if (schnittpunkte.length == 0) {
//         return {
//             x: punkte[0].x - m.x, y: punkte[0].y - m.y
//         }
//     }
//     let schwerpunkt = { x: 0, y: 0 };
//     for (let p of schnittpunkte) {
//         schwerpunkt.x += p.x;
//         schwerpunkt.y += p.y;
//     }
//     schwerpunkt.x /= punkte.length;
//     schwerpunkt.y /= punkte.length;
//     return {
//         x: schwerpunkt.x - m.x,
//         y: schwerpunkt.y - m.y
//     }
// }
export function skalarprodukt(v1, v2) {
    return v1.x * v2.x + v1.y * v2.y;
}
export function zufall(von, bis) {
    return Math.random() * (bis - von) + von;
}
export function intZufall(von, bis) {
    return Math.trunc(Math.random() * (bis - von + 1 - 0.00000001) + von);
}
export function vektorVonPolarkoordinaten(winkelGrad, länge) {
    let winkel = winkelGrad / 180 * Math.PI;
    return {
        x: länge * Math.cos(winkel),
        y: länge * Math.sin(winkel)
    };
}
export function farbeAusRGB(rot, grün, blau) {
    return blau + 256 * (rot + 256 * grün);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF0aGVUb29scy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jbGllbnQvdG9vbHMvTWF0aGVUb29scy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxNQUFNLFVBQVUsTUFBTSxDQUFDLENBQVMsRUFBRSxDQUFTO0lBRXZDLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDO0FBRXpDLENBQUM7QUFFRCxNQUFNLFVBQVUsUUFBUSxDQUFDLFNBQWdCLEVBQUUsS0FBWSxFQUFFLFlBQW9CO0lBRXpFLElBQUksQ0FBQyxHQUFHLFlBQVksR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNyQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BCLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFcEIsSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQy9CLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUUvQixJQUFJLEtBQUssR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDNUIsSUFBSSxLQUFLLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRTVCLE9BQU8sRUFBRSxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUM7QUFFOUQsQ0FBQztBQUVEOzs7Ozs7Ozs7Ozs7O0dBYUc7QUFDSCxNQUFNLFVBQVUsdUJBQXVCLENBQUMsRUFBUyxFQUFFLEVBQVMsRUFBRSxF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QUNkLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDZCxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBR2QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdEQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ2hFLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRWxFLElBQUksV0FBVyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFcEMsSUFBSSxXQUFXLEdBQUcsQ0FBQyxFQUFFO1FBQ2pCLE9BQU8sS0FBSyxDQUFDLENBQUMsbUNBQW1DO0tBQ3BEO0lBRUQsdURBQXVEO0lBRXZELElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMvQixJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBRS9CLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO1FBQ3BCLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQztLQUNmO0lBRUQsT0FBTyxLQUFLLENBQUM7QUFFakIsQ0FBQztBQUVELE1BQU0sVUFBVSx5QkFBeUIsQ0FBQyxDQUFRLEVBQUUsQ0FBUyxFQUFFLEVBQVMsRUFBRSxFQUFTLEVBQUUsYUFBc0I7SUFDdkc7Ozs7OztHQU1EO0lBRUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNkLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDZCxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2QsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUdkLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUNoRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVsRSxJQUFJLFdBQVcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRXBDLElBQUksV0FBVyxHQUFHLENBQUMsRUFBRTtRQUNqQixPQUFPLENBQUMsbUNBQW1DO0tBQzlDO0lBRUQsdURBQXVEO0lBRXZELElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUMvQixJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBRS9CLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFO1FBQ3BCLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7S0FDMUU7SUFDRCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRTtRQUNwQixhQUFhLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQzFFO0lBRUQsT0FBTztBQUVYLENBQUM7QUFFRCxNQUFNLFVBQVUsbUJBQW1CLENBQUMsQ0FBUSxFQUFFLENBQVMsRUFBRSxNQUFlO0lBRXBFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBRXBDLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDNUIsT0FBTyxJQUFJLENBQUM7U0FDZjtLQUVKO0lBRUQsdUZBQXVGO0lBQ3ZGLElBQUksbUJBQW1CLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFO1FBQ2hDLE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxzREFBc0Q7SUFDdEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFFcEMsSUFBSSxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QyxJQUFJLHFCQUFxQixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFO1lBQzVDLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7S0FFSjtJQUVELE9BQU8sS0FBSyxDQUFDO0FBRWpCLENBQUM7QUFFRCxNQUFNLFVBQVUscUJBQXFCLENBQUMsT0FBZ0IsRUFBRSxPQUFnQjtJQUVwRSx3RkFBd0Y7SUFDeEYsbUdBQW1HO0lBQ25HLDBFQUEwRTtJQUMxRSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNyQyxJQUFJLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUMxQyxPQUFPLElBQUksQ0FBQztTQUNmO0tBQ0o7SUFFRCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNyQyxJQUFJLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUMxQyxPQUFPLElBQUksQ0FBQztTQUNmO0tBQ0o7SUFFRCxPQUFPLEtBQUssQ0FBQztBQUVqQixDQUFDO0FBR0QsTUFBTSxVQUFVLHFCQUFxQixDQUFDLENBQVEsRUFBRSxDQUFRLEVBQUUsQ0FBUTtJQUU5RCxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRW5CLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBQyxFQUFFLEdBQUMsRUFBRSxHQUFDLEVBQUUsQ0FBQztJQUVwQixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLEVBQUUsQ0FBQyxHQUFDLENBQUMsQ0FBQztJQUUvQyxJQUFHLE1BQU0sR0FBRyxDQUFDLEVBQUM7UUFDVixPQUFPLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDeEI7SUFFRCxJQUFHLE1BQU0sR0FBRyxDQUFDLEVBQUM7UUFDVixPQUFPLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDeEI7SUFFRCxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFcEMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDbEIsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFFbEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFDLEVBQUUsQ0FBQyxDQUFDO0FBRXBDLENBQUM7QUFFRCxNQUFNLFVBQVUsb0JBQW9CLENBQUMsQ0FBUSxFQUFFLENBQVEsRUFBRSxDQUFRO0lBRTdELElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQixJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFbkIsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztJQUVyQyxJQUFJLENBQUMsR0FBRyxXQUFXLEVBQUU7UUFDakIsT0FBTyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3hCO0lBRUQsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFFckUsQ0FBQztBQUVELE1BQU0sVUFBVSwwQkFBMEIsQ0FBQyxPQUFnQixFQUFFLE9BQWdCLEVBQUUsa0JBQTJCLEtBQUssRUFDM0csa0JBQTJCLEtBQUssRUFBRSw2QkFBb0MsSUFBSTtJQUUxRSxJQUFJLFNBQVMsR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDNUQsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTVELElBQUksZUFBZSxJQUFJLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUU3RCxJQUFJLDBCQUEwQixJQUFJLElBQUksRUFBRTtZQUVwQyxJQUFJLFVBQVUsR0FBRyxNQUFNLENBQUM7WUFDeEIsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDO1lBRWpCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDekMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztnQkFFakMsSUFBSSxDQUFDLEdBQUcscUJBQXFCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEUsSUFBSSxDQUFDLEdBQUcsVUFBVSxFQUFFO29CQUNoQixVQUFVLEdBQUcsQ0FBQyxDQUFDO29CQUNmLFFBQVEsR0FBRyxDQUFDLENBQUM7aUJBQ2hCO2FBRUo7WUFDRCxJQUFJLEVBQUUsR0FBRyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO1lBQ3pDLDBCQUEwQixDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbkUsMEJBQTBCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUV6RTtRQUdELE9BQU8sSUFBSSxDQUFDO0tBQ2Y7SUFFRCxJQUFJLGVBQWUsSUFBSSxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDN0QsT0FBTyxJQUFJLENBQUM7S0FDZjtJQUVELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDaEMsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNoQyxJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckIsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUU1QyxJQUFJLHVCQUF1QixDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFO2dCQUM3QyxPQUFPLElBQUksQ0FBQzthQUNmO1NBRUo7S0FFSjtJQUVELE9BQU8sS0FBSyxDQUFDO0FBRWpCLENBQUM7QUFFRCxNQUFNLFVBQVUsS0FBSyxDQUFDLE1BQWE7SUFDL0IsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRUQsTUFBTSxVQUFVLGNBQWMsQ0FBQyxNQUFhO0lBQ3hDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN0QixPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO0FBQ2hELENBQUM7QUFFRCw2R0FBNkc7QUFFN0csK0JBQStCO0FBQy9CLHdCQUF3QjtBQUN4Qiw0QkFBNEI7QUFFNUIsb0RBQW9EO0FBQ3BELDhDQUE4QztBQUM5QywrQ0FBK0M7QUFFL0Msc0VBQXNFO0FBQ3RFLG9DQUFvQztBQUNwQyxrQ0FBa0M7QUFDbEMsZ0NBQWdDO0FBQ2hDLGdCQUFnQjtBQUVoQix1SUFBdUk7QUFDdkksWUFBWTtBQUNaLFFBQVE7QUFDUiwrQ0FBK0M7QUFFL0MsK0ZBQStGO0FBQy9GLDZFQUE2RTtBQUU3RSxnQkFBZ0I7QUFDaEIsZ0RBQWdEO0FBQ2hELGtEQUFrRDtBQUNsRCxTQUFTO0FBRVQscUNBQXFDO0FBQ3JDLG9CQUFvQjtBQUNwQixvQkFBb0I7QUFDcEIsZUFBZTtBQUNmLHVDQUF1QztBQUN2QyxRQUFRO0FBRVIsSUFBSTtBQUVKLHNGQUFzRjtBQUV0Riw4QkFBOEI7QUFDOUIsNEJBQTRCO0FBQzVCLDZCQUE2QjtBQUU3QixnREFBZ0Q7QUFDaEQsMkNBQTJDO0FBQzNDLGdGQUFnRjtBQUNoRixRQUFRO0FBRVIsdUNBQXVDO0FBQ3ZDLG1CQUFtQjtBQUNuQix5REFBeUQ7QUFDekQsWUFBWTtBQUNaLFFBQVE7QUFFUix3Q0FBd0M7QUFDeEMscUNBQXFDO0FBQ3JDLGdDQUFnQztBQUNoQyxnQ0FBZ0M7QUFDaEMsUUFBUTtBQUNSLHNDQUFzQztBQUN0QyxzQ0FBc0M7QUFFdEMsZUFBZTtBQUNmLGtDQUFrQztBQUNsQyxpQ0FBaUM7QUFDakMsUUFBUTtBQUVSLElBQUk7QUFFSixNQUFNLFVBQVUsYUFBYSxDQUFDLEVBQVMsRUFBRSxFQUFTO0lBQzlDLE9BQU8sRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNyQyxDQUFDO0FBR0QsTUFBTSxVQUFVLE1BQU0sQ0FBQyxHQUFXLEVBQUUsR0FBVztJQUMzQyxPQUFPLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUM7QUFDM0MsQ0FBQztBQUVELE1BQU0sVUFBVSxTQUFTLENBQUMsR0FBVyxFQUFFLEdBQVc7SUFDOUMsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ3hFLENBQUM7QUFFRCxNQUFNLFVBQVUseUJBQXlCLENBQUMsVUFBa0IsRUFBRSxLQUFhO0lBQ3ZFLElBQUksTUFBTSxHQUFHLFVBQVUsR0FBQyxHQUFHLEdBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNwQyxPQUFPO1FBQ0gsQ0FBQyxFQUFFLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztRQUMzQixDQUFDLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO0tBQzlCLENBQUE7QUFDTCxDQUFDO0FBRUQsTUFBTSxVQUFVLFdBQVcsQ0FBQyxHQUFXLEVBQUUsSUFBWSxFQUFFLElBQVk7SUFDL0QsT0FBTyxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsQ0FBQztBQUMzQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmV4cG9ydCB0eXBlIFB1bmt0ID0ge1xyXG4gICAgeDogbnVtYmVyLFxyXG4gICAgeTogbnVtYmVyXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnbGVpY2goYTogbnVtYmVyLCBiOiBudW1iZXIpIHtcclxuXHJcbiAgICByZXR1cm4gTWF0aC5hYnMoYSAtIGIpIDwgMC4wMDAwMDAwMDE7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJlaGVuVW0oZHJlaHB1bmt0OiBQdW5rdCwgcHVua3Q6IFB1bmt0LCB3aW5rZWxJbkdyYWQ6IG51bWJlcik6IFB1bmt0IHtcclxuXHJcbiAgICBsZXQgdyA9IHdpbmtlbEluR3JhZCAvIDE4MCAqIE1hdGguUEk7XHJcbiAgICBsZXQgcyA9IE1hdGguc2luKHcpO1xyXG4gICAgbGV0IGMgPSBNYXRoLmNvcyh3KTtcclxuXHJcbiAgICBsZXQgZHggPSBwdW5rdC54IC0gZHJlaHB1bmt0Lng7XHJcbiAgICBsZXQgZHkgPSBwdW5rdC55IC0gZHJlaHB1bmt0Lnk7XHJcblxyXG4gICAgbGV0IGR4TmV1ID0gZHggKiBjIC0gZHkgKiBzO1xyXG4gICAgbGV0IGR5TmV1ID0gZHggKiBzICsgZHkgKiBjO1xyXG5cclxuICAgIHJldHVybiB7IHg6IGRyZWhwdW5rdC54ICsgZHhOZXUsIHk6IGRyZWhwdW5rdC55ICsgZHlOZXUgfTtcclxuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHaWJ0IHRydWUgenVyw7xjaywgd2VubiBkaWUgU3RyZWNrZSB2b24gKHgwLCB5MCkgbmFjaCAoeDEsIHkxKSBkaWUgU3RyZWNrZSB2b25cclxuICogKHgyLCB5MikgbmFjaCAoeDMsIHkzKSBiZXLDvGhydC5cclxuICpcclxuICogQHBhcmFtIHgwXHJcbiAqIEBwYXJhbSB5MFxyXG4gKiBAcGFyYW0geDFcclxuICogQHBhcmFtIHkxXHJcbiAqIEBwYXJhbSB4MlxyXG4gKiBAcGFyYW0geTJcclxuICogQHBhcmFtIHgzXHJcbiAqIEBwYXJhbSB5M1xyXG4gKiBAcmV0dXJuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc3RyZWNrZVNjaG5laWRldFN0cmVja2UocDA6IFB1bmt0LCBwMTogUHVua3QsIHAyOiBQdW5rdCwgcDM6IFB1bmt0LCBzY2huaXR0cHVua3Q/OlB1bmt0KSB7XHJcblxyXG4gICAgbGV0IGExID0gcDEueCAtIHAwLng7XHJcbiAgICBsZXQgYTIgPSBwMS55IC0gcDAueTtcclxuICAgIGxldCBiMSA9IHAyLnggLSBwMy54O1xyXG4gICAgbGV0IGIyID0gcDIueSAtIHAzLnk7XHJcbiAgICBsZXQgYzEgPSBwMi54IC0gcDAueDtcclxuICAgIGxldCBjMiA9IHAyLnkgLSBwMC55O1xyXG5cclxuICAgIGxldCBkZXQgPSBhMSAqIGIyIC0gYTIgKiBiMTtcclxuXHJcbiAgICBpZiAoZGV0ICogZGV0IDwgMC4wMDAwMDEpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGRpZSBTdHJlY2tlbiBzaW5kIHNvIGd1dCB3aWUgcGFyYWxsZWxcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZGV0MSA9IGMxICogYjIgLSBjMiAqIGIxO1xyXG4gICAgbGV0IGRldDIgPSBhMSAqIGMyIC0gYTIgKiBjMTtcclxuXHJcbiAgICBsZXQgcyA9IGRldDEgLyBkZXQ7XHJcbiAgICBsZXQgdCA9IGRldDIgLyBkZXQ7XHJcblxyXG4gICAgLy8gbGllZ3QgZGVyIFNjaG5pdHRwdW5rdCBpbm5lcmhhbGIgdm9uIGJlaWRlbiBTdHJlY2tlbj9cclxuICAgIGxldCBzY2huZWlkZXQgPSBzID49IDAgJiYgcyA8PSAxICYmIHQgPj0gMCAmJiB0IDw9IDE7XHJcblxyXG4gICAgaWYoc2NobmVpZGV0ICYmIHNjaG5pdHRwdW5rdCAhPSBudWxsKXtcclxuICAgICAgICBzY2huaXR0cHVua3QueCA9IHAwLnggKyBzKihwMS54IC0gcDAueCk7XHJcbiAgICAgICAgc2Nobml0dHB1bmt0LnkgPSBwMC55ICsgcyoocDEueSAtIHAwLnkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIHJldHVybiBzY2huZWlkZXQ7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWJzdGFuZChwMTogUHVua3QsIHAyOiBQdW5rdCkge1xyXG5cclxuICAgIGxldCBkeCA9IHAyLnggLSBwMS54O1xyXG4gICAgbGV0IGR5ID0gcDIueSAtIHAxLnk7XHJcblxyXG4gICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2lua2VsR3JhZFp3aXNjaGVuUHVua3RlbihwMTogUHVua3QsIHAyOiBQdW5rdCk6IG51bWJlciB7XHJcbiAgICBsZXQgZCA9IHtcclxuICAgICAgICB4OiBwMi54IC0gcDEueCxcclxuICAgICAgICB5OiBwMi55IC0gcDEueVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBNYXRoLmF0YW4yKGQueSwgZC54KS9NYXRoLlBJKjE4MDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvbHlnb25FbnRow6RsdFB1bmt0KHB1bmt0ZTogUHVua3RbXSwgcHVua3Q6IFB1bmt0KSB7XHJcblxyXG4gICAgbGV0IGluc2lkZSA9IGZhbHNlO1xyXG4gICAgbGV0IHZlcnRleENvdW50ID0gcHVua3RlLmxlbmd0aDtcclxuXHJcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDw9IHZlcnRleENvdW50IC0gMTsgaW5kZXgrKykge1xyXG5cclxuICAgICAgICBsZXQgaSA9IGluZGV4ICUgdmVydGV4Q291bnQ7XHJcbiAgICAgICAgbGV0IGogPSAoaW5kZXggLSAxKSAlIHZlcnRleENvdW50O1xyXG4gICAgICAgIGlmIChqIDwgMCkge1xyXG4gICAgICAgICAgICBqICs9IHZlcnRleENvdW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCgocHVua3RlW2ldLnkgPiBwdW5rdC55KSAhPSAocHVua3RlW2pdLnkgPiBwdW5rdC55KSkgJiZcclxuICAgICAgICAgICAgKHB1bmt0LnggPCAocHVua3RlW2pdLnggLSBwdW5rdGVbaV0ueCkgKiAocHVua3QueSAtIHB1bmt0ZVtpXS55KSAvIChwdW5rdGVbal0ueSAtIHB1bmt0ZVtpXS55KSArIHB1bmt0ZVtpXS54KSlcclxuICAgICAgICAgICAgaW5zaWRlID0gIWluc2lkZTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gaW5zaWRlO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGtyZWlzU2NobmVpZGV0U3RyZWNrZShtOiBQdW5rdCwgcjogbnVtYmVyLCBwMTogUHVua3QsIHAyOiBQdW5rdCk6IGJvb2xlYW4ge1xyXG4gICAgLypcclxuICogR2VyYWRlOiAoeCwgeSkgPSAoeDEsIHgyKSArIHQqKHgyLXgxLCB5Mi15MSlcclxuICogS3JlaXM6ICh4LW14KV4yICsgKHktbXkpXjIgPSByXjJcclxuICpcclxuICogU2NobmVpZGVuIGRlciBiZWlkZW4gbGllZmVydCBlaW5lIHF1YWRyYXRpc2NoZSBHbGVpY2h1bmcgaW4gdCwgZGllIHdpciBsw7ZzZW4uLi5cclxuIFxyXG4gKi9cclxuXHJcbiAgICBsZXQgeDEgPSBwMS54O1xyXG4gICAgbGV0IHkxID0gcDEueTtcclxuICAgIGxldCB4MiA9IHAyLng7XHJcbiAgICBsZXQgeTIgPSBwMi55O1xyXG5cclxuXHJcbiAgICBsZXQgYSA9ICh4MiAtIHgxKSAqICh4MiAtIHgxKSArICh5MiAtIHkxKSAqICh5MiAtIHkxKTtcclxuICAgIGxldCBiID0gMiAqICh4MSAtIG0ueCkgKiAoeDIgLSB4MSkgKyAyICogKHkxIC0gbS55KSAqICh5MiAtIHkxKTtcclxuICAgIGxldCBjID0gKHgxIC0gbS54KSAqICh4MSAtIG0ueCkgKyAoeTEgLSBtLnkpICogKHkxIC0gbS55KSAtIHIgKiByO1xyXG5cclxuICAgIGxldCBkZXRlcm1pYW50ZSA9IGIgKiBiIC0gNCAqIGEgKiBjO1xyXG5cclxuICAgIGlmIChkZXRlcm1pYW50ZSA8IDApIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEtyZWlzIHNjaG5laWRldCBkaWUgR2VyYWRlIG5pY2h0XHJcbiAgICB9XHJcblxyXG4gICAgLy8gS3JlaXMgc2NobmVpZGV0IGRpZSBHZXJhZGUgLT4gaW5uZXJoYWxiIGRlciBTdHJlY2tlP1xyXG5cclxuICAgIGxldCBzcXJ0ID0gTWF0aC5zcXJ0KGRldGVybWlhbnRlKTtcclxuICAgIGxldCB0MSA9ICgtYiArIHNxcnQpIC8gKDIgKiBhKTtcclxuICAgIGxldCB0MiA9ICgtYiAtIHNxcnQpIC8gKDIgKiBhKTtcclxuXHJcbiAgICBpZiAodDEgPj0gMCAmJiB0MSA8PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHQyID49IDAgJiYgdDIgPD0gMSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzY2huaXR0cHVua3RlS3JlaXNTdHJlY2tlKG06IFB1bmt0LCByOiBudW1iZXIsIHAxOiBQdW5rdCwgcDI6IFB1bmt0LCBzY2huaXR0cHVua3RlOiBQdW5rdFtdKTogdm9pZCB7XHJcbiAgICAvKlxyXG4gKiBHZXJhZGU6ICh4LCB5KSA9ICh4MSwgeDIpICsgdCooeDIteDEsIHkyLXkxKVxyXG4gKiBLcmVpczogKHgtbXgpXjIgKyAoeS1teSleMiA9IHJeMlxyXG4gKlxyXG4gKiBTY2huZWlkZW4gZGVyIGJlaWRlbiBsaWVmZXJ0IGVpbmUgcXVhZHJhdGlzY2hlIEdsZWljaHVuZyBpbiB0LCBkaWUgd2lyIGzDtnNlbi4uLlxyXG4gXHJcbiAqL1xyXG5cclxuICAgIGxldCB4MSA9IHAxLng7XHJcbiAgICBsZXQgeTEgPSBwMS55O1xyXG4gICAgbGV0IHgyID0gcDIueDtcclxuICAgIGxldCB5MiA9IHAyLnk7XHJcblxyXG5cclxuICAgIGxldCBhID0gKHgyIC0geDEpICogKHgyIC0geDEpICsgKHkyIC0geTEpICogKHkyIC0geTEpO1xyXG4gICAgbGV0IGIgPSAyICogKHgxIC0gbS54KSAqICh4MiAtIHgxKSArIDIgKiAoeTEgLSBtLnkpICogKHkyIC0geTEpO1xyXG4gICAgbGV0IGMgPSAoeDEgLSBtLngpICogKHgxIC0gbS54KSArICh5MSAtIG0ueSkgKiAoeTEgLSBtLnkpIC0gciAqIHI7XHJcblxyXG4gICAgbGV0IGRldGVybWlhbnRlID0gYiAqIGIgLSA0ICogYSAqIGM7XHJcblxyXG4gICAgaWYgKGRldGVybWlhbnRlIDwgMCkge1xyXG4gICAgICAgIHJldHVybjsgLy8gS3JlaXMgc2NobmVpZGV0IGRpZSBHZXJhZGUgbmljaHRcclxuICAgIH1cclxuXHJcbiAgICAvLyBLcmVpcyBzY2huZWlkZXQgZGllIEdlcmFkZSAtPiBpbm5lcmhhbGIgZGVyIFN0cmVja2U/XHJcblxyXG4gICAgbGV0IHNxcnQgPSBNYXRoLnNxcnQoZGV0ZXJtaWFudGUpO1xyXG4gICAgbGV0IHQxID0gKC1iICsgc3FydCkgLyAoMiAqIGEpO1xyXG4gICAgbGV0IHQyID0gKC1iIC0gc3FydCkgLyAoMiAqIGEpO1xyXG5cclxuICAgIGlmICh0MSA+PSAwICYmIHQxIDw9IDEpIHtcclxuICAgICAgICBzY2huaXR0cHVua3RlLnB1c2goeyB4OiB4MSArIHQxICogKHgyIC0geDEpLCB5OiB5MSArIHQxICogKHkyIC0geTEpIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHQyID49IDAgJiYgdDIgPD0gMSkge1xyXG4gICAgICAgIHNjaG5pdHRwdW5rdGUucHVzaCh7IHg6IHgxICsgdDIgKiAoeDIgLSB4MSksIHk6IHkxICsgdDIgKiAoeTIgLSB5MSkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEtyZWlzQmVyw7xocnRQb2x5Z29uKG06IFB1bmt0LCByOiBudW1iZXIsIHB1bmt0ZTogUHVua3RbXSkge1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHVua3RlLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgIGlmIChhYnN0YW5kKHB1bmt0ZVtpXSwgbSkgPD0gcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIERlciBLcmVpcyBlbnRow6RsdCBrZWluZW4gUHVua3QgZGVzIFZpZWxlY2tzLiBFbnRow6RsdCBlcyBkZW4gTWl0dGVscHVua3QgZGVzIEtyZWlzZXM/XHJcbiAgICBpZiAocG9seWdvbkVudGjDpGx0UHVua3QocHVua3RlLCBtKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNjaG5laWRldCBkaWUgS3JlaXNsaW5pZSBlaW5lIGRlciBWaWVsZWNrc3N0cmVja2VuP1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwdW5rdGUubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgbGV0IHAyID0gcHVua3RlWyhpICsgMSkgJSBwdW5rdGUubGVuZ3RoXTtcclxuICAgICAgICBpZiAoa3JlaXNTY2huZWlkZXRTdHJlY2tlKG0sIHIsIHB1bmt0ZVtpXSwgcDIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBvbHlnb25CZXLDvGhydFBvbHlnb24ocHVua3RlMTogUHVua3RbXSwgcHVua3RlMjogUHVua3RbXSkge1xyXG5cclxuICAgIC8vIE5pY2h0LWV4YWt0ZSBMw7ZzdW5nOiBwcsO8ZmUsIG9iIGVpbmVzIGRlciBWaWVsZWNrZSBlaW5lbiBFY2twdW5rdCBkZXMgYW5kZXJlbiBlbnRow6RsdC5cclxuICAgIC8vIEplZGUgS29sbGlzaW9uIGJlZ2lubnQgZGFtaXQsIGRhc3MgZWluIEVja3B1bmt0IGVpbmVzIFBvbHlnb25zIGVpbmUgU2VpdGUgZGVzIGFuZGVyZW4gc2NobmVpZGV0LlxyXG4gICAgLy8gRmFsbHMgb2Z0IGdlbnVnIGdlcHLDvGZ0IHdpcmQsIGJsZWliZW4gS29sbGlzaW9uZW4gYWxzbyBuaWNodCB1bmVya2FubnQuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHB1bmt0ZTEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAocG9seWdvbkVudGjDpGx0UHVua3QocHVua3RlMiwgcHVua3RlMVtpXSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHVua3RlMi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChwb2x5Z29uRW50aMOkbHRQdW5rdChwdW5rdGUxLCBwdW5rdGUyW2ldKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG5cclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhYnN0YW5kUHVua3RadVN0cmVja2UoYTogUHVua3QsIGI6IFB1bmt0LCBwOiBQdW5rdCl7XHJcblxyXG4gICAgbGV0IGR4ID0gYi54IC0gYS54O1xyXG4gICAgbGV0IGR5ID0gYi55IC0gYS55O1xyXG5cclxuICAgIGxldCBxID0gZHgqZHgrZHkqZHk7XHJcblxyXG4gICAgbGV0IGxhbWJkYSA9ICgoLWEueCtwLngpKmR4ICsgKC1hLnkrcC55KSpkeSkvcTtcclxuXHJcbiAgICBpZihsYW1iZGEgPCAwKXtcclxuICAgICAgICByZXR1cm4gYWJzdGFuZChhLCBwKTtcclxuICAgIH1cclxuXHJcbiAgICBpZihsYW1iZGEgPiAxKXtcclxuICAgICAgICByZXR1cm4gYWJzdGFuZChiLCBwKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZnggPSBhLnggKyBsYW1iZGEgKiAoYi54IC0gYS54KTtcclxuICAgIGxldCBmeSA9IGEueSArIGxhbWJkYSAqIChiLnkgLSBhLnkpO1xyXG5cclxuICAgIGxldCBzMSA9IHAueCAtIGZ4O1xyXG4gICAgbGV0IHMyID0gcC55IC0gZnk7XHJcblxyXG4gICAgcmV0dXJuIE1hdGguc3FydChzMSpzMSArIHMyKnMyKTtcclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWJzdGFuZFB1bmt0WnVHZXJhZGUoYTogUHVua3QsIGI6IFB1bmt0LCBwOiBQdW5rdCkge1xyXG5cclxuICAgIGxldCBkeCA9IGIueCAtIGEueDtcclxuICAgIGxldCBkeSA9IGIueSAtIGEueTtcclxuXHJcbiAgICBsZXQgbCA9IE1hdGguc3FydChkeSAqIGR5ICsgZHggKiBkeCk7XHJcblxyXG4gICAgaWYgKGwgPCAwLjAwMDAwMDAwMSkge1xyXG4gICAgICAgIHJldHVybiBhYnN0YW5kKGEsIHApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBNYXRoLmFicyhkeSAqIHAueCAtIGR4ICogcC55ICsgYi54ICogYS55IC0gYi55ICogYS54KSAvIGw7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcG9seWdvbkJlcsO8aHJ0UG9seWdvbkV4YWt0KHB1bmt0ZTE6IFB1bmt0W10sIHB1bmt0ZTI6IFB1bmt0W10sIGlzdEdlc2NobG9zc2VuMTogYm9vbGVhbiA9IGZhbHNlLFxyXG4gICAgaXN0R2VzY2hsb3NzZW4yOiBib29sZWFuID0gZmFsc2UsIG5vcm1hbGVEZXJCZXLDvGhydGVuR2VyYWRlMTogUHVua3QgPSBudWxsKSB7XHJcblxyXG4gICAgbGV0IGVuZEluZGV4MSA9IHB1bmt0ZTEubGVuZ3RoICsgKGlzdEdlc2NobG9zc2VuMSA/IDAgOiAtMSk7XHJcbiAgICBsZXQgZW5kSW5kZXgyID0gcHVua3RlMi5sZW5ndGggKyAoaXN0R2VzY2hsb3NzZW4yID8gMCA6IC0xKTtcclxuXHJcbiAgICBpZiAoaXN0R2VzY2hsb3NzZW4xICYmIHBvbHlnb25FbnRow6RsdFB1bmt0KHB1bmt0ZTEsIHB1bmt0ZTJbMF0pKSB7XHJcblxyXG4gICAgICAgIGlmIChub3JtYWxlRGVyQmVyw7xocnRlbkdlcmFkZTEgIT0gbnVsbCkge1xyXG5cclxuICAgICAgICAgICAgbGV0IG1pbkFic3RhbmQgPSAxMDAwMDA7XHJcbiAgICAgICAgICAgIGxldCBtaW5JbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHB1bmt0ZTEubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaiA9IChpICsgMSkgJSBwdW5rdGUxLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZCA9IGFic3RhbmRQdW5rdFp1U3RyZWNrZShwdW5rdGUxW2ldLCBwdW5rdGUxW2pdLCBwdW5rdGUyWzBdKTtcclxuICAgICAgICAgICAgICAgIGlmIChkIDwgbWluQWJzdGFuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkFic3RhbmQgPSBkO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGkyID0gKG1pbkluZGV4ICsgMSkgJSBwdW5rdGUxLmxlbmd0aDtcclxuICAgICAgICAgICAgbm9ybWFsZURlckJlcsO8aHJ0ZW5HZXJhZGUxLnkgPSBwdW5rdGUxW2kyXS54IC0gcHVua3RlMVttaW5JbmRleF0ueDtcclxuICAgICAgICAgICAgbm9ybWFsZURlckJlcsO8aHJ0ZW5HZXJhZGUxLnggPSAtKHB1bmt0ZTFbaTJdLnkgLSBwdW5rdGUxW21pbkluZGV4XS55KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzdEdlc2NobG9zc2VuMSAmJiBwb2x5Z29uRW50aMOkbHRQdW5rdChwdW5rdGUyLCBwdW5rdGUxWzBdKSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW5kSW5kZXgxOyBpKyspIHtcclxuICAgICAgICBsZXQgcDFhID0gcHVua3RlMVtpXTtcclxuICAgICAgICBsZXQgcDFiID0gcHVua3RlMVsoaSArIDEpICUgcHVua3RlMS5sZW5ndGhdO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZW5kSW5kZXgyOyBqKyspIHtcclxuICAgICAgICAgICAgbGV0IHAyYSA9IHB1bmt0ZTJbal07XHJcbiAgICAgICAgICAgIGxldCBwMmIgPSBwdW5rdGUyWyhqICsgMSkgJSBwdW5rdGUyLmxlbmd0aF07XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RyZWNrZVNjaG5laWRldFN0cmVja2UocDFhLCBwMWIsIHAyYSwgcDJiKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2U7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbMOkbmdlKHZla3RvcjogUHVua3QpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE1hdGguc3FydCh2ZWt0b3IueCAqIHZla3Rvci54ICsgdmVrdG9yLnkgKiB2ZWt0b3IueSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlaW5oZWl0c1Zla3Rvcih2ZWt0b3I6IFB1bmt0KTogUHVua3Qge1xyXG4gICAgbGV0IGwgPSBsw6RuZ2UodmVrdG9yKTtcclxuICAgIHJldHVybiB7IHg6IHZla3Rvci54IC8gbCwgeTogdmVrdG9yLnkgLyBsIH07XHJcbn1cclxuXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBub3JtYWxlbnZla3RvckJlaUltcGFjdEVpbmVzS3JlaXNlcyhwdW5rdGU6IFB1bmt0W10sIGlzTW92ZTogYm9vbGVhbltdLCBrOiBLcmVpcyk6IFB1bmt0IHtcclxuXHJcbi8vICAgICBsZXQgbWluQWJzdGFuZCA9IDEwMDAwMDtcclxuLy8gICAgIGxldCBtaW5JbmRleCA9IDA7XHJcbi8vICAgICBsZXQgbSA9IGsuZ2V0TWl0dGUoKTtcclxuXHJcbi8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHB1bmt0ZS5sZW5ndGggLSAxOyBpKyspIHtcclxuLy8gICAgICAgICBpZiAoaXNNb3ZlICE9IG51bGwgJiYgIWlzTW92ZVtpXSkge1xyXG4vLyAgICAgICAgICAgICBsZXQgaiA9IChpICsgMSkgJSBwdW5rdGUubGVuZ3RoO1xyXG5cclxuLy8gICAgICAgICAgICAgbGV0IGQgPSBhYnN0YW5kUHVua3RadVN0cmVja2UocHVua3RlW2ldLCBwdW5rdGVbal0sIG0pO1xyXG4vLyAgICAgICAgICAgICBpZiAoZCA8IG1pbkFic3RhbmQpIHtcclxuLy8gICAgICAgICAgICAgICAgIG1pbkFic3RhbmQgPSBkO1xyXG4vLyAgICAgICAgICAgICAgICAgbWluSW5kZXggPSBpO1xyXG4vLyAgICAgICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlwiICsgaSArIFwiOiAoXCIgKyBwdW5rdGVbaV0ueCArIFwiLFwiICsgcHVua3RlW2ldLnkgKyBcIiktPihcIiArIHB1bmt0ZVtqXS54ICsgXCIsXCIgKyBwdW5rdGVbal0ueSArIFwiKTogXCIgKyBkKTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcbi8vICAgICBsZXQgaTIgPSAobWluSW5kZXggKyAxKSAlIHB1bmt0ZS5sZW5ndGg7XHJcblxyXG4vLyAgICAgLy8gbGV0IHYgPSB7eDogcHVua3RlW2kyXS54IC0gcHVua3RlW21pbkluZGV4XS54LCB5OiBwdW5rdGVbaTJdLnkgLSBwdW5rdGVbbWluSW5kZXhdLnl9O1xyXG4vLyAgICAgbGV0IGFtID0geyB4OiBtLnggLSBwdW5rdGVbbWluSW5kZXhdLngsIHk6IG0ueSAtIHB1bmt0ZVttaW5JbmRleF0ueSB9O1xyXG5cclxuLy8gICAgIGxldCBuID0ge1xyXG4vLyAgICAgICAgIHk6IHB1bmt0ZVtpMl0ueCAtIHB1bmt0ZVttaW5JbmRleF0ueCxcclxuLy8gICAgICAgICB4OiAtKHB1bmt0ZVtpMl0ueSAtIHB1bmt0ZVttaW5JbmRleF0ueSlcclxuLy8gICAgIH07XHJcblxyXG4vLyAgICAgbGV0IHNwID0gc2thbGFycHJvZHVrdChuLCBhbSk7XHJcbi8vICAgICBpZiAoc3AgPiAwKSB7XHJcbi8vICAgICAgICAgcmV0dXJuIG47XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgIHJldHVybiB7IHg6IC1uLngsIHk6IC1uLnkgfTtcclxuLy8gICAgIH1cclxuXHJcbi8vIH1cclxuXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBub3JtYWxlbnZla3RvckJlaUltcGFjdEF1ZktyZWlzKHB1bmt0ZTogUHVua3RbXSwgazogS3JlaXMpOiBQdW5rdCB7XHJcblxyXG4vLyAgICAgbGV0IHNjaG5pdHRwdW5rdGUgPSBbXTtcclxuLy8gICAgIGxldCBtID0gay5nZXRNaXR0ZSgpO1xyXG4vLyAgICAgbGV0IHIgPSBrLmdldFJhZGl1cygpO1xyXG5cclxuLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHVua3RlLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICAgbGV0IGogPSAoaSArIDEpICUgcHVua3RlLmxlbmd0aDtcclxuLy8gICAgICAgICBzY2huaXR0cHVua3RlS3JlaXNTdHJlY2tlKG0sIHIsIHB1bmt0ZVtpXSwgcHVua3RlW2pdLCBzY2huaXR0cHVua3RlKTtcclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBpZiAoc2Nobml0dHB1bmt0ZS5sZW5ndGggPT0gMCkge1xyXG4vLyAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAgIHg6IHB1bmt0ZVswXS54IC0gbS54LCB5OiBwdW5rdGVbMF0ueSAtIG0ueVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuXHJcbi8vICAgICBsZXQgc2Nod2VycHVua3QgPSB7IHg6IDAsIHk6IDAgfTtcclxuLy8gICAgIGZvciAobGV0IHAgb2Ygc2Nobml0dHB1bmt0ZSkge1xyXG4vLyAgICAgICAgIHNjaHdlcnB1bmt0LnggKz0gcC54O1xyXG4vLyAgICAgICAgIHNjaHdlcnB1bmt0LnkgKz0gcC55O1xyXG4vLyAgICAgfVxyXG4vLyAgICAgc2Nod2VycHVua3QueCAvPSBwdW5rdGUubGVuZ3RoO1xyXG4vLyAgICAgc2Nod2VycHVua3QueSAvPSBwdW5rdGUubGVuZ3RoO1xyXG5cclxuLy8gICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgeDogc2Nod2VycHVua3QueCAtIG0ueCxcclxuLy8gICAgICAgICB5OiBzY2h3ZXJwdW5rdC55IC0gbS55XHJcbi8vICAgICB9XHJcblxyXG4vLyB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2thbGFycHJvZHVrdCh2MTogUHVua3QsIHYyOiBQdW5rdCkge1xyXG4gICAgcmV0dXJuIHYxLnggKiB2Mi54ICsgdjEueSAqIHYyLnk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24genVmYWxsKHZvbjogbnVtYmVyLCBiaXM6IG51bWJlcil7XHJcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSooYmlzIC0gdm9uKSArIHZvbjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGludFp1ZmFsbCh2b246IG51bWJlciwgYmlzOiBudW1iZXIpe1xyXG4gICAgcmV0dXJuIE1hdGgudHJ1bmMoTWF0aC5yYW5kb20oKSooYmlzIC0gdm9uICsgMSAtIDAuMDAwMDAwMDEpICsgdm9uKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZla3RvclZvblBvbGFya29vcmRpbmF0ZW4od2lua2VsR3JhZDogbnVtYmVyLCBsw6RuZ2U6IG51bWJlcil7XHJcbiAgICBsZXQgd2lua2VsID0gd2lua2VsR3JhZC8xODAqTWF0aC5QSTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogbMOkbmdlICogTWF0aC5jb3Mod2lua2VsKSxcclxuICAgICAgICB5OiBsw6RuZ2UgKiBNYXRoLnNpbih3aW5rZWwpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmYXJiZUF1c1JHQihyb3Q6IG51bWJlciwgZ3LDvG46IG51bWJlciwgYmxhdTogbnVtYmVyKTpudW1iZXJ7XHJcbiAgICByZXR1cm4gYmxhdSArIDI1NiAqIChyb3QgKyAyNTYgKiBncsO8bik7XHJcbn0iXX0=