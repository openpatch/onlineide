import { Klass, Visibility } from "../compiler/types/Class.js";
import { doublePrimitiveType, stringPrimitiveType } from "../compiler/types/PrimitiveTypes.js";
import { Attribute, Method, Parameterlist } from "../compiler/types/Types.js";
import { RuntimeObject } from "../interpreter/RuntimeObject.js";
export class Vector2Class extends Klass {
    constructor(module) {
        super("Vector2", module, "Repräsentiert einen zweidimensionalen Vektor");
        this.setBaseClass(module.typeStore.getType("Object"));
        this.addAttribute(new Attribute("x", doublePrimitiveType, null, false, Visibility.public, false, "x-Komponente des Vektors"));
        this.addAttribute(new Attribute("y", doublePrimitiveType, null, false, Visibility.public, false, "y-Komponente des Vektors"));
        this.setupAttributeIndicesRecursive();
        let xIndex = this.attributeMap.get("x").index;
        let yIndex = this.attributeMap.get("y").index;
        this.addMethod(new Method("Vector2", new Parameterlist([
            { identifier: "x", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
            { identifier: "y", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), null, (parameters) => {
            let o = parameters[0].value;
            let x = parameters[1].value;
            let y = parameters[2].value;
            o.attributes[xIndex] = { type: doublePrimitiveType, value: x };
            o.attributes[yIndex] = { type: doublePrimitiveType, value: y };
        }, false, false, 'Instanziert einen neuen zweidimensionalen Vektor mit den Komponenten x und y.', true));
        this.addMethod(new Method("fromPolarCoordinates", new Parameterlist([
            { identifier: "r", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
            { identifier: "alphaDeg", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), this, (parameters) => {
            let o = new RuntimeObject(this);
            let r = parameters[1].value;
            let alphaDeg = parameters[2].value;
            alphaDeg *= Math.PI / 180.0;
            o.attributes[xIndex] = { type: doublePrimitiveType, value: Math.cos(alphaDeg) * r };
            o.attributes[yIndex] = { type: doublePrimitiveType, value: Math.sin(alphaDeg) * r };
            return o;
        }, false, true, 'Gibt einen neuen zweidimensionalen Vektor zurück, der mit den Polarkoordinaten (r/alphaDeg) gebildet wird. Datei ist r (Abstand zum Ursprung des Koordinatensystems) und alphaDeg (Winkel zur positiven x-Achse in Grad).', false));
        this.addMethod(new Method("toString", new Parameterlist([]), stringPrimitiveType, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            return `(${x}/${y})`;
        }, false, false, 'Gibt den Vektor als Zeichenkette in der Form "(x/y)" zurück.', false));
        this.addMethod(new Method("getAngleDeg", new Parameterlist([]), doublePrimitiveType, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let angle = Math.atan2(y, x) / Math.PI * 180;
            return angle >= 0 ? angle : 360 + angle;
        }, false, false, 'Gibt den zur positiven x-Achse in Grad zurück.', false));
        this.addMethod(new Method("getAngleRad", new Parameterlist([]), doublePrimitiveType, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let angle = Math.atan2(y, x);
            return angle >= 0 ? angle : Math.PI * 2 + angle;
        }, false, false, 'Gibt den zur positiven x-Achse im Bogenmaß zurück.', false));
        this.addMethod(new Method("getLength", new Parameterlist([]), doublePrimitiveType, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            return Math.sqrt(x * x + y * y);
        }, false, false, 'Gibt die Länge des Vectors zurück.', false));
        this.addMethod(new Method("toUnitVector", new Parameterlist([]), this, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let o1 = new RuntimeObject(this);
            let length = Math.sqrt(x * x + y * y);
            if (Math.abs(length) > 0.00000000001) {
                x /= length;
                y /= length;
            }
            else {
                x = 0;
                y = 0;
            }
            o1.attributes[xIndex] = { type: doublePrimitiveType, value: x };
            o1.attributes[yIndex] = { type: doublePrimitiveType, value: y };
            return o1;
        }, false, false, 'Gibt den zum Vektor zugehörigen Einheitsvektor (d.h. den Vektor mit derselben Richtung, aber der Länge 1) zurück.', false));
        this.addMethod(new Method("setLength", new Parameterlist([
            { identifier: "length", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), this, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let length = parameters[1].value;
            let l = Math.sqrt(x * x + y * y);
            if (l > 0) {
                o.attributes[xIndex].value = x / l * length;
                o.attributes[yIndex].value = y / l * length;
            }
        }, false, false, 'Ändert den Vektor so, dass er seine Richtung beibehält, aber auf die angegebene Länge gestreckt/gestaucht wird.', false));
        this.addMethod(new Method("plus", new Parameterlist([
            { identifier: "vector", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), this, (parameters) => {
            let o = parameters[0].value;
            let o1 = parameters[1].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let x1 = o1.attributes[xIndex].value;
            let y1 = o1.attributes[yIndex].value;
            let oRet = new RuntimeObject(this);
            oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x + x1 };
            oRet.attributes[yIndex] = { type: doublePrimitiveType, value: y + y1 };
            return oRet;
        }, false, false, 'Gibt die Summe zurück, die sich aus Addition dieses Vektor mit dem übergebenen Vektor ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));
        this.addMethod(new Method("minus", new Parameterlist([
            { identifier: "vector", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), this, (parameters) => {
            let o = parameters[0].value;
            let o1 = parameters[1].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let x1 = o1.attributes[xIndex].value;
            let y1 = o1.attributes[yIndex].value;
            let oRet = new RuntimeObject(this);
            oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x - x1 };
            oRet.attributes[yIndex] = { type: doublePrimitiveType, value: y - y1 };
            return oRet;
        }, false, false, 'Gibt die Differenz zurück, die sich aus Subtraktion des übergebenen Vektors von diesem Vektor ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));
        this.addMethod(new Method("scalarProduct", new Parameterlist([
            { identifier: "vector1", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
            { identifier: "vector2", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), doublePrimitiveType, (parameters) => {
            let o = parameters[0].value;
            let o1 = parameters[1].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let x1 = o1.attributes[xIndex].value;
            let y1 = o1.attributes[yIndex].value;
            return x * x1 + y * y1;
        }, false, true, 'Gibt das Skalarprodukt der beiden Vektoren zurück.', false));
        this.addMethod(new Method("scaledBy", new Parameterlist([
            { identifier: "scalar", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), this, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let s = parameters[1].value;
            let oRet = new RuntimeObject(this);
            oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x * s };
            oRet.attributes[yIndex] = { type: doublePrimitiveType, value: y * s };
            return oRet;
        }, false, false, 'Gibt das Produkt zurück, das sich aus Multiplikation dieses Vektor mit dem übergebenen Skalar ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));
        this.addMethod(new Method("rotatedBy", new Parameterlist([
            { identifier: "angleDeg", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },
        ]), this, (parameters) => {
            let o = parameters[0].value;
            let x = o.attributes[xIndex].value;
            let y = o.attributes[yIndex].value;
            let angle = -parameters[1].value * Math.PI / 180;
            let sin = Math.sin(angle);
            let cos = Math.cos(angle);
            let oRet = new RuntimeObject(this);
            oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x * cos - y * sin };
            oRet.attributes[yIndex] = { type: doublePrimitiveType, value: x * sin + y * cos };
            return oRet;
        }, false, false, 'Gibt den um den übergebenen Winkel (in Grad) rotierten Vektor zurück. Positiver Winkel => Rotation GEGEN DEN Uhrzeigersinn. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));
        this.addMethod(new Method("distance", new Parameterlist([
            { identifier: "x1", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },
            { identifier: "y1", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },
            { identifier: "x2", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },
            { identifier: "y2", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }
        ]), doublePrimitiveType, (parameters) => {
            let x1 = parameters[1].value;
            let y1 = parameters[2].value;
            let x2 = parameters[3].value;
            let y2 = parameters[4].value;
            let dx = x2 - x1;
            let dy = y2 - y1;
            return Math.sqrt(dx * dx + dy * dy);
        }, false, true, "Berechnet den Abstand der Punkte (x1/y1) und (x2/y2)."));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmVjdG9yMi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jbGllbnQvcnVudGltZWxpYnJhcnkvVmVjdG9yMi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQy9ELE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDO0FBQy9GLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLGFBQWEsRUFBUyxNQUFNLDRCQUE0QixDQUFDO0FBQ3JGLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUVoRSxNQUFNLE9BQU8sWUFBYSxTQUFRLEtBQUs7SUFFbkMsWUFBWSxNQUFjO1FBRXRCLEtBQUssQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLDhDQUE4QyxDQUFDLENBQUM7UUFFekUsSUFBSSxDQUFDLFlBQVksQ0FBUSxNQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBRTdELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxTQUFTLENBQUMsR0FBRyxFQUFFLG1CQUFtQixFQUNwRCxJQUFJLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLDBCQUEwQixDQUFDLENBQUMsQ0FBQztRQUV4RSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksU0FBUyxDQUFDLEdBQUcsRUFBRSxtQkFBbUIsRUFDcEQsSUFBSSxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSwwQkFBMEIsQ0FBQyxDQUFDLENBQUM7UUFFeEUsSUFBSSxDQUFDLDhCQUE4QixFQUFFLENBQUM7UUFFdEMsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsS0FB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QixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQzdDLElBQUksRUFBRSxHQUFtQixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQzdDLElBQUksRUFBRSxHQUFtQixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1lBQzdDLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7WUFDakIsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztZQUNqQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDeEMsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsdURBQXVELENBQUMsQ0FBQyxDQUFDO0lBR2xGLENBQUM7Q0FFSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZHVsZSB9IGZyb20gXCIuLi9jb21waWxlci9wYXJzZXIvTW9kdWxlLmpzXCI7XHJcbmltcG9ydCB7IEtsYXNzLCBWaXNpYmlsaXR5IH0gZnJvbSBcIi4uL2NvbXBpbGVyL3R5cGVzL0NsYXNzLmpzXCI7XHJcbmltcG9ydCB7IGRvdWJsZVByaW1pdGl2ZVR5cGUsIHN0cmluZ1ByaW1pdGl2ZVR5cGUgfSBmcm9tIFwiLi4vY29tcGlsZXIvdHlwZXMvUHJpbWl0aXZlVHlwZXMuanNcIjtcclxuaW1wb3J0IHsgQXR0cmlidXRlLCBNZXRob2QsIFBhcmFtZXRlcmxpc3QsIFZhbHVlIH0gZnJvbSBcIi4uL2NvbXBpbGVyL3R5cGVzL1R5cGVzLmpzXCI7XHJcbmltcG9ydCB7IFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vaW50ZXJwcmV0ZXIvUnVudGltZU9iamVjdC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlY3RvcjJDbGFzcyBleHRlbmRzIEtsYXNzIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihtb2R1bGU6IE1vZHVsZSkge1xyXG5cclxuICAgICAgICBzdXBlcihcIlZlY3RvcjJcIiwgbW9kdWxlLCBcIlJlcHLDpHNlbnRpZXJ0IGVpbmVuIHp3ZWlkaW1lbnNpb25hbGVuIFZla3RvclwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRCYXNlQ2xhc3MoPEtsYXNzPm1vZHVsZS50eXBlU3RvcmUuZ2V0VHlwZShcIk9iamVjdFwiKSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQXR0cmlidXRlKG5ldyBBdHRyaWJ1dGUoXCJ4XCIsIGRvdWJsZVByaW1pdGl2ZVR5cGUsXHJcbiAgICAgICAgICAgIG51bGwsIGZhbHNlLCBWaXNpYmlsaXR5LnB1YmxpYywgZmFsc2UsIFwieC1Lb21wb25lbnRlIGRlcyBWZWt0b3JzXCIpKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRBdHRyaWJ1dGUobmV3IEF0dHJpYnV0ZShcInlcIiwgZG91YmxlUHJpbWl0aXZlVHlwZSxcclxuICAgICAgICAgICAgbnVsbCwgZmFsc2UsIFZpc2liaWxpdHkucHVibGljLCBmYWxzZSwgXCJ5LUtvbXBvbmVudGUgZGVzIFZla3RvcnNcIikpO1xyXG5cclxuICAgICAgICB0aGlzLnNldHVwQXR0cmlidXRlSW5kaWNlc1JlY3Vyc2l2ZSgpO1xyXG5cclxuICAgICAgICBsZXQgeEluZGV4ID0gdGhpcy5hdHRyaWJ1dGVNYXAuZ2V0KFwieFwiKS5pbmRleDtcclxuICAgICAgICBsZXQgeUluZGV4ID0gdGhpcy5hdHRyaWJ1dGVNYXAuZ2V0KFwieVwiKS5pbmRleDtcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgdGhpcy5hZGRNZXRob2QobmV3IE1ldGhvZChcIlZlY3RvcjJcIiwgbmV3IFBhcmFtZXRlcmxpc3QoW1xyXG4gICAgICAgICAgICB7IGlkZW50aWZpZXI6IFwieFwiLCB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCBkZWNsYXJhdGlvbjogbnVsbCwgdXNhZ2VQb3NpdGlvbnM6IG51bGwsIGlzRmluYWw6IHRydWUsIGlzRWxsaXBzaXM6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgIHsgaWRlbnRpZmllcjogXCJ5XCIsIHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIGRlY2xhcmF0aW9uOiBudWxsLCB1c2FnZVBvc2l0aW9uczogbnVsbCwgaXNGaW5hbDogdHJ1ZSwgaXNFbGxpcHNpczogZmFsc2UgfSxcclxuICAgICAgICBdKSwgbnVsbCxcclxuICAgICAgICAgICAgKHBhcmFtZXRlcnMpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbzogUnVudGltZU9iamVjdCA9IHBhcmFtZXRlcnNbMF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgeDogbnVtYmVyID0gcGFyYW1ldGVyc1sxXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCB5OiBudW1iZXIgPSBwYXJhbWV0ZXJzWzJdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIG8uYXR0cmlidXRlc1t4SW5kZXhdID0geyB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCB2YWx1ZTogeCB9O1xyXG4gICAgICAgICAgICAgICAgby5hdHRyaWJ1dGVzW3lJbmRleF0gPSB7IHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIHZhbHVlOiB5IH07XHJcblxyXG4gICAgICAgICAgICB9LCBmYWxzZSwgZmFsc2UsICdJbnN0YW56aWVydCBlaW5lbiBuZXVlbiB6d2VpZGltZW5zaW9uYWxlbiBWZWt0b3IgbWl0IGRlbiBLb21wb25lbnRlbiB4IHVuZCB5LicsIHRydWUpKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRNZXRob2QobmV3IE1ldGhvZChcImZyb21Qb2xhckNvb3JkaW5hdGVzXCIsIG5ldyBQYXJhbWV0ZXJsaXN0KFtcclxuICAgICAgICAgICAgeyBpZGVudGlmaWVyOiBcInJcIiwgdHlwZTogZG91YmxlUHJpbWl0aXZlVHlwZSwgZGVjbGFyYXRpb246IG51bGwsIHVzYWdlUG9zaXRpb25zOiBudWxsLCBpc0ZpbmFsOiB0cnVlLCBpc0VsbGlwc2lzOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICB7IGlkZW50aWZpZXI6IFwiYWxwaGFEZWdcIiwgdHlwZTogZG91YmxlUHJpbWl0aXZlVHlwZSwgZGVjbGFyYXRpb246IG51bGwsIHVzYWdlUG9zaXRpb25zOiBudWxsLCBpc0ZpbmFsOiB0cnVlLCBpc0VsbGlwc2lzOiBmYWxzZSB9LFxyXG4gICAgICAgIF0pLCB0aGlzLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gbmV3IFJ1bnRpbWVPYmplY3QodGhpcyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcjogbnVtYmVyID0gcGFyYW1ldGVyc1sxXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBhbHBoYURlZzogbnVtYmVyID0gcGFyYW1ldGVyc1syXS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBhbHBoYURlZyAqPSBNYXRoLlBJIC8gMTgwLjA7XHJcblxyXG4gICAgICAgICAgICAgICAgby5hdHRyaWJ1dGVzW3hJbmRleF0gPSB7IHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIHZhbHVlOiBNYXRoLmNvcyhhbHBoYURlZykgKiByIH07XHJcbiAgICAgICAgICAgICAgICBvLmF0dHJpYnV0ZXNbeUluZGV4XSA9IHsgdHlwZTogZG91YmxlUHJpbWl0aXZlVHlwZSwgdmFsdWU6IE1hdGguc2luKGFscGhhRGVnKSAqIHIgfTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbztcclxuXHJcbiAgICAgICAgICAgIH0sIGZhbHNlLCB0cnVlLCAnR2lidCBlaW5lbiBuZXVlbiB6d2VpZGltZW5zaW9uYWxlbiBWZWt0b3IgenVyw7xjaywgZGVyIG1pdCBkZW4gUG9sYXJrb29yZGluYXRlbiAoci9hbHBoYURlZykgZ2ViaWxkZXQgd2lyZC4gRGF0ZWkgaXN0IHIgKEFic3RhbmQgenVtIFVyc3BydW5nIGRlcyBLb29yZGluYXRlbnN5c3RlbXMpIHVuZCBhbHBoYURlZyAoV2lua2VsIHp1ciBwb3NpdGl2ZW4geC1BY2hzZSBpbiBHcmFkKS4nLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwidG9TdHJpbmdcIiwgbmV3IFBhcmFtZXRlcmxpc3QoW1xyXG4gICAgICAgIF0pLCBzdHJpbmdQcmltaXRpdmVUeXBlLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gcGFyYW1ldGVyc1swXS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgeDogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3hJbmRleF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgeTogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAoJHt4fS8ke3l9KWA7XHJcblxyXG4gICAgICAgICAgICB9LCBmYWxzZSwgZmFsc2UsICdHaWJ0IGRlbiBWZWt0b3IgYWxzIFplaWNoZW5rZXR0ZSBpbiBkZXIgRm9ybSBcIih4L3kpXCIgenVyw7xjay4nLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwiZ2V0QW5nbGVEZWdcIiwgbmV3IFBhcmFtZXRlcmxpc3QoW1xyXG4gICAgICAgIF0pLCBkb3VibGVQcmltaXRpdmVUeXBlLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gcGFyYW1ldGVyc1swXS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgeDogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3hJbmRleF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgeTogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMih5LCB4KSAvIE1hdGguUEkgKiAxODA7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ2xlID49IDAgPyBhbmdsZSA6IDM2MCArIGFuZ2xlO1xyXG5cclxuICAgICAgICAgICAgfSwgZmFsc2UsIGZhbHNlLCAnR2lidCBkZW4genVyIHBvc2l0aXZlbiB4LUFjaHNlIGluIEdyYWQgenVyw7xjay4nLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwiZ2V0QW5nbGVSYWRcIiwgbmV3IFBhcmFtZXRlcmxpc3QoW1xyXG4gICAgICAgIF0pLCBkb3VibGVQcmltaXRpdmVUeXBlLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gcGFyYW1ldGVyc1swXS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgeDogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3hJbmRleF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgeTogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuMih5LCB4KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5nbGUgPj0gMCA/IGFuZ2xlIDogTWF0aC5QSSAqIDIgKyBhbmdsZTtcclxuXHJcbiAgICAgICAgICAgIH0sIGZhbHNlLCBmYWxzZSwgJ0dpYnQgZGVuIHp1ciBwb3NpdGl2ZW4geC1BY2hzZSBpbSBCb2dlbm1hw58genVyw7xjay4nLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwiZ2V0TGVuZ3RoXCIsIG5ldyBQYXJhbWV0ZXJsaXN0KFtcclxuICAgICAgICBdKSwgZG91YmxlUHJpbWl0aXZlVHlwZSxcclxuICAgICAgICAgICAgKHBhcmFtZXRlcnMpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbzogUnVudGltZU9iamVjdCA9IHBhcmFtZXRlcnNbMF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHg6IG51bWJlciA9IG8uYXR0cmlidXRlc1t4SW5kZXhdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHk6IG51bWJlciA9IG8uYXR0cmlidXRlc1t5SW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XHJcblxyXG4gICAgICAgICAgICB9LCBmYWxzZSwgZmFsc2UsICdHaWJ0IGRpZSBMw6RuZ2UgZGVzIFZlY3RvcnMgenVyw7xjay4nLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwidG9Vbml0VmVjdG9yXCIsIG5ldyBQYXJhbWV0ZXJsaXN0KFtcclxuICAgICAgICBdKSwgdGhpcyxcclxuICAgICAgICAgICAgKHBhcmFtZXRlcnMpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbzogUnVudGltZU9iamVjdCA9IHBhcmFtZXRlcnNbMF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHg6IG51bWJlciA9IG8uYXR0cmlidXRlc1t4SW5kZXhdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHk6IG51bWJlciA9IG8uYXR0cmlidXRlc1t5SW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvMTogUnVudGltZU9iamVjdCA9IG5ldyBSdW50aW1lT2JqZWN0KHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlbmd0aDogbnVtYmVyID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhsZW5ndGgpID4gMC4wMDAwMDAwMDAwMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHggLz0gbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgLz0gbGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB5ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvMS5hdHRyaWJ1dGVzW3hJbmRleF0gPSB7IHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIHZhbHVlOiB4IH07XHJcbiAgICAgICAgICAgICAgICBvMS5hdHRyaWJ1dGVzW3lJbmRleF0gPSB7IHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIHZhbHVlOiB5IH07XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG8xO1xyXG5cclxuICAgICAgICAgICAgfSwgZmFsc2UsIGZhbHNlLCAnR2lidCBkZW4genVtIFZla3RvciB6dWdlaMO2cmlnZW4gRWluaGVpdHN2ZWt0b3IgKGQuaC4gZGVuIFZla3RvciBtaXQgZGVyc2VsYmVuIFJpY2h0dW5nLCBhYmVyIGRlciBMw6RuZ2UgMSkgenVyw7xjay4nLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwic2V0TGVuZ3RoXCIsIG5ldyBQYXJhbWV0ZXJsaXN0KFtcclxuICAgICAgICAgICAgeyBpZGVudGlmaWVyOiBcImxlbmd0aFwiLCB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCBkZWNsYXJhdGlvbjogbnVsbCwgdXNhZ2VQb3NpdGlvbnM6IG51bGwsIGlzRmluYWw6IHRydWUsIGlzRWxsaXBzaXM6IGZhbHNlIH0sXHJcbiAgICAgICAgXSksIHRoaXMsXHJcbiAgICAgICAgICAgIChwYXJhbWV0ZXJzKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG86IFJ1bnRpbWVPYmplY3QgPSBwYXJhbWV0ZXJzWzBdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB4OiBudW1iZXIgPSBvLmF0dHJpYnV0ZXNbeEluZGV4XS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCB5OiBudW1iZXIgPSBvLmF0dHJpYnV0ZXNbeUluZGV4XS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbGVuZ3RoOiBudW1iZXIgPSBwYXJhbWV0ZXJzWzFdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGwgPiAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG8uYXR0cmlidXRlc1t4SW5kZXhdLnZhbHVlID0geCAvIGwgKiBsZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgby5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWUgPSB5IC8gbCAqIGxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LCBmYWxzZSwgZmFsc2UsICfDhG5kZXJ0IGRlbiBWZWt0b3Igc28sIGRhc3MgZXIgc2VpbmUgUmljaHR1bmcgYmVpYmVow6RsdCwgYWJlciBhdWYgZGllIGFuZ2VnZWJlbmUgTMOkbmdlIGdlc3RyZWNrdC9nZXN0YXVjaHQgd2lyZC4nLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwicGx1c1wiLCBuZXcgUGFyYW1ldGVybGlzdChbXHJcbiAgICAgICAgICAgIHsgaWRlbnRpZmllcjogXCJ2ZWN0b3JcIiwgdHlwZTogdGhpcywgZGVjbGFyYXRpb246IG51bGwsIHVzYWdlUG9zaXRpb25zOiBudWxsLCBpc0ZpbmFsOiB0cnVlLCBpc0VsbGlwc2lzOiBmYWxzZSB9LFxyXG4gICAgICAgIF0pLCB0aGlzLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gcGFyYW1ldGVyc1swXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBvMTogUnVudGltZU9iamVjdCA9IHBhcmFtZXRlcnNbMV0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHg6IG51bWJlciA9IG8uYXR0cmlidXRlc1t4SW5kZXhdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHk6IG51bWJlciA9IG8uYXR0cmlidXRlc1t5SW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB4MTogbnVtYmVyID0gbzEuYXR0cmlidXRlc1t4SW5kZXhdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHkxOiBudW1iZXIgPSBvMS5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG9SZXQ6IFJ1bnRpbWVPYmplY3QgPSBuZXcgUnVudGltZU9iamVjdCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBvUmV0LmF0dHJpYnV0ZXNbeEluZGV4XSA9IHsgdHlwZTogZG91YmxlUHJpbWl0aXZlVHlwZSwgdmFsdWU6IHggKyB4MSB9O1xyXG4gICAgICAgICAgICAgICAgb1JldC5hdHRyaWJ1dGVzW3lJbmRleF0gPSB7IHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIHZhbHVlOiB5ICsgeTEgfTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb1JldDtcclxuXHJcbiAgICAgICAgICAgIH0sIGZhbHNlLCBmYWxzZSwgJ0dpYnQgZGllIFN1bW1lIHp1csO8Y2ssIGRpZSBzaWNoIGF1cyBBZGRpdGlvbiBkaWVzZXMgVmVrdG9yIG1pdCBkZW0gw7xiZXJnZWJlbmVuIFZla3RvciBlcmdpYnQuIFdJQ0hUSUc6IERpZXNlIE1ldGhvZGUgw6RuZGVydCBkYXMgT2JqZWt0IG5pY2h0LCBmw7xyIGRhcyBzaWUgYXVmZ2VydWZlbiB3dXJkZSEnLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwibWludXNcIiwgbmV3IFBhcmFtZXRlcmxpc3QoW1xyXG4gICAgICAgICAgICB7IGlkZW50aWZpZXI6IFwidmVjdG9yXCIsIHR5cGU6IHRoaXMsIGRlY2xhcmF0aW9uOiBudWxsLCB1c2FnZVBvc2l0aW9uczogbnVsbCwgaXNGaW5hbDogdHJ1ZSwgaXNFbGxpcHNpczogZmFsc2UgfSxcclxuICAgICAgICBdKSwgdGhpcyxcclxuICAgICAgICAgICAgKHBhcmFtZXRlcnMpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgbzogUnVudGltZU9iamVjdCA9IHBhcmFtZXRlcnNbMF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgbzE6IFJ1bnRpbWVPYmplY3QgPSBwYXJhbWV0ZXJzWzFdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB4OiBudW1iZXIgPSBvLmF0dHJpYnV0ZXNbeEluZGV4XS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCB5OiBudW1iZXIgPSBvLmF0dHJpYnV0ZXNbeUluZGV4XS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgeDE6IG51bWJlciA9IG8xLmF0dHJpYnV0ZXNbeEluZGV4XS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCB5MTogbnVtYmVyID0gbzEuYXR0cmlidXRlc1t5SW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvUmV0OiBSdW50aW1lT2JqZWN0ID0gbmV3IFJ1bnRpbWVPYmplY3QodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgb1JldC5hdHRyaWJ1dGVzW3hJbmRleF0gPSB7IHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIHZhbHVlOiB4IC0geDEgfTtcclxuICAgICAgICAgICAgICAgIG9SZXQuYXR0cmlidXRlc1t5SW5kZXhdID0geyB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCB2YWx1ZTogeSAtIHkxIH07XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9SZXQ7XHJcblxyXG4gICAgICAgICAgICB9LCBmYWxzZSwgZmFsc2UsICdHaWJ0IGRpZSBEaWZmZXJlbnogenVyw7xjaywgZGllIHNpY2ggYXVzIFN1YnRyYWt0aW9uIGRlcyDDvGJlcmdlYmVuZW4gVmVrdG9ycyB2b24gZGllc2VtIFZla3RvciBlcmdpYnQuIFdJQ0hUSUc6IERpZXNlIE1ldGhvZGUgw6RuZGVydCBkYXMgT2JqZWt0IG5pY2h0LCBmw7xyIGRhcyBzaWUgYXVmZ2VydWZlbiB3dXJkZSEnLCBmYWxzZSkpO1xyXG5cclxuICAgICAgICB0aGlzLmFkZE1ldGhvZChuZXcgTWV0aG9kKFwic2NhbGFyUHJvZHVjdFwiLCBuZXcgUGFyYW1ldGVybGlzdChbXHJcbiAgICAgICAgICAgIHsgaWRlbnRpZmllcjogXCJ2ZWN0b3IxXCIsIHR5cGU6IHRoaXMsIGRlY2xhcmF0aW9uOiBudWxsLCB1c2FnZVBvc2l0aW9uczogbnVsbCwgaXNGaW5hbDogdHJ1ZSwgaXNFbGxpcHNpczogZmFsc2UgfSxcclxuICAgICAgICAgICAgeyBpZGVudGlmaWVyOiBcInZlY3RvcjJcIiwgdHlwZTogdGhpcywgZGVjbGFyYXRpb246IG51bGwsIHVzYWdlUG9zaXRpb25zOiBudWxsLCBpc0ZpbmFsOiB0cnVlLCBpc0VsbGlwc2lzOiBmYWxzZSB9LFxyXG4gICAgICAgIF0pLCBkb3VibGVQcmltaXRpdmVUeXBlLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gcGFyYW1ldGVyc1swXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBvMTogUnVudGltZU9iamVjdCA9IHBhcmFtZXRlcnNbMV0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHg6IG51bWJlciA9IG8uYXR0cmlidXRlc1t4SW5kZXhdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHk6IG51bWJlciA9IG8uYXR0cmlidXRlc1t5SW5kZXhdLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB4MTogbnVtYmVyID0gbzEuYXR0cmlidXRlc1t4SW5kZXhdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHkxOiBudW1iZXIgPSBvMS5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHggKiB4MSArIHkgKiB5MTtcclxuXHJcbiAgICAgICAgICAgIH0sIGZhbHNlLCB0cnVlLCAnR2lidCBkYXMgU2thbGFycHJvZHVrdCBkZXIgYmVpZGVuIFZla3RvcmVuIHp1csO8Y2suJywgZmFsc2UpKTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuYWRkTWV0aG9kKG5ldyBNZXRob2QoXCJzY2FsZWRCeVwiLCBuZXcgUGFyYW1ldGVybGlzdChbXHJcbiAgICAgICAgICAgIHsgaWRlbnRpZmllcjogXCJzY2FsYXJcIiwgdHlwZTogZG91YmxlUHJpbWl0aXZlVHlwZSwgZGVjbGFyYXRpb246IG51bGwsIHVzYWdlUG9zaXRpb25zOiBudWxsLCBpc0ZpbmFsOiB0cnVlLCBpc0VsbGlwc2lzOiBmYWxzZSB9LFxyXG4gICAgICAgIF0pLCB0aGlzLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gcGFyYW1ldGVyc1swXS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgeDogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3hJbmRleF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgeTogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHM6IG51bWJlciA9IHBhcmFtZXRlcnNbMV0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG9SZXQ6IFJ1bnRpbWVPYmplY3QgPSBuZXcgUnVudGltZU9iamVjdCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIG9SZXQuYXR0cmlidXRlc1t4SW5kZXhdID0geyB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCB2YWx1ZTogeCAqIHMgfTtcclxuICAgICAgICAgICAgICAgIG9SZXQuYXR0cmlidXRlc1t5SW5kZXhdID0geyB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCB2YWx1ZTogeSAqIHMgfTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb1JldDtcclxuXHJcbiAgICAgICAgICAgIH0sIGZhbHNlLCBmYWxzZSwgJ0dpYnQgZGFzIFByb2R1a3QgenVyw7xjaywgZGFzIHNpY2ggYXVzIE11bHRpcGxpa2F0aW9uIGRpZXNlcyBWZWt0b3IgbWl0IGRlbSDDvGJlcmdlYmVuZW4gU2thbGFyIGVyZ2lidC4gV0lDSFRJRzogRGllc2UgTWV0aG9kZSDDpG5kZXJ0IGRhcyBPYmpla3QgbmljaHQsIGbDvHIgZGFzIHNpZSBhdWZnZXJ1ZmVuIHd1cmRlIScsIGZhbHNlKSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkTWV0aG9kKG5ldyBNZXRob2QoXCJyb3RhdGVkQnlcIiwgbmV3IFBhcmFtZXRlcmxpc3QoW1xyXG4gICAgICAgICAgICB7IGlkZW50aWZpZXI6IFwiYW5nbGVEZWdcIiwgdHlwZTogZG91YmxlUHJpbWl0aXZlVHlwZSwgZGVjbGFyYXRpb246IG51bGwsIHVzYWdlUG9zaXRpb25zOiBudWxsLCBpc0ZpbmFsOiB0cnVlLCBpc0VsbGlwc2lzOiBmYWxzZSB9LFxyXG4gICAgICAgIF0pLCB0aGlzLFxyXG4gICAgICAgICAgICAocGFyYW1ldGVycykgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvOiBSdW50aW1lT2JqZWN0ID0gcGFyYW1ldGVyc1swXS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgeDogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3hJbmRleF0udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgeTogbnVtYmVyID0gby5hdHRyaWJ1dGVzW3lJbmRleF0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGFuZ2xlOiBudW1iZXIgPSAtcGFyYW1ldGVyc1sxXS52YWx1ZSAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2luOiBudW1iZXIgPSBNYXRoLnNpbihhbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29zOiBudW1iZXIgPSBNYXRoLmNvcyhhbmdsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG9SZXQ6IFJ1bnRpbWVPYmplY3QgPSBuZXcgUnVudGltZU9iamVjdCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIG9SZXQuYXR0cmlidXRlc1t4SW5kZXhdID0geyB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCB2YWx1ZTogeCAqIGNvcyAtIHkgKiBzaW4gfTtcclxuICAgICAgICAgICAgICAgIG9SZXQuYXR0cmlidXRlc1t5SW5kZXhdID0geyB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCB2YWx1ZTogeCAqIHNpbiArIHkgKiBjb3MgfTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb1JldDtcclxuXHJcbiAgICAgICAgICAgIH0sIGZhbHNlLCBmYWxzZSwgJ0dpYnQgZGVuIHVtIGRlbiDDvGJlcmdlYmVuZW4gV2lua2VsIChpbiBHcmFkKSByb3RpZXJ0ZW4gVmVrdG9yIHp1csO8Y2suIFBvc2l0aXZlciBXaW5rZWwgPT4gUm90YXRpb24gR0VHRU4gREVOIFVocnplaWdlcnNpbm4uIFdJQ0hUSUc6IERpZXNlIE1ldGhvZGUgw6RuZGVydCBkYXMgT2JqZWt0IG5pY2h0LCBmw7xyIGRhcyBzaWUgYXVmZ2VydWZlbiB3dXJkZSEnLCBmYWxzZSkpO1xyXG5cclxuXHJcbiAgICAgICAgdGhpcy5hZGRNZXRob2QobmV3IE1ldGhvZChcImRpc3RhbmNlXCIsIG5ldyBQYXJhbWV0ZXJsaXN0KFtcclxuICAgICAgICAgICAgeyBpZGVudGlmaWVyOiBcIngxXCIsIHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIGRlY2xhcmF0aW9uOiBudWxsLCB1c2FnZVBvc2l0aW9uczogbnVsbCwgaXNGaW5hbDogdHJ1ZSB9LFxyXG4gICAgICAgICAgICB7IGlkZW50aWZpZXI6IFwieTFcIiwgdHlwZTogZG91YmxlUHJpbWl0aXZlVHlwZSwgZGVjbGFyYXRpb246IG51bGwsIHVzYWdlUG9zaXRpb25zOiBudWxsLCBpc0ZpbmFsOiB0cnVlIH0sXHJcbiAgICAgICAgICAgIHsgaWRlbnRpZmllcjogXCJ4MlwiLCB0eXBlOiBkb3VibGVQcmltaXRpdmVUeXBlLCBkZWNsYXJhdGlvbjogbnVsbCwgdXNhZ2VQb3NpdGlvbnM6IG51bGwsIGlzRmluYWw6IHRydWUgfSxcclxuICAgICAgICAgICAgeyBpZGVudGlmaWVyOiBcInkyXCIsIHR5cGU6IGRvdWJsZVByaW1pdGl2ZVR5cGUsIGRlY2xhcmF0aW9uOiBudWxsLCB1c2FnZVBvc2l0aW9uczogbnVsbCwgaXNGaW5hbDogdHJ1ZSB9XHJcbiAgICAgICAgXSksIGRvdWJsZVByaW1pdGl2ZVR5cGUsXHJcbiAgICAgICAgICAgIChwYXJhbWV0ZXJzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgeDE6IG51bWJlciA9IDxudW1iZXI+cGFyYW1ldGVyc1sxXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCB5MTogbnVtYmVyID0gPG51bWJlcj5wYXJhbWV0ZXJzWzJdLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHgyOiBudW1iZXIgPSA8bnVtYmVyPnBhcmFtZXRlcnNbM10udmFsdWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgeTI6IG51bWJlciA9IDxudW1iZXI+cGFyYW1ldGVyc1s0XS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBkeCA9IHgyIC0geDE7XHJcbiAgICAgICAgICAgICAgICBsZXQgZHkgPSB5MiAtIHkxO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcbiAgICAgICAgICAgIH0sIGZhbHNlLCB0cnVlLCBcIkJlcmVjaG5ldCBkZW4gQWJzdGFuZCBkZXIgUHVua3RlICh4MS95MSkgdW5kICh4Mi95MikuXCIpKTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxufVxyXG5cclxuXHJcbiJdfQ==