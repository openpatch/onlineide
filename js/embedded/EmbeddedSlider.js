export class EmbeddedSlider {
    /**
     * A div contains $container and another div. Between the latter two
     * a slider should get inserted.
     * @param $container
     * @param firstLast true, if $container is left/on top of other div; false if otherwise
     * @param horVert true, if $container and other div are left/right of another; false if they are on top/below each other
     * @param callback
     * @param $otherDiv
     */
    constructor($container, firstLast, horVert, callback, $otherDiv) {
        this.$container = $container;
        this.firstLast = firstLast;
        this.horVert = horVert;
        this.callback = callback;
        this.$otherDiv = $otherDiv;
        this.initSlider();
    }
    initSlider() {
        let that = this;
        if (this.$otherDiv == null) {
            this.$container.parent().children().each((index, element) => {
                if (element != this.$container[0]) {
                    that.$otherDiv = jQuery(element);
                }
            });
        }
        this.$sliderDiv = jQuery('<div class="joe_slider"></div>');
        this.$sliderDiv.css({
            width: this.horVert ? "100%" : "4px",
            height: this.horVert ? "4px" : "100%",
            cursor: this.horVert ? "row-resize" : "col-resize",
        });
        if (this.firstLast) {
            this.$sliderDiv.css({
                top: "0px",
                left: "0px"
            });
        }
        else {
            if (this.horVert) {
                this.$sliderDiv.css({
                    bottom: "0px",
                    left: "0px"
                });
            }
            else {
                this.$sliderDiv.css({
                    top: "0px",
                    right: "0px"
                });
            }
        }
        this.$container.append(this.$sliderDiv);
        let mousePointer = window.PointerEvent ? "pointer" : "mouse";
        this.$sliderDiv.on(mousePointer + "down", (md) => {
            let x = md.clientX;
            let y = md.clientY;
            jQuery(document).on(mousePointer + "move.slider", (mm) => {
                let dx = mm.clientX - x;
                let dy = mm.clientY - y;
                that.slide(dx, dy);
                x = mm.clientX;
                y = mm.clientY;
            });
            jQuery(document).on(mousePointer + "up.slider", () => {
                jQuery(document).off(mousePointer + "move.slider");
                jQuery(document).off(mousePointer + "up.slider");
            });
        });
        setTimeout(() => {
            that.slide(1, 1);
        }, 600);
    }
    setColor(color) {
        this.$sliderDiv.css('background-color', color);
    }
    slide(dx, dy) {
        if (this.horVert) {
            let height = Number.parseInt(this.$container.css('height').replace('px', ''));
            let otherHeight = Number.parseInt(this.$otherDiv.css('height').replace('px', ''));
            let newHeight = this.firstLast ? height -= dy : height += dy;
            let newOtherHeight = this.firstLast ? otherHeight += dy : otherHeight -= dy;
            this.$container.css('height', newHeight + "px");
            this.$otherDiv.css('height', newOtherHeight + "px");
            this.callback(newHeight);
        }
        else {
            let width = Number.parseInt(this.$container.css('width').replace('px', ''));
            let otherWidth = Number.parseInt(this.$otherDiv.css('width').replace('px', ''));
            let newWidth = this.firstLast ? width -= dx : width += dx;
            let newOtherWidth = this.firstLast ? otherWidth += dx : otherWidth -= dx;
            this.$container.css('width', newWidth + "px");
            this.$otherDiv.css('width', newOtherWidth + "px");
            this.callback(newWidth);
        }
        this.$container.css('flex', "0 1 auto");
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW1iZWRkZWRTbGlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY2xpZW50L2VtYmVkZGVkL0VtYmVkZGVkU2xpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE1BQU0sT0FBTyxjQUFjO0lBSXZCOzs7Ozs7OztPQVFHO0lBQ0gsWUFBb0IsVUFBK0IsRUFDdkMsU0FBa0IsRUFBVSxPQUFnQixFQUMzQyxRQUFxQyxFQUFVLFNBQStCO1FBRnZFLGVBQVUsR0FBVixVQUFVLENBQXFCO1FBQ3ZDLGNBQVMsR0FBVCxTQUFTLENBQVM7UUFBVSxZQUFPLEdBQVAsT0FBTyxDQUFTO1FBQzNDLGFBQVEsR0FBUixRQUFRLENBQTZCO1FBQVUsY0FBUyxHQUFULFNBQVMsQ0FBc0I7UUFDbkYsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQzFCLENBQUM7SUFFRCxVQUFVO1FBQ04sSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBRWhCLElBQUcsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLEVBQUM7WUFDdEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUU7Z0JBQ3hELElBQUcsT0FBTyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUM7b0JBQzdCLElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2lCQUNwQztZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ047UUFFRCxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO1FBRTNELElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDO1lBQ2hCLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUs7WUFDcEMsTUFB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LFNBQVMsQ0FBQyxDQUFDLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxJQUFJLEVBQUUsQ0FBQztZQUN6RSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsUUFBUSxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxhQUFhLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDbEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUMzQjtRQUNELElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsQ0FBQztJQUU1QyxDQUFDO0NBR0oiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuZXhwb3J0IGNsYXNzIEVtYmVkZGVkU2xpZGVyIHtcclxuXHJcbiAgICAkc2xpZGVyRGl2OiBKUXVlcnk8SFRNTEVsZW1lbnQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBkaXYgY29udGFpbnMgJGNvbnRhaW5lciBhbmQgYW5vdGhlciBkaXYuIEJldHdlZW4gdGhlIGxhdHRlciB0d28gXHJcbiAgICAgKiBhIHNsaWRlciBzaG91bGQgZ2V0IGluc2VydGVkLlxyXG4gICAgICogQHBhcmFtICRjb250YWluZXIgXHJcbiAgICAgKiBAcGFyYW0gZmlyc3RMYXN0IHRydWUsIGlmICRjb250YWluZXIgaXMgbGVmdC9vbiB0b3Agb2Ygb3RoZXIgZGl2OyBmYWxzZSBpZiBvdGhlcndpc2VcclxuICAgICAqIEBwYXJhbSBob3JWZXJ0IHRydWUsIGlmICRjb250YWluZXIgYW5kIG90aGVyIGRpdiBhcmUgbGVmdC9yaWdodCBvZiBhbm90aGVyOyBmYWxzZSBpZiB0aGV5IGFyZSBvbiB0b3AvYmVsb3cgZWFjaCBvdGhlclxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIFxyXG4gICAgICogQHBhcmFtICRvdGhlckRpdiBcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSAkY29udGFpbmVyOiBKUXVlcnk8SFRNTEVsZW1lbnQ+LCBcclxuICAgICAgICBwcml2YXRlIGZpcnN0TGFzdDogYm9vbGVhbiwgcHJpdmF0ZSBob3JWZXJ0OiBib29sZWFuLFxyXG4gICAgICAgICBwcml2YXRlIGNhbGxiYWNrOiAobmV3TGVuZ3RoOiBudW1iZXIpID0+IHZvaWQsIHByaXZhdGUgJG90aGVyRGl2PzogSlF1ZXJ5PEhUTUxFbGVtZW50Pil7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFNsaWRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRTbGlkZXIoKSB7XHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICBpZih0aGlzLiRvdGhlckRpdiA9PSBudWxsKXtcclxuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLnBhcmVudCgpLmNoaWxkcmVuKCkuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKGVsZW1lbnQgIT0gdGhpcy4kY29udGFpbmVyWzBdKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LiRvdGhlckRpdiA9IGpRdWVyeShlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiRzbGlkZXJEaXYgPSBqUXVlcnkoJzxkaXYgY2xhc3M9XCJqb2Vfc2xpZGVyXCI+PC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIHRoaXMuJHNsaWRlckRpdi5jc3Moe1xyXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5ob3JWZXJ0ID8gXCIxMDAlXCIgOiBcIjRweFwiLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaG9yVmVydCA/IFwiNHB4XCIgOiBcIjEwMCVcIixcclxuICAgICAgICAgICAgY3Vyc29yOiB0aGlzLmhvclZlcnQgPyBcInJvdy1yZXNpemVcIiA6IFwiY29sLXJlc2l6ZVwiLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZih0aGlzLmZpcnN0TGFzdCl7XHJcbiAgICAgICAgICAgIHRoaXMuJHNsaWRlckRpdi5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiBcIjBweFwiLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogXCIwcHhcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZih0aGlzLmhvclZlcnQpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kc2xpZGVyRGl2LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBcIjBweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiMHB4XCJcclxuICAgICAgICAgICAgICAgIH0pOyAgICBcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNsaWRlckRpdi5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogXCIwcHhcIixcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogXCIwcHhcIlxyXG4gICAgICAgICAgICAgICAgfSk7ICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiRjb250YWluZXIuYXBwZW5kKHRoaXMuJHNsaWRlckRpdik7XHJcblxyXG4gICAgICAgIGxldCBtb3VzZVBvaW50ZXIgPSB3aW5kb3cuUG9pbnRlckV2ZW50ID8gXCJwb2ludGVyXCIgOiBcIm1vdXNlXCI7XHJcblxyXG4gICAgICAgIHRoaXMuJHNsaWRlckRpdi5vbihtb3VzZVBvaW50ZXIgKyBcImRvd25cIiwgKG1kOiBKUXVlcnkuTW91c2VEb3duRXZlbnQpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGxldCB4ID0gbWQuY2xpZW50WDtcclxuICAgICAgICAgICAgbGV0IHkgPSBtZC5jbGllbnRZO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vbihtb3VzZVBvaW50ZXIgKyBcIm1vdmUuc2xpZGVyXCIsIChtbTogSlF1ZXJ5Lk1vdXNlTW92ZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZHggPSBtbS5jbGllbnRYIC0geDtcclxuICAgICAgICAgICAgICAgIGxldCBkeSA9IG1tLmNsaWVudFkgLSB5O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoYXQuc2xpZGUoZHgsIGR5KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgeCA9IG1tLmNsaWVudFg7XHJcbiAgICAgICAgICAgICAgICB5ID0gbW0uY2xpZW50WTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vbihtb3VzZVBvaW50ZXIgKyBcInVwLnNsaWRlclwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9mZihtb3VzZVBvaW50ZXIgKyBcIm1vdmUuc2xpZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vZmYobW91c2VQb2ludGVyICsgXCJ1cC5zbGlkZXJcIik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGF0LnNsaWRlKDEsIDEpO1xyXG4gICAgICAgIH0sIDYwMCk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldENvbG9yKGNvbG9yOiBzdHJpbmcpe1xyXG4gICAgICAgIHRoaXMuJHNsaWRlckRpdi5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcik7XHJcbiAgICB9XHJcblxyXG4gICAgc2xpZGUoZHg6IG51bWJlciwgZHk6IG51bWJlcil7XHJcbiAgICAgICAgaWYodGhpcy5ob3JWZXJ0KXtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IE51bWJlci5wYXJzZUludCh0aGlzLiRjb250YWluZXIuY3NzKCdoZWlnaHQnKS5yZXBsYWNlKCdweCcsICcnKSk7XHJcbiAgICAgICAgICAgIGxldCBvdGhlckhlaWdodCA9IE51bWJlci5wYXJzZUludCh0aGlzLiRvdGhlckRpdi5jc3MoJ2hlaWdodCcpLnJlcGxhY2UoJ3B4JywgJycpKTtcclxuICAgICAgICAgICAgbGV0IG5ld0hlaWdodCA9IHRoaXMuZmlyc3RMYXN0ID8gaGVpZ2h0IC09IGR5IDogaGVpZ2h0ICs9IGR5O1xyXG4gICAgICAgICAgICBsZXQgbmV3T3RoZXJIZWlnaHQgPSB0aGlzLmZpcnN0TGFzdCA/IG90aGVySGVpZ2h0ICs9IGR5IDogb3RoZXJIZWlnaHQgLT0gZHk7XHJcbiAgICAgICAgICAgIHRoaXMuJGNvbnRhaW5lci5jc3MoJ2hlaWdodCcsIG5ld0hlaWdodCArIFwicHhcIik7XHJcbiAgICAgICAgICAgIHRoaXMuJG90aGVyRGl2LmNzcygnaGVpZ2h0JywgbmV3T3RoZXJIZWlnaHQgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrKG5ld0hlaWdodCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gTnVtYmVyLnBhcnNlSW50KHRoaXMuJGNvbnRhaW5lci5jc3MoJ3dpZHRoJykucmVwbGFjZSgncHgnLCAnJykpO1xyXG4gICAgICAgICAgICBsZXQgb3RoZXJXaWR0aCA9IE51bWJlci5wYXJzZUludCh0aGlzLiRvdGhlckRpdi5jc3MoJ3dpZHRoJykucmVwbGFjZSgncHgnLCAnJykpO1xyXG4gICAgICAgICAgICBsZXQgbmV3V2lkdGggPSB0aGlzLmZpcnN0TGFzdCA/IHdpZHRoIC09IGR4IDogd2lkdGggKz0gZHg7XHJcbiAgICAgICAgICAgIGxldCBuZXdPdGhlcldpZHRoID0gdGhpcy5maXJzdExhc3QgPyBvdGhlcldpZHRoICs9IGR4IDogb3RoZXJXaWR0aCAtPSBkeDtcclxuICAgICAgICAgICAgdGhpcy4kY29udGFpbmVyLmNzcygnd2lkdGgnLCBuZXdXaWR0aCArIFwicHhcIik7XHJcbiAgICAgICAgICAgIHRoaXMuJG90aGVyRGl2LmNzcygnd2lkdGgnLCBuZXdPdGhlcldpZHRoICsgXCJweFwiKTtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFjayhuZXdXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5jc3MoJ2ZsZXgnLCBcIjAgMSBhdXRvXCIpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59Il19