{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../../../../src/client/compiler/lexer/Token.ts","webpack:///../../../../src/client/compiler/types/Types.ts","webpack:///../../../src/client/interpreter/RuntimeObject.ts","webpack:///../../../../src/client/compiler/parser/LabelManager.ts","webpack:///../../../../src/client/compiler/types/Class.ts","webpack:///../../../../src/client/compiler/types/Array.ts","webpack:///../../../../src/client/compiler/types/ObjectClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/IntegerClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/FloatClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/CharacterClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/BooleanClass.ts","webpack:///../../../../../src/client/compiler/types/boxedTypes/DoubleClass.ts","webpack:///../../../../src/client/compiler/types/PrimitiveTypes.ts","webpack:///../../../../src/client/runtimelibrary/collections/ListIteratorImpl.ts","webpack:///../../../../src/client/runtimelibrary/collections/ArrayList.ts","webpack:///../../../../src/client/compiler/types/TypeHelper.ts","webpack:///../../../../src/client/runtimelibrary/collections/Collection.ts","webpack:///../../../../src/client/runtimelibrary/collections/Iterable.ts","webpack:///../../../../src/client/runtimelibrary/collections/Iterator.ts","webpack:///../../../../src/client/runtimelibrary/collections/List.ts","webpack:///../../../../src/client/runtimelibrary/collections/Stack.ts","webpack:///../../../../src/client/runtimelibrary/collections/Vector.ts","webpack:///../../../../src/client/runtimelibrary/collections/Set.ts","webpack:///../../../../src/client/runtimelibrary/collections/SetIteratorImpl.ts","webpack:///../../../../src/client/runtimelibrary/collections/SetHelper.ts","webpack:///../../../../src/client/runtimelibrary/collections/HashSet.ts","webpack:///../../../../src/client/runtimelibrary/collections/LinkedHashSet.ts","webpack:///../../../../src/client/runtimelibrary/collections/Queue.ts","webpack:///../../../../src/client/runtimelibrary/collections/Deque.ts","webpack:///../../../../src/client/runtimelibrary/collections/LinkedList.ts","webpack:///../../../src/client/runtimelibrary/Console.ts","webpack:///../../../../src/client/compiler/types/Enum.ts","webpack:///../../../src/client/communication/AjaxHelper.ts","webpack:///../../../../src/client/compiler/lexer/ColorLexer.ts","webpack:///../../../../src/client/runtimelibrary/graphics/ColorHelper.ts","webpack:///../../../../src/client/compiler/lexer/Lexer.ts","webpack:///../../../../src/client/compiler/parser/SymbolTable.ts","webpack:///../../../../src/client/compiler/parser/CodeGenerator.ts","webpack:///../../../../src/client/compiler/parser/Parser.ts","webpack:///../../../../src/client/compiler/types/TypeTools.ts","webpack:///../../../../src/client/compiler/parser/TypeResolver.ts","webpack:///../../../src/client/tools/StringTools.ts","webpack:///../../../src/client/tools/HtmlTools.ts","webpack:///../../../src/client/tools/SoundTools.ts","webpack:///../../../../src/client/main/gui/MyJava.ts","webpack:///../../../../src/client/compiler/types/DeclarationHelper.ts","webpack:///../../../../src/client/main/gui/MyHoverProvider.ts","webpack:///../../../../../src/client/main/gui/diagrams/ZoomControl.ts","webpack:///../../../../../src/client/main/gui/diagrams/Diagram.ts","webpack:///../../../../../src/client/main/gui/diagrams/DiagramElement.ts","webpack:///../../../../../../src/client/main/gui/diagrams/classdiagram/ArrowHead.ts","webpack:///../../../../../../src/client/main/gui/diagrams/classdiagram/DiagramArrow.ts","webpack:///../../../src/client/embedded/MainEmbedded.ts","webpack:///../../../src/client/compiler/Compiler.ts","webpack:///../../../../src/client/main/gui/Formatter.ts","webpack:///../../../src/client/tools/GamepadTool.ts","webpack:///../../../src/client/interpreter/Interpreter.ts","webpack:///../../../../src/client/runtimelibrary/graphics/FilledShapeDefaults.ts","webpack:///../../../../src/client/runtimelibrary/graphics/World.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Actor.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Alignment.ts","webpack:///../../../src/client/tools/MatheTools.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Shape.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Bitmap.ts","webpack:///../../../../src/client/runtimelibrary/graphics/FilledShape.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Circle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Sector.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Arc.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Color.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Ellipse.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Group.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Key.ts","webpack:///../../../src/client/tools/ConvexHull.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Polygon.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Rectangle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/RepeatType.ts","webpack:///../../../../src/client/runtimelibrary/graphics/RoundedRectangle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/ScaleMode.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Sound.ts","webpack:///../../../../src/client/runtimelibrary/graphics/PolygonStore.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Sprite.ts","webpack:///../../../../src/client/runtimelibrary/graphics/SpriteLibraryEnum.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Text.ts","webpack:///../../../src/client/runtimelibrary/Input.ts","webpack:///../../../src/client/runtimelibrary/Gamepad.ts","webpack:///../../../src/client/runtimelibrary/Math.ts","webpack:///../../../src/client/runtimelibrary/MathToolsClass.ts","webpack:///../../../src/client/runtimelibrary/System.ts","webpack:///../../../src/client/runtimelibrary/SystemTools.ts","webpack:///../../../src/client/runtimelibrary/Timer.ts","webpack:///../../../../src/client/runtimelibrary/collections/Map.ts","webpack:///../../../../src/client/runtimelibrary/collections/MapHelper.ts","webpack:///../../../../src/client/runtimelibrary/collections/HashMap.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Triangle.ts","webpack:///../../../../src/client/runtimelibrary/graphics/LocalDateTime.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Line.ts","webpack:///../../../src/client/runtimelibrary/Vector2.ts","webpack:///../../../../src/client/runtimelibrary/graphics/MouseListener.ts","webpack:///../../../../src/client/runtimelibrary/network/WebSocketClient.ts","webpack:///../../../../src/client/runtimelibrary/network/WebSocket.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Processing.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Turtle.ts","webpack:///../../../src/client/runtimelibrary/Random.ts","webpack:///../../../../src/client/runtimelibrary/graphics/Direction.ts","webpack:///../../../../src/client/compiler/parser/Patcher.ts","webpack:///../../../../../src/client/runtimelibrary/graphics/3d/Boxes3d.ts","webpack:///../../../../../src/client/runtimelibrary/graphics/3d/RobotCubeFactory.ts","webpack:///../../../../../src/client/runtimelibrary/graphics/3d/Robot.ts","webpack:///../../../../src/client/compiler/parser/Module.ts","webpack:///../../../src/client/help/ApiDoc.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","TokenType","TokenTypeReadable","identifier","integerConstant","floatingPointConstant","booleanConstant","stringConstant","charConstant","true","false","keywordClass","keywordThis","keywordSuper","keywordNew","keywordInterface","keywordEnum","keywordVoid","keywordAbstract","keywordPublic","keywordProtected","keywordPrivate","keywordTransient","keywordStatic","keywordExtends","keywordImplements","keywordWhile","keywordDo","keywordFor","keywordSwitch","keywordCase","keywordDefault","keywordIf","keywordThen","keywordElse","keywordReturn","keywordBreak","keywordContinue","keywordNull","keywordFinal","keywordInstanceof","keywordPrint","keywordPrintln","leftBracket","rightBracket","leftSquareBracket","rightSquareBracket","leftCurlyBracket","rightCurlyBracket","leftRightSquareBracket","dot","minus","modulo","plus","multiplication","division","singleQuote","doubleQuote","doubleMinus","doublePlus","lower","greater","lowerOrEqual","greaterOrEqual","equal","notEqual","assignment","plusAssignment","minusAssignment","multiplicationAssignment","divisionAssignment","moduloAssignment","ampersand","and","or","not","ANDAssigment","XORAssigment","ORAssigment","shiftLeftAssigment","shiftRightAssigment","shiftRightUnsignedAssigment","OR","XOR","tilde","shiftLeft","shiftRight","shiftRightUnsigned","ternaryOperator","semicolon","colon","ellipsis","comma","backslash","at","space","tab","newline","identifierChar","comment","endofSourcecode","specialCharList","'","linefeed","keywordList","EscapeSequenceList","\"","Type","onlyFirstPass","usagePositions","Map","documentation","this","PrimitiveType","initialValue","description","type","operation","secondOperandType","opTypeMap","operationTable","canCastToMap","Attribute","updateValue","isStatic","visibility","isFinal","Method","parameterlist","returnType","invokeOrAST","isAbstract","isConstructor","isVirtual","reserveStackForLocalVariables","genericTypeMap","invoke","program","method","signature","id","parameters","hasGenericTypes","canCastTo","length","myParameter","mParameter","isEllipsis","index","label","getTypeIdentifier","arrayOfType","leftBracketAlreadyThere","snippet","isVoidReturnDelta","firstOperand","secondOperand","Parameterlist","computeId","map","tv","join","klass","intrinsicData","class","initializeAttributeValues","attributeIndex","av","attributes","Array","numberOfAttributesIncludingBaseClass","fill","att","v","baseClass","Visibility","booleanPrimitiveTypeCopy","maxLabelIndex","labeledNodes","labelMap","jumpNodesToResolve","switchStatements","insertPosition","insertedLength","ln","position","switchStatement","push","codeGenerator","labelIndex","statementList","statements","node","stepFinished","pushStatements","registerJumpNode","offset","labeledNode","set","indexOf","newNode","ntr","noOp","jn","dest","destination","sw","destinationLabels","dl","destinationMap","constant","defaultDestination","typeVariables","isTypeVariable","typeVariablesReady","implements","firstPassImplements","postConstructorCallbacks","methods","methodMap","attributeMap","public","staticClass","attributeInitializationProgram","labelManager","setupAttributeIndicesRecursive","numberOfAttributesInBaseClasses","k","isGenericVariantFrom","getThisOrExtendedInterface","getNonGenericIdentifier","i2","usedSystemClasses","isSystemModule","getCompositeData","cd","interf","cdMap","a","Klass","cda","multiples","clearUsagePositions","callbacks","concat","visibilityUpTo","identifierAndBracketAfterCursor","rangeToReplace","currentMethod","itemList","getAttributes","attribute","kind","monaco","languages","CompletionItemKind","Field","insertText","range","undefined","getMethods","pushSuperCompletionItem","getCompletionLabel","filterText","command","title","arguments","getCompletionSnippet","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","getCompletionItems","replace","programStack","programPosition","textPosition","line","column","callbackAfterReturn","isCalledFromOutside","addMethod","addAttribute","nullType","firstOpClass","typeLeft","typeRight","upToVisibility","filter","baseClassUptoVisibility","protected","found","upToVisibilityInBaseClass","hasConstructor","hasConstructorWithParameters","hasParameterlessConstructor","getParameterlessConstructor","parameterTypes","classIdentifier","constructors","getConstructor","findSuitableMethods","searchConstructor","methodList","staticMethods","getMethodsThatFitWithCasting","error","getMethod","foundButInvisible","attributeNotFound","baseClassAttribute","getAttribute","stringPrimitiveType","Math","min","shouldImplement","dontInheritFrom","message","missingMethods","missingAbstractMethods","implementedMethods","missingInterfaceMethods","hierarchy","abstractMethods","isImplemented","getSignatureWithReturnParameter","maxLength","private","getValue","debugOutput","newKlass","slice","classObject","detail","color","Color","visibilityUpToBaseClass","notFound","baseClassAttributeWithError","extends","if2","newInterface","Interface","methodsWithSubInterfaces","visitedInterfaces","visitedMethods","todo","pop","type2","suitableMethods","howManyCastingsMax","oneWithCorrectIdentifierFound","howManyCastings","hasEllipsis","getParameterCount","suits","mParameterType","getParameterType","givenType","mParameterTypeEllispsis","getParameter","j","typeString","getVisibilityUpTo","objectType","currentClassContext","hasAncestorOrIs","lengthAttribute","intPrimitiveType","ArrayType","equals","referenceElement","array","destType","castTo","s1","unboxableAs","Number","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","floatPrimitiveType","doublePrimitiveType","declaration","parseInt","v0","v1","booleanPrimitiveType","sign","toString","MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","parseFloat","trunc","isNaN","Infinity","charPrimitiveType","charCodeAt","charAt","match","toLocaleUpperCase","toLocaleLowerCase","toLowerCase","negation","automatic","needsStatement","String","fromCharCode","stringClass","forEach","localeCompare","caseFirst","sensitivity","endsWith","startsWith","substring","trim","lastIndexOf","pattern","regExp","RegExp","strings","split","values","voidPrimitiveType","varType","IntegerType","FloatType","DoubleType","CharacterType","BooleanType","TokenTypeToDataTypeMap","typeStore","getType","setBaseClass","typeE","clone","tvE","scopeFrom","scopeTo","iteratorInterface","hasNext","next","remove","listHelper","interpreter","rt","IteratorHelper","nextPos","objectArray","throwException","valueArray","splice","collectionInterface","typeA","tvA","listInterface","iteratorType","ah","main","getInterpreter","getIterator","add","addAll","clear","contains","removeObject","isEmpty","size","to_String","runtimeObject","allElementsPrimitive","pushConstant","dataType","toStringParameters","callMethod","isSuperCall","stackframeBegin","binaryOp","operator","leftType","return","copyReturnValueToStackframePos0","leaveThisObjectOnStack","methodWasInjected","runTimer","ListHelper","getIteratorMethod","iteratorWithError","execute","objWithError","iterator","nextMethod","hasNextMethod","iteratorAsValue","obj","isInteger","executeImmediatelyInNewStackframe","iterableInterface","vectorType","peek","MapHelper","SetIteratorHelper","console","log","ret","addToSet","delete","setInterface","mh","adAll","QueueInterface","dequeInterface","removeFirst_or_error","poll_or_null","peek_or_null","removeFirstOccurrence","addFirst","addLast","removeLast_or_error","peek_first_or_null","peek_last_or_null","getBottomDiv","$consoleTab","find","append","EnumRuntimeObject","en","enumValue","enumValueNodes","enumInfoList","identifierToInfoMap","indexToInfoMap","valueList","evn","ev","ordinal","ei","that","vi","valueIdentifier","enumInfo","enumObject","PerformanceCollector","url","startTime","pe","performanceData","count","sumTime","dt","round","performance","now","performanceDataCount","lastTimeSent","request","data","ajax","successCallback","errorCallback","showNetworkBusy","time","$","async","JSON","stringify","contentType","success","response","registerPerformanceEntry","jqXHR","statusText","status","busy","jQuery","show","hide","ColorLexer","hexColorRegExp","rgbColorRegExp","rgbaColorRegExp","m1","red","green","blue","alpha","m2","m3","LexerState","ColorHelper","predefinedColors","substr","colorLexer","spaceTokens","correspondingBracket","input","tokenList","errorList","bracketError","bracketStack","pos","nonSpaceLastTokenType","colorInformation","colorIndices","tokens","errors","currentChar","nextChar","mainState","bracketOpen","bracketClosed","setBracketError","processColorIndices","colorIndex","colorToken","previousToken","getLastNonSpaceToken","tt","nextTokens","getNextNonSpaceTokens","compareTokenTypes","startLineNumber","startColumn","endLineNumber","endColumn","colorIdentifier","colorValue","tokenTypeList","tokenIndex","foundToken","openBracket","char","specialCharToken","pushToken","checkClosingBracket","lexMultilineComment","lexEndofLineComment","isDigit","lexNumber","lexShiftLeft","lexShiftRight","lexCharacterConstant","lexTripleQuoteStringConstant","lexStringConstant","lexSpace","lexAnnotation","lexIdentifierOrKeyword","lexShiftRightUnsigned","text","errorLevel","level","base","charCode","posStart","posEnd","escapeChar","pushError","parseStringLiteralEscapeCharacter","getColorInfo","StringLines","restOfLine","currentStringLine","lastLine","indent","hex","fromCodePoint","lastCharWasNewline","firstChar","radix","exponent","posExponentStart","exponentString","pow","isSpace","parentSymbolTable","positionFrom","positionTo","SymbolTable","maxId","beginsNewStackframe","childSymbolTables","variableMap","classContext","parent","imitation","st","maxStackPos","variable","stackPos","stackframeSize","completionItems","Snippet","Variable","getLocalVariableCompletionItems","containsPosition","shortestSymbolTableContainingPosition","shortestPosition","st1","findTableAtPosition","initStackFrameNodes","moduleStore","symbolTable","heap","symbolTableStack","currentSymbolTable","oldStackframeSize","nextFreeRelativeStackPos","currentProgram","breakNodeStack","continueNodeStack","generateMain","lastToken","mainSymbolTable","generateClasses","lookForStaticVoidMain","mainProgram","mainMethod","classDefinitionsAST","classNode","ct","resolvedType","pt","initCurrentProgram","callMainMethod","closeStackframe","generateClass","generateEnum","checkDoubleMethodDeclaration","enumNode","pushNewSymbolTable","enumClass","initialization","initializeAttribute","lastStatement","resolveNodes","methodNode","compileMethod","popSymbolTable","enumValueNode","constructorParameters","pushEnumValue","processEnumConstructorCall","commaPositions","rightBracketPosition","programEnd","constructorCallProgram","parameterNodes","typeNode","processNode","pushMethodCallPosition","isAssignable","srcType","getCastInformation","castValue","newType","stackPosRelative","stackframeDelta","ellipsisParameterCount","makeEllipsisArray","parameterCount","arrayType","inheritanceError","checkInheritance","getInheritanceQuickFix","annotation","getMethodBySignature","cie","signatureMap","cieType","editsProvider","uri","resource","edit","nodes","superconstructorCallsFound","isFirstStatement","superConstructorCall","scopeNode","getSuperconstructorCalls","checkIfMethodIsVirtual","getParameterList","superconstructorCalls","superconstructorCallEnsured","quickFix","methodCall","severity","MarkerSeverity","Error","baseClassConstructor","pushLocalVariableToStack","stackposOfVariable","actorClass","returnIfDestroyed","generateStatements","withReturnStatement","getReturnType","getModules","mo","typeList","pushStaticAttribute","attributeIdentifier","pushAttribute","useThisObject","initializationType","ensureAutomaticCasting","attributeType","leaveValueOnStack","isAdhocCompilation","mainProgramAst","hasMainProgram","decreaseStackpointer","removeLastStatement","lastPosition","mainProgramEnd","pauseAfterProgramEnd","typeFrom","typeTo","nodeFrom","checkIfAssignmentInstedOfEqual","toStringStatement","getToStringStatement","castInfo","toStringMethod","conditionType","endPosition","processStatementsInsideBlock","lastNode","assign","popCount","isArray","statement","deleteStepFinishedFlagOnStepBefore","stepBefore","jumpAlways","lst","removeNode","beginNewStackframe","initStackFrameNode","initStackframe","reserveForLocalVariables","declarationError","usedBeforeInitialization","initStackframeNode","jumpIfTrue","jumpIfFalse","jumpIfFalseAndLeaveOnStack","jumpIfTrueAndLeaveOnStack","breakNode","continueNode","breakTargetLabel","lm","breakNodes","bn","continueTargetLabel","continueNodes","isLeftSideOfAssignment","processBinaryOp","unaryOp","processUnaryOp","stackType","resolveIdentifier","initialized","selectArrayElement","incrementDecrementBefore","incrementDecrementAfter","incrementDecrementBeforeOrAfter","constructorCall","superconstructorCall","pushThisOrSuper","newObject","processWhile","processDo","processFor","forLoopOverCollection","processForLoopOverCollection","processIf","processSwitch","processReturn","localVariableDeclaration","arrayInitialization","processArrayLiteral","newArray","processNewArray","processPrint","processManualCast","pushBreakNode","pushContinueNode","termInsideBrackets","pushTypePosition","typeFrom1","whatToCast","castToType","checkCast","print","println","withColor","empty","dimension","elementCount","ec","pushEmptyArray","bes","beginArray","ain","sType","targetType","addToArray","numberOfElementsToAdd","dontWarnWhenNoInitialization","variableType","declareVariableOnHeap","pushUsagePosition","heapVariableDeclaration","pushOnTopOfStackForInitialization","initType","initializer","term","condition","isString","isEnum","switchType","endLabel","insertJumpNode","registerSwitchStatement","openBreakScope","caseNodes","caseNode","caseTerm","markJumpDestination","info","ls","getOrdinal","closeBreakScope","endOfIf","withReturnStatementElse","beginElse","withReturnStatementIf","statementsIfTrue","statementsIfFalse","statementsBefore","labelBeforeCondition","labelAfterForLoop","openContinueScope","continueLabelIndex","closeContinueScope","statementsAfter","stackPosForCollection","collection","collectionElementType","collectionType","popAndStoreIntoVariable","getImplementedInterface","noCastingNeeded","variableIdentifier","variablePosition","variableStackPos","stackPosOfCounterVariableOrIterator","extendedForLoopInit","stackPosOfCollection","stackPosOfElement","typeOfElement","stackPosOfCounter","lastStatementBeforeCasting","jumpNode","extendedForLoopCheckCounterAndGetElement","oldStatementCount","conditionBeginLabel","afterWhileStatementLabel","pc","insertNoOp","statementsBeginLabel","classType","newStatement","subsequentConstructorCall","positionsAfterParameterStatements","allStatements","constructorOperands","staticClassContext","castingStatements","correctPositionsAfterInsert","getPostConstructorCallbacks","processPostConstructorCallbacks","ot","attributeWithError","staticAttributeWithError","pushArrayLength","element","addIdentifierPosition","isSuper","methodContext","isSuperConstructorCall","superclassType","operands","errorInOperands","operand","incrementDecrementBy","indexType","positionList","findLocalVariable","pushFromHeapToStack","findAttribute","cc","scc","klassModule","pushStaticClassObject","staticAttribute","objectNode","thisClass","posBeforeParameterEvaluation","insertStatements","visible","isSystemMethod","callInputMethod","setPauseDuration","pause","constantType","isAssignment","CodeGenerator","assignmentOperators","processTernaryOperator","programPosAfterLeftOpoerand","lazyEvaluationDest","rightType","resultType","getResultType","unboxableLeft","unboxableRight","leftTypes","rightTypes","lt","opIndex","variantFalseLabel","firstType","secondType","isInConsoleMode","lookahead","endToken","tokensNotAfterCasting","typeNodes","initializeLookahead","astNodes","parseMain","mainProgramAST","classDefinitionAST","token","token1","lastComment","commentBefore","cct","skip","invokeSemicolonAngel","isOperatorOrDot","getSemicolonAngel","register","nextToken","Parser","operatorPrecedence","op","getCurrentPosition","classDefinitions","isEnd","oldPos","comesToken","BeforeClassDefinitionTokens","parseClassDefinition","parseStatement","expectSemicolon","retStatements","parseVariableDeclarationOrTerm","expect","parseWhile","parseFor","parseDo","parseIf","parseReturn","parsePrint","parseSwitch","position1","dontSkip","retStmt","checkIfStatementHasNoEffekt","parseTerm","semicolonPositions","parseForLoopOverCollection","parseType","variableIdentifierPosition","mcp","parseMethodCallParameters","paramenters","switchTerm","switchNode","defaultAlreadyThere","casePosition","isDefault","parseUnary","switchCaseNode","getEndOfCurrentToken","elseStatements","comesGenericType","vd","parseVariableDeclaration","parseTermBinary","precedence","left","parsePlusPlusMinusMinus","operators","first","opData","position2","wrong","right","correctOp","constantFolding","isConstant","pcLeft","pcRight","result","compute","considerIntDivisionWarning","toTokenType","leftConstant","rightConstant","isIntegerType","floor","parseDotOrArrayChains","bracketOrCasting","tt1","pcTerm","typeTerm","parseNew","isStringConstant","identifier1","identifierPosition","genericParameterTypes","typenode","arrayDimension","parseArrayLiteral","newDimension","al","parameter","positionEnd","modifiers","collectModifiers","ClassTokens","typeParameters","parseTypeParameterDefinition","extendsImplements","parseExtendsImplements","parseEnum","methodsAndAttributes","parseClassBody","identifierMap","tp","typeParameter","parseTypeParameterBounds","im","parseEnumValues","className","parseMethodDeclarationParameters","methodDeclaration","isTransient","attributeDeclaration","parameterDeclaration","parameterType","isInterface","sextends","simplements","done","asError","TokenTypeToVisibilityMap","forwardToInsideClass","VisibilityTokens","primitiveTypes","objectToIndexMap","nextIndex","json","toJsonObj","rto","objectToJsonObj","serializedObject","serializedAttributes","jsonString","indexToObjectMap","valuesToResolve","parse","fromJsonObj","vtr","objectFromJsonObj","klass1","instantiateObjectImmediately","moduleToTypeParameterListMap","genericTypes","genericTypesInClassDefinitions","typeParameterList","classes","interfaces","enums","unresolvedTypes","resolveTypesInModules","setupClassesAndInterfaces","unresolvedGenericTypesInClasses","resolveTypeVariables","resolveUnresolvedTypes","resolveGenericTypes","resolveExtendsImplements","unresolvedGenericTypes","setupMethodsAndAttributes","checkDoubleIdentifierDefinition","checkGenericTypesAgainsTypeGuards","setupAttributeIndices","cl","tn","ci","actualType","typeGuard","genericParameterType","ifList","tgInterface","implementsInterface","adjustMethodsAndAttributesToTypeParameters","TypeResolver","WATCHDOG","classOrInterface","watchdog","methodListAltered","newMethodList","newMethod","getAdjustedMethod","altered","newAttributes","newAttributeMap","attributesAltered","newAttribute","getAdjustedAttribute","ext","nt","getAdjustedType","nrt","parameterAltered","newParameters","pNew","adjustMethodsAndAttributesRecursive","newTypeVariables","newClassInterface","todoList","resolveGenericType","genericParameterTypesResolved","typeVariablesOldToNewMap","oldTypeVariable","type1","newTypeVariable","newCi","propagateTypeParameterToBaseClassesAndImplementedInterfaces","newClass","tv1","baseKlass","impl","identifierModuleMap","otherModule","file","otherType","baseModule","getBaseModule","tpn","lastPass","dependsOnModules","ut","utNew","resolveType","fromJson","toJson","classesOrEnums","cn","mn","setupMethod","addFromJsonMethod","addToJsonMethod","ic","typesOK","par","definition","pl","typeModule","getArrayType","registerGenericType","tg","typKlasse","toUpperCase","iNode","iType","eType","cdn","addType","registerTypeVariables","e","ready","extType","resolveTypeVariable","typeParameterKlass","tp1","isInClassDefinition","stringWrap","formatAsJavadocComment","indentString","convertPxToNumber","pxString","SoundTools","praefix","window","javaOnlineDir","isInitialized","sounds","sound","player","Howl","src","preload","soundMap","play","defineMyJava","extensions","conf","indentationRules","decreaseIndentPattern","increaseIndentPattern","onEnterRules","beforeText","afterText","action","indentAction","IndentAction","IndentOutdent","appendText","None","removeText","wordPattern","comments","lineComment","blockComment","brackets","autoClosingPairs","open","close","surroundingPairs","folding","markers","start","end","setLanguageConfiguration","setMonarchTokensProvider","defaultToken","tokenPostfix","keywords","types","symbols","escapes","digits","octaldigits","binarydigits","hexdigits","tokenizer","root","cases","include","whitespace","javadoc","string","getDeclarationAsString","short","getTypeVariableDeclaration","getGenericParameterDefinition","decl","implList","editor","model","selection","getSelection","lineNumber","getCurrentWorkspace","getModuleByMonacoModel","getElementAtPosition","declarationAsString","contents","typeIdentifier","word","getWordUnderCursor","desc","MyHoverProvider","keywordDescriptions","state","InterpreterState","paused","evaluator","widenDeclaration","evaluate","getValueLengthInRange","isInsideIdentifierOrArrayDescriptor","begin","isInsideOperator","isInsideIdentifierChain","$parentElement","callback","gripHeight","overallHeight","zoomMin","zoomMax","$zoomcontrolOuter","mousedownY","oldPosition","$zoomcontrolBar","$grip","$zoomcontrolDisplay","css","yMax","mousePointer","PointerEvent","on","y","pageY","top","setZoom","trigger","clientY","document","deltaY","off","stopPropagation","ZoomControl","preventFading","fadeIn","fadeOut","factor","newPosition","zoomfactor","zfs","html","Alignment","leftCm","topCm","lines","backgroundColor","width","widthCm","height","heightCm","$element","detach","xCm","yCm","withRaster","adjustToRaster","x","move","createElementNS","attr","appendChild","createElement","font","textElement","bbox","getBBox","DiagramElement","cmPerPx","alignment","bold","italics","$group","addClass","$rect","textPosYCm","maxWidthCm","createTextElement","center","onClick","metrics","getTextMetrics","textHeightCm","textWidthCm","max","tooltip","thicknessCm","textCenter","textRight","stroke","$g","event","x1","y1","x2","y2","position1Cm","position2Cm","dx","dy","sqrt","path","ex","ey","arrow","arrows","steps","step","angle","PI","ex1","cos","sin","ey1","f","rauteAlpha","routingArrow","DiagramArrow","points","minimalPoints","getPathCoordinates","arrowData","arrowType","endsOnArrowWithIdentifier","head","makeHead","point","CompilerStatus","autoFormatTriggerCharacters","displayName","registerDocumentFormattingEditProvider","registerOnTypeFormattingEditProvider","ch","options","edits","format","Promise","resolve","e1","delta","EndOfLinePreference","LF","tokenlist","lex","lastNonSpaceToken","indentLevel","curlyBracesOpenAtLines","indentLevelAtSwitchStatements","switchHappend","lastTokenWasNewLine","roundBracketsOpen","deleteSpaces","replaceBetween","insertSpaces","openedAtLine","repeat","nextToken1","nextToken2","lastToken1","lastToken2","isBinaryOperator","nextNonSpaceToken","getNextNonSpaceToken","lastTokenIsOperator","nextTokenIsOperator","beginNextLine","token2","currentIndentation","il","correctIndentation","lowerGeneric","lowerBelongsToGenericExpression","greaterGeneric","greaterBelongsToGenericExpression","tokenBefore","spaces","deleteOverlappingRanges","currentIndex","numberOfSpaces","FilledShapeDefaults","defaultFillColor","defaultFillAlpha","defaultBorderColor","defaultBorderAlpha","defaultBorderWidth","defaultVisibility","parseColorToOpenGL","groupType","shapeType","mouseListenerType","breite","höhe","gh","getWorldHelper","setBackgroundColor","wh","matrix","PIXI","Matrix","copyFrom","stage","projectionTransform","identity","translate","prepend","computeCurrentWorldBounds","shapesNotAffectedByWorldTransforms","shape","frameWidth","xMin","xMax","yMin","shapeHelper","moveX","moveY","shapeX","getCenterX","shapeY","getCenterY","outsideRight","currentLeft","currentWidth","outsideLeft","outsideBottom","currentTop","currentHeight","outsideTop","angleRad","rotate","scale","initialWidth","initialHeight","group","defaultGroup","listener","addMouseListener","cursor","setCursor","worldObject","worldHelper","ratio","$containerOuter","getRightDiv","adjustWidthToWorld","WorldContainer","sourceFrame","destinationFrame","Container","renderer","projection","projectionMatrix","transform","renderTexture","current","batch","flush","world","actActors","keyPressedActors","keyUpActors","keyDownActors","actorHelpersToDestroy","mouseListenerShapes","mouseListeners","actorsFinished","summedDelta","scaledTextures","shapes","actorsNotFinished","ticks","deltaSum","spriteAnimations","settings","SCALE_MODE","SCALE_MODES","NEAREST","TARGET_FPMS","globalScale","processingHelper","$graphicsDiv","printManager","getGraphicsDiv","$coordinateDiv","$rightDiv","$jo_tabs","parents","maxWidth","maxHeight","$containerInner","oncontextmenu","preventDefault","pixiApp","app","resize","Application","antialias","tickerFunction","tick","Ticker","shared","elapsedMS","ticker","maxFPS","timerExtern","Rectangle","addChild","view","keyboardTool","keyPressedCallbacks","kpa","runActorWhenKeyEvent","keyUpCallbacks","keyDownCallbacks","listenerType","eventType","offsetX","offsetY","Point","applyInverse","onMouseEvent","button","invokeMouseListener","gngEreignisbehandlung","gngEreignisbehandlungHelper","handleMouseClickedEvent","p1","p2","abs","setHitPolygonDirty","running","pauseUntil","actorData","actorHelper","timerPaused","isDestroyed","runActor","not_initialized","clearActorLists","timerFunction","timerStopped","actorList","displayObject","destroy","stackElements","hasRobot","robotWorldHelper","scaleMin","brt","BaseRenderTexture","scaleMode","LINEAR","RenderTexture","setTimeout","render","children","removeChildren","sprite","Sprite","localTransform","onChange","initDefaultValues","containsPoint","trackMouseMove","invokeShapeMouseListener","mouseLastSeenInsideObject","reactToMouseEventsWhenInvisible","findIndex","mls","sd","methodSignatures","actorListIdentifier","ms","isKeyDown","gamepadIndex","buttonIndex","gamepadTool","isGamepadButtonPressed","isGamepadConnected","axisIndex","getGamepadAxisValue","w","getModule","setTimerPaused","isPressed","streckeSchneidetStrecke","p0","p3","schnittpunkt","a1","a2","b1","b2","c1","c2","det","schneidet","abstand","polygonEnthältPunkt","punkte","punkt","inside","vertexCount","schnittpunkteKreisStrecke","schnittpunkte","b","determiante","t1","t2","abstandPunktZuStrecke","q","lambda","fx","fy","s2","abstandPunktZuGerade","polygonBerührtPolygonExakt","punkte1","punkte2","istGeschlossen1","istGeschlossen2","normaleDerBerührtenGerade1","endIndex1","endIndex2","minAbstand","minIndex","p1a","p1b","p2a","p2b","directionType","vector2Class","helper","sh","testdestroyed","angleInDeg","centerX","centerY","mirrorXY","isOutsideView","sh1","collidesWith","collidesWithAnyShape","keepColliding","moveBackFrom","directionRelativeTo","defineCenter","defineCenterRelative","angleDeg","setDefaultVisibility","setVisible","setStatic","tint","react","direction","directionRad","distance","forward","getCopy","bringToFront","sendToBack","getHitPolygon","hitPolygonInitial","hitPolygonTransformed","hitPolygonDirty","scaleFactor","lastMoveDx","lastMoveDy","centerXInitial","centerYInitial","updateTransform","dirty","container","highestIndex","getChildIndex","setChildIndex","transformHitPolygon","bb","getBounds","bb1","bottom","dx1","dx2","dy1","dy2","enuminfo","pairs","lmdx","lmdy","parameterMax","currentParameter","newParameter","parameterMin","isColliding","np","worldTransform","apply","tx","ty","bounds","cX","cY","scaleX","scaleY","belongsToGroup","index1","groupHelper","collidingShapes","ro","list","colorType","pointsX","pointsY","rh","getFarbeAsObject","setzeFarbe","istFarbe","fillAll","getCopyOrClone","anzahlX","anzahlY","bitmapToCopy","isBigEndian","uInt32","Uint32Array","uInt8","Uint8Array","buffer","initGraphics","addToDefaultGroupAndSetDefaultVisibility","bh","BitmapHelperNew","u8Array","texture","bufferResource","BufferResource","bt","BaseTexture","Texture","baseTexture","update","intColorToHexRGB","uploadData","g","fillColor","borderColor","borderWidth","setAlpha","fillAlpha","setFillColor","setDefaultBorder","setDefaultFillColor","setBorderColor","setBorderWidth","rgb","borderAlpha","fsh","mx","my","setRadius","CircleHelper","deltaAlpha","Graphics","beginFill","lineStyle","drawCircle","closePath","endFill","radius1","radius2","d1","d2","startAngle","endAngle","drawRadii","ceil","startAngleRad","endAngleRad","SectorHelper","moveTo","arc","lineTo","atan2","towPI","normalizedStartAngle","normalizedEndAngle","ri","ra","ArcHelper","beginHole","endHole","r2","colorName","intColor","intColorToRGB","random","z","cid","o1","h","hslToRgb","rx","ry","setRadiusX","setRadiusY","EllipseHelper","drawEllipse","collisionPairType","collisionPairArrayType","getElement","removeElementAt","shapeArrayType","getCollidingObjects","group2","maxOneCollisionPerShape","groupHelper2","getCollidingObjects2","removeAllChidren","destroyChildren","getCollidingShapes","doCache","cacheAsBitmap","groupHelperCopy","GroupHelper","roCopy","shapeHelperCopy","hasCircularReference","inverse","invert","xSum","ySum","deregister","removeChildAt","inverseStageTransform","hasOverlappingBoundingBoxWith","collisionPairs","alreadyCollidedHelpers2","shapeHelper1","shapeHelper2","shapeToAdd","convexhull","makeHull","newPoints","sort","POINT_COMPARATOR","makeHullPresorted","upperHull","lowerHull","shapeClass","closeAndFill","pointsNumber","ph","extractPoints","addPoint","setPoints","insertPoint","movePointTo","isClosed","points1","PolygonHelper","coordinates","RectangleHelper","radius","addCenterCircle","RoundedRectangleHelper","midx","midy","angleStart","dw","drawRoundedRect","spriteHelper","polygon","HitPolygonStore","polygonStore","getPolygon","pixels","plugins","extract","probes","addPointsOnLine","additionalPointsPerHalfBorder","mid","probe","isTransparent","scaleModeClass","spriteLibraryEntry","setTexture","textureName","indexArray","repeatType","imagesPerSecond","indices","playAnimation","fromIndex","toIndex","stopAnimation","pauseAnimation","resumeAnimation","getWidth","getHeight","makeTiling","isTileSprite","TileHelper","copyFromOtherShape","animationIndices","animationRuns","imagesPerMillisecond","animationTime","animationPaused","copyBitmapFromShape","tileSprite","TilingSprite","mipmap","MIPMAP_MODES","OFF","setParent","tilePosition","dob","SpriteHelper","sheet","Loader","resources","spritesheet","nameWithIndex","textures","dynamicTexture1","getPolygonForTexture","setInvisible","spriteHelperList","deltaTime","image","period2","numberOfPeriodsDone","timeIntoPeriod","period","tileScale","SpriteLibrary","sle","fontsize","fontFamily","setFontsize","setAlignment","setText","isBold","isItalic","setStyle","textStyle","TextStyle","fontSize","fontStyle","fontWeight","strokeThickness","dropShadow","wordWrap","align","lineJoin","TextHelper","Text","anchor","style","tm","TextMetrics","measureText","E","exp","log10","tan","asin","acos","atan","vectorArrayClass","xIndex","yIndex","returnArray","pVector","ps","deltaTimeMillis","printStream","Date","writeConsoleEntry","showTab","stop","speed","controlButtons","speedControl","setSpeedInStepsPerSecond","getSpeedInStepsPerSecond","timerEntries","timerRunning","timerStarted","tl","timerEntry","timerListener","lastTimeFired","processTimerEntries","timerentry","runEntry","typeK","tvK","typeV","tvV","keyArray","old","containsKey","containsValue","dayOfWeekType","MonthType","date","year","month","dayOfMonth","hour","minute","second","days","oldDate","newDate","getTime","oldMs","newMs","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","td","dow","getDay","monthIndex","setPoint","alphaDeg","oRet","messageType","send","setUserData","getUserData","help","WebSocketClientHelper","webSocketHelper","rufname","familienname","username","nickname","keyValueStore","connected","sendToClient","webSocketClientType","systemClassType","sessionCode","nickName","connect","sendToAll","findClientsFromCount","nicknames","nnv","findClientsFromNicknames","disconnect","clientList","client","idToClientMap","isOpen","unsentMessages","onOpenMethod","onCloseMethod","onMessageMethod","onClientConnectedMethod","onClientDisconnectedMethod","onClientsFoundMethod","isEmbedded","location","protocol","host","connection","WebSocket","onerror","onError","onclose","onClose","onmessage","onMessage","onopen","webSocketsToCloseAfterProgramHalt","sendIntern","onOpen","exception","runMethod","clientId","recipient_id","wtr","clientRuntimeObject","wch","user_id","clientHelper","from_client_id","clientHelper1","disconnecting_client_id","currentTimeMills","client_id","onClientsFound","own_index","otherClients","clients","otherClient","arrayValue","waitingForInput","p5o","getProcessingHelper","currentProgramPosition","loop","noLoop","createCanvas","addProcessingMethod","parameterNames","pList","processingObject","loopStopped","onSizeChanged","$div","setupProcessing","drawMethodPending","p5","setup","P2D","afterFinishingBoth","draw","mousePressed","mouseReleased","mouseClicked","mouseDragged","mouseEntered","mouseExited","mouseMoved","keyPressed","keyReleased","methodIdentifier","showTurtle","turn","penIsDown","setShowTurtle","xStart","yStart","lineElements","turtleAngleDeg","isFilled","initialHitPolygonDirty","turtleSize","lastLineWidth","lastColor","lastAlpha","lastTurtleAngleDeg","renderJobPresent","lineWidth","calculateCenter","lineGraphic","turtle","initTurtle","moveTurtleTo","lastLineElement","angleInDegrees","cx","cy","TurtleHelper","turtleAngleRad","newLineElement","newTurtleX","newTurtleY","newAngleDeg","vx","vy","vxp","vyp","lengthForward","lengthBackward","lengthBackwardP","firstPoint","le","setupInitialHitPolygon","polygonBerührtPolygon","farbe","bound","from","to","Patcher","modified","patches","patch","new","patchedText","Boxes3d","material","Pixi3d","StandardMaterial","Mesh3D","createCube3dMesh","MeshGeometry3D","positions","Float32Array","normals","uvs","tangents","createHalfheightCube3dMesh","repeatTextureU","repeatTextureV","createPlane3dMesh","getSpritesheetTexture","copy","wrapMode","WRAP_MODES","REPEAT","StandardMaterialTexture","smt","TextureTransform","frame","RobotMarker","geometry","RobotBrick","camera","farben","farbeToColorInfoMap","farbeToMarkerMaterialMap","farbeToBrickMaterialMap","planeMaterial","light1","Light","LightType","ambient","intensity","light2","directional","rotationQuaternion","setEulerAngles","lightingEnvironment","LightingEnvironment","lights","grassBrickMaterial","initMaterial","baseColorTexture","cloudMaterial","baseColor","groundPlaneMaterial","colorInfo","brickMaterial","mesh","widthX","widthZ","spriteOrColor","getPlaneMaterial","marker","worldX","worldY","sideSprite","deep","planes","sideMaterial","mesh1","mesh2","mesh3","mesh4","topSprite","topMaterial","mesh5","mesh6","mesh7","mesh8","originX","originZ","z1","createCube3d","scaleZ","dz","exposure","roughness","spriteKey","textureKey","alphaMode","StandardMaterialAlphaMode","mask","createPlane3d","robotWorldType","startX","startY","initialeWelt","turnRight","adjustAngle","turnLeft","schritt","anzahl","hinlegen","markeLöschen","markeSetzen","aufheben","istWand","istZiegel","istMarke","himmelsrichtungen","hr","hatSteine","maxSteine","maximumHeight","addBrick","setMarker","bricks","robots","fetchWorld","Camera","robotCubeFactory","container3D","Container3D","initFromString","initWorldArrays","renderOrnamentsAndInitCamera","robot","getBrickCount","markerColumn","brickColumn","gp","getGrassPlane","getSidePlanes","makeClouds","makePlane","northSprite","makeSprite3d","control","CameraOrbitControl","angles","target","oldHeight","brick","getBrick","setToXY","adjustMarkerHeight","adjustRobotPositions","getMarker","brickList","initString","lowerCaseCharToColor","upperCaseCharToColor","rows","maxColumns","row","rowLength","brickColor","markerColor","Direction","names","deltas","fetchRobotWorld","Model","gltf","meshes","sm","rw","crop","getNumberOfBricks","getAngle","getDeltas","newX","newY","newHeight","gibtFarbe","removeBrick","removeMarker","param","hasBrickColor","marke","oldErrorDecorations","breakpoints","breakpointDecorators","decoratorIdToBreakpointMap","identifierPositions","methodCallPositions","uriCounter","Module","uriMap","Uri","scheme","createModel","updateOptions","tabSize","bracketColorizationOptions","enabled","formatter","applyEdits","lastSavedVersionId","getAlternativeVersionId","onDidChangeContent","versionId","saved","identical_to_repository_version","main1","workspacesOwnerId","user","text_before_revision","student_edited_after_revision","networkManager","sendUpdates","bottomDiv","homeworkManager","showHomeWorkRevisionButton","projectExplorer","renderHomeworkButton","getProgramTextFromMonacoModel","is_copy_of_id","repository_file_version","methodAST","workspace","submitted_date","version","workspace_id","forceUpdate","file_type","possibleMethods","cp","mcpList","rerender","getBreakpointPositionsFromEditor","getBreakpoint","setBreakpoint","renderBreakpointDecorators","breakpoint","attachToStatement","programList","getPrograms","nearestStatement","nearestDistance","decorations","isWholeLine","overviewRuler","OverviewRulerLane","Left","minimap","MinimapPosition","Inline","marginClassName","stickiness","TrackedRangeStickiness","NeverGrowsWhenTypingAtEdges","getMonacoEditor","deltaDecorations","getModel","getAllDecorations","decoration","positionsOnLine","foundPosition","bestFoundPosition","isStartable","dependsOnModulesWithErrors","programs","TypeStore","el","e2","errorLevelCompare","level1","level2","$buttonDiv","panelElement","$htmlFirstLine","$startButtonDiv","setModuleActive","patched","maxUriNumber","registerWorldType","typeMap","initEditor","initTypes","initClassDocumentation","defineTheme","inherit","rules","foreground","colors","setTheme","language","basemodule","$menuItem","showAPIHelp","$main","$caption","colorize","then","showConstructors","showMethods","showAttributes","init","require","config","paths","availableLanguages","ignoreDuplicateModules"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,qEClFzCC,E,+HAAZ,SAAYA,GACR,+BAEA,yCACA,qDACA,yCACA,uCACA,mCACA,mBACA,qBAEA,mCACA,uCACA,oCACA,kCACA,oCACA,gCACA,4CACA,kCACA,kCACA,0CACA,sCACA,4CACA,wCACA,4CACA,sCACA,wCACA,8CACA,oCACA,8BACA,gCACA,sCACA,kCACA,wCACA,8BACA,kCACA,kCACA,sCACA,oCACA,0CACA,kCACA,oCACA,8CAQA,kCACA,oCACA,8CACA,gDACA,4CACA,8CACA,wDAGA,kCAAa,gCAGb,kBACA,wBACA,sBAAO,oBAAM,wCAAgB,4BAC7B,kCAAa,kCACb,sBAAO,0BAAS,oCAAc,wCAC9B,sBACA,4BACA,gCACA,wCACA,0CACA,4DACA,gDACA,4CACA,kBAAK,gBACL,8BAEA,oCACA,oCACA,kCACA,gDACA,kDACA,kEACA,gBACA,kBAEA,sBACA,gDACA,gCACA,8BAEA,0CACA,sBACA,4BAEA,kBAGA,8BAGA,sBAGA,8BAGA,gBAGA,sBAEA,kBAGA,0BAGA,4BAGA,wCAGA,0BAGA,4BACA,4CAEA,2CAGA,6BACA,2BACA,6DACA,2DACA,6DACA,2DACA,mDACA,uCACA,2CACA,qCACA,uDACA,mDACA,qEACA,+BACA,+BACA,iDACA,iCACA,yCACA,2EACA,2CACA,+CACA,qDACA,yCACA,2CACA,yEACA,yBACA,+BACA,mCACA,iCACA,iEACA,+DACA,iCACA,qBACA,6DACA,2DACA,iCACA,iCACA,iCACA,yCACA,uDAGA,qBACA,uCACA,qDACA,+CACA,qDACA,qDACA,2CACA,6BACA,mDACA,uBACA,2BACA,uCACA,mDACA,+BACA,+CACA,mDACA,6FACA,6CACA,uBAlMJ,CAAYA,MAAS,KAqMd,IAAIC,GAAiB,OACvBD,EAAUE,WAAa,kBADA,IAGvBF,EAAUG,gBAAkB,0BAHL,IAIvBH,EAAUI,sBAAwB,6BAJX,IAKvBJ,EAAUK,gBAAkB,4BALL,IAMvBL,EAAUM,eAAiB,gCANJ,IAOvBN,EAAUO,aAAe,uBAPF,IAQvBP,EAAUQ,KAAO,QARM,IASvBR,EAA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AAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QAEvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI,GAAJ,QACvB,EAAK71B,UAAU61B,QAAQ,IAAI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","file":"javaOnline-apiDoc.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export enum TokenType {\r\n    identifier,\r\n    // constants\r\n    integerConstant,\r\n    floatingPointConstant,\r\n    booleanConstant,\r\n    stringConstant,\r\n    charConstant,\r\n    true,\r\n    false,\r\n    // keywords\r\n    keywordPrint,\r\n    keywordPrintln,\r\n    keywordClass,\r\n    keywordThis,\r\n    keywordSuper,\r\n    keywordNew,\r\n    keywordInterface,\r\n    keywordEnum,\r\n    keywordVoid,\r\n    keywordAbstract,\r\n    keywordPublic,\r\n    keywordProtected,\r\n    keywordPrivate,\r\n    keywordTransient,\r\n    keywordStatic,\r\n    keywordExtends,\r\n    keywordImplements,\r\n    keywordWhile,\r\n    keywordDo,\r\n    keywordFor,\r\n    keywordSwitch,\r\n    keywordCase,\r\n    keywordDefault,\r\n    keywordIf,\r\n    keywordThen,\r\n    keywordElse,\r\n    keywordReturn,\r\n    keywordBreak,\r\n    keywordContinue,\r\n    keywordNull,\r\n    keywordFinal,\r\n    keywordInstanceof,\r\n    // keywordInt,\r\n    // keywordBoolean,\r\n    // keywordString,\r\n    // keywordFloat,\r\n    // keywordChar,\r\n\r\n    // brackets\r\n    leftBracket, // ()\r\n    rightBracket,\r\n    leftSquareBracket, // []\r\n    rightSquareBracket,\r\n    leftCurlyBracket, // {}\r\n    rightCurlyBracket,\r\n    leftRightSquareBracket, // []\r\n    \r\n    // operators\r\n    doubleMinus, doublePlus,\r\n\r\n    // binary operators\r\n    dot, //.\r\n    modulo,\r\n    minus, plus, multiplication, division,\r\n    singleQuote, doubleQuote, // ', \"\r\n    lower, greater, lowerOrEqual, greaterOrEqual, \r\n    equal, // ==\r\n    notEqual, // !=\r\n    assignment, // =\r\n    plusAssignment, // +=\r\n    minusAssignment, // -=\r\n    multiplicationAssignment, // *=\r\n    divisionAssignment, // /=\r\n    moduloAssignment, // /%=\r\n    and, or,   // &&, ||\r\n    ampersand, // &\r\n\r\n    ANDAssigment,\r\n    XORAssigment,\r\n    ORAssigment,\r\n    shiftLeftAssigment,\r\n    shiftRightAssigment,\r\n    shiftRightUnsignedAssigment,\r\n    OR, // |\r\n    XOR, // ^\r\n    // AND, // & see TokenType.ampersand above\r\n    tilde, // ~\r\n    shiftRightUnsigned, // >>>\r\n    shiftRight, // >>\r\n    shiftLeft, // <<\r\n\r\n    ternaryOperator,\r\n    colon, //:\r\n    ellipsis, // ...\r\n\r\n    not,    // !\r\n    \r\n    // semicolon\r\n    semicolon, // ;\r\n\r\n    // comma\r\n    comma, // ,\r\n\r\n    // backslash\r\n    backslash,\r\n\r\n    // @\r\n    at,\r\n\r\n    // whitespace\r\n    space,\r\n\r\n    tab,\r\n\r\n    // newline\r\n    newline,\r\n\r\n    // line feed\r\n    linefeed,\r\n\r\n    // only lexer-internal\r\n    identifierChar,  // none of the special chars above a..zA..Z_Äö...\r\n\r\n    // Comment\r\n    comment,\r\n\r\n    // used by parser\r\n    negation, \r\n    referenceElement, // for arrays\r\n\r\n    endofSourcecode, // will be generated after sourcecode end\r\n    \r\n    // Program statement types:\r\n    binaryOp, // +, -, *, <=, ...\r\n    unaryOp, // ! and - \r\n    localVariableDeclaration,\r\n    heapVariableDeclaration,\r\n    pushLocalVariableToStack, // push value of a local variable to stack\r\n    popAndStoreIntoVariable,\r\n    pushFromHeapToStack, // push value from heap to stack\r\n    pushAttribute, // value of a attribute to stack\r\n    pushArrayLength, \r\n    pushConstant, // literal\r\n    pushStaticClassObject, // push class-Object to stack (which holds static attributes)\r\n    pushStaticAttribute, // push static attribute to stack\r\n    pushStaticAttributeIntrinsic, // push static attribute to stack\r\n    checkCast, // check if object may get casted to class or interface\r\n    castValue, // cast value on top of stack to other type\r\n    selectArrayElement, // select Element from Array (e.g. a[20])\r\n    callMethod,\r\n    callMainMethod,\r\n    processPostConstructorCallbacks, \r\n    callInputMethod, // Methods of Input class\r\n    makeEllipsisArray,\r\n    decreaseStackpointer, // decrease stack-pointer, nothing else\r\n    initStackframe,\r\n    closeStackframe,\r\n    increaseSpaceForLocalVariables,\r\n    return,\r\n    newObject,\r\n    jumpIfFalse,\r\n    jumpIfTrue,\r\n    jumpIfFalseAndLeaveOnStack,\r\n    jumpIfTrueAndLeaveOnStack,\r\n    jumpAlways,\r\n    noOp, // acts as jump destination\r\n    incrementDecrementBefore, // ++i, --i\r\n    incrementDecrementAfter, // i++, i--\r\n    programEnd,\r\n    beginArray, // push empty array to stack\r\n    addToArray, // pop element form stack and add it to array (on second stack position)\r\n    pushEmptyArray, // push multidimensional empty array to stack\r\n    forLoopOverCollection,\r\n\r\n    // additional AST node types\r\n    type, // e.g. int[][]\r\n    typeParameter, // e.g. <E extends String implements Comparable<E>>\r\n    attributeDeclaration,\r\n    methodDeclaration,\r\n    parameterDeclaration,\r\n    superConstructorCall,\r\n    constructorCall,       // call constructor with this() inside another constructor\r\n    newArray,\r\n    arrayInitialization,\r\n    print,\r\n    println, \r\n    pushEnumValue,\r\n    initializeEnumValue, \r\n    scopeNode,\r\n    returnIfDestroyed,\r\n    extendedForLoopInit,\r\n    extendedForLoopCheckCounterAndGetElement,\r\n    setPauseDuration,\r\n    pause\r\n}\r\n\r\nexport var TokenTypeReadable: {[tt: number]: string} = {\r\n    [TokenType.identifier]: \"ein Bezeichner\",\r\n    // constants\r\n    [TokenType.integerConstant]: \"eine Integer-Konstante\",\r\n    [TokenType.floatingPointConstant]: \"eine Fließkomma-Konstante\",\r\n    [TokenType.booleanConstant]: \"eine boolesche Konstante\",\r\n    [TokenType.stringConstant]: \"eine Zeichenketten-Konstante\",\r\n    [TokenType.charConstant]: \"eine char-Konstante\",\r\n    [TokenType.true]: \"true\",\r\n    [TokenType.false]: \"false\",\r\n    // keywords\r\n    [TokenType.keywordClass]: \"class\",\r\n    [TokenType.keywordThis]: \"this\",\r\n    [TokenType.keywordSuper]: \"super\",\r\n    [TokenType.keywordNew]: \"new\",\r\n    [TokenType.keywordInterface]: \"interface\",\r\n    [TokenType.keywordEnum]: \"enum\",\r\n    [TokenType.keywordVoid]: \"void\",\r\n    [TokenType.keywordAbstract]: \"abstract\",\r\n    [TokenType.keywordPublic]: \"public\",\r\n    [TokenType.keywordProtected]: \"protected\",\r\n    [TokenType.keywordPrivate]: \"private\",\r\n    [TokenType.keywordTransient]: \"transient\",\r\n    [TokenType.keywordStatic]: \"static\",\r\n    [TokenType.keywordExtends]: \"extends\",\r\n    [TokenType.keywordImplements]: \"implements\",\r\n    [TokenType.keywordWhile]: \"while\",\r\n    [TokenType.keywordDo]: \"do\",\r\n    [TokenType.keywordFor]: \"for\",\r\n    [TokenType.keywordSwitch]: \"switch\",\r\n    [TokenType.keywordCase]: \"case\",\r\n    [TokenType.keywordDefault]: \"default\",\r\n    [TokenType.keywordIf]: \"if\",\r\n    [TokenType.keywordThen]: \"then\",\r\n    [TokenType.keywordElse]: \"else\",\r\n    [TokenType.keywordReturn]: \"return\",\r\n    [TokenType.keywordBreak]: \"break\",\r\n    [TokenType.keywordContinue]: \"continue\",\r\n    [TokenType.keywordNull]: \"null\",\r\n    [TokenType.keywordFinal]: \"final\",\r\n    [TokenType.keywordInstanceof]: \"instanceof\",\r\n    [TokenType.keywordPrint]: \"print\",\r\n    [TokenType.keywordPrintln]: \"println\",\r\n    // keywordInt,\r\n    // keywordBoolean,\r\n    // keywordString,\r\n    // keywordFloat,\r\n    // keywordChar,\r\n\r\n    // brackets\r\n    [TokenType.leftBracket]: \"(\", // ()\r\n    [TokenType.rightBracket]: \")\",\r\n    [TokenType.leftSquareBracket]: \"[\", // []\r\n    [TokenType.rightSquareBracket]: \"]\",\r\n    [TokenType.leftCurlyBracket]: \"{\", // {}\r\n    [TokenType.rightCurlyBracket]: \"}\",\r\n    [TokenType.leftRightSquareBracket]: \"[]\", \r\n    \r\n    // operators\r\n    [TokenType.dot]: \".\", //.\r\n    [TokenType.minus]: \"-\", \r\n    [TokenType.modulo]: \"%\", \r\n    [TokenType.plus]: \"+\", \r\n    [TokenType.multiplication]: \"*\", \r\n    [TokenType.division]: \"/\",\r\n    [TokenType.singleQuote]: \"'\", \r\n    [TokenType.doubleQuote]: \"\\\"\", // ']: \"\", \"\r\n    [TokenType.doubleMinus]: \"--\", \r\n    [TokenType.doublePlus]: \"++\",\r\n    [TokenType.lower]: \"<\", \r\n    [TokenType.greater]: \">\", \r\n    [TokenType.lowerOrEqual]: \"<=\", \r\n    [TokenType.greaterOrEqual]: \">=\", \r\n    [TokenType.equal]: \"==\", // ==\r\n    [TokenType.notEqual]: \"!=\", // !=\r\n    [TokenType.assignment]: \"=\", // =\r\n    [TokenType.plusAssignment]: \"+=\", // +=\r\n    [TokenType.minusAssignment]: \"-=\", // -=\r\n    [TokenType.multiplicationAssignment]: \"*=\", // *=\r\n    [TokenType.divisionAssignment]: \"/=\", // /=\r\n    [TokenType.moduloAssignment]: \"%=\",\r\n    [TokenType.ampersand]: \"&\", \r\n    [TokenType.and]: \"&&\", \r\n    [TokenType.or]: \"||\", \r\n    [TokenType.not]: \"!\", \r\n\r\n    [TokenType.ANDAssigment]: \"&=\",\r\n    [TokenType.XORAssigment]: \"^=\",\r\n    [TokenType.ORAssigment]: \"|=\",\r\n    [TokenType.shiftLeftAssigment]: \"<<=\",\r\n    [TokenType.shiftRightAssigment]: \">>=\",\r\n    [TokenType.shiftRightUnsignedAssigment]: \">>>=\",\r\n    // [TokenType.AND]: \"&\", \r\n    [TokenType.OR]: \"|\",\r\n    [TokenType.XOR]: \"^\",\r\n    [TokenType.tilde]: \"~\",\r\n    [TokenType.shiftLeft]: \"<<\",\r\n    [TokenType.shiftRight]: \">>\",\r\n    [TokenType.shiftRightUnsigned]: \">>>\",\r\n\r\n\r\n    [TokenType.ternaryOperator]: \"?\", \r\n    \r\n    // semicolon\r\n    [TokenType.semicolon]: \";\", // ;\r\n\r\n    [TokenType.colon]: \":\", // ;\r\n    [TokenType.ellipsis]: \"...\", // ;\r\n\r\n    // comma\r\n    [TokenType.comma]: \",\", \r\n\r\n    // backslash\r\n    [TokenType.backslash]: \"\\\\\",\r\n\r\n    // at\r\n    [TokenType.at]: \"@\",\r\n\r\n    // whitespace\r\n    [TokenType.space]: \"ein Leerzeichen\",\r\n    [TokenType.tab]: \"ein Tabulatorzeichen\",\r\n\r\n    // newline\r\n    [TokenType.newline]: \"ein Zeilenumbruch\",\r\n\r\n    // only lexer-internal\r\n    [TokenType.identifierChar]: \"eines der Zeichen a..z, A..Z, _\",  // none of the special chars above a..zA..Z_Äö...\r\n\r\n    // Comment\r\n    [TokenType.comment]: \"ein Kommentar\",\r\n\r\n    [TokenType.endofSourcecode]: \"das Ende des Programmes\"\r\n\r\n}\r\n\r\nexport var specialCharList: {[keyword: string]:TokenType} = {\r\n    '(': TokenType.leftBracket, // ()\r\n    ')': TokenType.rightBracket,\r\n    '[': TokenType.leftSquareBracket, // []\r\n    ']': TokenType.rightSquareBracket,\r\n    '{': TokenType.leftCurlyBracket, // {}\r\n    '}': TokenType.rightCurlyBracket,\r\n    \r\n    // operators\r\n    '.': TokenType.dot, //.\r\n    ',': TokenType.comma, //.\r\n    '-': TokenType.minus,\r\n    '%': TokenType.modulo,\r\n    '+': TokenType.plus, \r\n    '*': TokenType.multiplication, \r\n    '/': TokenType.division,\r\n    '\\\\': TokenType.backslash,\r\n    '@': TokenType.at,\r\n    '\\'': TokenType.singleQuote, \r\n    '\"': TokenType.doubleQuote, // ', \"\r\n    \"<\": TokenType.lower,\r\n    \">\": TokenType.greater,\r\n    \"=\": TokenType.assignment,\r\n    \"&\": TokenType.and,\r\n    \"|\": TokenType.or,\r\n    \"!\": TokenType.not,\r\n    \"?\": TokenType.ternaryOperator,\r\n\r\n    \"^\": TokenType.XOR,\r\n    \"~\": TokenType.tilde,\r\n    \r\n    ';': TokenType.semicolon, // ;\r\n    ':': TokenType.colon, // ;\r\n\r\n    '...': TokenType.ellipsis,\r\n\r\n    // whitespace\r\n    ' ': TokenType.space,\r\n    '\\t': TokenType.tab,\r\n\r\n    // newline\r\n    '\\n': TokenType.newline,\r\n    '\\r': TokenType.linefeed\r\n}\r\n\r\nexport var keywordList: {[keyword: string]:TokenType} = {\r\n    \"class\": TokenType.keywordClass,\r\n    \"this\": TokenType.keywordThis,\r\n    \"super\": TokenType.keywordSuper,\r\n    \"new\": TokenType.keywordNew,\r\n    \"interface\": TokenType.keywordInterface,\r\n    \"enum\": TokenType.keywordEnum,\r\n    \"void\": TokenType.keywordVoid,\r\n    \"abstract\": TokenType.keywordAbstract,\r\n    \"public\": TokenType.keywordPublic,\r\n    \"protected\": TokenType.keywordProtected,\r\n    \"private\": TokenType.keywordPrivate,\r\n    \"transient\": TokenType.keywordTransient,\r\n    \"static\": TokenType.keywordStatic,\r\n    \"extends\": TokenType.keywordExtends,\r\n    \"implements\": TokenType.keywordImplements,\r\n    \"while\": TokenType.keywordWhile,\r\n    \"do\": TokenType.keywordDo,\r\n    \"for\": TokenType.keywordFor,\r\n    \"switch\": TokenType.keywordSwitch,\r\n    \"case\": TokenType.keywordCase,\r\n    \"default\": TokenType.keywordDefault,\r\n    \"if\": TokenType.keywordIf,\r\n    \"then\": TokenType.keywordThen,\r\n    \"else\": TokenType.keywordElse,\r\n    \"return\": TokenType.keywordReturn,\r\n    \"break\": TokenType.keywordBreak,\r\n    \"continue\": TokenType.keywordContinue,\r\n    \"null\": TokenType.keywordNull,\r\n    \"final\": TokenType.keywordFinal,\r\n    \"instanceof\": TokenType.keywordInstanceof,\r\n    \"true\": TokenType.true,\r\n    \"false\": TokenType.false,\r\n    \"print\": TokenType.keywordPrint,\r\n    \"println\": TokenType.keywordPrintln,\r\n    // \"int\": TokenType.keywordInt,\r\n    // \"boolean\": TokenType.keywordBoolean,\r\n    // \"String\": TokenType.keywordString,\r\n    // \"float\": TokenType.keywordFloat,\r\n    // \"char\": TokenType.keywordChar\r\n};\r\n\r\nexport var EscapeSequenceList: {[keyword: string]:string} = {\r\n    \"n\": \"\\n\",\r\n    \"r\": \"\\r\",\r\n    \"t\": \"\\t\",\r\n    \"\\\"\": \"\\\"\",\r\n    \"'\": \"'\",\r\n    \"\\\\\": \"\\\\\"\r\n}\r\n\r\nexport type TextPosition = {\r\n    line: number,\r\n    column: number, \r\n    length: number\r\n}\r\n\r\nexport type TextPositionWithoutLength = {\r\n    line: number,\r\n    column: number\r\n}\r\n\r\nexport type Token = {\r\n    tt: TokenType,\r\n    value: string|number|boolean,\r\n    position: TextPosition,\r\n    commentBefore?: Token\r\n}\r\n\r\nexport type TokenList = Token[];\r\n\r\nfunction tokenToString(t: Token){\r\n    return \"<div><span style='font-weight: bold'>\" + TokenType[t.tt] + \"</span>\" +\r\n            \"<span style='color: blue'> &nbsp;'\" + t.value + \"'</span> (l&nbsp;\" + t.position.line + \", c&nbsp;\" + t.position.column + \")</div>\";\r\n}\r\n \r\nexport function tokenListToString(tl: TokenList):string{\r\n    let s = \"\";\r\n    for(let t of tl){\r\n        s += tokenToString(t) + \"\\n\";\r\n    }\r\n    return s;\r\n}","import { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { TextPosition, TokenType } from \"../lexer/Token.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { Program } from \"../parser/Program.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { Visibility, TypeVariable } from \"./Class.js\";\r\n\r\nexport type UsagePositions = Map<Module, TextPosition[]>;\r\n\r\nexport type TextPositionWithModule = {\r\n    module: Module,\r\n    position: TextPosition,\r\n    monacoModel?: monaco.editor.ITextModel\r\n}\r\n\r\nexport type CastInformation = {\r\n    automatic: boolean,\r\n    needsStatement: boolean\r\n}\r\n\r\nexport abstract class Type {\r\n\r\n    public onlyFirstPass = false;\r\n\r\n    public usagePositions: UsagePositions = new Map();\r\n    public declaration: TextPositionWithModule;\r\n\r\n    public identifier: string;\r\n    public documentation: string = \"\";\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public abstract getResultType(operation: TokenType, secondOperandType?: Type): Type;\r\n\r\n    public abstract compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any;\r\n\r\n    public abstract canCastTo(type: Type): boolean;\r\n\r\n    public abstract castTo(value: Value, type: Type): Value;\r\n\r\n    public abstract equals(type: Type): boolean;\r\n\r\n    public toTokenType(): TokenType {\r\n        return null;\r\n    };\r\n\r\n    public abstract debugOutput(value: Value, maxLength?: number): string;\r\n\r\n    clearUsagePositions() {\r\n        this.usagePositions = new Map();\r\n    }\r\n\r\n}\r\n\r\nexport abstract class PrimitiveType extends Type {\r\n\r\n    public initialValue: any = null;\r\n\r\n    public description: string = \"\";\r\n\r\n    protected operationTable: { [operation: number]: { [typename: string]: Type } }\r\n\r\n    protected canCastToMap: { [type: string]: CastInformation };\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        let opTypeMap = this.operationTable[operation];\r\n\r\n        if (opTypeMap == null) {\r\n            return null; // Operation not possible\r\n        }\r\n\r\n        if (secondOperandType != null) {\r\n            return opTypeMap[secondOperandType.identifier];\r\n        }\r\n\r\n        return opTypeMap[\"none\"];\r\n\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n        return this.canCastToMap[type.identifier] != null;\r\n    }\r\n\r\n    public getCastInformation(type: Type): CastInformation {\r\n        return this.canCastToMap[type.identifier];\r\n    }\r\n\r\n}\r\n\r\nexport class Attribute {\r\n\r\n    onlyFirstPass: boolean = false;\r\n\r\n    identifier: string;\r\n\r\n    index: number;\r\n\r\n    type: Type;\r\n    isStatic: boolean;\r\n    isFinal: boolean;\r\n    isTransient: boolean;\r\n    visibility: Visibility;\r\n    updateValue: (value: Value) => void;\r\n    usagePositions: UsagePositions;\r\n    declaration: TextPositionWithModule;\r\n    documentation: string;\r\n    annotation?: string;\r\n\r\n    constructor(name: string, type: Type, updateValue: (value: Value) => void,\r\n        isStatic: boolean, visibility: Visibility, isFinal: boolean, documentation?: string) {\r\n        this.identifier = name;\r\n        this.type = type;\r\n        this.updateValue = updateValue;\r\n        this.isStatic = isStatic;\r\n        this.visibility = visibility;\r\n        this.isFinal = isFinal;\r\n        this.usagePositions = new Map();\r\n        this.documentation = documentation;\r\n    }\r\n}\r\n\r\nexport class Method extends Type {\r\n\r\n    onlyFirstPass: boolean = false;\r\n\r\n    visibility: Visibility;\r\n\r\n    isAbstract: boolean;\r\n    isStatic: boolean;\r\n    isConstructor: boolean = false;\r\n    isVirtual: boolean = false; // true, if child class has method with same signature\r\n\r\n    parameterlist: Parameterlist;\r\n    returnType: Type;\r\n    annotation?: string;\r\n\r\n    invoke?: (parameters: Value[]) => any;  // only for system functions\r\n    program?: Program;\r\n\r\n    reserveStackForLocalVariables: number = 0;\r\n\r\n    hasGenericTypes: boolean;\r\n\r\n    genericTypeMap: { [identifier: string]: Type } = null;\r\n\r\n    public signature: string;\r\n\r\n    implements(m: Method): boolean {\r\n        if(this.identifier != m.identifier) return false;\r\n        if(this.returnType == null || this.returnType.identifier == \"void\"){\r\n            if(m.returnType != null && m.returnType.identifier != \"void\") return false;\r\n        } else {\r\n\r\n            if(m.returnType instanceof PrimitiveType){\r\n                if(m.returnType != this.returnType) {\r\n                    return false;\r\n                }\r\n            } else if(!this.returnType.canCastTo(m.returnType)){\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if(this.parameterlist.parameters.length != m.parameterlist.parameters.length) return false;\r\n\r\n        for(let i = 0; i < this.parameterlist.parameters.length; i++){\r\n            let myParameter = this.parameterlist.parameters[i];\r\n            let mParameter = m.parameterlist.parameters[i];\r\n\r\n            if(mParameter.type instanceof PrimitiveType){\r\n                if(mParameter.type != myParameter.type){\r\n                    return false;\r\n                }\r\n            } else if(!mParameter.type.canCastTo(myParameter.type)) return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    hasEllipsis(): boolean {\r\n        if(this.parameterlist.parameters.length == 0) return false;\r\n        return this.parameterlist.parameters[this.parameterlist.parameters.length - 1].isEllipsis;\r\n    }\r\n\r\n\r\n    getParameterType(index: number): Type {\r\n        return this.parameterlist.parameters[index].type;\r\n    }\r\n\r\n    getParameter(index: number): Variable {\r\n        return this.parameterlist.parameters[index];\r\n    }\r\n\r\n    getReturnType(): Type {\r\n        return this.returnType;\r\n    }\r\n\r\n    getParameterCount() {\r\n        return this.parameterlist.parameters.length;\r\n    }\r\n\r\n    getParameterList(): Parameterlist {\r\n        return this.parameterlist;\r\n    }\r\n\r\n\r\n\r\n    constructor(name: string, parameterlist: Parameterlist, returnType: Type,\r\n        invokeOrAST: ((parameters: Value[]) => any) | Program,\r\n        isAbstract: boolean, isStatic: boolean, documentation?: string, isConstructor: boolean = false) {\r\n        super();\r\n        this.identifier = name;\r\n        this.parameterlist = parameterlist;\r\n        this.returnType = returnType;\r\n        this.isAbstract = isAbstract;\r\n        this.isStatic = isStatic;\r\n        this.visibility = 0;\r\n        this.documentation = documentation;\r\n        this.isConstructor = isConstructor;\r\n\r\n        if (invokeOrAST != null) {\r\n            if (typeof invokeOrAST == \"function\") {\r\n                this.invoke = invokeOrAST;\r\n            } else {\r\n                this.program = invokeOrAST;\r\n                invokeOrAST.method = this;\r\n            }\r\n        }\r\n\r\n        this.signature = name + parameterlist.id;\r\n\r\n        for (let p of parameterlist.parameters) {\r\n            if (p[\"isTypeVariable\"] == true) {\r\n                this.hasGenericTypes = true; break;\r\n            }\r\n        }\r\n\r\n        this.hasGenericTypes = this.hasGenericTypes || (this.returnType != null && this.returnType[\"isTypeVariable\"] == true);\r\n    }\r\n\r\n    getSignatureWithReturnParameter(){\r\n        if(this.returnType != null){\r\n            return this.returnType.identifier + \" \" + this.signature;\r\n        } else {\r\n            return \"void \" + this.signature;\r\n        }\r\n    }\r\n\r\n    getCompletionLabel() {\r\n\r\n        let label = \"\";\r\n\r\n        if (this.returnType != null && this.returnType.identifier != \"void\") {\r\n            label += getTypeIdentifier(this.returnType) + \" \";\r\n        }\r\n\r\n        label += this.identifier + \"(\";\r\n\r\n        let parameters = this.parameterlist.parameters;\r\n        for (let i = 0; i < parameters.length; i++) {\r\n\r\n            let p = parameters[i];\r\n            if(p.isEllipsis){\r\n                let arrayType: ArrayType = <any>p.type;\r\n                label += getTypeIdentifier(arrayType.arrayOfType) + \"... \" + p.identifier;\r\n            } else {\r\n                label += getTypeIdentifier(p.type) + \" \" + p.identifier;\r\n            }\r\n\r\n            if (i < parameters.length - 1) {\r\n                label += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        label += \")\";\r\n\r\n        return label;\r\n    }\r\n\r\n\r\n    getCompletionSnippet(leftBracketAlreadyThere: boolean) {\r\n\r\n        if (leftBracketAlreadyThere) return this.identifier + \"($0\";\r\n\r\n        let snippet = \"\";\r\n\r\n        snippet += this.identifier + \"(\";\r\n\r\n        let isVoidReturn = this.returnType == null || this.returnType.identifier == \"void\";\r\n        let isVoidReturnDelta = isVoidReturn ? 1 : 0;\r\n\r\n        let parameters = this.parameterlist.parameters;\r\n        for (let i = 0; i < parameters.length; i++) {\r\n\r\n            let p = parameters[i];\r\n            snippet += \"${\" + ((i + 1) % (parameters.length + isVoidReturnDelta)) + \":\" + p.identifier + \"}\";\r\n\r\n            if (i < parameters.length - 1) {\r\n                snippet += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        snippet += \")\";\r\n\r\n        if(this.returnType == null || this.returnType.identifier == \"void\"){\r\n            snippet += \";$0\";\r\n        }\r\n\r\n        return snippet;\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\";\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n        return null;\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n        return null;\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n        return false;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value { return value }\r\n\r\n\r\n}\r\n\r\nexport class Parameterlist {\r\n\r\n    id: string;\r\n\r\n    parameters: Variable[];\r\n\r\n    constructor(parameters: Variable[]) {\r\n        this.parameters = parameters;\r\n        this.computeId();\r\n    }\r\n\r\n    computeId() {\r\n        this.id = \"(\";\r\n        let i = 0;\r\n        while (i < this.parameters.length) {\r\n            this.id += this.parameters[i].type.identifier;\r\n            if (i < this.parameters.length - 1) {\r\n                this.id += \", \";\r\n            }\r\n            i++;\r\n        }\r\n        this.id += \")\";\r\n    }\r\n}\r\n\r\nexport type Variable = {\r\n    identifier: string,\r\n    type: Type,\r\n    stackPos?: number;\r\n    usagePositions: UsagePositions,\r\n    declaration: TextPositionWithModule,\r\n    isFinal: boolean,\r\n    isEllipsis?: boolean,\r\n    value?: Value // only for variables on heap,\r\n    declarationError?: any,     // if v.declarationError != null then variable has been used before initialization.\r\n    usedBeforeInitialization?: boolean,\r\n    initialized?: boolean\r\n}\r\n\r\nexport type Heap = { [identifier: string]: Variable };\r\n\r\nexport type Value = {\r\n    type: Type;\r\n    value: any;\r\n    updateValue?: (value: Value) => void;\r\n    object?: RuntimeObject;\r\n}\r\n\r\n\r\nexport function getTypeIdentifier(type: Type): string {\r\n    if(type[\"typeVariables\"]){\r\n        if(type[\"typeVariables\"].length > 0){\r\n            let s: string = (type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type[\"isGenericVariantFrom\"]?.identifier) : type.identifier) \r\n            + \"<\";\r\n               s += type[\"typeVariables\"].map(tv => getTypeIdentifier(tv.type)).join(\", \");\r\n            return s + \">\";\r\n        }\r\n    }\r\n\r\n    return type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type[\"isGenericVariantFrom\"]?.identifier) : type.identifier;\r\n}\r\n","import { Klass, StaticClass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { PrimitiveType, Value } from \"../compiler/types/Types.js\";\r\n\r\n\r\n\r\nexport class RuntimeObject {\r\n\r\n    class: Klass | StaticClass;\r\n\r\n    intrinsicData: {[classIdentifier: string]: any} = {};  // for intrinsic (= builtin) classes to store data\r\n\r\n    // Attributes of class and base-classes\r\n    // Map class-identifier to Map <attribute-identifier, attribute-value>\r\n    // attributeValues: Map<string, Map<string, Value>> = new Map();\r\n    attributes: Value[];\r\n\r\n    constructor(klass: Klass | StaticClass ) {\r\n\r\n        this.class = klass;\r\n\r\n        this.initializeAttributeValues();\r\n\r\n    }\r\n\r\n    getValue(attributeIndex: number):Value{\r\n\r\n        let av: Value = this.attributes[attributeIndex];\r\n        if(av?.updateValue != null){\r\n            av.updateValue(av);\r\n        }\r\n        return av;\r\n\r\n    }\r\n\r\n    private initializeAttributeValues(){\r\n\r\n        this.attributes = Array(this.class.numberOfAttributesIncludingBaseClass).fill(null);\r\n\r\n        let klass = this.class;\r\n        while(klass != null){\r\n\r\n            for(let att of klass.attributes){\r\n                \r\n                let value:any = null;\r\n                if(att.type instanceof PrimitiveType){\r\n                    value = att.type.initialValue;\r\n                }\r\n\r\n                let v: Value = {\r\n                    type: att.type,\r\n                    value: value\r\n                };\r\n\r\n                if(att.updateValue != null){\r\n                    v.updateValue = att.updateValue;\r\n                    v.object = this;\r\n                } \r\n                \r\n                this.attributes[att.index] = v;\r\n\r\n            }\r\n\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nexport function deepCopy(obj: any): any {\r\n\r\n    var copy: any;\r\n\r\n    // Handle the 3 simple types, and null or undefined\r\n    if (null == obj || \"object\" != typeof obj) return obj;\r\n\r\n    // Handle Date\r\n    if (obj instanceof Date) {\r\n        copy = new Date();\r\n        copy.setTime(obj.getTime());\r\n        return copy;\r\n    }\r\n\r\n    // Handle Array\r\n    if (obj instanceof Array) {\r\n        copy = [];\r\n        for (var i = 0, len = obj.length; i < len; i++) {\r\n            copy[i] = deepCopy(obj[i]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    // Handle Object\r\n    if (obj instanceof Object) {\r\n        copy = {};\r\n        for (var attr in obj) {\r\n            if (obj.hasOwnProperty(attr)) copy[attr] = deepCopy(obj[attr]);\r\n        }\r\n        return copy;\r\n    }\r\n\r\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\r\n\r\n}\r\n\r\n","import { Statement, JumpNode, Program, JumpOnSwitchStatement } from \"./Program.js\";\r\nimport { TokenType, TextPosition } from \"../lexer/Token.js\";\r\nimport { CodeGenerator } from \"./CodeGenerator.js\";\r\n\r\ntype nodeToResolve = {\r\n    node: JumpNode,\r\n    labelIndex: number\r\n}\r\n\r\ntype LabeledNode = {\r\n    node?: Statement,\r\n    labelIndex: number,\r\n    position?: number\r\n}\r\n\r\n\r\nexport class LabelManager {\r\n\r\n    maxLabelIndex: number = 0;\r\n\r\n    labeledNodes: LabeledNode[] = [];\r\n    \r\n    labelMap: Map<number, LabeledNode> = new Map();\r\n    jumpNodesToResolve: nodeToResolve[] = [];\r\n\r\n    switchStatements: JumpOnSwitchStatement[] = [];\r\n\r\n    program: Program;\r\n\r\n    constructor(program: Program){\r\n        this.program = program;\r\n    }\r\n\r\n    correctPositionsAfterInsert(insertPosition: number, insertedLength: number) {\r\n        for(let ln of this.labeledNodes){\r\n            if(ln.position != null && ln.position >= insertPosition){\r\n                ln.position += insertedLength;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    registerSwitchStatement(switchStatement: JumpOnSwitchStatement) {\r\n        this.switchStatements.push(switchStatement);\r\n    }\r\n\r\n    insertJumpNode(type: TokenType.jumpIfTrue|TokenType.jumpIfFalse|TokenType.jumpAlways|\r\n        TokenType.jumpIfFalseAndLeaveOnStack|TokenType.jumpIfTrueAndLeaveOnStack,\r\n         position: TextPosition, codeGenerator: CodeGenerator, labelIndex?: number): number {\r\n        \r\n        let statementList = this.program.statements;\r\n\r\n        if(position == null){\r\n            if(statementList.length > 0){\r\n                position = statementList[statementList.length - 1].position;\r\n            }\r\n        }\r\n\r\n        let node: JumpNode = {\r\n            type: type,\r\n            position: position,\r\n            stepFinished: true\r\n        };\r\n\r\n        codeGenerator.pushStatements(node);\r\n\r\n        return this.registerJumpNode(node, labelIndex);\r\n\r\n    }\r\n\r\n    markJumpDestination(offset: number, labelIndex?:number): number {\r\n        \r\n        let position = this.program.statements.length - 1 + offset;\r\n        \r\n        if(labelIndex == null){\r\n            labelIndex = this.maxLabelIndex++;\r\n        }\r\n\r\n        let labeledNode = {\r\n            position: position,\r\n            labelIndex: labelIndex\r\n        };\r\n\r\n        this.labeledNodes.push(labeledNode);\r\n\r\n        this.labelMap.set(labelIndex, labeledNode);\r\n\r\n        return labelIndex;\r\n\r\n    }\r\n\r\n    removeNode(node: Statement){\r\n        for(let i = 0; i < this.labeledNodes.length; i++){\r\n            let n = this.labeledNodes[i];\r\n            if(n.node == node){\r\n\r\n                let index = this.program.statements.indexOf(node);\r\n               \r\n                if(index < this.program.statements.length - 1){\r\n                    let newNode = this.program.statements[index + 1];\r\n                    n.node = newNode;\r\n                }\r\n\r\n            } else {\r\n                i++;\r\n            }\r\n        }\r\n    }\r\n\r\n    private registerJumpDestination(node: Statement, labelIndex?: number): number {\r\n\r\n        if(labelIndex == null){\r\n            labelIndex = this.maxLabelIndex++;\r\n        }\r\n\r\n        let label: LabeledNode = {\r\n            node: node,\r\n            labelIndex: labelIndex\r\n        }\r\n\r\n        this.labeledNodes.push(label);\r\n        this.labelMap.set(labelIndex, label);\r\n\r\n        return labelIndex;\r\n    }\r\n\r\n    public registerJumpNode(node: JumpNode, labelIndex?: number): number {\r\n\r\n        if(labelIndex == null){\r\n            labelIndex = this.maxLabelIndex++;\r\n        }\r\n\r\n        let ntr: nodeToResolve = {\r\n            labelIndex: labelIndex,\r\n            node: node\r\n        }\r\n\r\n        this.jumpNodesToResolve.push(ntr);\r\n\r\n        return labelIndex;\r\n\r\n    }\r\n\r\n    resolveNodes(){\r\n        for(let ln of this.labeledNodes){\r\n\r\n            if(ln.position == null){\r\n                ln.position = this.program.statements.indexOf(ln.node);\r\n            } else {\r\n                while(ln.position > this.program.statements.length - 1){\r\n                    this.program.statements.push({\r\n                        type: TokenType.noOp,\r\n                        position: null\r\n                    });\r\n                }\r\n                ln.node = this.program.statements[ln.position];\r\n            }\r\n\r\n        }\r\n\r\n        for(let jn of this.jumpNodesToResolve){\r\n            let dest = this.labelMap.get(jn.labelIndex);\r\n            if(dest != null){\r\n                jn.node.destination = dest.position;\r\n            }\r\n        }\r\n\r\n        for(let sw of this.switchStatements){\r\n            for(let dl of sw.destinationLabels){\r\n                sw.destinationMap[dl.constant] = this.labelMap.get(dl.label).position;\r\n            }\r\n            sw.destinationLabels = null;\r\n            if(sw.defaultDestination != null){\r\n                sw.defaultDestination = this.labelMap.get(sw.defaultDestination).position;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { ProgramStackElement } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { TextPosition, TokenType } from \"../lexer/Token.js\";\r\nimport { LabelManager } from \"../parser/LabelManager.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { Program } from \"../parser/Program.js\";\r\nimport { SymbolTable } from \"../parser/SymbolTable.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { nullType, stringPrimitiveType, voidPrimitiveType } from \"./PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist, PrimitiveType, Type, Value } from \"./Types.js\";\r\n\r\n\r\nexport enum Visibility { public, protected, private };\r\n\r\nvar booleanPrimitiveTypeCopy: any;\r\nexport function setBooleanPrimitiveTypeCopy(bpt: Type) {\r\n    booleanPrimitiveTypeCopy = bpt;\r\n}\r\n\r\n// Used for class diagrams:\r\nexport type CompostionData = { klass: Klass | Interface, multiples: boolean, identifier: string };\r\n\r\n/**\r\n * For Generic types\r\n */\r\nexport type TypeVariable = {\r\n    identifier: string;\r\n    type: Klass;\r\n    scopeFrom: TextPosition;\r\n    scopeTo: TextPosition;\r\n}\r\n\r\n\r\nexport class Klass extends Type {\r\n\r\n    // for Generics:\r\n    typeVariables: TypeVariable[] = [];\r\n    isGenericVariantFrom: Klass;\r\n    isTypeVariable: boolean = false;\r\n    typeVariablesReady: boolean = true;\r\n\r\n    private static dontInheritFrom: string[] = [\"Integer\", \"Float\", \"Double\", \"Boolean\", \"Character\", \"String\", \"Shape\", \"FilledShape\"];\r\n\r\n    baseClass: Klass;\r\n    firstPassBaseClass: string;\r\n\r\n    staticClass: StaticClass;\r\n\r\n    module: Module;\r\n\r\n    visibility: Visibility;\r\n\r\n    implements: Interface[] = [];\r\n    firstPassImplements: string[] = [];\r\n\r\n    isAbstract: boolean = false;\r\n\r\n    attributeInitializationProgram: Program;\r\n\r\n    postConstructorCallbacks: ((r: RuntimeObject) => void)[] = null;\r\n\r\n    public methods: Method[] = [];\r\n    private methodMap: Map<string, Method> = new Map();\r\n\r\n    public attributes: Attribute[] = [];\r\n    public attributeMap: Map<string, Attribute> = new Map();\r\n    public numberOfAttributesIncludingBaseClass: number = null;\r\n\r\n    public symbolTable: SymbolTable;\r\n\r\n    constructor(identifier: string, module: Module, documentation?: string) {\r\n        super();\r\n\r\n        this.documentation = documentation;\r\n\r\n        this.identifier = identifier;\r\n        this.module = module;\r\n        this.visibility = Visibility.public;\r\n\r\n        this.staticClass = new StaticClass(this);\r\n\r\n        this.attributeInitializationProgram = {\r\n            method: null,\r\n            module: this.module,\r\n            statements: [],\r\n            labelManager: null\r\n        };\r\n\r\n        this.attributeInitializationProgram.labelManager = new LabelManager(this.attributeInitializationProgram);\r\n\r\n    }\r\n\r\n    setupAttributeIndicesRecursive() {\r\n        if (this.baseClass != null && this.baseClass.numberOfAttributesIncludingBaseClass == null) {\r\n            this.baseClass.setupAttributeIndicesRecursive();\r\n        }\r\n        let numberOfAttributesInBaseClasses = this.baseClass == null ? 0 : this.baseClass.numberOfAttributesIncludingBaseClass;\r\n\r\n        for (let a of this.attributes) {\r\n            a.index = numberOfAttributesInBaseClasses++;\r\n            // console.log(this.identifier + \".\" + a.identifier+ \": \" + a.index);\r\n        }\r\n\r\n        this.numberOfAttributesIncludingBaseClass = numberOfAttributesInBaseClasses;\r\n\r\n    }\r\n\r\n\r\n    getNonGenericClass(): Klass {\r\n        let k: Klass = this;\r\n        while (k.isGenericVariantFrom != null) k = k.isGenericVariantFrom;\r\n        return k;\r\n    }\r\n\r\n    getNonGenericIdentifier(): string {\r\n        let k: Klass = this;\r\n        while (k.isGenericVariantFrom != null) k = k.isGenericVariantFrom;\r\n        return k.identifier;\r\n    }\r\n\r\n    implementsInterface(i: Interface): boolean {\r\n        let klass: Klass = this;\r\n        while (klass != null) {\r\n            for (let i1 of klass.implements) {\r\n                if (i1.getThisOrExtendedInterface(i.getNonGenericIdentifier()) != null) return true;\r\n            }\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    getImplementedInterface(identifier: string): Interface {\r\n        let klass: Klass = this;\r\n        while (klass != null) {\r\n            for (let i1 of klass.implements) {\r\n                let i2: Interface = i1.getThisOrExtendedInterface(identifier);\r\n                if (i2 != null) return i2;\r\n            }\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n    registerUsedSystemClasses(usedSystemClasses: (Klass | Interface)[]) {\r\n        if (this.baseClass != null && this.baseClass.module != null && this.baseClass.module.isSystemModule &&\r\n            usedSystemClasses.indexOf(this.baseClass) < 0) {\r\n            usedSystemClasses.push(this.baseClass);\r\n        }\r\n        for (let cd of this.getCompositeData()) {\r\n            if (cd.klass != null && cd.klass.module != null && cd.klass.module.isSystemModule &&\r\n                usedSystemClasses.indexOf(cd.klass) < 0) {\r\n                usedSystemClasses.push(cd.klass);\r\n            }\r\n        }\r\n        for (let interf of this.implements) {\r\n            if (interf != null && interf.module.isSystemModule &&\r\n                usedSystemClasses.indexOf(interf) < 0) {\r\n                usedSystemClasses.push(interf);\r\n            }\r\n        }\r\n    }\r\n\r\n    getCompositeData(): CompostionData[] {\r\n\r\n        let cd: CompostionData[] = [];\r\n        let cdMap: Map<Klass | Interface, CompostionData> = new Map();\r\n\r\n        for (let a of this.attributes) {\r\n            if (a.type instanceof Klass || a.type instanceof Interface) {\r\n                let cda = cdMap.get(a.type);\r\n                if (cda == null) {\r\n                    cda = {\r\n                        klass: a.type,\r\n                        multiples: false,\r\n                        identifier: a.identifier\r\n                    };\r\n                    cdMap.set(a.type, cda);\r\n                    cd.push(cda);\r\n                } else {\r\n                    cda.identifier += \", \" + a.identifier;\r\n                }\r\n            } else {\r\n                let type: Type = a.type;\r\n                while (type instanceof ArrayType) {\r\n                    type = type.arrayOfType;\r\n                }\r\n                if (type instanceof Klass || type instanceof Interface) {\r\n                    let cda = cdMap.get(type);\r\n                    if (cda == null) {\r\n                        cda = {\r\n                            klass: type,\r\n                            multiples: true,\r\n                            identifier: a.identifier\r\n                        };\r\n                        cdMap.set(type, cda);\r\n                        cd.push(cda);\r\n                    } else {\r\n                        cda.identifier += \", \" + a.identifier;\r\n                        cda.multiples = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return cd;\r\n    }\r\n\r\n\r\n    clearUsagePositions() {\r\n        super.clearUsagePositions();\r\n\r\n        for (let m of this.methods) {\r\n            m.clearUsagePositions();\r\n        }\r\n\r\n        for (let a of this.attributes) {\r\n            a.usagePositions = new Map();\r\n        }\r\n\r\n        if (this.staticClass != null) {\r\n            this.staticClass.clearUsagePositions();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    getPostConstructorCallbacks(): ((r: RuntimeObject) => void)[] {\r\n        let c: Klass = this;\r\n        let callbacks: ((r: RuntimeObject) => void)[] = null;\r\n\r\n        while (c != null) {\r\n            if (c.postConstructorCallbacks != null) {\r\n                if (callbacks == null) { callbacks = c.postConstructorCallbacks; }\r\n                else {\r\n                    callbacks = callbacks.concat(c.postConstructorCallbacks);\r\n                }\r\n            }\r\n            c = c.baseClass;\r\n        }\r\n        return callbacks;\r\n    }\r\n\r\n    getCompletionItems(visibilityUpTo: Visibility,\r\n        leftBracketAlreadyThere: boolean, identifierAndBracketAfterCursor: string,\r\n        rangeToReplace: monaco.IRange, currentMethod?: Method): monaco.languages.CompletionItem[] {\r\n\r\n        let itemList: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let attribute of this.getAttributes(visibilityUpTo)) {\r\n            itemList.push({\r\n                label: attribute.identifier + \"\",\r\n                kind: monaco.languages.CompletionItemKind.Field,\r\n                insertText: attribute.identifier,\r\n                range: rangeToReplace,\r\n                documentation: attribute.documentation == null ? undefined : {\r\n                    value: attribute.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        for (let method of this.getMethods(visibilityUpTo)) {\r\n            if (method.isConstructor) {\r\n                if (currentMethod?.isConstructor && currentMethod != method && this.baseClass.methods.indexOf(method) >= 0) {\r\n                    this.pushSuperCompletionItem(itemList, method, leftBracketAlreadyThere, rangeToReplace);\r\n                    continue;\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            itemList.push({\r\n                label: method.getCompletionLabel(),\r\n                filterText: method.identifier,\r\n                command: {\r\n                    id: \"editor.action.triggerParameterHints\",\r\n                    title: '123',\r\n                    arguments: []\r\n                },\r\n                kind: monaco.languages.CompletionItemKind.Method,\r\n                insertText: method.getCompletionSnippet(leftBracketAlreadyThere),\r\n                range: rangeToReplace,\r\n                insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                documentation: method.documentation == null ? undefined : {\r\n                    value: method.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        itemList = itemList.concat(this.staticClass.getCompletionItems(visibilityUpTo,\r\n            leftBracketAlreadyThere, identifierAndBracketAfterCursor,\r\n            rangeToReplace));\r\n\r\n        return itemList;\r\n    }\r\n\r\n    pushSuperCompletionItem(itemList: monaco.languages.CompletionItem[], method: Method, leftBracketAlreadyThere: boolean,\r\n        rangeToReplace: monaco.IRange) {\r\n        itemList.push({\r\n            label: method.getCompletionLabel().replace(method.identifier, \"super\"),\r\n            filterText: \"super\",\r\n            command: {\r\n                id: \"editor.action.triggerParameterHints\",\r\n                title: '123',\r\n                arguments: []\r\n            },\r\n            kind: monaco.languages.CompletionItemKind.Method,\r\n            insertText: method.getCompletionSnippet(leftBracketAlreadyThere).replace(method.identifier, \"super\"),\r\n            range: rangeToReplace,\r\n            insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n            documentation: method.documentation == null ? undefined : {\r\n                value: method.documentation\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    pushStaticInitializationPrograms(programStack: ProgramStackElement[]) {\r\n\r\n        if (this.staticClass.attributeInitializationProgram.statements.length > 0) {\r\n            programStack.push({\r\n                program: this.staticClass.attributeInitializationProgram,\r\n                programPosition: 0,\r\n                textPosition: { line: 1, column: 1, length: 0 },\r\n                method: \"Initialisierung statischer Variablen der Klasse \" + this.staticClass.identifier,\r\n                callbackAfterReturn: null,\r\n                isCalledFromOutside: \"Initialisierung statischer Attribute\"\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    getMethodBySignature(signature: string): Method {\r\n\r\n        let c: Klass = this;\r\n        while (c != null) {\r\n            let method = c.methodMap.get(signature);\r\n            if (method != null) return method;\r\n            c = c.baseClass;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    setBaseClass(baseClass: Klass) {\r\n        this.baseClass = baseClass;\r\n        this.staticClass.baseClass = baseClass.staticClass;\r\n    }\r\n\r\n    public addMethod(method: Method) {\r\n        if (method.isConstructor) {\r\n            method.returnType = null;\r\n        }\r\n        if (method.isStatic) {\r\n            this.staticClass.addMethod(method);\r\n        } else {\r\n            this.methods.push(method);\r\n            this.methodMap.set(method.signature, method);\r\n        }\r\n    }\r\n\r\n    public addAttribute(attribute: Attribute) {\r\n        if (attribute.isStatic) {\r\n            this.staticClass.addAttribute(attribute);\r\n        } else {\r\n            this.attributes.push(attribute);\r\n            this.attributeMap.set(attribute.identifier, attribute);\r\n        }\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        if (operation == TokenType.equal || operation == TokenType.notEqual) {\r\n            if (secondOperandType instanceof Klass || secondOperandType == nullType) {\r\n                return booleanPrimitiveTypeCopy;\r\n            }\r\n        }\r\n\r\n        if (operation == TokenType.keywordInstanceof) {\r\n            if (secondOperandType instanceof StaticClass || secondOperandType instanceof Interface) {\r\n                return booleanPrimitiveTypeCopy;\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value) {\r\n        if (operation == TokenType.equal) {\r\n            return firstOperand.value == secondOperand.value;\r\n        }\r\n\r\n        if (operation == TokenType.notEqual) {\r\n            return firstOperand.value != secondOperand.value;\r\n        }\r\n\r\n        if (operation == TokenType.keywordInstanceof) {\r\n            let firstOpClass = firstOperand?.value?.class;\r\n            if (firstOpClass == null) return false;\r\n            let typeLeft: Klass = <Klass>firstOpClass;\r\n            let typeRight = secondOperand.type;\r\n            if (typeRight instanceof StaticClass) {\r\n\r\n                while (typeLeft != null) {\r\n                    if (typeLeft === typeRight.Klass) return true;\r\n                    typeLeft = typeLeft.baseClass;\r\n                }\r\n                return false;\r\n            }\r\n            if (typeRight instanceof Interface) {\r\n                while (typeLeft != null) {\r\n                    for (let i of typeLeft.implements) {\r\n                        if (i === typeRight) return true;\r\n                    }\r\n                    typeLeft = typeLeft.baseClass;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * returns all visible methods of this class and all of its base classes\r\n     */\r\n    public getMethods(upToVisibility: Visibility, identifier?: string): Method[] {\r\n\r\n        let methods: Method[] = this.methods.filter((method) => {\r\n            return method.visibility <= upToVisibility && (identifier == null || method.identifier == identifier);\r\n        });\r\n\r\n        if (this.baseClass != null && (identifier == null || identifier != this.identifier || methods.length == 0)) {\r\n            let baseClassUptoVisibility = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            for (let m of this.baseClass.getMethods(baseClassUptoVisibility, identifier == this.identifier ? this.baseClass.identifier : identifier)) {\r\n\r\n                let found = false;\r\n                for (let m1 of methods) {\r\n                    if (m1.signature == m.signature) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    methods.push(m);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return methods;\r\n    }\r\n\r\n    /**\r\n     * returns all visible attributes of this class and all of its base classes\r\n     */\r\n    public getAttributes(upToVisibility: Visibility): Attribute[] {\r\n\r\n        let attributes: Attribute[] = [];\r\n        for (let a of this.attributes) {\r\n            if (a.visibility <= upToVisibility) {\r\n                attributes.push(a);\r\n            }\r\n        }\r\n\r\n        if (this.baseClass != null) {\r\n\r\n            let upToVisibilityInBaseClass = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            for (let a of this.baseClass.getAttributes(upToVisibilityInBaseClass)) {\r\n\r\n                let found = false;\r\n\r\n                if (a.visibility > upToVisibilityInBaseClass) continue;\r\n\r\n                for (let a1 of attributes) {\r\n                    if (a1.identifier == a.identifier) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    attributes.push(a);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return attributes;\r\n    }\r\n\r\n    public hasConstructor() {\r\n        for (let m of this.methods) {\r\n            if (m.isConstructor) return true;\r\n        }\r\n\r\n        if (this.baseClass != null) return this.baseClass.hasConstructor();\r\n\r\n        return false;\r\n    }\r\n\r\n    public hasParameterlessConstructor() {\r\n        let hasConstructorWithParameters: boolean = false;\r\n        for (let m of this.methods) {\r\n            if (m.isConstructor) {\r\n                if (m.parameterlist.parameters.length == 0) {\r\n                    return true;\r\n                } else {\r\n                    hasConstructorWithParameters = true;\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        if (!hasConstructorWithParameters && this.baseClass != null) {\r\n            return this.baseClass.hasParameterlessConstructor();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public getParameterlessConstructor(): Method {\r\n        for (let m of this.methods) {\r\n            if (m.isConstructor && m.parameterlist.parameters.length == 0) return m;\r\n        }\r\n\r\n        if (this.baseClass != null) {\r\n            return this.baseClass.getParameterlessConstructor();\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n    public getConstructor(parameterTypes: Type[], upToVisibility: Visibility, classIdentifier: string = this.identifier): { error: string, methodList: Method[] } {\r\n\r\n        let constructors: Method[] = this.methods.filter((m) => {\r\n            return m.isConstructor;\r\n        });\r\n\r\n        if (constructors.length == 0 && this.baseClass != null) {\r\n            return this.baseClass.getConstructor(parameterTypes, upToVisibility, classIdentifier);\r\n        } else {\r\n            return findSuitableMethods(constructors, this.identifier, parameterTypes, classIdentifier, true);\r\n        }\r\n\r\n    }\r\n\r\n    public getMethodsThatFitWithCasting(identifier: string, parameterTypes: Type[],\r\n        searchConstructor: boolean, upToVisibility: Visibility): { error: string, methodList: Method[] } {\r\n\r\n        let allMethods = this.getMethods(upToVisibility);\r\n\r\n        let methods = findSuitableMethods(allMethods, identifier, parameterTypes, this.identifier, searchConstructor);\r\n\r\n        if (methods.methodList.length == 0 && !searchConstructor) {\r\n            let staticMethods = this.staticClass.getMethodsThatFitWithCasting(identifier, parameterTypes, false, upToVisibility);\r\n            if (staticMethods.error == null) {\r\n                return staticMethods;\r\n            }\r\n\r\n            return methods;\r\n        }\r\n\r\n        return methods;\r\n\r\n    }\r\n\r\n    public getMethod(identifier: string, parameterlist: Parameterlist): Method {\r\n\r\n        let method = this.methodMap.get(identifier + parameterlist.id);\r\n\r\n        if (method == null && this.baseClass != null) {\r\n            return this.baseClass.getMethod(identifier, parameterlist);\r\n        }\r\n\r\n        return method;\r\n    }\r\n\r\n    public getAttribute(identifier: string, upToVisibility: Visibility): { attribute: Attribute, error: string, foundButInvisible: boolean } {\r\n\r\n        let error = null;\r\n        let foundButInvisible: boolean = false;\r\n\r\n        let attribute = this.attributeMap.get(identifier);\r\n        let attributeNotFound = attribute == null;\r\n\r\n        if (attribute == null) {\r\n            error = \"Das Attribut \" + identifier + \" kann nicht gefunden werden.\";\r\n        } else\r\n            if (attribute.visibility > upToVisibility) {\r\n                error = \"Das Attribut \" + identifier + \" hat die Sichtbarkeit \" + Visibility[attribute.visibility] + \" und ist daher hier nicht sichtbar.\";\r\n                attribute = null;\r\n                foundButInvisible = true;\r\n            }\r\n\r\n        if (attribute == null && this.baseClass != null) {\r\n            let upToVisibilityInBaseClass = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            let baseClassAttribute = this.baseClass.getAttribute(identifier, upToVisibilityInBaseClass);\r\n            if (baseClassAttribute.attribute != null || attributeNotFound) {\r\n                return baseClassAttribute;\r\n            }\r\n\r\n        }\r\n\r\n        return { attribute: attribute, error: error, foundButInvisible: foundButInvisible };\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return true;\r\n        }\r\n\r\n        if (type instanceof Klass) {\r\n            let baseClass: Klass = this;\r\n\r\n            while (baseClass != null) {\r\n                if (type.getNonGenericIdentifier() == baseClass.getNonGenericIdentifier()) {\r\n                    if (type.typeVariables.length > 0) {\r\n                        let n: number = Math.min(type.typeVariables.length, baseClass.typeVariables.length);\r\n                        for (let i = 0; i < n; i++) {\r\n                            if (!baseClass.typeVariables[i].type.canCastTo(type.typeVariables[i].type)) return false;\r\n                        }\r\n                        return true;\r\n                    }\r\n                    return true;\r\n                }\r\n                baseClass = baseClass.baseClass;\r\n            }\r\n        }\r\n\r\n        if (type instanceof Interface) {\r\n\r\n            let klass: Klass = this;\r\n            while (klass != null) {\r\n                for (let i of klass.implements) {\r\n                    let shouldImplement = type.getNonGenericIdentifier();\r\n                    // look recursively into interface inheritance chain:                    \r\n                    if (i.getThisOrExtendedInterface(shouldImplement) != null) {\r\n                        return true;\r\n                    }\r\n                }\r\n                klass = klass.baseClass;\r\n            }\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        return value;\r\n\r\n    }\r\n\r\n    checkInheritance(): { message: string, missingMethods: Method[] } {\r\n\r\n        if (this.baseClass != null && Klass.dontInheritFrom.indexOf(this.baseClass.identifier) >= 0) {\r\n            return { message: \"Aus Performancegründen ist es leider nicht möglich, Unterklassen der Klassen String, Boolean, Character, Integer, Float und Double zu bilden.\", missingMethods: [] };\r\n        }\r\n\r\n        let message = \"\";\r\n        let missingAbstractMethods: Method[] = [];\r\n        let implementedMethods: Method[] = [];\r\n\r\n        let missingInterfaceMethods: Method[] = [];\r\n\r\n        let klass: Klass = this;\r\n        let hierarchy: string[] = [klass.identifier];\r\n        while (klass.baseClass != null) {\r\n            klass = klass.baseClass;\r\n            if (hierarchy.indexOf(klass.identifier) >= 0) {\r\n                klass.baseClass = null;  // This is necessary to avoid infinite loops in further compilation\r\n                hierarchy = [klass.identifier].concat(hierarchy);\r\n                message = \"Die Klasse \" + klass.identifier + \" erbt von sich selbst: \";\r\n                message += \"(\" + hierarchy.join(\" extends \") + \")\";\r\n                break;\r\n            }\r\n            hierarchy = [klass.identifier].concat(hierarchy);\r\n        }\r\n\r\n        if (message == \"\") {\r\n\r\n            if (this.baseClass != null) {\r\n\r\n                let abstractMethods: Method[] = [];\r\n\r\n                let klass: Klass = this;\r\n\r\n                // collect abstract Methods\r\n                while (klass != null) {\r\n                    for (let m of klass.methods) {\r\n                        if (m.isAbstract) {\r\n                            abstractMethods.push(m);\r\n                            let isImplemented: boolean = false;\r\n                            for (let m1 of implementedMethods) {\r\n                                if (m1.implements(m)) {\r\n                                    isImplemented = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (!isImplemented) {\r\n                                missingAbstractMethods.push(m);\r\n                            }\r\n                        } else {\r\n                            implementedMethods.push(m);\r\n                        }\r\n                    }\r\n                    klass = klass.baseClass;\r\n                }\r\n\r\n            }\r\n\r\n            if (missingAbstractMethods.length > 0 && !this.isAbstract) {\r\n                message = \"Die Klasse \" + this.identifier + \" muss noch folgende Methoden ihrer abstrakten Basisklassen implementieren: \";\r\n\r\n                message += missingAbstractMethods.map((m) => m.getSignatureWithReturnParameter()).join(\", \");\r\n\r\n            }\r\n\r\n            for (let i of this.implements) {\r\n                for (let m of i.getMethods()) {\r\n                    let isImplemented: boolean = false;\r\n                    for (let m1 of implementedMethods) {\r\n                        if (m1.implements(m)) {\r\n                            isImplemented = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!isImplemented) {\r\n                        missingInterfaceMethods.push(m);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (missingInterfaceMethods.length > 0) {\r\n\r\n                if (message != \"\") message += \"\\n\";\r\n\r\n                message += \"Die Klasse \" + this.identifier + \" muss noch folgende Methoden der von ihr implementierten Interfaces implementieren: \";\r\n\r\n                message += missingInterfaceMethods.map((m) => m.signature).join(\", \");\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return { message: message, missingMethods: missingAbstractMethods.concat(missingInterfaceMethods) };\r\n\r\n    }\r\n\r\n    hasAncestorOrIs(a: Klass | StaticClass) {\r\n        let c: Klass | StaticClass = this;\r\n        let id = a.identifier;\r\n        if (a instanceof Klass) id = a.getNonGenericIdentifier();\r\n\r\n        while (c != null) {\r\n            if (c.getNonGenericIdentifier() == id) return true;\r\n            c = c.baseClass;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n\r\n        let s: string = \"{\";\r\n        let attributes = this.getAttributes(Visibility.private);\r\n        let object = <RuntimeObject>value.value;\r\n\r\n        if (object == null) {\r\n            return \"null\";\r\n        }\r\n\r\n        for (let i = 0; i < attributes.length; i++) {\r\n\r\n            let attribute = attributes[i];\r\n            let v = object.getValue(attribute.index);\r\n            if (attribute.type instanceof PrimitiveType) {\r\n                s += attribute.identifier + \":&nbsp;\" + attribute.type.debugOutput(v, maxLength / 2);\r\n            } else {\r\n                s += attribute.identifier + \":&nbsp; {...}\";\r\n            }\r\n            if (i < attributes.length - 1) {\r\n                s += \",&nbsp;\";\r\n            }\r\n\r\n        }\r\n\r\n        return s + \"}\";\r\n    }\r\n\r\n    // static count: number = 0;\r\n    clone(): Klass {\r\n        // Klass.count++;\r\n\r\n        let newKlass: Klass = Object.create(this);\r\n\r\n        newKlass.implements = this.implements.slice(0);\r\n        newKlass.usagePositions = new Map();\r\n        newKlass.isGenericVariantFrom = this;\r\n\r\n        return newKlass;\r\n    }\r\n\r\n}\r\n\r\nexport class StaticClass extends Type {\r\n\r\n    baseClass: StaticClass;\r\n    Klass: Klass;\r\n    // TODO: Initialize\r\n    classObject: RuntimeObject;\r\n\r\n    attributeInitializationProgram: Program;\r\n\r\n    public methods: Method[] = [];\r\n    private methodMap: Map<string, Method> = new Map();\r\n\r\n    public attributes: Attribute[] = [];\r\n    public attributeMap: Map<string, Attribute> = new Map();\r\n    public numberOfAttributesIncludingBaseClass: number = null;\r\n\r\n    constructor(klass: Klass) {\r\n        super();\r\n\r\n        this.Klass = klass;\r\n        this.identifier = klass.identifier;\r\n\r\n        if (klass.baseClass != null) {\r\n            this.baseClass = klass.baseClass.staticClass;\r\n        }\r\n\r\n        this.attributeInitializationProgram = {\r\n            method: null,\r\n            module: this.Klass.module,\r\n            statements: [],\r\n            labelManager: null\r\n        }\r\n\r\n        this.attributeInitializationProgram.labelManager = new LabelManager(this.attributeInitializationProgram);\r\n\r\n    }\r\n\r\n    setupAttributeIndicesRecursive() {\r\n        if (this.baseClass != null && this.baseClass.numberOfAttributesIncludingBaseClass == null) {\r\n            this.baseClass.setupAttributeIndicesRecursive();\r\n        }\r\n        let numberOfAttributesInBaseClasses = this.baseClass == null ? 0 : this.baseClass.numberOfAttributesIncludingBaseClass;\r\n\r\n        for (let a of this.attributes) {\r\n            a.index = numberOfAttributesInBaseClasses++;\r\n            // console.log(this.identifier + \".\" + a.identifier+ \": \" + a.index);\r\n        }\r\n\r\n        this.numberOfAttributesIncludingBaseClass = numberOfAttributesInBaseClasses;\r\n\r\n    }\r\n\r\n\r\n    clearUsagePositions() {\r\n        super.clearUsagePositions();\r\n\r\n        for (let m of this.methods) {\r\n            m.clearUsagePositions();\r\n        }\r\n\r\n        for (let a of this.attributes) {\r\n            a.usagePositions = new Map();\r\n        }\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n\r\n        let s: string = \"{\";\r\n        let attributes = this.getAttributes(Visibility.private);\r\n        let object = this.classObject;\r\n\r\n        for (let i = 0; i < attributes.length; i++) {\r\n\r\n            let attribute = attributes[i];\r\n            s += attribute.identifier + \": \" + object == null ? '---' : attribute.type?.debugOutput(object.getValue(attribute.index), maxLength / 2);\r\n            if (i < attributes.length - 1) {\r\n                s += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        return s + \"}\";\r\n    }\r\n\r\n\r\n    getCompletionItems(visibilityUpTo: Visibility,\r\n        leftBracketAlreadyThere: boolean, identifierAndBracketAfterCursor: string,\r\n        rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let itemList: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let attribute of this.getAttributes(visibilityUpTo)) {\r\n            \r\n            itemList.push({\r\n                label: attribute.identifier,\r\n                //@ts-ignore\r\n                detail: attribute.color? attribute.color : undefined,\r\n                //@ts-ignore\r\n                kind: attribute.color? monaco.languages.CompletionItemKind.Color : monaco.languages.CompletionItemKind.Field,\r\n                insertText: attribute.identifier,\r\n                range: rangeToReplace,\r\n                documentation: attribute.documentation == null ? undefined : {\r\n                    value: attribute.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        for (let method of this.getMethods(visibilityUpTo)) {\r\n            itemList.push({\r\n                label: method.getCompletionLabel(),\r\n                filterText: method.identifier,\r\n                kind: monaco.languages.CompletionItemKind.Method,\r\n                insertText: method.getCompletionSnippet(leftBracketAlreadyThere),\r\n                range: rangeToReplace,\r\n                command: {\r\n                    id: \"editor.action.triggerParameterHints\",\r\n                    title: '123',\r\n                    arguments: []\r\n                },\r\n                insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                documentation: method.documentation == null ? undefined : {\r\n                    value: method.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        return itemList;\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public addMethod(method: Method) {\r\n        this.methods.push(method);\r\n        this.methodMap.set(method.signature, method);\r\n    }\r\n\r\n    public addAttribute(attribute: Attribute) {\r\n        this.attributes.push(attribute);\r\n        this.attributeMap.set(attribute.identifier, attribute);\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value) {\r\n        return null;\r\n    }\r\n\r\n    public getMethodsThatFitWithCasting(identifier: string, parameterTypes: Type[],\r\n        searchConstructor: boolean, upToVisibility: Visibility): { error: string, methodList: Method[] } {\r\n\r\n        return findSuitableMethods(this.getMethods(upToVisibility), identifier, parameterTypes,\r\n            this.Klass.identifier, searchConstructor);\r\n\r\n    }\r\n\r\n    /**\r\n     * returns all methods of this class and all of its base classes\r\n     * @param isStatic returns only static methods if true\r\n     */\r\n    public getMethods(upToVisibility: Visibility, identifier?: string): Method[] {\r\n\r\n        let methods: Method[] = this.methods.slice().filter((method) => {\r\n            return method.visibility <= upToVisibility && (identifier == null || identifier == method.identifier);\r\n        });\r\n\r\n        if (this.baseClass != null) {\r\n            let baseClassUptoVisibility = upToVisibility == Visibility.public ? Visibility.public : Visibility.protected;\r\n            for (let m of this.baseClass.getMethods(baseClassUptoVisibility, identifier)) {\r\n\r\n                let found = false;\r\n                for (let m1 of methods) {\r\n                    if (m1.signature == m.signature) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    methods.push(m);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return methods;\r\n    }\r\n\r\n    /**\r\n     * returns all attributes of this class and all of its base classes\r\n     * @param isStatic return only static attributes if true\r\n     */\r\n    public getAttributes(visibilityUpTo: Visibility): Attribute[] {\r\n\r\n        let attributes: Attribute[] = this.attributes.filter((attribute) => {\r\n            return attribute.visibility <= visibilityUpTo;\r\n        });\r\n\r\n        if (this.baseClass != null) {\r\n\r\n            let visibilityUpToBaseClass = visibilityUpTo == Visibility.public ? visibilityUpTo : Visibility.protected;\r\n\r\n            for (let a of this.baseClass.getAttributes(visibilityUpToBaseClass)) {\r\n\r\n                let found = false;\r\n\r\n                for (let a1 of attributes) {\r\n                    if (a1.identifier == a.identifier) {\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!found) {\r\n                    attributes.push(a);\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return attributes;\r\n    }\r\n\r\n    public getMethod(identifier: string, parameterlist: Parameterlist): Method {\r\n\r\n        let method = this.methodMap.get(identifier + parameterlist.id);\r\n\r\n        if (method == null && this.baseClass != null) {\r\n            return this.baseClass.getMethod(identifier, parameterlist);\r\n        }\r\n\r\n        return method;\r\n    }\r\n\r\n    public getAttribute(identifier: string, upToVisibility: Visibility): { attribute: Attribute, error: string, foundButInvisible: boolean, staticClass: StaticClass } {\r\n\r\n        let error = \"\";\r\n        let notFound = false;\r\n        let attribute = this.attributeMap.get(identifier);\r\n\r\n        if (attribute == null) {\r\n            notFound = true;\r\n            error = \"Das Attribut \" + identifier + \" konnte nicht gefunden werden.\";\r\n        } else if (attribute.visibility > upToVisibility) {\r\n            error = \"Das Attribut \" + identifier + \" hat die Sichtbarkeit \" + Visibility[attribute.visibility] + \" und ist hier daher nicht sichtbar.\";\r\n            attribute = null;\r\n        }\r\n\r\n        if (attribute == null && this.baseClass != null) {\r\n            let upToVisibilityInBaseClass = upToVisibility == Visibility.public ? upToVisibility : Visibility.protected;\r\n\r\n            let baseClassAttributeWithError = this.baseClass.getAttribute(identifier, upToVisibilityInBaseClass);\r\n            if (notFound) {\r\n                return baseClassAttributeWithError;\r\n            }\r\n        }\r\n\r\n        return { attribute: attribute, error: error, foundButInvisible: !notFound, staticClass: this };\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n        return value;\r\n    }\r\n\r\n    hasAncestorOrIs(a: Klass | StaticClass) {\r\n        let c: Klass | StaticClass = this;\r\n        while (c != null) {\r\n            if (c == a) return true;\r\n            c = c.baseClass;\r\n        }\r\n        return false;\r\n    }\r\n\r\n}\r\n\r\nexport class Interface extends Type {\r\n\r\n    // for Generics:\r\n    typeVariables: TypeVariable[] = [];\r\n    isGenericVariantFrom: Interface;\r\n    typeVariablesReady: boolean = true;\r\n\r\n    public module: Module;\r\n\r\n    public extends: Interface[] = [];\r\n\r\n    public methods: Method[] = [];\r\n    private methodMap: Map<string, Method> = new Map();\r\n\r\n    constructor(identifier: string, module: Module, documentation?: string) {\r\n        super();\r\n        this.documentation = documentation;\r\n        this.identifier = identifier;\r\n        this.module = module;\r\n    }\r\n\r\n    getNonGenericIdentifier(): string {\r\n        let k: Interface = this;\r\n        while (k.isGenericVariantFrom != null) k = k.isGenericVariantFrom;\r\n        return k.identifier;\r\n    }\r\n\r\n    getThisOrExtendedInterface(identifier: String): Interface {\r\n        if (this.getNonGenericIdentifier() == identifier) return this;\r\n        for (let if1 of this.extends) {\r\n            let if2 = if1.getThisOrExtendedInterface(identifier);\r\n            if (if2 != null) return if2;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // static count: number = 0;\r\n    clone(): Interface {\r\n        // Interface.count++;\r\n        let newInterface: Interface = Object.create(this);\r\n\r\n        newInterface.usagePositions = new Map();\r\n        newInterface.isGenericVariantFrom = this;\r\n\r\n        return newInterface;\r\n    }\r\n\r\n    clearUsagePositions() {\r\n        super.clearUsagePositions();\r\n\r\n        for (let m of this.methods) {\r\n            m.clearUsagePositions();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    getCompletionItems(leftBracketAlreadyThere: boolean, identifierAndBracketAfterCursor: string,\r\n        rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let itemList: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let method of this.getMethods()) {\r\n            itemList.push({\r\n                label: method.getCompletionLabel(),\r\n                filterText: method.identifier,\r\n                kind: monaco.languages.CompletionItemKind.Method,\r\n                insertText: method.getCompletionSnippet(leftBracketAlreadyThere),\r\n                range: rangeToReplace,\r\n                command: {\r\n                    id: \"editor.action.triggerParameterHints\",\r\n                    title: '123',\r\n                    arguments: []\r\n                },\r\n                insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                documentation: method.documentation == null ? undefined : {\r\n                    value: method.documentation\r\n                }\r\n            });\r\n        }\r\n\r\n        return itemList;\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n        if (value.value == null) {\r\n            return \"null\";\r\n        } else {\r\n            if (value.value instanceof RuntimeObject) {\r\n                return value.value.class.debugOutput(value);\r\n            } else {\r\n                return \"{...}\";\r\n            }\r\n        }\r\n    }\r\n\r\n    public equals(type: Type): boolean {\r\n        return type == this;\r\n    }\r\n\r\n    public addMethod(method: Method) {\r\n        method.isAbstract = true;\r\n        this.methods.push(method);\r\n        this.methodMap.set(method.signature, method);\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        if (operation == TokenType.equal || operation == TokenType.notEqual) {\r\n            return booleanPrimitiveTypeCopy;\r\n        }\r\n\r\n        if (operation == TokenType.keywordInstanceof) {\r\n            if (secondOperandType instanceof StaticClass || secondOperandType instanceof Interface) {\r\n                return booleanPrimitiveTypeCopy;\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value) {\r\n\r\n        if (operation == TokenType.equal) {\r\n            return firstOperand.value == secondOperand.value;\r\n        }\r\n\r\n        if (operation == TokenType.notEqual) {\r\n            return firstOperand.value != secondOperand.value;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    methodsWithSubInterfaces: Method[];\r\n\r\n    /**\r\n     * returns all methods of this interface\r\n     * @param isStatic is not used in interfaces\r\n     */\r\n    public getMethods(): Method[] {\r\n\r\n        if (this.extends.length == 0) return this.methods;\r\n\r\n        if (this.methodsWithSubInterfaces != null) return this.methodsWithSubInterfaces;\r\n\r\n        let visitedInterfaces: { [key: string]: boolean } = {};\r\n        let visitedMethods: { [signature: string]: boolean } = {};\r\n\r\n        this.methodsWithSubInterfaces = this.methods.slice(0);\r\n        for (let m of this.methods) visitedMethods[m.signature] = true;\r\n        visitedInterfaces[this.identifier] = true;\r\n\r\n        let todo: Interface[] = this.extends.slice(0);\r\n\r\n        while (todo.length > 0) {\r\n            let interf = todo.pop();\r\n            for (let m of interf.methods) {\r\n                if (!visitedMethods[m.signature]) {\r\n                    this.methodsWithSubInterfaces.push(m);\r\n                    visitedMethods[m.signature] = true;\r\n                }\r\n            }\r\n            for (let i of interf.extends) {\r\n                if (!visitedInterfaces[i.identifier]) {\r\n                    todo.push(i);\r\n                    visitedInterfaces[i.identifier] = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return this.methodsWithSubInterfaces;\r\n\r\n    }\r\n\r\n    public getMethod(identifier: string, parameterlist: Parameterlist): Method {\r\n\r\n        return this.methodMap.get(identifier + parameterlist.id);\r\n\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        if (type instanceof Interface) {\r\n            let nonGenericCastable = false;\r\n            if (type.getNonGenericIdentifier() == this.getNonGenericIdentifier()) {\r\n                nonGenericCastable = true;\r\n                if (this.typeVariables.length == 0) return true;\r\n                let type2 = <Interface>type;\r\n                if (this.typeVariables.length != type2.typeVariables.length) return false;\r\n                for (let i = 0; i < this.typeVariables.length; i++) {\r\n                    let tv = this.typeVariables[i];\r\n                    let tvOther = type2.typeVariables[i];\r\n                    if (!tvOther.type.canCastTo(tv.type)) return false;\r\n                }\r\n                return false;\r\n            } else {\r\n                for (let type1 of this.extends) {\r\n                    if (type1.canCastTo(type)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        } else {\r\n            if (type instanceof Klass && type.getNonGenericIdentifier() == \"Object\") {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        // return (type instanceof Klass) || (type instanceof Interface);\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n        return value;\r\n    }\r\n\r\n    public getMethodsThatFitWithCasting(identifier: string, parameterTypes: Type[], searchConstructor: boolean): { error: string, methodList: Method[] } {\r\n\r\n        return findSuitableMethods(this.getMethods(), identifier, parameterTypes, this.identifier, searchConstructor);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nfunction findSuitableMethods(methodList: Method[], identifier: string, parameterTypes: Type[],\r\n    classIdentifier: string,\r\n    searchConstructor: boolean): { error: string, methodList: Method[] } {\r\n\r\n    let suitableMethods: Method[] = [];\r\n    let howManyCastingsMax: number = 10000;\r\n    let error = null;\r\n\r\n    let oneWithCorrectIdentifierFound = false;\r\n\r\n    for (let m of methodList) {\r\n\r\n        let howManyCastings = 0;\r\n        if (m.identifier == identifier || m.isConstructor && searchConstructor) {\r\n\r\n            oneWithCorrectIdentifierFound = true;\r\n\r\n            let isEllipsis = m.hasEllipsis();\r\n            if (m.getParameterCount() == parameterTypes.length || (isEllipsis && m.getParameterCount() <= parameterTypes.length)) {\r\n\r\n                let suits = true;\r\n\r\n                let i = 0;\r\n\r\n                for (i = 0; i < m.getParameterCount() - (isEllipsis ? 1 : 0); i++) {\r\n                    let mParameterType = m.getParameterType(i);\r\n                    let givenType = parameterTypes[i];\r\n\r\n                    if (givenType == null) {\r\n                        suits = false; break;\r\n                    }\r\n\r\n                    if (mParameterType == givenType) {\r\n                        continue;\r\n                    }\r\n\r\n                    if (givenType.canCastTo(mParameterType)) {\r\n                        howManyCastings++;\r\n                        /**\r\n                         * Rechteck r; \r\n                         * GNGFigur f;\r\n                         * Bei f.berührt(r) gibt es eine Variante mit Parametertyp String (schlecht!) und\r\n                         * eine mit Parametertyp Object. Letztere soll genommen werden, also:\r\n                         */\r\n                        if(mParameterType == stringPrimitiveType) howManyCastings += 0.5;\r\n                        continue;\r\n                    }\r\n\r\n                    suits = false;\r\n                    break;\r\n                }\r\n\r\n                // Ellipsis!\r\n                if (suits && isEllipsis) {\r\n                    let mParameterEllipsis = m.getParameter(i);\r\n                    let mParameterTypeEllispsis = (<ArrayType>mParameterEllipsis.type).arrayOfType;\r\n\r\n\r\n                    for (let j = i; j < parameterTypes.length; j++) {\r\n                        let givenType = parameterTypes[i];\r\n\r\n                        if (givenType == null) {\r\n                            suits = false; break;\r\n                        }\r\n\r\n                        if (mParameterTypeEllispsis == givenType) {\r\n                            continue;\r\n                        }\r\n\r\n                        if (givenType.canCastTo(mParameterTypeEllispsis)) {\r\n                            howManyCastings++;\r\n                        /**\r\n                         * Rechteck r; \r\n                         * GNGFigur f;\r\n                         * Bei f.berührt(r) gibt es eine Variante mit Parametertyp String (schlecht!) und\r\n                         * eine mit Parametertyp Object. Letztere soll genommen werden, also:\r\n                         */\r\n                         if(mParameterTypeEllispsis == stringPrimitiveType) howManyCastings += 0.5;\r\n                            continue;\r\n                        }\r\n\r\n                        suits = false;\r\n                        break;\r\n                    }\r\n\r\n                }\r\n\r\n                if (suits && howManyCastings <= howManyCastingsMax) {\r\n                    if (howManyCastings < howManyCastingsMax) {\r\n                        suitableMethods = [];\r\n                    }\r\n                    suitableMethods.push(m);\r\n                    howManyCastingsMax = howManyCastings;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    if (suitableMethods.length == 0) {\r\n\r\n        if (oneWithCorrectIdentifierFound) {\r\n            if (parameterTypes.length == 0) {\r\n                error = searchConstructor ? \"Es gibt keinen parameterlosen Konstruktor der Klasse \" + classIdentifier : \"Die vorhandenen Methoden mit dem Bezeichner \" + identifier + \" haben alle mindestens einen Parameter. Hier wird aber kein Parameterwert übergeben.\";\r\n            } else {\r\n                let typeString = parameterTypes.map(type => type?.identifier).join(\", \");\r\n                error = searchConstructor ? `Die Parametertypen (${typeString}) passen zu keinem Konstruktor der Klasse ${classIdentifier}` : `Die Parametertypen (${typeString}) passen zu keiner der vorhandenen Methoden mit dem Bezeichner ${identifier}.`;\r\n            }\r\n        } else {\r\n            error = \"Der Typ \" + classIdentifier + \" besitzt keine Methode mit dem Bezeichner \" + identifier + \".\";\r\n            if (identifier == 'setCenter') {\r\n                error += ' Tipp: Die Methode setCenter der Klasse Shape wurde umbenannt in \"moveTo\".'\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    if (suitableMethods.length > 1) {\r\n        suitableMethods = suitableMethods.slice(0, 1);\r\n        // error = \"Zu den gegebenen Parametern hat der Typ \" + classIdentifier + \" mehrere passende Methoden.\";\r\n    }\r\n\r\n    return {\r\n        error: error,\r\n        methodList: suitableMethods\r\n    };\r\n\r\n}\r\n\r\nexport function getVisibilityUpTo(objectType: Klass | StaticClass, currentClassContext: Klass | StaticClass): Visibility {\r\n\r\n    if (currentClassContext == null) {\r\n        return Visibility.public;\r\n    }\r\n\r\n    if (objectType instanceof StaticClass) objectType = objectType.Klass;\r\n    if (currentClassContext instanceof StaticClass) currentClassContext = currentClassContext.Klass;\r\n\r\n    if (objectType == currentClassContext) {\r\n        return Visibility.private;\r\n    }\r\n\r\n    if (currentClassContext.hasAncestorOrIs(objectType)) {\r\n        return Visibility.protected;\r\n    }\r\n\r\n    return Visibility.public;\r\n\r\n}\r\n\r\n","import { Method, Attribute, Value, Type, Parameterlist, PrimitiveType } from \"./Types.js\";\r\nimport { TokenType } from \"../lexer/Token.js\";\r\nimport { intPrimitiveType } from \"./PrimitiveTypes.js\";\r\nimport { Visibility } from \"./Class.js\";\r\n\r\nexport class ArrayType extends Type {\r\n\r\n    public arrayOfType: Type;\r\n    private lengthAttribute: Attribute;\r\n\r\n    constructor(arrayOfType: Type){\r\n        super();\r\n        this.arrayOfType = arrayOfType;\r\n        this.identifier = \"Array\";\r\n\r\n        if(arrayOfType != null){\r\n            this.identifier = arrayOfType.identifier + \"[]\";\r\n        }\r\n\r\n        this.lengthAttribute = new Attribute(\"length\", intPrimitiveType, (object: Value) => {\r\n            return (<any[]>object.value).length;\r\n        }, false, Visibility.public, true);\r\n    }   \r\n\r\n    public equals(type:Type): boolean{\r\n        return (type instanceof ArrayType) && type.arrayOfType.equals(this.arrayOfType);\r\n    }\r\n\r\n    public get id():string{\r\n        return this.arrayOfType.identifier + \"[]\";\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n        if(operation == TokenType.referenceElement){\r\n            return this.arrayOfType;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        if(operation == TokenType.referenceElement){\r\n            return <any[]>firstOperand.value[<number>secondOperand.value];\r\n        }\r\n\r\n    }\r\n\r\n    public getMethod(identifier: string, signature: Parameterlist): Method{\r\n        return null;\r\n    }\r\n\r\n    public getAttribute(identifier: string): Attribute{\r\n        if(identifier == \"length\"){\r\n            return this.lengthAttribute;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean{\r\n\r\n        if(!(type instanceof ArrayType)){\r\n            return false;\r\n        }\r\n\r\n        return this.arrayOfType.canCastTo(type.arrayOfType);\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        let array = (<Value[]>value.value).slice();\r\n        let destType = (<ArrayType><unknown>type).arrayOfType;\r\n\r\n        for(let a of array){\r\n            this.arrayOfType.castTo(a, destType);\r\n        }\r\n\r\n        return {\r\n            type: type,\r\n            value: array\r\n        }\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40):string {\r\n\r\n        let length: number = 0;\r\n\r\n        if(value.value != null){\r\n\r\n            let s: string = \"[\";\r\n\r\n                let a: Value[] = <Value[]>value.value;\r\n\r\n                for(let i = 0; i < a.length; i++){\r\n\r\n                    let v = a[i];\r\n\r\n                    let s1 = v.type.debugOutput(v, maxLength/2);\r\n\r\n                    s += s1;\r\n                    if(i < a.length - 1) s += \",&nbsp;\";\r\n                    length += s1.length;\r\n\r\n                    if(length > maxLength) break;\r\n\r\n                }\r\n\r\n            return s + \"]\"\r\n\r\n        } else return \"null\";\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Method, Parameterlist, Value } from \"./Types.js\";\r\nimport { stringPrimitiveType } from \"./PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { Interface, Klass } from \"./Class.js\";\r\n// neu:\r\nimport { Enum, EnumRuntimeObject } from \"./Enum.js\";\r\nimport { type } from \"jquery\";\r\nimport { json } from \"express\";\r\nimport { ArrayType } from \"./Array.js\";\r\n\r\n\r\n/**\r\n * Base class for all classes\r\n */\r\n\r\nexport class ObjectClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Object\", module, \"Basisklasse aller Klassen\");\r\n\r\n        // stringPrimitiveType is used here before it is initialized. This problem is solved\r\n        // in the constructor of StringprimitiveType.\r\n        let m = new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n        (parameters) => {\r\n            if(parameters[0].value instanceof RuntimeObject){\r\n                return \"(\" + (<RuntimeObject><unknown>parameters[0].value).class.identifier + \")\";\r\n            } else {\r\n                return parameters[0].value;\r\n            }\r\n\r\n\r\n        }, false, false);\r\n        m.isVirtual = true;\r\n        \r\n        this.addMethod(m);\r\n\r\n\r\n        // // Add default parameterless constructor\r\n        // let m = new Method(\"Object\", new Parameterlist([]), null,\r\n        // (parameters) => {\r\n\r\n        // }, false, false);\r\n        \r\n        // m.isConstructor = true;\r\n\r\n        // this.addMethod(m);\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../Class.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type, PrimitiveType } from \"../Types.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, booleanPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\n\r\n\r\nexport class IntegerClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Integer\", null, \"Wrapper-Klasse, um int-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"MAX_VALUE\", intPrimitiveType, (value) => { value.value = Number.MAX_SAFE_INTEGER }, true, Visibility.public, true, \"Der größte Wert, den eine Variable vom Typ int annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"MIN_VALUE\", intPrimitiveType, (value) => { value.value = Number.MIN_SAFE_INTEGER }, true, Visibility.public, true, \"Der kleinste Wert, den eine Variable vom Typ int annehmen kann\"));\r\n\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean{\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [intPrimitiveType, floatPrimitiveType, doublePrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Integer\", new Parameterlist([\r\n            { identifier: \"int-wert\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Integer-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Integer\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = Number.parseInt(parameters[1].value);\r\n\r\n            }, false, false, \"Instanziert ein neues Integer-Objekt, indem die übergebene Zeichenkette in einen int-Wert umgewandelt wird.\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"doubleValue\", new Parameterlist([]), doublePrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Integer-Objekt in einen double-Wert um\"));\r\n        this.addMethod(new Method(\"floatValue\", new Parameterlist([]), floatPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Integer-Objekt in einen float-Wert um\"));\r\n        this.addMethod(new Method(\"intValue\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Integer-Objekt in einen int-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherInteger\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherInteger\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zur Basis 10 zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"parseInt\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value);\r\n            }, false, true, \"Wandelt die Zeichenkette in einen int-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"parseInt\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value, parameters[2].value);\r\n            }, false, true, \"Wandelt die Zeichenkette s in einen int-Wert um. Dabei wird s als Zahl im Zahlensystem mit der Basis radix interpretiert.\"));\r\n\r\n        this.addMethod(new Method(\"signum\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.sign(parameters[1].value);\r\n            }, false, true, \"Gibt das Signum der übergebenen Zahl zurück, also -1 falls negativ, 0 falls 0 und +1 falls positiv.\"));\r\n\r\n        this.addMethod(new Method(\"toBinary\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(2);\r\n            }, false, true, \"Gibt die übergebene Zahl als Binärrepräsentation zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toHex\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(16);\r\n            }, false, true, \"Gibt die übergebene Zahl als Hexadezimalrepräsentation zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toOctal\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(8);\r\n            }, false, true, \"Gibt die übergebene Zahl als Oktalrepräsentation zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value).toString();\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zur Basis 10 zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return (parameters[1].value >>> 0).toString(parameters[2].value);\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zur Basis radix zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"i\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als Integer-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Dezimalzahl und gib sie als Integer-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value, parameters[2].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Zahl zur Basis radix und gib sie als Integer-Objekt zurück.\"));\r\n\r\n        // this.addMethod(new Method(\"charAt\", new Parameterlist([{ identifier: \"Position\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), charPrimitiveType,\r\n        //     (parameters) => { return (<string>parameters[0].value).charAt(<number>(parameters[1].value)); }, false, false, \"Zeichen an der gegebenen Position.\\n**Bem.: ** Position == 0 bedeutet das erste Zeichen in der Zeichenkette, Position == 1 das zweite usw. .\"));\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../Class.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type, PrimitiveType } from \"../Types.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, booleanPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\n\r\n\r\nexport class FloatClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Float\", null, \"Wrapper-Klasse, um float-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"MAX_VALUE\", floatPrimitiveType, (value) => { value.value = Number.MAX_VALUE }, true, Visibility.public, true, \"Der größte Wert, den eine Variable vom Typ float annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"MIN_VALUE\", floatPrimitiveType, (value) => { value.value = Number.MIN_VALUE }, true, Visibility.public, true, \"Der kleinste Wert, den eine Variable vom Typ float annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"NaN_VALUE\", floatPrimitiveType, (value) => { value.value = Number.NaN }, true, Visibility.public, true, \"Der \\\"Not a Number\\\"-Wert vom Typ float\"));\r\n        this.addAttribute(new Attribute(\"NEGATIVE_INFINITY\", floatPrimitiveType, (value) => { value.value = Number.NEGATIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"negative infinity\\\"-Wert vom Typ float\"));\r\n        this.addAttribute(new Attribute(\"POSITIVE_INFINITY\", floatPrimitiveType, (value) => { value.value = Number.POSITIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"positive infinity\\\"-Wert vom Typ float\"));\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [floatPrimitiveType, doublePrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Float\", new Parameterlist([\r\n            { identifier: \"double-value\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Float-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Float\", new Parameterlist([\r\n            { identifier: \"int-value\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Float-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Float\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = Number.parseFloat(parameters[1].value);\r\n\r\n            }, false, false, \"Instanziert ein neues Float-Objekt, indem die übergebene Zeichenkette in einen float-Wert umgewandelt wird.\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"doubleValue\", new Parameterlist([]), doublePrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Float-Objekt in einen double-Wert um.\"));\r\n        this.addMethod(new Method(\"floatValue\", new Parameterlist([]), floatPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Float-Objekt in einen float-Wert um.\"));\r\n        this.addMethod(new Method(\"intValue\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return Math.trunc(parameters[0].value); }, false, false, \"Wandelt das Float-Objekt durch Abrunden in einen int-Wert um.\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherFloat\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherFloat\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.trunc(parameters[0].value);\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"parseFloat\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Wandelt die Zeichenkette in einen float-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als Float-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Dezimalzahl und gib sie als Float-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return Number.isNaN(parameters[1].value)\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene float-Zahl NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return Number.isNaN(parameters[0].value)\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n            { identifier: \"f\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value == Infinity;\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene float-Zahl INFINTITY ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == Infinity;\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt INFINITY ist.\"));\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\nimport { Klass } from \"../Class.js\";\r\nimport { booleanPrimitiveType, charPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Type, Value } from \"../Types.js\";\r\n\r\n\r\nexport class CharacterClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Character\", null, \"Wrapper-Klasse, um char-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [charPrimitiveType, stringPrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Character\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Character-Objekt\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"charValue\", new Parameterlist([]), charPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Character-Objekt in einen char-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherCharacter\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherCharacter\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[0].value).charCodeAt(0);\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"charValue\", new Parameterlist([\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den char-Wert des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"digit\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseInt(parameters[1].value, parameters[2].value);\r\n            }, false, true, \"Gibt den numerischen Wert des Zeichens zur Basis radix zurück.\"));\r\n\r\n        this.addMethod(new Method(\"forDigit\", new Parameterlist([\r\n            { identifier: \"int-value\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radix\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return (<number>parameters[1].value).toString(parameters[2].value).charAt(0);\r\n            }, false, true, \"Gibt den übergebenen Wert als Ziffer im Zahlensystem zur Basis radix zurück.\"));\r\n\r\n        this.addMethod(new Method(\"getNumericValue\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).charCodeAt(0);\r\n            }, false, true, \"Wandelt das Zeichen in einen numerischen Wert (Unicode-Wert) um.\"));\r\n\r\n        this.addMethod(new Method(\"isLetter\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[a-zäöüß]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen ein deutsches Alphabet-Zeichen ist.\"));\r\n\r\n        this.addMethod(new Method(\"isLetterOrDigit\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[a-zäöüß0-9]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen ein deutsches Alphabet-Zeichen oder eine Ziffer ist.\"));\r\n\r\n        this.addMethod(new Method(\"isDigit\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[0-9]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen eine Ziffer ist.\"));\r\n\r\n            this.addMethod(new Method(\"isWhitespace\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).match(/[ \\r\\n\\t]/i) != null;\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Zeichen ein Leerzeichen, Tabulatorzeichen oder Zeilenumbruch ist.\"));\r\n\r\n        this.addMethod(new Method(\"toUpperCase\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).toLocaleUpperCase();\r\n            }, false, true, \"Wandelt das Zeichen in Großschreibung um.\"));\r\n\r\n        this.addMethod(new Method(\"toLowerCase\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return (<string>parameters[1].value).toLocaleLowerCase();\r\n            }, false, true, \"Wandelt das Zeichen in Kleinschreibung um.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"char-value\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Wandelt den char-Wert in ein Character-Objekt um.\"));\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\nimport { Klass, Visibility } from \"../Class.js\";\r\nimport { booleanPrimitiveType, charPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Type, Value, Attribute } from \"../Types.js\";\r\n\r\n\r\nexport class BooleanClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Boolean\", null, \"Wrapper-Klasse, um boolean-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"TRUE\", this, (value) => { value.value = true }, true, Visibility.public, true, \"das Boolean-Objekt, das TRUE repräsentiert\"));\r\n        this.addAttribute(new Attribute(\"FALSE\", this, (value) => { value.value = false }, true, Visibility.public, true, \"das Boolean-Objekt, das FALSE repräsentiert\"));\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [booleanPrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Boolean\", new Parameterlist([\r\n            { identifier: \"boolean-value\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Boolean-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Boolean\", new Parameterlist([\r\n            { identifier: \"string-value\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1] != null && parameters[1].value.toLowerCase() == \"true\";\r\n\r\n            }, false, false, \"Instanziert ein neues Boolean-Objekt: Es nimmt genau dann den Wert true an, wenn die übergebene Zeichenkette ohne Berücksichtigung von Klein-/Großschreibung den Wert \\\"true\\\" hat.\", true));\r\n\r\n        this.addMethod(new Method(\"booleanValue\", new Parameterlist([]), booleanPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Boolean-Objekt in einen boolean-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherBoolean\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                return v0 == v1 ? 0 : 1;\r\n            }, false, false, \"Gibt genau dann 0 zurück, wenn der Wert des Objekts gleich dem übergebenen Wert ist, ansonsten 1.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherBoolean\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return (<boolean>parameters[0].value) ? 0 : 1;\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"booleanValue\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value;\r\n            }, false, false, \"Gibt den boolean-Wert des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"boolean-value\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Wandelt den boolean-Wert in ein Boolean-Objekt um.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"string-value\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value != null && (<string>parameters[1].value).toLowerCase() == \"true\";\r\n            }, false, true, \"Wandelt die Zeichenkette in einen boolean-Wert um. Er ergibt true genau dann, wenn die Zeichenkette != null ist und - ohne Berücksichtigung von Klein-/Großschreibung - den Wert \\\"true\\\" hat.\"));\r\n\r\n        this.addMethod(new Method(\"parseBoolean\", new Parameterlist([\r\n            { identifier: \"string-value\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value != null && (<string>parameters[1].value).toLowerCase() == \"true\";\r\n            }, false, true, \"Wandelt die Zeichenkette in einen boolean-Wert um. Er ergibt true genau dann, wenn die Zeichenkette != null ist und - ohne Berücksichtigung von Klein-/Großschreibung - den Wert \\\"true\\\" hat.\"));\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../Class.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type, PrimitiveType } from \"../Types.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, floatPrimitiveType, doublePrimitiveType, booleanPrimitiveType } from \"../PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\n\r\n\r\nexport class DoubleClass extends Klass {\r\n\r\n    unboxableAs = [];\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"Double\", null, \"Wrapper-Klasse, um double-Werte in Collections verenden zu können.\");\r\n        this.baseClass = baseClass;\r\n\r\n        this.addAttribute(new Attribute(\"MAX_VALUE\", doublePrimitiveType, (value) => { value.value = Number.MAX_VALUE }, true, Visibility.public, true, \"Der größte Wert, den eine Variable vom Typ double annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"MIN_VALUE\", doublePrimitiveType, (value) => { value.value = Number.MIN_VALUE }, true, Visibility.public, true, \"Der kleinste Wert, den eine Variable vom Typ double annehmen kann\"));\r\n        this.addAttribute(new Attribute(\"NaN_VALUE\", doublePrimitiveType, (value) => { value.value = Number.NaN }, true, Visibility.public, true, \"Der \\\"Not a Number\\\"-Wert vom Typ double\"));\r\n        this.addAttribute(new Attribute(\"NEGATIVE_INFINITY\", doublePrimitiveType, (value) => { value.value = Number.NEGATIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"negative infinity\\\"-Wert vom Typ double\"));\r\n        this.addAttribute(new Attribute(\"POSITIVE_INFINITY\", doublePrimitiveType, (value) => { value.value = Number.POSITIVE_INFINITY }, true, Visibility.public, true, \"Der \\\"positive infinity\\\"-Wert vom Typ double\"));\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n    }\r\n\r\n    canCastTo(type: Type): boolean {\r\n        return this.unboxableAs.indexOf(type) >= 0 || super.canCastTo(type);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.unboxableAs = [doublePrimitiveType];\r\n\r\n        this.addMethod(new Method(\"Double\", new Parameterlist([\r\n            { identifier: \"double-value\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Double-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Double\", new Parameterlist([\r\n            { identifier: \"int-value\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = parameters[1].value;\r\n\r\n            }, false, false, \"Instanziert ein neues Double-Objekt\", true));\r\n\r\n        this.addMethod(new Method(\"Double\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                parameters[0].value = Number.parseFloat(parameters[1].value);\r\n\r\n            }, false, false, \"Instanziert ein neues Double-Objekt, indem die übergebene Zeichenkette in einen double-Wert umgewandelt wird.\", true));\r\n\r\n\r\n        this.addMethod(new Method(\"doubleValue\", new Parameterlist([]), doublePrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Double-Objekt in einen double-Wert um.\"));\r\n        this.addMethod(new Method(\"floatValue\", new Parameterlist([]), floatPrimitiveType,\r\n            (parameters) => { return parameters[0].value; }, false, false, \"Wandelt das Double-Objekt in einen float-Wert um.\"));\r\n        this.addMethod(new Method(\"intValue\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return Math.trunc(parameters[0].value); }, false, false, \"Wandelt das Double-Objekt durch Abrunden in einen int-Wert um.\"));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"anotherDouble\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let v0 = parameters[0].value;\r\n                let v1 = parameters[1].value;\r\n                if (v0 > v1) return 1;\r\n                if (v0 < v1) return -1;\r\n                return 0;\r\n            }, false, false, \"Ist der Wert größer als der übergebene Wert, so wird +1 zurückgegeben. Ist er kleiner, so wird -1 zurückgegeben. Sind die Werte gleich, so wird 0 zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"anotherDouble\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == parameters[1].value;\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Wert gleich dem übergebenen Wert ist.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[0].value;\r\n            }, false, false, \"Gibt den Wert des Objekts als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"hashCode\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.trunc(parameters[0].value);\r\n            }, false, false, \"Gibt den hashCode des Objekts zurück.\"));\r\n\r\n        this.addMethod(new Method(\"parseDouble\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Wandelt die Zeichenkette in einen double-Wert um\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return \"\" + parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als String-Wert zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return parameters[1].value;\r\n            }, false, true, \"Gibt die übergebene Zahl als Double-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"valueOf\", new Parameterlist([\r\n            { identifier: \"s\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                return Number.parseFloat(parameters[1].value);\r\n            }, false, true, \"Interpretiert die übergebene Zeichenkette als Dezimalzahl und gib sie als Double-Objekt zurück.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return Number.isNaN(parameters[1].value)\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene double-Zahl NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isNaN\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return Number.isNaN(parameters[0].value)\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt NaN (not a Number) ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n            { identifier: \"f\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[1].value == Infinity;\r\n            }, false, true, \"Gibt genau dann true zurück, falls die übergebene double-Zahl INFINTITY ist.\"));\r\n\r\n        this.addMethod(new Method(\"isInfinite\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return parameters[0].value == Infinity;\r\n            }, false, false, \"Gibt genau dann true zurück, falls das Objekt INFINITY ist.\"));\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n","import { TokenType } from \"../lexer/Token.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { Interface, Klass, setBooleanPrimitiveTypeCopy } from \"./Class.js\";\r\nimport { ObjectClass } from \"./ObjectClass.js\";\r\nimport { Method, Parameterlist, PrimitiveType, Type, Value } from \"./Types.js\";\r\nimport { IntegerClass } from \"./boxedTypes/IntegerClass.js\";\r\nimport { FloatClass } from \"./boxedTypes/FloatClass.js\";\r\nimport { CharacterClass } from \"./boxedTypes/CharacterClass.js\";\r\nimport { BooleanClass } from \"./boxedTypes/BooleanClass.js\";\r\nimport { DoubleClass } from \"./boxedTypes/DoubleClass.js\";\r\n\r\nexport class NullType extends Type {\r\n\r\n    constructor() {\r\n        super();\r\n        this.identifier = \"null\";\r\n    }\r\n\r\n    getResultType(operation: TokenType, secondOperandType: Type) {\r\n        return null;\r\n    }\r\n    compute(operation: TokenType, firstOperand: Value, secondOperand: Value) {\r\n        return null;\r\n    }\r\n    canCastTo(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n    castTo(value: Value, type: Type) {\r\n        return value;\r\n    }\r\n    equals(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"null\";\r\n    }\r\n}\r\n\r\nexport class VarType extends Type {\r\n\r\n    constructor() {\r\n        super();\r\n        this.identifier = \"var\";\r\n    }\r\n\r\n    getResultType(operation: TokenType, secondOperandType: Type) {\r\n        return null;\r\n    }\r\n    compute(operation: TokenType, firstOperand: Value, secondOperand: Value) {\r\n        return null;\r\n    }\r\n    canCastTo(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n    castTo(value: Value, type: Type) {\r\n        return value;\r\n    }\r\n    equals(type: Type) {\r\n        return (type instanceof Klass || type instanceof Interface);\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"var\";\r\n    }\r\n}\r\n\r\nexport class IntPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n        this.initialValue = 0;\r\n\r\n        this.identifier = \"int\";\r\n\r\n        this.description = \"ganze Zahl\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType, \"String\": stringPrimitiveType },\r\n            [TokenType.minus]: { \"none\": intPrimitiveType, \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.multiplication]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.modulo]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType },\r\n            [TokenType.division]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.doublePlus]: { \"none\": intPrimitiveType },\r\n            [TokenType.doubleMinus]: { \"none\": intPrimitiveType },\r\n            [TokenType.negation]: { \"none\": intPrimitiveType },\r\n            [TokenType.tilde]: { \"none\": intPrimitiveType },\r\n            [TokenType.lower]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n\r\n            // binary ops\r\n            [TokenType.OR]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType },\r\n            [TokenType.XOR]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType },\r\n            [TokenType.ampersand]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType },\r\n            [TokenType.shiftLeft]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType },\r\n            [TokenType.shiftRight]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType },\r\n            [TokenType.shiftRightUnsigned]: { \"int\": intPrimitiveType, \"Integer\": intPrimitiveType }\r\n\r\n        };\r\n\r\n        // this.canCastTolist = [floatPrimitiveType, doublePrimitiveType, stringPrimitiveType, charPrimitiveType];\r\n\r\n        this.canCastToMap = {\r\n            \"float\": { automatic: true, needsStatement: false },\r\n            \"double\": { automatic: true, needsStatement: false },\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"char\": { automatic: true, needsStatement: true },\r\n            \"int\": { automatic: true, needsStatement: false },\r\n            \"Integer\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.integerConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == floatPrimitiveType || type == doublePrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: value.value\r\n            };\r\n        }\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n        if (type == charPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: String.fromCharCode(<number>value.value)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <number>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.minus:\r\n                if (secondOperand == null) return -value;\r\n                return value - <number>(secondOperand.value);\r\n\r\n            case TokenType.multiplication:\r\n                return value * <number>(secondOperand.value);\r\n\r\n            case TokenType.division:\r\n                if (secondOperand.type == intPrimitiveType) {\r\n                    return Math.trunc(value / <number>(secondOperand.value));\r\n                }\r\n                return value / <number>(secondOperand.value);\r\n\r\n            case TokenType.modulo:\r\n                if (secondOperand.type == intPrimitiveType) {\r\n                    return Math.trunc(value % <number>(secondOperand.value));\r\n                }\r\n                return 1;\r\n\r\n            case TokenType.doublePlus:\r\n                return value++;\r\n\r\n            case TokenType.doubleMinus:\r\n                return value--;\r\n\r\n            case TokenType.negation:\r\n                return -value;\r\n\r\n            case TokenType.tilde:\r\n                return ~value;\r\n\r\n            case TokenType.lower:\r\n                return value < (<number>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <number>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <number>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <number>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <number>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <number>(secondOperand.value);\r\n\r\n            case TokenType.OR:\r\n                return value | <number>(secondOperand.value);\r\n\r\n            case TokenType.XOR:\r\n                return value ^ <number>(secondOperand.value);\r\n\r\n            case TokenType.ampersand:\r\n                return value & <number>(secondOperand.value);\r\n\r\n            case TokenType.shiftLeft:\r\n                return value << <number>(secondOperand.value);\r\n\r\n            case TokenType.shiftRight:\r\n                return value >> <number>(secondOperand.value);\r\n\r\n            case TokenType.shiftRightUnsigned:\r\n                return value >>> <number>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class FloatPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = 0;\r\n\r\n        this.identifier = \"float\";\r\n\r\n        this.description = \"Fließkommazahl mit einfacher Genauigkeit\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType, \"String\": stringPrimitiveType },\r\n            [TokenType.minus]: { \"none\": floatPrimitiveType, \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.multiplication]: { \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.division]: { \"Integer\": floatPrimitiveType, \"int\": floatPrimitiveType, \"float\": floatPrimitiveType, \"Float\": floatPrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.doublePlus]: { \"none\": floatPrimitiveType },\r\n            [TokenType.doubleMinus]: { \"none\": floatPrimitiveType },\r\n            [TokenType.negation]: { \"none\": floatPrimitiveType },\r\n            [TokenType.lower]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n        };\r\n\r\n        // this.canCastTolist = [intPrimitiveType, stringPrimitiveType, doublePrimitiveType];\r\n\r\n        this.canCastToMap = {\r\n            \"int\": { automatic: false, needsStatement: true },\r\n            \"double\": { automatic: true, needsStatement: false },\r\n            \"float\": { automatic: true, needsStatement: false },\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"Float\": { automatic: true, needsStatement: false },\r\n            \"Double\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.floatingPointConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n        if (type == intPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: Math.trunc(<number>value.value)\r\n            }\r\n        }\r\n\r\n        if (type == doublePrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: value.value\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <number>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.minus:\r\n                if (secondOperand == null) return -value;\r\n                return value - <number>(secondOperand.value);\r\n\r\n            case TokenType.multiplication:\r\n                return value * <number>(secondOperand.value);\r\n\r\n            case TokenType.division:\r\n                return value / <number>(secondOperand.value);\r\n\r\n            case TokenType.doublePlus:\r\n                return value++;\r\n\r\n            case TokenType.doubleMinus:\r\n                return value--;\r\n\r\n            case TokenType.negation:\r\n                return -value;\r\n\r\n            case TokenType.lower:\r\n                return value < (<number>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <number>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <number>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <number>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <number>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <number>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class DoublePrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = 0;\r\n\r\n        this.identifier = \"double\";\r\n\r\n        this.description = \"Fließkommazahl mit doppelter Genauigkeit\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType, \"String\": stringPrimitiveType },\r\n            [TokenType.minus]: { \"none\": doublePrimitiveType, \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.multiplication]: { \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.division]: { \"int\": doublePrimitiveType, \"Integer\": doublePrimitiveType, \"float\": doublePrimitiveType, \"Float\": doublePrimitiveType, \"double\": doublePrimitiveType, \"Double\": doublePrimitiveType },\r\n            [TokenType.doublePlus]: { \"none\": doublePrimitiveType },\r\n            [TokenType.doubleMinus]: { \"none\": doublePrimitiveType },\r\n            [TokenType.negation]: { \"none\": doublePrimitiveType },\r\n            [TokenType.lower]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"int\": booleanPrimitiveType, \"float\": booleanPrimitiveType, \"double\": booleanPrimitiveType, \"Integer\": booleanPrimitiveType, \"Float\": booleanPrimitiveType, \"Double\": booleanPrimitiveType },\r\n        };\r\n\r\n        // this.canCastTolist = [intPrimitiveType, stringPrimitiveType, floatPrimitiveType];\r\n        this.canCastToMap = {\r\n            \"int\": { automatic: false, needsStatement: true },\r\n            \"float\": { automatic: true, needsStatement: false },\r\n            \"double\": { automatic: true, needsStatement: false },\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"Float\": { automatic: true, needsStatement: false },\r\n            \"Double\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.floatingPointConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n        if (type == intPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: Math.trunc(<number>value.value)\r\n            }\r\n        }\r\n\r\n        if (type == floatPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: value.value\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <number>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.minus:\r\n                if (secondOperand == null) return -value;\r\n                return value - <number>(secondOperand.value);\r\n\r\n            case TokenType.multiplication:\r\n                return value * <number>(secondOperand.value);\r\n\r\n            case TokenType.division:\r\n                return value / <number>(secondOperand.value);\r\n\r\n            case TokenType.doublePlus:\r\n                return value++;\r\n\r\n            case TokenType.doubleMinus:\r\n                return value--;\r\n\r\n            case TokenType.negation:\r\n                return -value;\r\n\r\n            case TokenType.lower:\r\n                return value < (<number>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <number>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <number>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <number>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <number>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <number>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <number>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class BooleanPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = false;\r\n\r\n        this.identifier = \"boolean\";\r\n\r\n        this.description = \"boolescher Wert (true oder false)\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"String\": stringPrimitiveType },\r\n            [TokenType.and]: { \"boolean\": booleanPrimitiveType },\r\n            [TokenType.or]: { \"boolean\": booleanPrimitiveType },\r\n            [TokenType.not]: { \"none\": booleanPrimitiveType },\r\n            [TokenType.equal]: { \"boolean\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"boolean\": booleanPrimitiveType },\r\n        };\r\n\r\n        this.canCastToMap = {\r\n            \"String\": { automatic: true, needsStatement: true },\r\n            \"boolean\": { automatic: true, needsStatement: false },\r\n            \"Boolean\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n\r\n    }\r\n\r\n    toTokenType(): TokenType {\r\n        return TokenType.booleanConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: \"\" + <number>value.value\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <boolean>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                return value + <string>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <boolean>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <boolean>(secondOperand.value);\r\n\r\n            case TokenType.and:\r\n                return value && <boolean>(secondOperand.value);\r\n\r\n            case TokenType.or:\r\n                return value || <boolean>(secondOperand.value);\r\n\r\n            case TokenType.not:\r\n                return !value;\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"\" + <boolean>value.value;\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class VoidPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = false;\r\n\r\n        this.identifier = \"void\";\r\n\r\n        this.description = \"leerer Rückgabewert\"\r\n\r\n        this.operationTable = {\r\n        };\r\n\r\n        this.canCastToMap = {};\r\n\r\n    }\r\n\r\n    public toTokenType(): TokenType {\r\n        return TokenType.keywordVoid;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        return value;\r\n\r\n    }\r\n\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"void\";\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class StringPrimitiveType extends Klass {\r\n\r\n    private operationTable: { [operation: number]: { [typename: string]: Type } }\r\n\r\n    public toTokenType(): TokenType {\r\n        return TokenType.stringConstant;\r\n    }\r\n\r\n    public getResultType(operation: TokenType, secondOperandType?: Type): Type {\r\n\r\n        if (operation == TokenType.keywordInstanceof) {\r\n            return super.getResultType(operation, secondOperandType);\r\n        }\r\n\r\n        let opTypeMap = this.operationTable[operation];\r\n\r\n        if (opTypeMap == null) {\r\n            return null; // Operation not possible\r\n        }\r\n\r\n        if (secondOperandType != null) {\r\n            return opTypeMap[secondOperandType.identifier];\r\n        }\r\n\r\n        return opTypeMap[\"none\"];\r\n\r\n    }\r\n\r\n\r\n    constructor(baseClass: Klass) {\r\n        super(\"String\", null, \"Ein Objekt der Klasse String speichert eine Zeichenkette.\");\r\n        this.baseClass = baseClass;\r\n        let stringClass = this;\r\n        baseClass.methods.filter(m => m.identifier == \"toString\").forEach(m => m.returnType = stringClass);\r\n    }\r\n\r\n    init() {\r\n        this.operationTable = {\r\n            [TokenType.plus]: {\r\n                \"String\": stringPrimitiveType, \"int\": stringPrimitiveType,\r\n                \"float\": stringPrimitiveType, \"double\": doublePrimitiveType,\r\n                \"boolean\": stringPrimitiveType, \"char\": stringPrimitiveType\r\n            },\r\n            [TokenType.equal]: { \"String\": booleanPrimitiveType, \"null\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"String\": booleanPrimitiveType, \"null\": booleanPrimitiveType },\r\n            [TokenType.lower]: { \"String\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"String\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"String\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"String\": booleanPrimitiveType }\r\n\r\n        };\r\n\r\n\r\n        this.addMethod(new Method(\"length\", new Parameterlist([]), intPrimitiveType,\r\n            (parameters) => { return (<string>parameters[0].value).length; }, false, false, \"Länge der Zeichenkette, d.h. Anzahl der Zeichen in der Zeichenkette.\"));\r\n        this.addMethod(new Method(\"charAt\", new Parameterlist([{ identifier: \"Position\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), charPrimitiveType,\r\n            (parameters) => { return (<string>parameters[0].value).charAt(<number>(parameters[1].value)); }, false, false, \"Zeichen an der gegebenen Position.\\n**Bem.: ** Position == 0 bedeutet das erste Zeichen in der Zeichenkette, Position == 1 das zweite usw. .\"));\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return <string>parameters[0].value == <string>(parameters[1].value); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die zwei Zeichenketten übereinstimmen (unter Berücksichtigung von Klein-/Großschreibung).\"));\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).localeCompare(<string>(parameters[1].value), 'de', { caseFirst: 'upper' }); }, false, false, \"Vergleicht den String mit dem übergebenen String. Gibt -1 zurück, falls ersterer im Alphabet vor letzterem steht, +1, falls umgekehrt und 0, falls beide Strings identisch sind.\"));\r\n        this.addMethod(new Method(\"compareToIgnoreCase\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).localeCompare(<string>(parameters[1].value), 'de', { sensitivity: \"accent\" }); }, false, false, \"Vergleicht den String mit dem übergebenen String. Gibt -1 zurück, falls ersterer im Alphabet vor letzterem steht, +1, falls umgekehrt und 0, falls beide Strings identisch sind.\"));\r\n        this.addMethod(new Method(\"equalsIgnoreCase\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).toLowerCase() == (<string>(parameters[1].value).toLowerCase()); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die zwei Zeichenketten übereinstimmen (**ohne** Berücksichtigung von Klein-/Großschreibung).\"));\r\n        this.addMethod(new Method(\"endsWith\", new Parameterlist([{ identifier: \"suffix\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).endsWith(<string>(parameters[1].value)); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die Zeichenkette mit der übergebenen Zeichenkette ( = suffix) endet. Klein-/Großschreibung wird dabei berücksichtigt!\"));\r\n        this.addMethod(new Method(\"startsWith\", new Parameterlist([{ identifier: \"präfix\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).startsWith(<string>(parameters[1].value)); }, false, false, \"Gibt genau dann **wahr** zurück, wenn die Zeichenkette mit der übergebenen Zeichenkette ( = präfix) beginnt. Klein-/Großschreibung wird dabei berücksichtigt!\"));\r\n        this.addMethod(new Method(\"toLowerCase\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).toLocaleLowerCase(); }, false, false, \"Gibt die Zeichenkette zurück, die sich ergibt, wenn man in der gegebenen Zeichnkette jeden Großbuchstaben durch den entsprechenden Kleinbuchstaben ersetzt.\\n**Bemerkung: ** Die Methode verändert die Zeichenkette selbst nicht.\"));\r\n        this.addMethod(new Method(\"toUpperCase\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).toLocaleUpperCase(); }, false, false, \"Gibt die Zeichenkette zurück, die sich ergibt, wenn man in der gegebenen Zeichnkette jeden Kleinbuchstaben durch den entsprechenden Großbuchstaben ersetzt.\\n**Bemerkung: ** Die Methode verändert die Zeichenkette selbst nicht.\"));\r\n        this.addMethod(new Method(\"substring\", new Parameterlist([{ identifier: \"beginIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).substring(<number>(parameters[1].value)); }, false, false, \"Gibt das hintere Ende der Zeichenkette ab **beginIndex** zurück. **beginIndex** == 1 bedeutet, dass die Zeichenkette ab dem 2.(!) Zeichen zurückgegeben wird. \"));\r\n        this.addMethod(new Method(\"substring\", new Parameterlist([{ identifier: \"beginIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        { identifier: \"endIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).substring(<number>(parameters[1].value), <number>(parameters[2].value)); }, false, false, \"Gibt die Teil-Zeichenkette von **beginIndex** bis **endIndex** zurück.\\n**Vorsicht: ** beginIndex und endIndex sind nullbasiert, d.h. beginIndex == 0 bedeutet die Position vor dem ersten Zeichen.\"));\r\n        this.addMethod(new Method(\"trim\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).trim(); }, false, false, \"Gibt die Zeichenkette zurück, die entsteht, wenn man am Anfang und Ende der Zeichenkette alle Leerzeichen, Tabs und Zeilenumbrüche entfernt.\"));\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([]), booleanPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)) == \"\"; }, false, false, \"Gibt genau dann wahr zurück, wenn die Zeichenkette leer ist.\\n**Warnung: ** Die Methode darf nicht mit dem '''null'''-Objekt aufgerufen werden!\"));\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).indexOf(<string>(parameters[1].value)); }, false, false, \"Gibt die erste Position zurück, an der **otherString** in der Zeichenkette gefunden wird.\"));\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"fromIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).indexOf(<string>(parameters[1].value), <number>(parameters[2].value)); }, false, false, \"Gibt die erste Position zurück, an der **otherString** in der Zeichenkette gefunden wird. Dabei wird erst bei fromIndex mit der Suche begonnen.\"));\r\n        this.addMethod(new Method(\"lastIndexOf\", new Parameterlist([{ identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false }]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).lastIndexOf(<string>(parameters[1].value)); }, false, false, \"Gibt die letzte Position zurück, bei der otherString in der Zeichenkette gefunden wird.\"));\r\n        this.addMethod(new Method(\"lastIndexOf\", new Parameterlist([\r\n            { identifier: \"otherString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"fromIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), intPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).lastIndexOf(<string>(parameters[1].value), <number>(parameters[2].value)); }, false, false, \"Gibt die letzte Position zurück, bei der otherString in der Zeichenkette gefunden wird. Dabei wird erst bei fromIndex - von rechts her beginnend - gesucht.\"));\r\n        this.addMethod(new Method(\"replace\", new Parameterlist([\r\n            { identifier: \"target\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"replacement\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => { return (<string>(parameters[0].value)).replace(<string>(parameters[1].value), <string>(parameters[2].value)); }, false, false, \"Ersetzt alle Vorkommen von **target** durch **replacement** und gibt die entstandene Zeichenkette zurück. Die Zeichenkette selbst wird nicht verändert.\"));\r\n        this.addMethod(new Method(\"replaceAll\", new Parameterlist([\r\n            { identifier: \"regex\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"replacement\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let pattern = <string>(parameters[1].value);\r\n                let regExp = new RegExp(pattern, 'g');\r\n\r\n                return (<string>(parameters[0].value)).replace(regExp, <string>(parameters[2].value));\r\n            }, false, false, \"Durchsucht den String mit dem regulären Ausdruck (regex) und ersetzt **alle** Fundstellen durch **replacement**.\"));\r\n        this.addMethod(new Method(\"replaceFirst\", new Parameterlist([\r\n            { identifier: \"regex\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n            { identifier: \"replacement\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let pattern = <string>(parameters[1].value);\r\n                let regExp = new RegExp(pattern, '');\r\n\r\n                return (<string>(parameters[0].value)).replace(regExp, <string>(parameters[2].value));\r\n            }, false, false, \"Durchsucht den String mit dem regulären Ausdruck (regex) und ersetzt **die erste** Fundstelle durch **replacement**.\"));\r\n        this.addMethod(new Method(\"split\", new Parameterlist([\r\n            { identifier: \"regex\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false },\r\n        ]), new ArrayType(stringPrimitiveType),\r\n            (parameters) => {\r\n                let pattern = <string>(parameters[1].value);\r\n                let regExp = new RegExp(pattern, '');\r\n\r\n                let strings = (<string>(parameters[0].value)).split(regExp);\r\n                let values: Value[] = [];\r\n                for (let s of strings) {\r\n                    values.push({ type: stringPrimitiveType, value: s });\r\n                }\r\n\r\n                return values;\r\n\r\n            }, false, false, \"Teilt die Zeichenkette an den Stellen, die durch den regulären Ausdruck (regex) definiert sind, in Teile auf. Die Fundstellen des regex werden dabei weggelassen. Gibt die Teile als String-Array zurück.\"));\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <string>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                if (secondOperand.type == stringPrimitiveType || secondOperand.type == charPrimitiveType) {\r\n                    return value + <string>(secondOperand.value);\r\n                } else if (secondOperand.type == booleanPrimitiveType) {\r\n                    return value + <boolean>(secondOperand.value);\r\n                } else {\r\n                    return value + <number>(secondOperand.value);\r\n                }\r\n\r\n            case TokenType.lower:\r\n                return value.localeCompare(<string>(secondOperand.value), 'de', { caseFirst: 'upper' }) < 0;\r\n                // return value < (<string>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value.localeCompare(<string>(secondOperand.value), 'de', { caseFirst: 'upper' }) > 0;\r\n                // return value > <string>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value.localeCompare(<string>(secondOperand.value), 'de', { caseFirst: 'upper' }) <= 0;\r\n                // return value <= <string>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value.localeCompare(<string>(secondOperand.value), 'de', { caseFirst: 'upper' }) >= 0;\r\n                // return value >= <string>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <string>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <string>(secondOperand.value);\r\n\r\n            case TokenType.keywordInstanceof:\r\n                return super.compute(operation, firstOperand, secondOperand);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return '\"' + <string>value.value + '\"';\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class CharPrimitiveType extends PrimitiveType {\r\n\r\n    init() {\r\n\r\n        this.initialValue = \"\\u0000\";\r\n\r\n        this.identifier = \"char\";\r\n\r\n        this.description = \"ein Zeichen\"\r\n\r\n        this.operationTable = {\r\n            [TokenType.plus]: { \"String\": stringPrimitiveType, \"char\": stringPrimitiveType },\r\n            [TokenType.equal]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.notEqual]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.lower]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.greater]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.lowerOrEqual]: { \"char\": booleanPrimitiveType },\r\n            [TokenType.greaterOrEqual]: { \"char\": booleanPrimitiveType }\r\n\r\n        };\r\n\r\n        // this.canCastTolist = [intPrimitiveType, floatPrimitiveType, doublePrimitiveType, stringPrimitiveType];\r\n        this.canCastToMap = {\r\n            \"int\": { automatic: true, needsStatement: true },\r\n            \"float\": { automatic: true, needsStatement: true },\r\n            \"double\": { automatic: true, needsStatement: true },\r\n            \"String\": { automatic: true, needsStatement: false },\r\n            \"char\": { automatic: true, needsStatement: false },\r\n            \"Character\": { automatic: true, needsStatement: false },\r\n        }\r\n\r\n    }\r\n\r\n    public toTokenType(): TokenType {\r\n        return TokenType.charConstant;\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == stringPrimitiveType) {\r\n            return value;\r\n        }\r\n\r\n        if (type == intPrimitiveType || type == floatPrimitiveType || type == doublePrimitiveType) {\r\n            return {\r\n                type: type,\r\n                value: (<string>value.value).charCodeAt(0)\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public compute(operation: TokenType, firstOperand: Value, secondOperand?: Value): any {\r\n\r\n        let value = <string>(firstOperand.value);\r\n\r\n        switch (operation) {\r\n            case TokenType.plus:\r\n                return value + <string>(secondOperand.value);\r\n\r\n            case TokenType.lower:\r\n                return value < (<string>(secondOperand.value));\r\n\r\n            case TokenType.greater:\r\n                return value > <string>(secondOperand.value);\r\n\r\n            case TokenType.lowerOrEqual:\r\n                return value <= <string>(secondOperand.value);\r\n\r\n            case TokenType.greaterOrEqual:\r\n                return value >= <string>(secondOperand.value);\r\n\r\n            case TokenType.equal:\r\n                return value == <string>(secondOperand.value);\r\n\r\n            case TokenType.notEqual:\r\n                return value != <string>(secondOperand.value);\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value): string {\r\n        return \"'\" + <string>value.value + \"'\";\r\n    }\r\n\r\n\r\n}\r\n\r\nexport var voidPrimitiveType = new VoidPrimitiveType();\r\nexport var intPrimitiveType = new IntPrimitiveType();\r\nexport var floatPrimitiveType = new FloatPrimitiveType();\r\nexport var doublePrimitiveType = new DoublePrimitiveType();\r\nexport var booleanPrimitiveType = new BooleanPrimitiveType();\r\nsetBooleanPrimitiveTypeCopy(booleanPrimitiveType);\r\nexport var objectType = new ObjectClass(null);\r\nexport var stringPrimitiveType = new StringPrimitiveType(objectType);\r\nexport var charPrimitiveType = new CharPrimitiveType();\r\nexport var nullType = new NullType();\r\nexport var varType = new VarType();\r\n\r\nexport var IntegerType = new IntegerClass(objectType);\r\nexport var FloatType = new FloatClass(objectType);\r\nexport var DoubleType = new DoubleClass(objectType);\r\nexport var CharacterType = new CharacterClass(objectType);\r\nexport var BooleanType = new BooleanClass(objectType);\r\n\r\nexport var TokenTypeToDataTypeMap: { [tt: number]: Type } = {\r\n    [TokenType.integerConstant]: intPrimitiveType,\r\n    [TokenType.floatingPointConstant]: floatPrimitiveType,\r\n    [TokenType.booleanConstant]: booleanPrimitiveType,\r\n    [TokenType.stringConstant]: stringPrimitiveType,\r\n    [TokenType.charConstant]: charPrimitiveType,\r\n    [TokenType.keywordNull]: nullType\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\nexport type IteratorKind = \"descending\" | \"ascending\";\r\n\r\nexport class ListIteratorImplClass extends Klass {\r\n\r\n    public static getIterator(listHelper: ListHelper, interpreter: Interpreter, module: Module, kind: IteratorKind): Value {\r\n\r\n        let klass = <Klass>module.typeStore.getType(\"ListIteratorImpl\");\r\n        let rt: RuntimeObject = new RuntimeObject(klass);\r\n        rt.intrinsicData[\"IteratorHelper\"] = new IteratorHelper(listHelper, interpreter, kind);\r\n\r\n        return {\r\n            value: rt,\r\n            type: klass\r\n        }\r\n    }\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"ListIteratorImpl\", module);\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iteratorInterface = (<Interface>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(iteratorInterface);\r\n\r\n        this.addMethod(new Method(\"hasNext\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: IteratorHelper = o.intrinsicData[\"IteratorHelper\"];\r\n\r\n                return ah.hasNext();\r\n\r\n            },\r\n            false, false, \"Gibt genau dann true zurück, wenn sich noch mindestens ein weiteres Element in der Collection befindet.\"));\r\n\r\n        this.addMethod(new Method(\"next\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: IteratorHelper = o.intrinsicData[\"IteratorHelper\"];\r\n\r\n                return ah.next();\r\n\r\n            },\r\n            false, false, \"Gibt das nächste Element der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: IteratorHelper = o.intrinsicData[\"IteratorHelper\"];\r\n\r\n                return ah.remove();\r\n\r\n            },\r\n            false, false, \"Löscht das letzte durch next zurückgegebene Objekt. Diese Methode beeinflusst nicht, welches Element als nächstes durch next zurückgegeben wird.\"));\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nclass IteratorHelper {\r\n\r\n    nextPos: number;\r\n\r\n    constructor(private listHelper: ListHelper, private interpreter: Interpreter, private kind: IteratorKind) {\r\n        switch (kind) {\r\n            case \"ascending\": this.nextPos = 0; break;\r\n            case \"descending\": this.nextPos = listHelper.objectArray.length - 1; break;\r\n        }\r\n    }\r\n\r\n    remove() {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos == 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos > this.listHelper.objectArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.listHelper.valueArray.splice(this.nextPos - 1, 1);\r\n                    this.listHelper.objectArray.splice(this.nextPos - 1, 1);\r\n                    this.nextPos -= 1;\r\n                }\r\n                break;\r\n            case \"descending\":\r\n                if (this.nextPos == this.listHelper.objectArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.listHelper.valueArray.splice(this.nextPos + 1, 1);\r\n                    this.listHelper.objectArray.splice(this.nextPos + 1, 1);\r\n                    this.nextPos += 1;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(): any {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos > this.listHelper.objectArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.listHelper.objectArray[this.nextPos++].value;\r\n            case \"descending\":\r\n                if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.listHelper.objectArray[this.nextPos--].value;\r\n        }\r\n    }\r\n\r\n    hasNext(): boolean {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                return this.nextPos < this.listHelper.objectArray.length;\r\n            case \"descending\":\r\n                return this.nextPos >= 0;\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType, objectType, StringPrimitiveType, DoubleType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value, PrimitiveType, getTypeIdentifier } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { TokenType, TextPosition } from \"../../compiler/lexer/Token.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { ListIteratorImplClass } from \"./ListIteratorImpl.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { getTypeFromValue } from \"../../compiler/types/TypeHelper.js\";\r\n\r\nexport class ArrayListClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"ArrayList\", module, \"Liste mit Zugriff auf das n-te Objekt in konstanter Zeit, Einfügen in konstanter Zeit und Suchen in linearer Zeit\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let collectionInterface = (<Interface>module.typeStore.getType(\"Collection\"));\r\n\r\n        let typeA: Klass = (<Klass>objectType).clone();\r\n        typeA.identifier = \"A\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvA: TypeVariable = {\r\n            identifier: \"A\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvA);\r\n\r\n        let listInterface = (<Interface>module.typeStore.getType(\"List\")).clone();\r\n        listInterface.typeVariables = [tvA];\r\n\r\n        this.implements.push(listInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvA];\r\n\r\n        this.addMethod(new Method(\"ArrayList\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let ah = new ListHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = ah;\r\n\r\n            }, false, false, 'Instanziert eine neue ArrayList', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, true, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let r: Value = parameters[2];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r, index);\r\n\r\n            }, false, false, \"Fügt das Element an der Position index der Liste ein. Tipp: Das erste Element der Liste hat index == 0.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n                \r\n                return ah.get(index)?.value;\r\n\r\n            }, false, false, \"Gibt das i-te Element der Liste zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                ah.remove(index);\r\n\r\n                return null;\r\n\r\n            }, true, false, \"Entfernt das Element an der Stelle index. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.indexOf(object);\r\n\r\n            }, true, false, \"Gibt den Index des Elements o zurück. Gibt -1 zurück, wenn die Liste das Element o nicht enthält. WICHTIG: Das erste Element hat den Index 0, das letzte den Index size() - 1. \"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: collectionInterface, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addAll(object);\r\n\r\n            },\r\n            true, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            true, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            true, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            true, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            true, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            true, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class ListHelper {\r\n\r\n    valueArray: Value[] = [];\r\n    objectArray: any[] = []; // wird mitgeführt, um schnelle indexOf-Operationen zu ermöglichen\r\n\r\n    constructor(private runtimeObject: RuntimeObject, public interpreter: Interpreter, private module: Module) {\r\n    }\r\n\r\n    allElementsPrimitive(): boolean {\r\n        for (let v of this.valueArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n                break;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    to_String(): any {\r\n\r\n        if (this.allElementsPrimitive()) {\r\n            return \"[\" + this.objectArray.map(o => \"\" + o).join(\", \") + \"]\";\r\n        }\r\n\r\n        let position: TextPosition = {\r\n            line: 1,\r\n            column: 1,\r\n            length: 1\r\n        }\r\n\r\n        let statements: Statement[] = [\r\n            {\r\n                type: TokenType.noOp,\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n            {\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \"[\",\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n        ];\r\n\r\n        let toStringParameters = new Parameterlist([]);\r\n\r\n        for (let i = 0; i < this.valueArray.length; i++) {\r\n            let value = this.valueArray[i];\r\n            if (value.value == null || value.type instanceof PrimitiveType || value.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: value.value == null ? \"null\" : value.type.castTo(value, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: value.type,\r\n                    value: value.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>value.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            if (i < this.valueArray.length - 1) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: \", \",\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n                statements.push({\r\n                    type: TokenType.binaryOp,\r\n                    operator: TokenType.plus,\r\n                    leftType: stringPrimitiveType,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        statements.push({\r\n            type: TokenType.pushConstant,\r\n            dataType: stringPrimitiveType,\r\n            value: \"]\",\r\n            position: position,\r\n            stepFinished: false\r\n        });\r\n\r\n        statements.push({\r\n            type: TokenType.binaryOp,\r\n            operator: TokenType.plus,\r\n            leftType: stringPrimitiveType,\r\n            stepFinished: false,\r\n            position: position\r\n        });\r\n\r\n        // statements.push({\r\n        //     type: TokenType.binaryOp,\r\n        //     operator: TokenType.plus,\r\n        //     leftType: stringPrimitiveType,\r\n        //     stepFinished: false,\r\n        //     position: position\r\n        // });\r\n\r\n        statements.push({\r\n            type: TokenType.return,\r\n            copyReturnValueToStackframePos0: true,\r\n            leaveThisObjectOnStack: false,\r\n            stepFinished: false,\r\n            position: position,\r\n            methodWasInjected: true\r\n        });\r\n\r\n        let program: Program = {\r\n            module: this.module,\r\n            statements: statements,\r\n            labelManager: null\r\n        }\r\n\r\n        let method: Method = new Method(\"toString\", new Parameterlist([]), stringPrimitiveType, program, false, false);\r\n        this.interpreter.runTimer(method, [], () => {}, true);\r\n\r\n        return \"\";\r\n    }\r\n\r\n    addAll(object: RuntimeObject): boolean {\r\n\r\n        if(object.intrinsicData[\"ListHelper\"] instanceof ListHelper){\r\n            let ah: ListHelper = object.intrinsicData[\"ListHelper\"];\r\n            if (ah != null) {\r\n                this.valueArray = this.valueArray.concat(ah.valueArray.map(v => {return {type: v.type, value: v.value}}));\r\n                this.objectArray = this.objectArray.concat(ah.objectArray);\r\n            }\r\n            return true;\r\n        }\r\n\r\n        let getIteratorMethod = object.class.getMethod(\"iterator\", new Parameterlist([]));\r\n        if(getIteratorMethod == null){\r\n            this.interpreter.throwException(\"Der an die Methode addAll übergebene Paramter besitzt keine Methode iterator().\");\r\n            return false;\r\n        }\r\n\r\n        if(getIteratorMethod.invoke){\r\n\r\n            let iterator: RuntimeObject = getIteratorMethod.invoke([{value: object, type: object.class}]);\r\n            let nextMethod = iterator.class.getMethod(\"next\", new Parameterlist([]));\r\n            let hasNextMethod = iterator.class.getMethod(\"hasNext\", new Parameterlist([]));\r\n            let type = nextMethod.returnType;\r\n\r\n            let iteratorAsValue: Value = {value: iterator, type: iterator.class};\r\n\r\n            while(hasNextMethod.invoke([iteratorAsValue])){\r\n                let obj: any = nextMethod.invoke([iteratorAsValue]);\r\n                this.objectArray.push(obj);\r\n                this.valueArray.push({\r\n                    value: obj,\r\n                    type: getTypeFromValue(obj)\r\n                })\r\n            }\r\n\r\n            return;\r\n        } else {\r\n            let iteratorWithError = this.execute(getIteratorMethod, [{value: object, type: object.class}]);            \r\n            if(iteratorWithError.error != null){this.interpreter.throwException(\"Fehler beim holen des Iterators.\"); return false;}\r\n            let iterator = iteratorWithError.value.value;\r\n\r\n            let nextMethod = iterator.class.getMethod(\"next\", new Parameterlist([]));\r\n            let hasNextMethod = iterator.class.getMethod(\"hasNext\", new Parameterlist([]));\r\n            let type = nextMethod.returnType;\r\n            let iteratorAsValue: Value = {value: iterator, type: iterator.class};\r\n\r\n            while(true){\r\n                let hasNext = this.execute(hasNextMethod, [iteratorAsValue]);\r\n                if(hasNext.error != null){this.interpreter.throwException(\"Fehler beim Ausführen der hasNext-Methode\"); return false;}\r\n                if(hasNext.value.value != true) break;\r\n                let objWithError = this.execute(nextMethod, [iteratorAsValue]);\r\n                if(objWithError.error != null){this.interpreter.throwException(\"Fehler beim Ausführen der next-Methode\"); return false;}\r\n                let obj = objWithError.value.value;\r\n                this.objectArray.push(obj);\r\n                this.valueArray.push({value: obj, type: type});\r\n            }\r\n\r\n            return true;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    execute(method: Method, parameters: Value[]): {error: string, value: Value} {\r\n        if(method.invoke){\r\n            return {value: {value: method.invoke([]), type: method.returnType}, error: null};\r\n        } else {\r\n            return this.interpreter.executeImmediatelyInNewStackframe(method.program, parameters);\r\n        }\r\n    }\r\n\r\n    get(index: number): Value {\r\n        if (index >= 0 && index < this.valueArray.length) {\r\n            return this.valueArray[index];\r\n        }\r\n        this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n        return null;\r\n    }\r\n\r\n    remove(index: number): Value {\r\n\r\n        if (index >= 0 && index < this.valueArray.length) {\r\n            this.valueArray.splice(index, 1);\r\n            this.objectArray.splice(index, 1);\r\n            return null;\r\n        }\r\n\r\n        this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n\r\n        return null;\r\n    }\r\n\r\n    add(r: Value, index?): boolean {\r\n        if(index == null){\r\n            this.valueArray.push({type: r.type, value: r.value});\r\n            this.objectArray.push(r.value);\r\n        } else {\r\n            if(index <= this.objectArray.length && index >= 0){\r\n                this.valueArray.splice(index, 0, {type: r.type, value: r.value});\r\n                this.objectArray.splice(index, 0, r.value);\r\n            } else {\r\n                this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    pop(): any {\r\n        if (this.objectArray.length == 0) {\r\n            this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n            return null;\r\n        } else {\r\n            this.valueArray.pop();\r\n            return this.objectArray.pop();\r\n        }\r\n    }\r\n\r\n    peek(): any {\r\n        if (this.objectArray.length == 0) {\r\n            this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n            return null;\r\n        } else {\r\n            return this.objectArray[this.objectArray.length - 1];\r\n        }\r\n    }\r\n\r\n    indexOf(o: Value): number {\r\n        return this.objectArray.indexOf(o.value);\r\n    }\r\n\r\n    size(): number {\r\n        return this.objectArray.length;\r\n    }\r\n\r\n    isEmpty(): boolean {\r\n        return this.valueArray.length == 0;\r\n    }\r\n\r\n    removeObject(object: Value) {\r\n        let index = this.objectArray.indexOf(object.value);\r\n        if (index >= 0) {\r\n            this.objectArray.splice(index, 1);\r\n            this.valueArray.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    contains(object: Value): any {\r\n        return this.objectArray.indexOf(object.value) >= 0;\r\n    }\r\n\r\n    clear() {\r\n        this.valueArray = [];\r\n        this.objectArray = [];\r\n    }\r\n\r\n    peek_last_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            return this.objectArray[this.objectArray.length - 1];\r\n        }\r\n    }\r\n    peek_first_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            return this.objectArray[0];\r\n        }\r\n    }\r\n    \r\n    removeLast_or_error(){\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            this.valueArray.pop();\r\n            return this.objectArray.pop();\r\n        }\r\n    };\r\n\r\n    addLast(object: Value) {\r\n        this.valueArray.push({type: object.type, value: object.value});\r\n        this.objectArray.push(object.value);\r\n        return true;\r\n    }\r\n    addFirst(object: Value): any {\r\n        this.valueArray.splice(0, 0, {type: object.type, value: object.value});\r\n        this.objectArray.splice(0, 0, object.value);\r\n        return true;\r\n    }\r\n    removeFirstOccurrence(object: Value): boolean {\r\n        let index = this.objectArray.indexOf(object.value);\r\n        if(index >= 0){\r\n            this.valueArray.splice(index, 1);\r\n            this.objectArray.splice(index, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    peek_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            return this.objectArray[this.objectArray.length - 1];\r\n        }\r\n    }\r\n\r\n    poll_or_null(): any {\r\n        if (this.objectArray.length == 0) {\r\n            return null;\r\n        } else {\r\n            this.valueArray.pop();\r\n            return this.objectArray.pop();\r\n        }\r\n    }\r\n\r\n    removeFirst_or_error(): any {\r\n        if(this.objectArray.length == 0){\r\n            this.interpreter.throwException(\"Der ArrayList-Index ist außerhalb des Intervalls von 0 bis \" + (this.valueArray.length - 1) + \". \")\r\n        } else {\r\n            let object = this.objectArray[0];\r\n            this.objectArray.splice(0, 1);\r\n            this.valueArray.splice(0, 1);\r\n            return object;\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { booleanPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"./PrimitiveTypes.js\";\r\n\r\nexport function getTypeFromValue(value: any){\r\n    if(typeof value == \"string\"){\r\n        return stringPrimitiveType;\r\n    } else if(typeof value == \"number\"){\r\n        if(Number.isInteger(value)) return intPrimitiveType;\r\n        return floatPrimitiveType;\r\n    } else if(typeof value == \"boolean\"){\r\n        return booleanPrimitiveType;\r\n    } else if(value instanceof RuntimeObject){\r\n        return value.class;\r\n    }\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class CollectionClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"Collection\", module, \"Interface für Listen, Maps, Sets usw. mit Methoden zum Einfügen von Objekten, Zugriff auf Objekte und zur Ermittlung der Anzahl der Objekte\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeE\r\n        };\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iterableInterface = (<Interface>module.typeStore.getType(\"Iterable\")).clone();\r\n        iterableInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(iterableInterface);\r\n\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt der Collection ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Collection dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        // TODO: Implement\r\n        // this.addMethod(new Method(\"removeAll\", new Parameterlist([\r\n        //     { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), booleanPrimitiveType,\r\n        //     null,  // no implementation!\r\n        //     true, false, \"Löscht alle Elemente aus dieser Collection, die in c enthalten sind.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n    \r\n    }\r\n\r\n}\r\n\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class IterableClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"Iterable\", module, \"Interface mit Funktionalität zum iterieren (d.h. Durchlaufen aller Elemente)\");\r\n\r\n        let typeE: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeE\r\n        };\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class IteratorClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"Iterator\", module);\r\n\r\n        let typeA: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeA.identifier = \"E\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n\r\n        this.addMethod(new Method(\"hasNext\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn sich noch mindestens ein weiteres Element in der Collection befindet.\"));\r\n\r\n        this.addMethod(new Method(\"next\", new Parameterlist([\r\n            // { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeA,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das nächste Element der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            // { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Löscht das letzte durch next zurückgegebene Objekt. Diese Methode beeinflusst nicht, welches Element als nächstes durch next zurückgegeben wird.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class ListClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        \r\n        super(\"List\", module, \"Interface mit Methoden einer Liste (d.h. Anfügen von Elementen nur am Ende)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: {line: 1, column: 1, length: 1},\r\n            scopeTo: {line: 1, column: 1, length: 1},\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let collectionInterface = (<Interface>module.typeStore.getType(\"Collection\")).clone();\r\n        collectionInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(collectionInterface);\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element der Liste an der Stelle index zurück. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element an der Stelle index. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n            this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt den Index des Elements o zurück. Gibt -1 zurück, wenn die Liste das Element o nicht enthält. WICHTIG: Das erste Element hat den Index 0, das letzte den Index size() - 1. \"));\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\nexport class StackClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Stack\", module, \"Stack (Stapelspeicher)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n        let vectorType = <Klass>module.typeStore.getType(\"Vector\");\r\n\r\n        this.setBaseClass(vectorType);\r\n        this.typeVariables = vectorType.typeVariables;\r\n        let typeE = this.typeVariables[0].type;\r\n\r\n        this.addMethod(new Method(\"push\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                ah.add(r);\r\n\r\n                return r.value;\r\n\r\n            }, false, false, \"Pushed ein Element oben auf den Stack. Gibt das gerade gepushte Element zurück.\"));\r\n\r\n        this.addMethod(new Method(\"pop\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.pop();\r\n\r\n            }, false, false, \"Nimmt das oberste Element vom Stack und gibt es zurück.\"));\r\n\r\n            this.addMethod(new Method(\"peek\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek();\r\n\r\n            }, false, false, \"Gibt das oberste Element des Stacks zurück, nimmt es aber nicht vom Stack herunter.\"));\r\n\r\n        this.addMethod(new Method(\"empty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            true, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"search\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                let index = ah.indexOf(r);\r\n                return index == -1 ? index : ah.objectArray.length - index;\r\n\r\n            },\r\n            true, false, \"Gibt die Position des Objekts auf dem Stack zurück. Dabei hat das oberste Element den Index 1, das nächstunterste den Index 2 usw. . Falls sich das Objekt nicht auf dem Stack befindet, wird -1 zurückgegeben.\"));\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, TypeVariable, Interface } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\nimport { ListIteratorImplClass } from \"./ListIteratorImpl.js\";\r\n\r\nexport class VectorClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Vector\", module, \"Liste mit Zugriff auf das n-te Element in konstanter Zeit\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeA: Klass = (<Klass>objectType).clone();\r\n        typeA.identifier = \"A\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvA: TypeVariable = {\r\n            identifier: \"A\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvA);\r\n\r\n        let listInterface = (<Interface>module.typeStore.getType(\"List\")).clone();\r\n        listInterface.typeVariables = [tvA];\r\n\r\n        this.implements.push(listInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvA];\r\n\r\n        this.addMethod(new Method(\"Vector\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let ah = new ListHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = ah;\r\n\r\n            }, false, false, 'Instanziert ein neues Vector-Objekt', true));\r\n\r\n            this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n            ]), iteratorType,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n    \r\n                    return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n    \r\n                }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n    \r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.get(index).value;\r\n\r\n            }, false, false, \"Gibt das i-te Element der Liste zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                ah.remove(index).value;\r\n\r\n                return null;\r\n\r\n            }, false, false, \"Entfernt das Element an der Stelle index. WICHTIG: Das erste Element hat den Index 0. Es ist 0 <= index < size()\"));\r\n\r\n        this.addMethod(new Method(\"indexOf\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.indexOf(object);\r\n\r\n            }, false, false, \"Gibt den Index des Elements o zurück. Gibt -1 zurück, wenn die Liste das Element o nicht enthält. WICHTIG: Das erste Element hat den Index 0, das letzte den Index size() - 1. \"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class SetClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Set\", module, \"Interface mit Methoden eines Set, d.h. einer Menge, die jedes Element maximal einmal enthält\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = (<Klass>module.typeStore.getType(\"Object\")).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let collectionInterface = (<Interface>module.typeStore.getType(\"Collection\")).clone();\r\n        collectionInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(collectionInterface);\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: objectType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn das Set das Objekt o enthält.\"));\r\n\r\n        this.addMethod(new Method(\"containsAll\", new Parameterlist([\r\n            { identifier: \"c\", type: collectionInterface, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn das Set alle Elemente der übergebenen Collection enthält.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SetHelper } from \"./SetHelper.js\";\r\n\r\nexport type IteratorKind = \"descending\" | \"ascending\";\r\n\r\nexport class SetIteratorImplClass extends Klass {\r\n\r\n    public static getIterator(MapHelper: SetHelper, interpreter: Interpreter, module: Module, kind: IteratorKind): Value {\r\n\r\n        let klass = <Klass>module.typeStore.getType(\"SetIteratorImpl\");\r\n        let rt: RuntimeObject = new RuntimeObject(klass);\r\n        rt.intrinsicData[\"SetIteratorHelper\"] = new SetIteratorHelper(MapHelper, interpreter, kind);\r\n\r\n        return {\r\n            value: rt,\r\n            type: klass\r\n        }\r\n    }\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"SetIteratorImpl\", module);\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let iteratorInterface = (<Interface>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(iteratorInterface);\r\n\r\n        this.addMethod(new Method(\"hasNext\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetIteratorHelper = o.intrinsicData[\"SetIteratorHelper\"];\r\n\r\n                return ah.hasNext();\r\n\r\n            },\r\n            false, false, \"Gibt genau dann true zurück, wenn sich noch mindestens ein weiteres Element in der Collection befindet.\"));\r\n\r\n        this.addMethod(new Method(\"next\", new Parameterlist([\r\n        ]), typeE,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetIteratorHelper = o.intrinsicData[\"SetIteratorHelper\"];\r\n\r\n                return ah.next();\r\n\r\n            },\r\n            false, false, \"Gibt das nächste Element der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetIteratorHelper = o.intrinsicData[\"SetIteratorHelper\"];\r\n\r\n                return ah.remove();\r\n\r\n            },\r\n            false, false, \"Löscht das letzte durch next zurückgegebene Objekt. Diese Methode beeinflusst nicht, welches Element als nächstes durch next zurückgegeben wird.\"));\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\nclass SetIteratorHelper {\r\n\r\n    nextPos: number;\r\n\r\n    constructor(private MapHelper: SetHelper, private interpreter: Interpreter, private kind: IteratorKind) {\r\n        switch (kind) {\r\n            case \"ascending\": this.nextPos = 0; break;\r\n            case \"descending\": this.nextPos = MapHelper.valueArray.length - 1; break;\r\n        }\r\n    }\r\n\r\n    remove() {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos == 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos > this.MapHelper.valueArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.MapHelper.removeObject(this.MapHelper.valueArray[this.nextPos - 1].value);\r\n                    this.nextPos -= 1;\r\n                }\r\n                break;\r\n            case \"descending\":\r\n                if (this.nextPos == this.MapHelper.valueArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl noch nie next() aufgerufen wurde.\")\r\n                } else if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode remove() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                } else {\r\n                    this.MapHelper.removeObject(this.MapHelper.valueArray[this.nextPos + 1].value);\r\n                    this.nextPos += 1;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    next(): any {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                if (this.nextPos > this.MapHelper.valueArray.length - 1) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.MapHelper.valueArray[this.nextPos++].value;\r\n            case \"descending\":\r\n                if (this.nextPos < 0) {\r\n                    this.interpreter.throwException(\"Die Methode next() des Iterators wurde aufgerufen, obwohl das letzte Element schon beim vorherigen Aufruf zurückgegeben worden war.\")\r\n                    return null;\r\n                }\r\n                return this.MapHelper.valueArray[this.nextPos--].value;\r\n        }\r\n    }\r\n\r\n    hasNext(): boolean {\r\n        switch (this.kind) {\r\n            case \"ascending\":\r\n                return this.nextPos < this.MapHelper.valueArray.length;\r\n            case \"descending\":\r\n                return this.nextPos >= 0;\r\n        }\r\n    }\r\n\r\n\r\n\r\n}","import { TextPosition, TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { booleanPrimitiveType, stringPrimitiveType, StringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, PrimitiveType, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\n\r\nexport class SetHelper {\r\n\r\n    valueArray: Value[] = [];\r\n\r\n    map: Map<any, boolean> = new Map(); // Maps key objects to index in keyArray/valueArray\r\n\r\n    constructor(private runtimeObject: RuntimeObject, public interpreter: Interpreter, private module: Module) {\r\n    }\r\n\r\n    allElementsPrimitive(): boolean {\r\n        for (let v of this.valueArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    to_String(): any {\r\n\r\n        if (this.allElementsPrimitive()) {\r\n            return \"[\" + this.valueArray.map(o => \"\" + o.value).join(\", \") + \"]\";\r\n        }\r\n\r\n        let position: TextPosition = {\r\n            line: 1,\r\n            column: 1,\r\n            length: 1\r\n        }\r\n\r\n        let statements: Statement[] = [\r\n            {\r\n                type: TokenType.noOp,\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n            {\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \"[\",\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n        ];\r\n\r\n        let toStringParameters = new Parameterlist([]);\r\n\r\n        for (let i = 0; i < this.valueArray.length; i++) {\r\n\r\n            let key = this.valueArray[i];\r\n            if (key.type instanceof PrimitiveType || key.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: key.type.castTo(key, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: key.type,\r\n                    value: key.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>key.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            if (i < this.valueArray.length - 1) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: \", \",\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n                statements.push({\r\n                    type: TokenType.binaryOp,\r\n                    operator: TokenType.plus,\r\n                    leftType: stringPrimitiveType,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        statements.push({\r\n            type: TokenType.pushConstant,\r\n            dataType: stringPrimitiveType,\r\n            value: \"]\",\r\n            position: position,\r\n            stepFinished: false\r\n        });\r\n\r\n        statements.push({\r\n            type: TokenType.binaryOp,\r\n            operator: TokenType.plus,\r\n            leftType: stringPrimitiveType,\r\n            stepFinished: false,\r\n            position: position\r\n        });\r\n\r\n        // statements.push({\r\n        //     type: TokenType.binaryOp,\r\n        //     operator: TokenType.plus,\r\n        //     leftType: stringPrimitiveType,\r\n        //     stepFinished: false,\r\n        //     position: position\r\n        // });\r\n\r\n        statements.push({\r\n            type: TokenType.return,\r\n            copyReturnValueToStackframePos0: true,\r\n            leaveThisObjectOnStack: false,\r\n            stepFinished: false,\r\n            position: position,\r\n            methodWasInjected: true\r\n        });\r\n\r\n        let program: Program = {\r\n            module: this.module,\r\n            statements: statements,\r\n            labelManager: null\r\n        }\r\n\r\n        let method: Method = new Method(\"toString\", new Parameterlist([]), stringPrimitiveType, program, false, false);\r\n        this.interpreter.runTimer(method, [], () => console.log(\"List.toString fertig!\"), true)\r\n\r\n        return \"\";\r\n    }\r\n\r\n    // Only for Set\r\n    adAll(object: RuntimeObject): boolean {\r\n\r\n        let ret: boolean = false;\r\n        let ah: SetHelper | ListHelper = object.intrinsicData[\"ListHelper\"];\r\n        if (ah != null) {\r\n            for (let value of ah.valueArray) {\r\n                ret = ret || this.addToSet(value);\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    addToSet(r: Value): boolean {\r\n        if (this.contains(r)) return false;\r\n\r\n        this.valueArray.push(r);\r\n        this.map.set(r.value, true);\r\n        return true;\r\n    }\r\n\r\n    size(): number {\r\n        return this.valueArray.length;\r\n    }\r\n\r\n    isEmpty(): boolean {\r\n        return this.valueArray.length == 0;\r\n    }\r\n\r\n    removeObject(object: Value) {\r\n\r\n        if(this.map.get(object.value) == null) return false;\r\n\r\n        for(let i = 0; i < this.valueArray.length; i++){\r\n            if(this.valueArray[i].value == object.value){\r\n                this.valueArray.splice(i, 1);\r\n            }\r\n        }\r\n\r\n        this.map.delete(object.value);\r\n    }\r\n\r\n    contains(object: Value): any {\r\n        return this.map.get(object.value) != null;\r\n    }\r\n\r\n    clear() {\r\n        this.valueArray = [];\r\n        this.map.clear();\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SetIteratorImplClass } from \"./SetIteratorImpl.js\";\r\nimport { SetHelper } from \"./SetHelper.js\";\r\n\r\nexport class HashSetClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"HashSet\", module, \"Set mit Zugriffszeit proportional zu log(Anzahl der Elemente)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let setInterface = (<Interface>module.typeStore.getType(\"Set\")).clone();\r\n        setInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(setInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n        this.addMethod(new Method(\"HashSet\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let mh = new SetHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = mh;\r\n\r\n            }, false, false, 'Instanziert ein neues HashSet', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return SetIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addToSet(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.adAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SetIteratorImplClass } from \"./SetIteratorImpl.js\";\r\nimport { SetHelper } from \"./SetHelper.js\";\r\n\r\nexport class LinkedHashSetClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"LinkedHashSet\", module, \"Ein LinkedHashSet speichert jedes Element nur genau ein Mal.\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeE: Klass = (<Klass>objectType).clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let setInterface = (<Interface>module.typeStore.getType(\"Set\")).clone();\r\n        setInterface.typeVariables = [tvE];\r\n\r\n        this.implements.push(setInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n        this.addMethod(new Method(\"LinkedHashSet\", new Parameterlist([\r\n            // { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let mh = new SetHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"MapHelper\"] = mh;\r\n\r\n            }, false, false, 'Instanziert ein neues LinkedHashSet', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return SetIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addToSet(r);\r\n\r\n            }, false, false, \"Fügt der Liste ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.adAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: SetHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class QueueClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Queue\", module);\r\n\r\n        let objectType = <Klass>module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = objectType.clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let collectionInterface = (<Interface>module.typeStore.getType(\"Collection\")).clone();\r\n        collectionInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(collectionInterface);\r\n\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"poll\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Gibt null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peek\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Kopf der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class DequeClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Deque\", module, \"Interface für Liste mit zweiseitigem Zugriff (insbesondere Anfügen an beiden Enden)\");\r\n\r\n        let objectType = <Klass>module.typeStore.getType(\"Object\");\r\n\r\n        let typeE: Klass = objectType.clone();\r\n        typeE.identifier = \"E\";\r\n        typeE.isTypeVariable = true;\r\n\r\n        let tvE: TypeVariable = {\r\n            identifier: \"E\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeE\r\n        };\r\n\r\n        this.typeVariables.push(tvE);\r\n\r\n        let QueueInterface = (<Interface>module.typeStore.getType(\"Queue\")).clone();\r\n        QueueInterface.typeVariables = [tvE];\r\n\r\n        this.extends.push(QueueInterface);\r\n\r\n\r\n        this.addMethod(new Method(\"removeFirstOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Löscht das Erste Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"removeLastOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Löscht das Letzte Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"addFirst\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt das Element am Anfang der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"addLast\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"removeFirst\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Anfang der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"removeLast\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt das Element am Ende der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekFirst\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Anfang der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekLast\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Ende der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"push\", new Parameterlist([\r\n            { identifier: \"element\", type: typeE, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"pop\", new Parameterlist([\r\n        ]), typeE,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt das Element am Ende der Liste zurück und entfernt es von der Liste. Erzeugt einen Fehler, wenn die Liste leer ist.\"));\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvE];\r\n\r\n        this.addMethod(new Method(\"descendingIterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück, der die Liste in umgekehrter Reihenfolge (Ende -> Anfang) durchläuft.\"));\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType, objectType, StringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value, PrimitiveType } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { TokenType, TextPosition } from \"../../compiler/lexer/Token.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { ListIteratorImplClass } from \"./ListIteratorImpl.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\nexport class LinkedListClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"LinkedList\", module, \"Verkettete Liste\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeA: Klass = (<Klass>objectType).clone();\r\n        typeA.identifier = \"A\";\r\n        typeA.isTypeVariable = true;\r\n\r\n        let tvA: TypeVariable = {\r\n            identifier: \"A\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeA\r\n        };\r\n\r\n        this.typeVariables.push(tvA);\r\n\r\n        let dequeInterface = (<Interface>module.typeStore.getType(\"Deque\")).clone();\r\n        dequeInterface.typeVariables = [tvA];\r\n\r\n        this.implements.push(dequeInterface);\r\n\r\n        let iteratorType = (<Klass>module.typeStore.getType(\"Iterator\")).clone();\r\n        iteratorType.typeVariables = [tvA];\r\n\r\n        this.addMethod(new Method(\"LinkedList\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let ah = new ListHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"ListHelper\"] = ah;\r\n\r\n            }, false, false, 'Instanziert eine neue LinkedList', true));\r\n\r\n        this.addMethod(new Method(\"iterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"ascending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"descendingIterator\", new Parameterlist([\r\n        ]), iteratorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ListIteratorImplClass.getIterator(ah, ah.interpreter, module, \"descending\").value;\r\n\r\n            }, false, false, \"Gibt einen Iterator über die Elemente dieser Collection zurück, der die Liste in umgekehrter Reihenfolge durchläuft (Ende -> Anfang).\"));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(r);\r\n\r\n            }, false, false, \"Fügt der Liste am Ende ein Element hinzu. Gibt genau dann true zurück, wenn sich der Zustand der Liste dadurch geändert hat.\"));\r\n\r\n        this.addMethod(new Method(\"addAll\", new Parameterlist([\r\n            { identifier: \"c\", type: this, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: RuntimeObject = parameters[1].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addAll(object);\r\n\r\n            },\r\n            false, false, \"Fügt alle Elemente von c dieser Collection hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Element aus dieser Collection.\"));\r\n\r\n        this.addMethod(new Method(\"contains\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.contains(object);\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das Element enthält.\"));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"o\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeObject(object);\r\n\r\n            },\r\n            false, false, \"Entfernt das Element o aus der Collection. Gibt true zurück, wenn die Collection das Element enthalten hatte.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die Collection das leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der Elemente der Collection zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirst_or_error();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"poll\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.poll_or_null();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Kopf der Liste und gibt es zurück. Gibt null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peek\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek_or_null();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Kopf der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"removeFirstOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirstOccurrence(object);\r\n\r\n            },\r\n            false, false, \"Löscht das Erste Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"removeLastOccurrence\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirstOccurrence(object);\r\n\r\n            },\r\n            false, false, \"Löscht das Letzte Vorkommen des Objekts. Gibt true zurück, wenn die Liste dadurch verändert wurde.\"));\r\n\r\n        this.addMethod(new Method(\"addFirst\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addFirst(object);\r\n\r\n            },\r\n            false, false, \"Fügt das Element am Anfang der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"addLast\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.addLast(object);\r\n\r\n            },\r\n            false, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"removeFirst\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeFirst_or_error();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Anfang der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"removeLast\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.removeLast_or_error();\r\n\r\n            },\r\n            false, false, \"Entfernt das Element am Ende der Liste und gibt es zurück. Führt zum Fehler, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekFirst\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek_first_or_null();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Anfang der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"peekLast\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.peek_last_or_null();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Ende der Liste zurück, entfernt es aber nicht. Gib null zurück, wenn die Liste leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"push\", new Parameterlist([\r\n            { identifier: \"element\", type: typeA, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let object: Value = parameters[1];\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.add(object);\r\n\r\n            },\r\n            false, false, \"Fügt das Element am Ende der Liste hinzu.\"));\r\n\r\n        this.addMethod(new Method(\"pop\", new Parameterlist([\r\n        ]), typeA,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ListHelper = o.intrinsicData[\"ListHelper\"];\r\n\r\n                return ah.pop();\r\n\r\n            },\r\n            false, false, \"Gibt das Element am Ende der Liste zurück und entfernt es von der Liste. Erzeugt einen Fehler, wenn die Liste leer ist.\"));\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\n\r\nexport class ConsoleClass extends Klass {\r\n\r\n    constructor(module: Module){\r\n        super(\"Console\", module, \"Klasse zur Textausgabe in der Konsole.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod( new Method(\"log\", new Parameterlist([{identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: false}]), null, \r\n                (parameters) => { \r\n                    // console.log(<string>(parameters[0].value)); \r\n                    module.main.getBottomDiv()?.console.$consoleTab.find('.jo_console-top').append(\"<div>\" + <string>(parameters[1].value) + \"</div>\"); \r\n                }, false, true));\r\n\r\n    }\r\n\r\n}","import { Program } from \"../parser/Program.js\";\r\nimport { Klass, Visibility } from \"./Class.js\";\r\nimport { Value, Attribute, Method, Parameterlist, Type } from \"./Types.js\";\r\nimport { Module } from \"../parser/Module.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { TextPosition } from \"../lexer/Token.js\";\r\nimport { EnumValueNode } from \"../parser/AST.js\";\r\nimport { stringPrimitiveType, intPrimitiveType, objectType } from \"./PrimitiveTypes.js\";\r\n\r\nexport class EnumRuntimeObject extends RuntimeObject {\r\n\r\n    enumValue: EnumInfo;\r\n\r\n    constructor(en: Enum, enumValue: EnumInfo) {\r\n        super(en);\r\n        this.enumValue = enumValue;\r\n    }\r\n\r\n}\r\n\r\nexport type EnumInfo = {\r\n    identifier: string,\r\n    ordinal: number,\r\n    position?: TextPosition,\r\n    object?: EnumRuntimeObject,\r\n    constructorCallProgram?: Program\r\n}\r\n\r\n\r\nexport class Enum extends Klass {\r\n\r\n    enumInfoList: EnumInfo[] = [];\r\n    identifierToInfoMap: { [identifier: string]: EnumInfo } = {};\r\n    indexToInfoMap: { [index: number]: EnumInfo } = {};\r\n\r\n    valueList: Value = null;\r\n\r\n    getOrdinal(valueIdentifier: string): number {\r\n\r\n        let enumInfo: EnumInfo = this.identifierToInfoMap[valueIdentifier];\r\n        if (enumInfo == null) return -1;\r\n        return enumInfo.ordinal;\r\n\r\n    }\r\n\r\n    public debugOutput(value: Value, maxLength: number = 40): string {\r\n        let enumObject = <EnumRuntimeObject>value.value;\r\n        return this.identifier + \".\" + enumObject.enumValue.identifier;\r\n    }\r\n\r\n    constructor(identifier: string, module: Module, enumValueNodes: EnumValueNode[]) {\r\n\r\n        super(identifier, module);\r\n        this.baseClass = objectType;\r\n\r\n        let i: number = 0;\r\n\r\n        for (let evn of enumValueNodes) {\r\n\r\n            let attribute: Attribute = new Attribute(evn.identifier, this, null, true, Visibility.public, true);\r\n\r\n            if (evn.position != null) {\r\n                attribute.declaration = {\r\n                    module: module,\r\n                    position: evn.position\r\n                }\r\n\r\n                attribute.usagePositions.set(module, [evn.position]);\r\n            }\r\n\r\n            this.staticClass.addAttribute(\r\n                attribute\r\n            );\r\n\r\n\r\n            let ev: EnumInfo = {\r\n                identifier: evn.identifier,\r\n                ordinal: i++\r\n            }\r\n\r\n            this.enumInfoList.push(ev);\r\n            this.identifierToInfoMap[evn.identifier] = ev;\r\n            this.indexToInfoMap[ev.ordinal] = ev;\r\n\r\n        }\r\n\r\n        if(module.isSystemModule){\r\n            this.valueList = {\r\n                type: new ArrayType(this),\r\n                value: []\r\n            };\r\n            for(let ei of this.enumInfoList){\r\n\r\n                ei.object = new EnumRuntimeObject(this, ei);\r\n\r\n                this.valueList.value.push({\r\n                    type: this,\r\n                    value: ei.object\r\n                })\r\n            }\r\n        }\r\n\r\n        let that = this;\r\n\r\n        this.staticClass.addMethod(new Method(\"getValues\",\r\n            new Parameterlist([]), new ArrayType(this), (parameters: Value[]) => {\r\n\r\n                if (this.valueList == null) {\r\n\r\n                    let values = [];\r\n                    for (let vi of this.enumInfoList) {\r\n\r\n                        values.push({\r\n                            type: that,\r\n                            value: vi.object\r\n                        });\r\n\r\n                    }\r\n\r\n                    this.valueList = {\r\n                        type: new ArrayType(that),\r\n                        value: values\r\n                    }\r\n\r\n                }\r\n\r\n                return this.valueList.value;\r\n\r\n            }, false, true)\r\n        );\r\n\r\n        this.addMethod(new Method(\"toString\",\r\n            new Parameterlist([]), stringPrimitiveType, (parameters: Value[]) => {\r\n\r\n                let erto: EnumRuntimeObject = <EnumRuntimeObject>(parameters[0].value);\r\n\r\n                return erto.enumValue.identifier;\r\n\r\n            }, false, false)\r\n        );\r\n\r\n        this.addMethod(new Method(\"toOrdinal\",\r\n            new Parameterlist([]), intPrimitiveType, (parameters: Value[]) => {\r\n\r\n                let erto: EnumRuntimeObject = <EnumRuntimeObject>(parameters[0].value);\r\n\r\n                return erto.enumValue.ordinal;\r\n\r\n            }, false, false)\r\n        );\r\n\r\n    }\r\n\r\n    public canCastTo(type: Type): boolean {\r\n\r\n        if (type == intPrimitiveType) {\r\n            return true;\r\n        }\r\n\r\n        return super.canCastTo(type);\r\n\r\n    }\r\n\r\n    public castTo(value: Value, type: Type): Value {\r\n\r\n        if (type == intPrimitiveType) {\r\n            let en = <EnumRuntimeObject>value.value;\r\n            return {\r\n                type: intPrimitiveType,\r\n                value: en.enumValue.ordinal\r\n            };\r\n        }\r\n\r\n        return super.castTo(value, type);\r\n    }\r\n\r\n\r\n}\r\n","import { LoginRequest, PerformanceData } from \"./Data.js\";\r\n\r\n// export var credentials: { username: string, password: string } = { username: null, password: null };\r\n\r\nexport class PerformanceCollector {\r\n    static performanceData: PerformanceData[] = [];\r\n    static performanceDataCount: number = 0;\r\n    static lastTimeSent: number = performance.now();\r\n\r\n    static registerPerformanceEntry(url: string, startTime: number) {\r\n        let pe: PerformanceData = PerformanceCollector.performanceData.find(pe => pe.url == url);\r\n        if (pe == null) {\r\n            pe = { count: 0, sumTime: 0, url: url };\r\n            PerformanceCollector.performanceData.push(pe);\r\n        }\r\n        pe.count++; //Test\r\n        let dt = Math.round(performance.now() - startTime);\r\n        pe.sumTime += dt;\r\n        PerformanceCollector.performanceDataCount++;\r\n        // console.log(\"Performance entry for path \" + pe.url + \": \" + dt + \" ms, aggregated: \" + pe.sumTime + \" for \" + pe.count + \" requests.\");\r\n    }\r\n\r\n    static sendDataToServer() {\r\n        if (performance.now() - PerformanceCollector.lastTimeSent > 3 * 60 * 1000) {\r\n            let request = {\r\n                data: PerformanceCollector.performanceData\r\n            }\r\n\r\n            PerformanceCollector.performanceData = [];\r\n            PerformanceCollector.performanceDataCount = 0;\r\n            PerformanceCollector.lastTimeSent = performance.now();\r\n\r\n            ajax(\"collectPerformanceData\", request, () => { })\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nexport function ajax(url: string, request: any, successCallback: (response: any) => void,\r\n\r\n    errorCallback?: (message: string) => void) {\r\n\r\n    showNetworkBusy(true);\r\n    let time = performance.now();\r\n\r\n    $.ajax({\r\n        type: 'POST',\r\n        async: true,\r\n        data: JSON.stringify(request),\r\n        contentType: 'application/json',\r\n        url: \"servlet/\" + url,\r\n        success: function (response: any) {\r\n\r\n            PerformanceCollector.registerPerformanceEntry(url, time);\r\n\r\n            showNetworkBusy(false);\r\n            if (response.success != null && response.success == false || typeof (response) == \"string\" && response == '') {\r\n                let error = \"Fehler bei der Bearbeitung der Anfrage\"\r\n                if (response.message != null) error = response.message;\r\n                if (response.error != null) error = response.error;\r\n\r\n                if (error == \"Not logged in\") {\r\n                    // setTimeout(() => newLogin(url, request, successCallback, errorCallback), 10000);\r\n                    // location.reload();\r\n                }\r\n\r\n                if (errorCallback) errorCallback(error);\r\n            } else {\r\n                successCallback(response);\r\n            }\r\n            return;\r\n\r\n        },\r\n        error: function (jqXHR, message) {\r\n            showNetworkBusy(false);\r\n            if (errorCallback) {\r\n                let statusText = \"Server nicht erreichbar.\"\r\n                if (jqXHR.status != 0) {\r\n                    statusText = \"\" + jqXHR.status\r\n                }\r\n                errorCallback(message + \": \" + statusText);\r\n                return;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport function showNetworkBusy(busy: boolean) {\r\n    if (busy) {\r\n        jQuery('.jo_network-busy').show();\r\n    } else {\r\n        jQuery('.jo_network-busy').hide();\r\n    }\r\n}\r\n\r\n\r\n\r\n// export function newLogin(url: string, request: any, successCallback: (response: any) => void,\r\n//     errorCallback?: (message: string) => void) {\r\n\r\n//     if (credentials.username == null) return;\r\n//     let loginRequest: LoginRequest = {username: credentials.username, password: credentials.password};\r\n\r\n//     $.ajax({\r\n//         type: 'POST',\r\n//         data: JSON.stringify(loginRequest),\r\n//         contentType: 'application/json',\r\n//         url: \"login\",\r\n//         success: function (response: any) {\r\n//             if (response.success != null && response.success == false || typeof (response) == \"string\" && response == '') {\r\n//             } else {\r\n//                 ajax(url, request, successCallback, errorCallback);\r\n//             }\r\n//             return;\r\n//         },\r\n//         error: function (jqXHR, message) {\r\n// //            ajax(url, request, successCallback, errorCallback);\r\n//         }\r\n//     });\r\n// }\r\n","export class ColorLexer {\r\n    hexColorRegExp = /^#([a-fA-F0-9]{6})$/;\r\n    rgbColorRegExp = /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/;\r\n    rgbaColorRegExp = /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d*(?:\\.\\d+)?)\\)$/;\r\n\r\n    getColorInfo(s: string): monaco.languages.IColor {\r\n\r\n        if(s.startsWith('#')){\r\n            let m1 = s.match(this.hexColorRegExp);\r\n            if(m1 == null) return null;\r\n\r\n            let value = Number.parseInt(m1[1], 16);\r\n            return {\r\n                red: (value >> 16)/255,\r\n                green: ((value >> 8) & 0xff) / 255,\r\n                blue: (value & 0xff)/255,\r\n                alpha: 1\r\n            }\r\n\r\n        } else if(s.startsWith('rgb')){\r\n\r\n            if(s.startsWith('rgba')){\r\n                let m2 = s.match(this.rgbaColorRegExp);\r\n                if(m2 == null) return null;\r\n\r\n                return {\r\n                    red: Number.parseInt(m2[1])/255,\r\n                    green: Number.parseInt(m2[2]) / 255,\r\n                    blue: Number.parseInt(m2[3])/255,\r\n                    alpha: Number.parseFloat(m2[4])\r\n                }\r\n            } else {\r\n                let m3 = s.match(this.rgbColorRegExp);\r\n                if(m3 == null) return null;\r\n\r\n                return {\r\n                    red: Number.parseInt(m3[1])/255,\r\n                    green: Number.parseInt(m3[2]) / 255,\r\n                    blue: Number.parseInt(m3[3])/255,\r\n                    alpha: 1\r\n                }\r\n    \r\n\r\n            }\r\n\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n}","export class ColorHelper {\r\n\r\n    static predefinedColors = {\r\n        \"aliceblue\": 0xF0F8FF,\r\n        \"antiquewhite\": 0xFAEBD7,\r\n        \"aqua\": 0x00FFFF,\r\n        \"aquamarine\": 0x7FFFD4,\r\n        \"azure\": 0xF0FFFF,\r\n        \"beige\": 0xF5F5DC,\r\n        \"bisque\": 0xFFE4C4,\r\n        \"black\": 0x000000,\r\n        \"blanchedAlmond\": 0xFFEBCD,\r\n        \"blue\": 0x0000FF,\r\n        \"blueviolet\": 0x8A2BE2,\r\n        \"brown\": 0xA52A2A,\r\n        \"burlywood\": 0xDEB887,\r\n        \"cadetblue\": 0x5F9EA0,\r\n        \"chartreuse\": 0x7FFF00,\r\n        \"chocolate\": 0xD2691E,\r\n        \"coral\": 0xFF7F50,\r\n        \"cornflowerblue\": 0x6495ED,\r\n        \"cornsilk\": 0xFFF8DC,\r\n        \"crimson\": 0xDC143C,\r\n        \"cyan\": 0x00FFFF,\r\n        \"darkblue\": 0x00008B,\r\n        \"darkcyan\": 0x008B8B,\r\n        \"darkgoldenrod\": 0xB8860B,\r\n        \"darkgray\": 0xA9A9A9,\r\n        \"darkgrey\": 0xA9A9A9,\r\n        \"darkgreen\": 0x006400,\r\n        \"darkkhaki\": 0xBDB76B,\r\n        \"darkmagenta\": 0x8B008B,\r\n        \"darkolivegreen\": 0x556B2F,\r\n        \"darkorange\": 0xFF8C00,\r\n        \"darkorchid\": 0x9932CC,\r\n        \"darkred\": 0x8B0000,\r\n        \"darksalmon\": 0xE9967A,\r\n        \"darkseagreen\": 0x8FBC8F,\r\n        \"darkslateblue\": 0x483D8B,\r\n        \"darkslategray\": 0x2F4F4F,\r\n        \"darkslategrey\": 0x2F4F4F,\r\n        \"darkturquoise\": 0x00CED1,\r\n        \"darkviolet\": 0x9400D3,\r\n        \"deeppink\": 0xFF1493,\r\n        \"deepskyblue\": 0x00BFFF,\r\n        \"dimgray\": 0x696969,\r\n        \"dimgrey\": 0x696969,\r\n        \"dodgerblue\": 0x1E90FF,\r\n        \"firebrick\": 0xB22222,\r\n        \"floralwhite\": 0xFFFAF0,\r\n        \"forestgreen\": 0x228B22,\r\n        \"fuchsia\": 0xFF00FF,\r\n        \"gainsboro\": 0xDCDCDC,\r\n        \"ghostwhite\": 0xF8F8FF,\r\n        \"gold\": 0xFFD700,\r\n        \"goldenrod\": 0xDAA520,\r\n        \"gray\": 0x808080,\r\n        \"grau\": 0x808080,\r\n        \"green\": 0x008000,\r\n        \"greenyellow\": 0xADFF2F,\r\n        \"honeydew\": 0xF0FFF0,\r\n        \"hotpink\": 0xFF69B4,\r\n        \"indianred\": 0xCD5C5C,\r\n        \"indigo\": 0x4B0082,\r\n        \"ivory\": 0xFFFFF0,\r\n        \"khaki\": 0xF0E68C,\r\n        \"lavender\": 0xE6E6FA,\r\n        \"lavenderblush\": 0xFFF0F5,\r\n        \"lawngreen\": 0x7CFC00,\r\n        \"lemonchiffon\": 0xFFFACD,\r\n        \"lightblue\": 0xADD8E6,\r\n        \"lightcoral\": 0xF08080,\r\n        \"lightcyan\": 0xE0FFFF,\r\n        \"lightgoldenrodyellow\": 0xFAFAD2,\r\n        \"lightgray\": 0xD3D3D3,\r\n        \"lightgrey\": 0xD3D3D3,\r\n        \"lightgreen\": 0x90EE90,\r\n        \"lightpink\": 0xFFB6C1,\r\n        \"lightsalmon\": 0xFFA07A,\r\n        \"lightseagreen\": 0x20B2AA,\r\n        \"lightskyblue\": 0x87CEFA,\r\n        \"lightslategray\": 0x778899,\r\n        \"lightslategrey\": 0x778899,\r\n        \"lightsteelblue\": 0xB0C4DE,\r\n        \"lightyellow\": 0xFFFFE0,\r\n        \"lime\": 0x00FF00,\r\n        \"limegreen\": 0x32CD32,\r\n        \"linen\": 0xFAF0E6,\r\n        \"magenta\": 0xFF00FF,\r\n        \"maroon\": 0x800000,\r\n        \"mediumaquamarine\": 0x66CDAA,\r\n        \"mediumblue\": 0x0000CD,\r\n        \"mediumorchid\": 0xBA55D3,\r\n        \"mediumpurple\": 0x9370DB,\r\n        \"mediumseagreen\": 0x3CB371,\r\n        \"mediumslateblue\": 0x7B68EE,\r\n        \"mediumspringgreen\": 0x00FA9A,\r\n        \"mediumturquoise\": 0x48D1CC,\r\n        \"mediumvioletred\": 0xC71585,\r\n        \"midnightblue\": 0x191970,\r\n        \"mintcream\": 0xF5FFFA,\r\n        \"mistyrose\": 0xFFE4E1,\r\n        \"moccasin\": 0xFFE4B5,\r\n        \"navajowhite\": 0xFFDEAD,\r\n        \"navy\": 0x000080,\r\n        \"oldLace\": 0xFDF5E6,\r\n        \"olive\": 0x808000,\r\n        \"olivedrab\": 0x6B8E23,\r\n        \"orange\": 0xFFA500,\r\n        \"orangered\": 0xFF4500,\r\n        \"orchid\": 0xDA70D6,\r\n        \"palegoldenrod\": 0xEEE8AA,\r\n        \"palegreen\": 0x98FB98,\r\n        \"paleturquoise\": 0xAFEEEE,\r\n        \"palevioletred\": 0xDB7093,\r\n        \"papayawhip\": 0xFFEFD5,\r\n        \"peachpuff\": 0xFFDAB9,\r\n        \"peru\": 0xCD853F,\r\n        \"pink\": 0xFFC0CB,\r\n        \"plum\": 0xDDA0DD,\r\n        \"powderblue\": 0xB0E0E6,\r\n        \"purple\": 0x800080,\r\n        \"rebeccapurple\": 0x663399,\r\n        \"red\": 0xFF0000,\r\n        \"rosybrown\": 0xBC8F8F,\r\n        \"royalblue\": 0x4169E1,\r\n        \"saddlebrown\": 0x8B4513,\r\n        \"salmon\": 0xFA8072,\r\n        \"sandybrown\": 0xF4A460,\r\n        \"sand\": 0xF4A460,\r\n        \"seagreen\": 0x2E8B57,\r\n        \"seashell\": 0xFFF5EE,\r\n        \"sienna\": 0xA0522D,\r\n        \"silver\": 0xC0C0C0,\r\n        \"skyblue\": 0x87CEEB,\r\n        \"slateblue\": 0x6A5ACD,\r\n        \"slategray\": 0x708090,\r\n        \"slategrey\": 0x708090,\r\n        \"snow\": 0xFFFAFA,\r\n        \"springgreen\": 0x00FF7F,\r\n        \"steelblue\": 0x4682B4,\r\n        \"tan\": 0xD2B48C,\r\n        \"teal\": 0x008080,\r\n        \"thistle\": 0xD8BFD8,\r\n        \"tomato\": 0xFF6347,\r\n        \"turquoise\": 0x40E0D0,\r\n        \"violet\": 0xEE82EE,\r\n        \"wheat\": 0xF5DEB3,\r\n        \"white\": 0xFFFFFF,\r\n        \"whitesmoke\": 0xF5F5F5,\r\n        \"yellow\": 0xFFFF00,\r\n        \"yellowgreen\": 0x9ACD32,\r\n    };\r\n\r\n    static intColorToHexRGB(color: number) {\r\n        if(color == null){\r\n            return \"---\";\r\n        } else {\r\n            let s: string = color.toString(16);\r\n            while (s.length < 6) s = \"0\" + s;\r\n            return \"#\" + s;\r\n        }\r\n    }\r\n\r\n    static intColorToRGB(color: number) {\r\n        if(color == null) {return \"---\";} else\r\n        {return \"rgb(\" + ((color & 0xff0000) >> 16) + \", \" + ((color & 0xff00) >> 8) + \", \" + (color & 0xff) + \")\";}\r\n    }\r\n\r\n    static parseColorToOpenGL(color: string): { color: number, alpha: number } {\r\n\r\n        if(color == null){\r\n            return {\r\n                color: null,\r\n                alpha: 1\r\n            };\r\n        }\r\n\r\n        let c = this.predefinedColors[color];\r\n        if (c != null) return { color: c, alpha: 1 };\r\n\r\n        // see https://stackoverflow.com/questions/11068240/what-is-the-most-efficient-way-to-parse-a-css-color-in-javascript\r\n\r\n        let m2 = color.match(/^#([0-9a-f]{6})$/i);\r\n        if (m2 && m2.length > 1) {\r\n            let m = m2[1];\r\n            if (m) {\r\n                return {\r\n                    color: 0x10000 * parseInt(m.substr(0, 2), 16) + 0x100 * parseInt(m.substr(2, 2), 16) + parseInt(m.substr(4, 2), 16),\r\n                    alpha: 1\r\n                };\r\n            }\r\n        }\r\n\r\n        let m3 = color.match(/^#([0-9a-f]{8})$/i);\r\n        if (m3 && m3.length > 1){\r\n            let m = m3[1];\r\n            if (m) {\r\n                return {\r\n                    color: 0x10000 * parseInt(m.substr(0, 2), 16) + 0x100 * parseInt(m.substr(2, 2), 16) + parseInt(m.substr(4, 2), 16),\r\n                    alpha: parseInt(m.substr(6, 2), 16) / 0xff\r\n                };\r\n            }\r\n        }\r\n\r\n        let m1 = color.match(/^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i);\r\n        if (m1) {\r\n            return {\r\n                color: parseInt(m1[1]) * 0x10000 + parseInt(m1[2]) * 0x100 + parseInt(m1[3]),\r\n                alpha: 1\r\n            };\r\n        }\r\n\r\n        m1 = color.match(/^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+\\.?\\d+)\\s*\\)$/i);\r\n        if (m1) {\r\n            return {\r\n                color: parseInt(m1[1]) * 0x10000 + parseInt(m1[2]) * 0x100 + parseInt(m1[3]),\r\n                alpha: parseFloat(m1[4]) \r\n            };\r\n        }\r\n\r\n        return { color: 0xff0000, alpha: 1 };\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}","import { TokenList, specialCharList, TokenType, Token, EscapeSequenceList, keywordList, TextPosition, TokenTypeReadable } from \"./Token.js\";\r\nimport { text } from \"express\";\r\nimport { ColorLexer } from \"./ColorLexer.js\";\r\nimport { ColorHelper } from \"../../runtimelibrary/graphics/ColorHelper.js\";\r\n\r\nenum LexerState {\r\n    number, identifier, stringConstant, characterConstant, multilineComment, EndoflineComment\r\n}\r\n\r\nvar endChar = \"►\"; // \\u10000\r\n\r\nexport type QuickFix = {\r\n    title: string,\r\n    editsProvider: (uri: monaco.Uri) => monaco.languages.WorkspaceTextEdit[]\r\n}\r\n\r\nexport type ErrorLevel = \"info\" | \"error\" | \"warning\";\r\n\r\nexport type Error = {\r\n    position: TextPosition,\r\n    text: string,\r\n    quickFix?: QuickFix,\r\n    level: ErrorLevel\r\n}\r\n\r\nexport class Lexer {\r\n\r\n    tokenList: TokenList;\r\n    nonSpaceLastTokenType: TokenType;\r\n\r\n    errorList: Error[];\r\n    colorInformation: monaco.languages.IColorInformation[];\r\n    colorLexer: ColorLexer = new ColorLexer();\r\n\r\n    pos: number;\r\n    line: number;\r\n    column: number;\r\n\r\n    currentChar: string;\r\n    nextChar: string;\r\n\r\n    input: string;\r\n\r\n    spaceTokens: TokenType[] = [\r\n        TokenType.space, TokenType.tab, TokenType.newline\r\n    ];\r\n\r\n    bracketStack: TokenType[];\r\n    bracketError: string;\r\n    correspondingBracket: { [key: number]: TokenType } = {};\r\n    colorIndices: number[];\r\n\r\n    constructor() {\r\n        this.correspondingBracket[TokenType.leftBracket] = TokenType.rightBracket;\r\n        this.correspondingBracket[TokenType.leftCurlyBracket] = TokenType.rightCurlyBracket;\r\n        this.correspondingBracket[TokenType.leftSquareBracket] = TokenType.rightSquareBracket;\r\n        this.correspondingBracket[TokenType.rightBracket] = TokenType.leftBracket;\r\n        this.correspondingBracket[TokenType.rightCurlyBracket] = TokenType.leftCurlyBracket;\r\n        this.correspondingBracket[TokenType.rightSquareBracket] = TokenType.leftSquareBracket;\r\n    }\r\n\r\n    lex(input: string): { tokens: TokenList, errors: Error[], bracketError: string, colorInformation: monaco.languages.IColorInformation[] } {\r\n\r\n        this.input = input.replace(\"\\uc2a0\", \" \");\r\n        this.input = input.replace(\"\\u00a0\", \" \");\r\n        this.tokenList = [];\r\n        this.errorList = [];\r\n        this.bracketError = null;\r\n        this.bracketStack = [];\r\n        this.pos = 0;\r\n        this.line = 1;\r\n        this.column = 1;\r\n        this.nonSpaceLastTokenType = null;\r\n        this.colorInformation = [];\r\n        this.colorIndices = []; // indices of identifier 'Color' inside tokenList\r\n\r\n\r\n        if (input.length == 0) {\r\n            return { tokens: this.tokenList, errors: this.errorList, bracketError: null, colorInformation: [] };\r\n        }\r\n\r\n        this.currentChar = input.charAt(0);\r\n\r\n        this.nextChar = input.length > 1 ? input.charAt(1) : endChar;\r\n\r\n\r\n        while (this.currentChar != endChar) {\r\n            this.mainState();\r\n        }\r\n\r\n        if (this.bracketStack.length > 0) {\r\n            let bracketOpen = this.bracketStack.pop();\r\n            let bracketClosed = this.correspondingBracket[bracketOpen];\r\n\r\n            this.setBracketError(TokenTypeReadable[bracketOpen] + \" \" + TokenTypeReadable[bracketClosed]);\r\n        }\r\n\r\n        this.processColorIndices();\r\n\r\n        return {\r\n            tokens: this.tokenList,\r\n            errors: this.errorList,\r\n            bracketError: this.bracketError,\r\n            colorInformation: this.colorInformation\r\n        };\r\n\r\n    }\r\n\r\n    processColorIndices() {\r\n\r\n        for (let colorIndex of this.colorIndices) {\r\n\r\n            // new Color(100, 100, 100, 0.1)\r\n            // new Color(100, 100, 100)\r\n            // Color.red\r\n\r\n            let colorToken = this.tokenList[colorIndex];\r\n            let previousToken = this.getLastNonSpaceToken(colorIndex)\r\n\r\n            if (previousToken?.tt == TokenType.keywordNew) {\r\n                let nextTokens = this.getNextNonSpaceTokens(colorIndex, 7);\r\n                if (this.compareTokenTypes(nextTokens, [TokenType.leftBracket, TokenType.integerConstant, TokenType.comma,\r\n                TokenType.integerConstant, TokenType.comma, TokenType.integerConstant,\r\n                TokenType.rightBracket])) {\r\n                    this.colorInformation.push({\r\n                        color: {\r\n                            red: <number>nextTokens[1].value / 255,\r\n                            green: <number>nextTokens[3].value / 255,\r\n                            blue: <number>nextTokens[5].value / 255,\r\n                            alpha: 1\r\n                        },\r\n                        range: {\r\n                            startLineNumber: previousToken.position.line, startColumn: previousToken.position.column,\r\n                            endLineNumber: nextTokens[6].position.line, endColumn: nextTokens[6].position.column + 1\r\n                        }\r\n                    })\r\n                }\r\n            } else {\r\n                let nextTokens = this.getNextNonSpaceTokens(colorIndex, 2);\r\n                if (this.compareTokenTypes(nextTokens, [TokenType.dot, TokenType.identifier])) {\r\n                    let colorIdentifier = <string>nextTokens[1].value;\r\n                    let colorValue = ColorHelper.predefinedColors[colorIdentifier];\r\n                    if (colorValue != null) {\r\n                        this.colorInformation.push({\r\n                            color: {\r\n                                red: (colorValue >> 16) / 255,\r\n                                green: ((colorValue >> 8) & 0xff) / 255,\r\n                                blue: (colorValue & 0xff) / 255,\r\n                                alpha: 1\r\n                            }, range: {\r\n                                startLineNumber: colorToken.position.line, startColumn: colorToken.position.column,\r\n                                endLineNumber: nextTokens[1].position.line, endColumn: nextTokens[1].position.column + colorIdentifier.length\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    compareTokenTypes(tokenList: Token[], tokenTypeList: TokenType[]) {\r\n        if (tokenList.length != tokenTypeList.length) return false;\r\n        for (let i = 0; i < tokenList.length; i++) {\r\n            if (tokenList[i].tt != tokenTypeList[i]) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    getNextNonSpaceTokens(tokenIndex: number, count: number): Token[] {\r\n        let tokens: Token[] = [];\r\n        let d = tokenIndex;\r\n        while (tokens.length < count && d + 1 < this.tokenList.length) {\r\n            let foundToken = this.tokenList[d + 1];\r\n            if ([TokenType.space, TokenType.newline].indexOf(foundToken.tt) < 0) {\r\n                tokens.push(foundToken);\r\n            }\r\n            d++;\r\n        }\r\n\r\n        return tokens;\r\n\r\n    }\r\n\r\n    getLastNonSpaceToken(tokenIndex: number) {\r\n        let d = tokenIndex;\r\n        while (d - 1 > 0) {\r\n            let foundToken = this.tokenList[d - 1];\r\n            if ([TokenType.space, TokenType.newline].indexOf(foundToken.tt) < 0) {\r\n                return foundToken;\r\n            }\r\n            d--;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    checkClosingBracket(tt: TokenType) {\r\n        if (this.bracketStack.length == 0) {\r\n            let bracketOpen = this.correspondingBracket[tt];\r\n            this.setBracketError(TokenTypeReadable[bracketOpen] + \" \" + TokenTypeReadable[tt]);\r\n            return;\r\n        }\r\n        let openBracket = this.bracketStack.pop();\r\n        let correspondingBracket = this.correspondingBracket[openBracket];\r\n        if (tt != correspondingBracket) {\r\n            this.setBracketError(TokenTypeReadable[openBracket] + \" \" + TokenTypeReadable[correspondingBracket]);\r\n        }\r\n    }\r\n\r\n    setBracketError(error: string) {\r\n        if (this.bracketError == null) this.bracketError = error;\r\n    }\r\n\r\n    next() {\r\n        this.pos++;\r\n        this.currentChar = this.nextChar;\r\n        if (this.pos + 1 < this.input.length) {\r\n            this.nextChar = this.input.charAt(this.pos + 1);\r\n        } else {\r\n            this.nextChar = endChar;\r\n        }\r\n        this.column++; // column of current char\r\n    }\r\n\r\n\r\n\r\n    mainState() {\r\n\r\n        let char = this.currentChar;\r\n\r\n        let specialCharToken = specialCharList[char];\r\n\r\n        if (specialCharToken != null) {\r\n            switch (specialCharToken) {\r\n                case TokenType.leftSquareBracket:\r\n                    if (this.nextChar == \"]\") {\r\n                        this.pushToken(TokenType.leftRightSquareBracket, \"[]\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.leftSquareBracket, \"[\");\r\n                        this.bracketStack.push(specialCharToken);\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.rightSquareBracket:\r\n                    this.checkClosingBracket(specialCharToken);\r\n                    break;\r\n                case TokenType.leftBracket:\r\n                    this.bracketStack.push(specialCharToken);\r\n                    break;\r\n                case TokenType.rightBracket:\r\n                    this.checkClosingBracket(specialCharToken);\r\n                    break;\r\n                case TokenType.leftCurlyBracket:\r\n                    this.bracketStack.push(specialCharToken);\r\n                    break;\r\n                case TokenType.rightCurlyBracket:\r\n                    this.checkClosingBracket(specialCharToken);\r\n                    break;\r\n                case TokenType.and:\r\n                    if (this.nextChar == \"&\") {\r\n                        this.pushToken(TokenType.and, \"&&\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.ANDAssigment, \"&=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.ampersand, \"&\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.or:\r\n                    if (this.nextChar == \"|\") {\r\n                        this.pushToken(TokenType.or, \"||\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.ORAssigment, \"&=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.OR, \"|\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.XOR:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.XORAssigment, \"^=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.XOR, \"^\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.multiplication:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.multiplicationAssignment, \"*=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.multiplication, \"*\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.not:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.notEqual, \"!=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.not, \"!\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.division:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.divisionAssignment, \"/=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.nextChar == '*') {\r\n                        this.lexMultilineComment();\r\n                        return;\r\n                    } else if (this.nextChar == '/') {\r\n                        this.lexEndofLineComment();\r\n                        return;\r\n                    }\r\n                    this.pushToken(TokenType.division, '/');\r\n                    this.next();\r\n                    return;\r\n                case TokenType.modulo:\r\n                    if (this.nextChar == \"=\") {\r\n                        this.pushToken(TokenType.moduloAssignment, \"%=\");\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.modulo, \"/\");\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.plus:\r\n                    if (this.nextChar == '+') {\r\n                        this.pushToken(TokenType.doublePlus, '++');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.isDigit(this.nextChar, 10) && !\r\n                        ([TokenType.identifier, TokenType.integerConstant, TokenType.floatingPointConstant, TokenType.rightBracket, TokenType.rightSquareBracket].indexOf(this.nonSpaceLastTokenType) >= 0)\r\n                    ) {\r\n                        this.lexNumber();\r\n                        return;\r\n                    } else if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.plusAssignment, '+=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.plus, '+');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.lower:\r\n                    if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.lowerOrEqual, '<=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.nextChar == '<') {\r\n                        this.lexShiftLeft();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.lower, '<');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.greater:\r\n                    if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.greaterOrEqual, '>=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else if (this.nextChar == '>') {\r\n                        this.lexShiftRight();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.greater, '>');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.dot:\r\n                    if (this.nextChar == '.' && this.pos + 2 < this.input.length && this.input[this.pos + 2] == \".\") {\r\n                        this.pushToken(TokenType.ellipsis, '...');\r\n                        this.next();\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.dot, '.');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n\r\n                case TokenType.assignment:\r\n                    if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.equal, '==');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.assignment, '=');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.minus:\r\n                    if (this.nextChar == '-') {\r\n                        this.pushToken(TokenType.doubleMinus, '--');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                    else if (this.isDigit(this.nextChar, 10) && !\r\n                        ([TokenType.identifier, TokenType.integerConstant, TokenType.floatingPointConstant, TokenType.stringConstant, TokenType.rightBracket, TokenType.rightSquareBracket].indexOf(this.nonSpaceLastTokenType) >= 0)\r\n                    ) {\r\n                        this.lexNumber();\r\n                        return;\r\n                    }\r\n                    else if (this.nextChar == '=') {\r\n                        this.pushToken(TokenType.minusAssignment, '-=');\r\n                        this.next();\r\n                        this.next();\r\n                        return;\r\n                    } else {\r\n                        this.pushToken(TokenType.minus, '-');\r\n                        this.next();\r\n                        return;\r\n                    }\r\n                case TokenType.singleQuote:\r\n                    this.lexCharacterConstant();\r\n                    return;\r\n                case TokenType.doubleQuote:\r\n                    // triple double quote?\r\n                    if (this.nextChar == \"\\\"\" && this.pos + 3 < this.input.length && this.input[this.pos + 2] == \"\\\"\") {\r\n                        this.lexTripleQuoteStringConstant();\r\n                    } else {\r\n                        this.lexStringConstant();\r\n                    }\r\n                    return;\r\n                case TokenType.newline:\r\n                    this.pushToken(TokenType.newline, '\\n');\r\n                    this.line++;\r\n                    this.column = 0;\r\n                    this.next();\r\n                    return;\r\n                case TokenType.space:\r\n                case TokenType.tab:\r\n                    this.lexSpace();\r\n                    return;\r\n                case TokenType.linefeed:\r\n                    this.next();\r\n                    return;\r\n                case TokenType.at:\r\n                    this.lexAnnotation();\r\n                    return;\r\n            }\r\n\r\n            this.pushToken(specialCharToken, char);\r\n            this.next();\r\n            return;\r\n\r\n        }\r\n\r\n        // no special char. Number?\r\n\r\n        if (this.isDigit(char, 10)) {\r\n            this.lexNumber();\r\n            return;\r\n        }\r\n\r\n        this.lexIdentifierOrKeyword();\r\n\r\n    }\r\n\r\n    lexShiftRight() {\r\n        this.next(); // Consume first > of >>\r\n\r\n        if (this.nextChar == \">\") {\r\n            this.lexShiftRightUnsigned();\r\n        } else if (this.nextChar == \"=\") {\r\n            this.pushToken(TokenType.shiftRightAssigment, \">>=\")\r\n            this.next(); // Consume second >\r\n            this.next(); // Consume =\r\n        } else {\r\n            this.pushToken(TokenType.shiftRight, \">>\");\r\n            this.next(); // Consume second >\r\n        }\r\n        return;\r\n    }\r\n\r\n    lexShiftRightUnsigned() {\r\n        this.next(); // Consume second > of >>>\r\n\r\n        if (this.nextChar == \"=\") {\r\n            this.pushToken(TokenType.shiftRightUnsignedAssigment, \">>>=\")\r\n            this.next(); // Consume second >\r\n            this.next(); // Consume =\r\n        } else {\r\n            this.pushToken(TokenType.shiftRightUnsigned, \">>>\");\r\n            this.next(); // Consume next\r\n        }\r\n        return;\r\n    }\r\n\r\n    lexShiftLeft() {\r\n        this.next(); // Consume first < of <<\r\n\r\n        if (this.nextChar == '=') {\r\n            this.pushToken(TokenType.shiftLeftAssigment, \"<<=\")\r\n            this.next(); // Consume second <\r\n            this.next(); // Consume =\r\n        } else {\r\n            this.pushToken(TokenType.shiftLeft, \"<<\")\r\n            this.next(); // Consume second <\r\n        }\r\n        return;\r\n    }\r\n\r\n\r\n    pushToken(tt: TokenType, text: string | number | boolean, line: number = this.line, column: number = this.column, length: number = (\"\" + text).length) {\r\n        let t: Token = {\r\n            tt: tt,\r\n            value: text,\r\n            position: {\r\n                column: column,\r\n                line: line,\r\n                length: length\r\n            }\r\n        }\r\n\r\n        if (!(this.spaceTokens.indexOf(tt) >= 0)) {\r\n            this.nonSpaceLastTokenType = tt;\r\n        }\r\n\r\n        this.tokenList.push(t);\r\n    }\r\n\r\n    pushError(text: string, length: number, errorLevel: ErrorLevel = \"error\", line: number = this.line, column: number = this.column) {\r\n        this.errorList.push({\r\n            text: text,\r\n            position: {\r\n                line: line,\r\n                column: column,\r\n                length: length\r\n            },\r\n            level: errorLevel\r\n        });\r\n    }\r\n\r\n\r\n\r\n    isDigit(a: string, base: number) {\r\n        var charCode = a.charCodeAt(0);\r\n\r\n        if (base == 10) return (charCode >= 48 && charCode <= 57); // 0 - 9\r\n        if (base == 2) return (charCode >= 48 && charCode <= 49); // 0, 1\r\n        if (base == 8) return (charCode >= 48 && charCode <= 55); // 0 - 7\r\n        if (base == 16) return (charCode >= 48 && charCode <= 57) || (charCode >= 97 && charCode <= 102) ||\r\n            (charCode >= 65 && charCode <= 70); // 0 - 9 || a - f || A - F\r\n    }\r\n\r\n    lexSpace() {\r\n        let column = this.column;\r\n        let line = this.line;\r\n\r\n        let posStart = this.pos;\r\n        while (this.currentChar == \" \" || this.currentChar == \"\\t\") {\r\n            this.next();\r\n        }\r\n\r\n        let posEnd = this.pos;\r\n        this.pushToken(TokenType.space, this.input.substring(posStart, posEnd), line, column);\r\n        return;\r\n\r\n    }\r\n\r\n    lexCharacterConstant() {\r\n        let column = this.column;\r\n        let line = this.line;\r\n        this.next();\r\n        let char = this.currentChar;\r\n        if (char == \"\\\\\") {\r\n            let escapeChar = EscapeSequenceList[this.nextChar];\r\n            if (escapeChar == null) {\r\n                this.pushError('Die Escape-Sequenz \\\\' + this.nextChar + ' gibt es nicht.', 2);\r\n                if (this.nextChar != \"'\") {\r\n                    char = this.nextChar;\r\n                    this.next();\r\n                }\r\n            } else {\r\n                char = escapeChar;\r\n                this.next();\r\n            }\r\n        }\r\n        this.next();\r\n        if (this.currentChar != \"'\") {\r\n            this.pushError(\"Das Ende der char-Konstante wird erwartet (').\", 1);\r\n        } else {\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.charConstant, char, line, column);\r\n\r\n    }\r\n\r\n    lexStringConstant() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n        let text = \"\";\r\n\r\n        this.next();\r\n\r\n        while (true) {\r\n            let char = this.currentChar;\r\n            if (char == \"\\\\\") {\r\n                char = this.parseStringLiteralEscapeCharacter();   \r\n                text += char;\r\n                continue;             \r\n            } else if (char == '\"') {\r\n                this.next();\r\n                break;\r\n            } else if (char == \"\\n\" || char == endChar) {\r\n                this.pushError('Innerhalb einer String-Konstante wurde das Zeilenende erreicht.', text.length + 1, \"error\", line, column);\r\n                break;\r\n            }\r\n            text += char;\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.stringConstant, text, line, column, text.length + 2);\r\n\r\n        let color = this.colorLexer.getColorInfo(text);\r\n\r\n        if (color != null) {\r\n            this.colorInformation.push({\r\n                color: color,\r\n                range: { startLineNumber: line, endLineNumber: line, startColumn: column + 1, endColumn: this.column - 1 }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    lexTripleQuoteStringConstant() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n        let StringLines: string[] = [];\r\n\r\n        // skip \"\"\" and all characters in same line\r\n\r\n        this.next(); // skip \"\r\n        this.next(); // skip \"\r\n        this.next(); // skip \"\r\n\r\n        let restOfLine: string = \"\";\r\n        while ([\"\\n\", \"\\r\"].indexOf(this.currentChar) < 0 && this.currentChar != endChar) {\r\n            restOfLine += this.currentChar;\r\n            this.next();\r\n        }\r\n\r\n        restOfLine = restOfLine.trim();\r\n        if(restOfLine.length > 0 && !restOfLine.startsWith(\"//\") && !restOfLine.startsWith(\"/*\")){\r\n            this.pushError('Eine Java-Multiline-Stringkonstante beginnt immer mit \"\"\" und einem nachfolgenden Zeilenumbruch. Alle nach \"\"\" folgenden Zeichen werden überlesen!', restOfLine.length + 3);\r\n        }\r\n\r\n        if(this.currentChar == '\\r'){\r\n            this.next();\r\n        }\r\n\r\n        if(this.currentChar == '\\n'){\r\n            this.next();\r\n            this.line++;\r\n            this.column = 1;\r\n        }\r\n\r\n        let currentStringLine: string = \"\";\r\n\r\n        while (true) {\r\n            let char = this.currentChar;\r\n            if (char == \"\\\\\") {\r\n                currentStringLine += this.parseStringLiteralEscapeCharacter();\r\n            } else if (char == '\"' && this.nextChar == '\"' && this.pos + 2 < this.input.length && this.input[this.pos + 2] == '\"') {\r\n                this.next();\r\n                this.next();\r\n                this.next();\r\n                StringLines.push(currentStringLine);\r\n                break;\r\n            } else if (char == endChar) {\r\n                let length = 0;\r\n                for(let s of StringLines) length += s.length;\r\n                this.pushError('Innerhalb einer String-Konstante wurde das Textende erreicht.',length, \"error\", line, column);\r\n                StringLines.push(currentStringLine);\r\n                break;\r\n            } else \r\n            if(char == \"\\r\"){\r\n                this.next();\r\n            } else\r\n            if (char == \"\\n\"){\r\n                StringLines.push(currentStringLine);\r\n                currentStringLine = \"\";\r\n                this.line++;\r\n                this.column = 1;\r\n                this.next();\r\n                continue;\r\n            } else {\r\n                currentStringLine += char;\r\n            }\r\n            this.next();\r\n        }\r\n\r\n        if(StringLines.length == 0) return;\r\n        let lastLine = StringLines.pop();\r\n        let indent = 0;\r\n        while(lastLine.length > indent && lastLine.charAt(indent) == \" \"){\r\n            indent++;\r\n        }\r\n\r\n        let text: string = \"\"; \r\n        text = StringLines.map(s => s.substring(indent)).join(\"\\n\");\r\n\r\n        this.pushToken(TokenType.stringConstant, text, this.line, this.column, text.length + 2);\r\n\r\n    }\r\n\r\n    parseStringLiteralEscapeCharacter(): string {\r\n        this.next(); // skip \\\r\n        if(this.currentChar == \"u\"){\r\n            let hex: string = \"\";\r\n            this.next();\r\n            while(\"abcdef0123456789\".indexOf(this.currentChar) >= 0 && hex.length < 4){\r\n                hex += this.currentChar;\r\n                this.next();\r\n            }\r\n            if(hex.length < 4){\r\n                this.pushError('Die Escape-Sequenz \\\\u' + hex + ' gibt es nicht.', 1 + hex.length);\r\n                return \"\";\r\n            } else {\r\n                return String.fromCodePoint(parseInt(hex,16));\r\n            }\r\n        } else if(EscapeSequenceList[this.currentChar] != null){\r\n            let c = EscapeSequenceList[this.currentChar];\r\n            this.next();\r\n            return c;\r\n        } else {\r\n            this.pushError('Die Escape-Sequenz \\\\' + this.currentChar + ' gibt es nicht.', 2);\r\n            this.next();\r\n            return \"\";\r\n        }\r\n\r\n    }\r\n\r\n    lexMultilineComment() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n        let lastCharWasNewline: boolean = false;\r\n\r\n        let text = \"/*\";\r\n        this.next();\r\n        this.next();\r\n\r\n        while (true) {\r\n            let char = this.currentChar;\r\n            if (char == \"*\" && this.nextChar == \"/\") {\r\n                this.next();\r\n                this.next();\r\n                text += \"*/\";\r\n                break;\r\n            }\r\n            if (char == endChar) {\r\n                this.pushError(\"Innerhalb eines Mehrzeilenkommentars (/*... */) wurde das Dateiende erreicht.\", 1);\r\n                break;\r\n            }\r\n            if (char == \"\\n\") {\r\n                this.line++;\r\n                this.column = 0;\r\n                lastCharWasNewline = true;\r\n                text += char;\r\n            } else if (!(lastCharWasNewline && char == \" \")) {\r\n                text += char;\r\n                lastCharWasNewline = false;\r\n            }\r\n\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.comment, text, line, column);\r\n\r\n    }\r\n\r\n    lexEndofLineComment() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n\r\n        let text = \"//\";\r\n        this.next();\r\n        this.next();\r\n\r\n        while (true) {\r\n            let char = this.currentChar;\r\n            if (char == \"\\n\") {\r\n                break;\r\n            }\r\n            if (char == endChar) {\r\n                // this.pushError(\"Innerhalb eines Einzeilenkommentars (//... ) wurde das Dateiende erreicht.\", 1);\r\n                break;\r\n            }\r\n            text += char;\r\n            this.next();\r\n        }\r\n\r\n        this.pushToken(TokenType.comment, text, line, column);\r\n\r\n    }\r\n\r\n\r\n    lexNumber() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n\r\n        let sign: number = 1;\r\n        if (this.currentChar == '-') {\r\n            sign = -1;\r\n            this.next();\r\n        } else if (this.currentChar == '+') {\r\n            this.next();\r\n        }\r\n\r\n        let posStart = this.pos;\r\n\r\n        let firstChar = this.currentChar;\r\n\r\n        this.next();\r\n\r\n        let radix: number = 10;\r\n\r\n        if (firstChar == '0' && (['b', 'x', '0', '1', '2', '3', '4', '5', '6', '7'].indexOf(this.currentChar) >= 0)) {\r\n            if (this.currentChar == 'x') {\r\n                radix = 16;\r\n                this.next();\r\n            } else if (this.currentChar == 'b') {\r\n                radix = 2;\r\n                this.next();\r\n            } else radix = 8;\r\n            posStart = this.pos;\r\n        }\r\n\r\n        while (this.isDigit(this.currentChar, radix)) {\r\n            this.next();\r\n        }\r\n\r\n        let tt = TokenType.integerConstant;\r\n\r\n        if (this.currentChar == \".\") {\r\n            tt = TokenType.floatingPointConstant;\r\n\r\n            this.next();\r\n            while (this.isDigit(this.currentChar, 10)) {\r\n                this.next();\r\n            }\r\n\r\n            if (radix != 10) {\r\n                this.pushError(\"Eine float/double-Konstante darf nicht mit 0, 0b oder 0x beginnen.\", this.pos - posStart, \"error\", this.line, this.column - (this.pos - posStart));\r\n            }\r\n\r\n        }\r\n\r\n        let base = this.input.substring(posStart, this.pos);\r\n\r\n        posStart = this.pos;\r\n        let exponent: number = 0;\r\n\r\n        let hasExponential: boolean = false;\r\n        //@ts-ignore\r\n        if (this.currentChar == \"e\") {\r\n            hasExponential = true;\r\n            this.next();\r\n            let posExponentStart: number = this.pos;\r\n\r\n            //@ts-ignore\r\n            if (this.currentChar == '-') {\r\n                this.next();\r\n            }\r\n\r\n            while (this.isDigit(this.currentChar, 10)) {\r\n                this.next();\r\n            }\r\n            if (radix != 10) {\r\n                this.pushError(\"Eine float/double-Konstante darf nicht mit 0, 0b oder 0x beginnen.\", this.pos - posStart, \"error\", this.line, this.column - (this.pos - posStart));\r\n            }\r\n            let exponentString = this.input.substring(posExponentStart, this.pos);\r\n            exponent = Number.parseInt(exponentString);\r\n        }\r\n\r\n        if (this.currentChar == 'd' || this.currentChar == 'f') {\r\n            tt == TokenType.floatingPointConstant;\r\n            this.next();\r\n            if (radix != 10) {\r\n                this.pushError(\"Eine float/double-Konstante darf nicht mit 0, 0b oder 0x beginnen.\", this.pos - posStart, \"error\", this.line, this.column - (this.pos - posStart));\r\n            }\r\n        }\r\n\r\n        let value: number = (tt == TokenType.integerConstant) ? Number.parseInt(base, radix) : Number.parseFloat(base);\r\n        value *= sign;\r\n        if (exponent != 0) value *= Math.pow(10, exponent);\r\n\r\n        this.pushToken(tt, value, line, column);\r\n\r\n        if (radix == 16 && this.column - column == 8) {\r\n            this.colorInformation.push({\r\n                color: {\r\n                    red: (value >> 16) / 255,\r\n                    green: ((value >> 8) & 0xff) / 255,\r\n                    blue: (value & 0xff) / 255,\r\n                    alpha: 1\r\n                },\r\n                range: {\r\n                    startLineNumber: line, endLineNumber: line, startColumn: column, endColumn: this.column\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    lexAnnotation() {\r\n        let line = this.line;\r\n        let column = this.column - 1;\r\n        let posStart = this.pos;\r\n\r\n        this.next(); // consume @\r\n        let char = this.currentChar;\r\n\r\n        while (specialCharList[char] == null && !this.isSpace(char) && !(char == endChar)) {\r\n            this.next();\r\n            char = this.currentChar;\r\n        }\r\n\r\n        let posEnd = this.pos;\r\n\r\n        let text = this.input.substring(posStart, posEnd);\r\n        this.pushToken(TokenType.at, text, line, column, text.length + 1);\r\n    }\r\n\r\n    lexIdentifierOrKeyword() {\r\n        let line = this.line;\r\n        let column = this.column;\r\n\r\n        let posStart = this.pos;\r\n        let char = this.currentChar;\r\n\r\n        while (specialCharList[char] == null && !this.isSpace(char) && !(char == endChar)) {\r\n            this.next();\r\n            char = this.currentChar;\r\n        }\r\n\r\n        let posEnd = this.pos;\r\n\r\n        let text = this.input.substring(posStart, posEnd);\r\n\r\n        let tt = keywordList[text];\r\n        if (tt != null && typeof tt == \"number\") {\r\n\r\n            switch (tt) {\r\n                case TokenType.true:\r\n                    this.pushToken(TokenType.booleanConstant, true, line, column);\r\n                    break;\r\n                case TokenType.false:\r\n                    this.pushToken(TokenType.booleanConstant, false, line, column);\r\n                    break;\r\n                case TokenType.keywordPrint:\r\n                case TokenType.keywordPrintln:\r\n                    if (this.nonSpaceLastTokenType == TokenType.dot) {\r\n                        this.pushToken(TokenType.identifier, text, line, column);\r\n                    } else {\r\n                        this.pushToken(tt, text, line, column);\r\n                    }\r\n                    break;\r\n                default:\r\n                    this.pushToken(tt, text, line, column);\r\n                    break;\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (text == 'Color') {\r\n            this.colorIndices.push(this.tokenList.length);\r\n        }\r\n\r\n        this.pushToken(TokenType.identifier, text, line, column);\r\n\r\n    }\r\n\r\n    isSpace(char: string): boolean {\r\n        return char == \" \" || char == \"\\n\";\r\n    }\r\n\r\n\r\n}\r\n\r\nexport function errorListToString(errorList: Error[]): string {\r\n    let s = \"\";\r\n\r\n    for (let error of errorList) {\r\n\r\n        s += \"Z \" + error.position.line + \", S \" + error.position.column + \": \";\r\n        s += error.text + \"<br>\";\r\n\r\n    }\r\n\r\n    return s;\r\n}","import { TextPosition } from \"../lexer/Token.js\";\r\nimport { Type, Variable, Method } from \"../types/Types.js\";\r\nimport { Klass, StaticClass } from \"../types/Class.js\";\r\nimport { ArrayType } from \"../types/Array.js\";\r\n\r\n\r\nexport class SymbolTable {\r\n\r\n    static maxId: number = 0;\r\n\r\n    public id = SymbolTable.maxId++;\r\n\r\n    parent: SymbolTable; // SymbolTable of parent scope\r\n    positionFrom: TextPosition;\r\n    positionTo: TextPosition;\r\n\r\n    beginsNewStackframe: boolean = false;\r\n    stackframeSize: number;\r\n\r\n    childSymbolTables: SymbolTable[] = [];\r\n\r\n    variableMap: Map<string, Variable> = new Map();\r\n\r\n    classContext: Klass | StaticClass = null;\r\n    method: Method = null;\r\n\r\n    constructor(parentSymbolTable: SymbolTable, positionFrom: TextPosition, positionTo: TextPosition) {\r\n\r\n        this.parent = parentSymbolTable;\r\n\r\n        this.positionFrom = positionFrom;\r\n        this.positionTo = positionTo;\r\n\r\n        this.classContext = parentSymbolTable == null ? null : parentSymbolTable.classContext;\r\n\r\n        if (this.parent != null) {\r\n            this.parent.childSymbolTables.push(this);\r\n            this.method = this.parent.method;\r\n        }\r\n    }\r\n\r\n    getImitation(): SymbolTable {\r\n        let imitation = new SymbolTable(null, { line: 1, column: 1, length: 0 }, { line: 1, column: 10000, length: 0 });\r\n\r\n        imitation.beginsNewStackframe = true;\r\n        let st: SymbolTable = this;\r\n\r\n        let maxStackPos = -1;\r\n\r\n        while (st != null) {\r\n            if (st.classContext != null) {\r\n                imitation.classContext = st.classContext;\r\n            }\r\n\r\n            st.variableMap.forEach((variable, identifier) => {\r\n\r\n                if (imitation.variableMap.get(identifier) == null) {\r\n                    imitation.variableMap.set(identifier, variable);\r\n                }\r\n\r\n                if (variable.stackPos > maxStackPos) {\r\n                    maxStackPos = variable.stackPos;\r\n                }\r\n\r\n            });\r\n\r\n            st = st.parent;\r\n\r\n        }\r\n\r\n        imitation.stackframeSize = maxStackPos + 1;\r\n\r\n        return imitation;\r\n    }\r\n\r\n\r\n\r\n    getLocalVariableCompletionItems(rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let completionItems: monaco.languages.CompletionItem[] = [];\r\n\r\n        this.variableMap.forEach((variable, identifier) => {\r\n\r\n            //@ts-ignore\r\n            if(identifier == 0) return;\r\n\r\n            // TODO: Zu einem Objekt mit identifier == 0 kommt es, wenn man ArrayList<In tippt und dann <Strg + Leertaste>.\r\n\r\n            if (variable != null && variable.type != null && variable.type instanceof ArrayType) {\r\n                completionItems.push({\r\n                    label: identifier + \"[]\",\r\n                    insertText: identifier + \"[$0]\",\r\n                    documentation: \"Element des Arrays\",\r\n                    insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\r\n                    kind: monaco.languages.CompletionItemKind.Snippet,\r\n                    range: rangeToReplace\r\n                });\r\n\r\n            }\r\n            \r\n            completionItems.push({\r\n                label: identifier,\r\n                insertText: identifier,\r\n                kind: monaco.languages.CompletionItemKind.Variable,\r\n                range: rangeToReplace\r\n            });\r\n\r\n\r\n        });\r\n\r\n        if (this.parent != null && this.parent.classContext == this.classContext) {\r\n            completionItems = completionItems.concat(this.parent.getLocalVariableCompletionItems(rangeToReplace));\r\n        }\r\n\r\n        return completionItems;\r\n    }\r\n\r\n    findTableAtPosition(line: number, column: number): SymbolTable {\r\n\r\n        if (!this.containsPosition(line, column)) {\r\n            return null;\r\n        }\r\n\r\n        let shortestSymbolTableContainingPosition = null;\r\n        let shortestPosition = 10000000;\r\n\r\n        for (let st of this.childSymbolTables) {\r\n            if (st.containsPosition(line, column)) {\r\n                let st1 = st.findTableAtPosition(line, column);\r\n                if (st1.positionTo.line - st1.positionFrom.line < shortestPosition) {\r\n                    shortestSymbolTableContainingPosition = st1;\r\n                    shortestPosition = st1.positionTo.line - st1.positionFrom.line;\r\n                }\r\n            }\r\n            // if(st.containsPosition(line, column) && st.positionTo.line - st.positionFrom.line < shortestPosition){\r\n            //     shortestSymbolTableContainingPosition = st;\r\n            //     shortestPosition = st.positionTo.line - st.positionFrom.line;\r\n            // }\r\n        }\r\n\r\n        if (shortestSymbolTableContainingPosition != null) {\r\n            return shortestSymbolTableContainingPosition;\r\n        } else {\r\n            return this;\r\n        }\r\n\r\n    }\r\n\r\n    containsPosition(line: number, column: number) {\r\n        if (line < this.positionFrom.line || line > this.positionTo.line) {\r\n            return false;\r\n        }\r\n\r\n        if (line == this.positionFrom.line) return column >= this.positionFrom.column;\r\n        if (line == this.positionTo.line) return column <= this.positionTo.column;\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Error, QuickFix, ErrorLevel } from \"../lexer/Lexer.js\";\r\nimport { TextPosition, TokenType, TokenTypeReadable } from \"../lexer/Token.js\";\r\nimport { ArrayType } from \"../types/Array.js\";\r\nimport { Klass, Interface, StaticClass, Visibility, getVisibilityUpTo } from \"../types/Class.js\";\r\nimport { booleanPrimitiveType, charPrimitiveType, floatPrimitiveType, intPrimitiveType, stringPrimitiveType, objectType, nullType, voidPrimitiveType, varType, doublePrimitiveType } from \"../types/PrimitiveTypes.js\";\r\nimport { Attribute, Type, Variable, Value, PrimitiveType, UsagePositions, Method, Heap, getTypeIdentifier, Parameterlist } from \"../types/Types.js\";\r\nimport { ASTNode, AttributeDeclarationNode, BinaryOpNode, ClassDeclarationNode, ConstantNode, DoWhileNode, ForNode, IdentifierNode, IfNode, IncrementDecrementNode, MethodcallNode, MethodDeclarationNode, NewObjectNode, ReturnNode, SelectArrayElementNode, SelectArributeNode, SuperconstructorCallNode, SuperNode, ThisNode, UnaryOpNode, WhileNode, LocalVariableDeclarationNode, ArrayInitializationNode, NewArrayNode, PrintNode, CastManuallyNode, EnumDeclarationNode, TermNode, SwitchNode, ScopeNode, ParameterNode, ForNodeOverCollecion, ConstructorCallNode } from \"./AST.js\";\r\nimport { LabelManager } from \"./LabelManager.js\";\r\nimport { Module, ModuleStore, MethodCallPosition } from \"./Module.js\";\r\nimport { AssignmentStatement, InitStackframeStatement, JumpAlwaysStatement, Program, Statement, BeginArrayStatement, NewObjectStatement, JumpOnSwitchStatement, Breakpoint, ExtendedForLoopCheckCounterAndGetElement } from \"./Program.js\";\r\nimport { SymbolTable } from \"./SymbolTable.js\";\r\nimport { Enum, EnumInfo } from \"../types/Enum.js\";\r\nimport { InputClass } from \"../../runtimelibrary/Input.js\";\r\n\r\ntype StackType = {\r\n    type: Type,\r\n    isAssignable: boolean,\r\n    isSuper?: boolean, // used for method calls with super.\r\n    withReturnStatement?: boolean\r\n};\r\n\r\nexport class CodeGenerator {\r\n\r\n    static assignmentOperators = [TokenType.assignment, TokenType.plusAssignment, TokenType.minusAssignment,\r\n    TokenType.multiplicationAssignment, TokenType.divisionAssignment, TokenType.ANDAssigment, TokenType.ORAssigment,\r\n    TokenType.XORAssigment, TokenType.shiftLeftAssigment, TokenType.shiftRightAssigment, TokenType.shiftRightUnsignedAssigment];\r\n\r\n    moduleStore: ModuleStore;\r\n    module: Module;\r\n\r\n    symbolTableStack: SymbolTable[];\r\n    currentSymbolTable: SymbolTable;\r\n\r\n    heap: Heap;\r\n\r\n    currentProgram: Program;\r\n\r\n    errorList: Error[];\r\n\r\n    nextFreeRelativeStackPos: number;\r\n\r\n    breakNodeStack: JumpAlwaysStatement[][];\r\n    continueNodeStack: JumpAlwaysStatement[][];\r\n\r\n    startAdhocCompilation(module: Module, moduleStore: ModuleStore, symbolTable: SymbolTable, heap: Heap): Error[] {\r\n\r\n        this.moduleStore = moduleStore;\r\n        this.module = module;\r\n\r\n        this.symbolTableStack = [];\r\n        this.symbolTableStack.push(symbolTable);\r\n        this.currentSymbolTable = symbolTable;\r\n\r\n        this.heap = heap;\r\n\r\n        let oldStackframeSize = symbolTable.stackframeSize;\r\n        this.nextFreeRelativeStackPos = oldStackframeSize;\r\n\r\n        this.currentProgram = null;\r\n        this.errorList = [];\r\n\r\n        this.breakNodeStack = [];\r\n        this.continueNodeStack = [];\r\n\r\n        this.generateMain(true);\r\n\r\n        return this.errorList;\r\n\r\n    }\r\n\r\n    start(module: Module, moduleStore: ModuleStore) {\r\n\r\n        this.moduleStore = moduleStore;\r\n        this.module = module;\r\n\r\n        this.symbolTableStack = [];\r\n        this.currentSymbolTable = null;\r\n\r\n        this.currentProgram = null;\r\n        this.errorList = [];\r\n\r\n        this.nextFreeRelativeStackPos = 0;\r\n\r\n        if (this.module.tokenList.length > 0) {\r\n            let lastToken = this.module.tokenList[this.module.tokenList.length - 1];\r\n            this.module.mainSymbolTable.positionTo = { line: lastToken.position.line, column: lastToken.position.column + 1, length: 1 };\r\n        }\r\n\r\n        this.symbolTableStack.push(this.module.mainSymbolTable);\r\n        this.currentSymbolTable = this.module.mainSymbolTable;\r\n\r\n        this.breakNodeStack = [];\r\n        this.continueNodeStack = [];\r\n\r\n        this.generateMain();\r\n\r\n        this.generateClasses();\r\n\r\n        this.lookForStaticVoidMain();\r\n\r\n        this.module.errors[3] = this.errorList;\r\n\r\n    }\r\n\r\n    lookForStaticVoidMain() {\r\n\r\n        let mainProgram = this.module.mainProgram;\r\n\r\n        if (mainProgram != null && mainProgram.statements.length > 2) return;\r\n\r\n        let mainMethod: Method = null;\r\n        let staticClass: StaticClass = null;\r\n        let classNode1: ASTNode;\r\n\r\n        for (let classNode of this.module.classDefinitionsAST) {\r\n            if (classNode.type == TokenType.keywordClass) {\r\n\r\n                let ct = classNode.resolvedType;\r\n\r\n                for (let m of ct.staticClass.methods) {\r\n                    if (m.identifier == \"main\" && m.parameterlist.parameters.length == 1) {\r\n                        let pt = m.parameterlist.parameters[0];\r\n                        if (pt.type instanceof ArrayType && pt.type.arrayOfType == stringPrimitiveType) {\r\n                            if (mainMethod != null) {\r\n                                this.pushError(\"Es existieren mehrere Klassen mit statischen main-Methoden.\", classNode.position);\r\n                            } else {\r\n                                mainMethod = m;\r\n                                staticClass = ct.staticClass;\r\n                                classNode1 = classNode;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (mainMethod != null) {\r\n\r\n            let position: TextPosition = mainMethod.usagePositions[0];\r\n            if (mainMethod.program != null && mainMethod.program.statements.length > 0) {\r\n                position = mainMethod.program.statements[0].position;\r\n            }\r\n\r\n            this.initCurrentProgram();\r\n\r\n            this.module.mainProgram = this.currentProgram;\r\n\r\n            this.pushStatements([{\r\n                type: TokenType.callMainMethod,\r\n                position: position,\r\n                stepFinished: false,\r\n                method: mainMethod,\r\n                staticClass: staticClass\r\n            }, {\r\n                type: TokenType.closeStackframe,\r\n                position: mainMethod.usagePositions.get(this.module)[0]\r\n            }\r\n            ], false);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    generateClasses() {\r\n        if (this.module.classDefinitionsAST == null) return;\r\n\r\n        for (let classNode of this.module.classDefinitionsAST) {\r\n            if (classNode.type == TokenType.keywordClass) {\r\n                this.generateClass(classNode);\r\n            }\r\n            if (classNode.type == TokenType.keywordEnum) {\r\n                this.generateEnum(classNode);\r\n            }\r\n            if (classNode.type == TokenType.keywordInterface) {\r\n                let interf = classNode.resolvedType;\r\n                if (interf != null) {\r\n                    this.checkDoubleMethodDeclaration(interf);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    generateEnum(enumNode: EnumDeclarationNode) {\r\n\r\n        if (enumNode.resolvedType == null) return;\r\n\r\n        this.pushNewSymbolTable(false, enumNode.scopeFrom, enumNode.scopeTo);\r\n\r\n        let enumClass = <Enum>enumNode.resolvedType;\r\n\r\n        // this.pushUsagePosition(enumNode.position, enumClass);\r\n\r\n        this.currentSymbolTable.classContext = enumClass;\r\n        this.currentProgram = enumClass.attributeInitializationProgram;\r\n\r\n        for (let attribute of enumNode.attributes) {\r\n            if (attribute != null && !attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        if (enumClass.attributeInitializationProgram.statements.length > 0) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: this.lastStatement.position,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: false,\r\n                leaveThisObjectOnStack: true\r\n            });\r\n        }\r\n\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of enumNode.methods) {\r\n            if (methodNode != null && !methodNode.isAbstract && !methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n            }\r\n        }\r\n\r\n        this.popSymbolTable(null);\r\n\r\n        // constructor calls\r\n        this.pushNewSymbolTable(false, enumNode.scopeFrom, enumNode.scopeTo);\r\n\r\n        for (let enumValueNode of enumNode.values) {\r\n\r\n            if (enumValueNode.constructorParameters != null) {\r\n\r\n                let p: Program = {\r\n                    module: this.module,\r\n                    labelManager: null,\r\n                    statements: []\r\n                }\r\n\r\n                this.currentProgram = p;\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.pushEnumValue,\r\n                    position: enumValueNode.position,\r\n                    enumClass: enumClass,\r\n                    valueIdentifier: enumValueNode.identifier\r\n                });\r\n\r\n                this.processEnumConstructorCall(enumClass, enumValueNode.constructorParameters,\r\n                    enumValueNode.position, enumValueNode.commaPositions, enumValueNode.rightBracketPosition);\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.programEnd,\r\n                    position: enumValueNode.position,\r\n                    stepFinished: true\r\n                });\r\n\r\n                let enumInfo: EnumInfo = enumClass.identifierToInfoMap[enumValueNode.identifier];\r\n                enumInfo.constructorCallProgram = p;\r\n                enumInfo.position = enumValueNode.position;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.popSymbolTable(null);\r\n\r\n\r\n        // static attributes/methods\r\n        this.pushNewSymbolTable(false, enumNode.scopeFrom, enumNode.scopeTo);\r\n\r\n        this.currentSymbolTable.classContext = enumClass.staticClass;\r\n        this.currentProgram = enumClass.staticClass.attributeInitializationProgram;\r\n\r\n        for (let attribute of enumNode.attributes) {\r\n            if (attribute != null && attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of enumNode.methods) {\r\n            if (methodNode != null && methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n            }\r\n        }\r\n        this.checkDoubleMethodDeclaration(enumClass);\r\n\r\n        this.popSymbolTable(null);\r\n\r\n    }\r\n\r\n    processEnumConstructorCall(enumClass: Enum, parameterNodes: TermNode[],\r\n        position: TextPosition, commaPositions: TextPosition[], rightBracketPosition: TextPosition) {\r\n        let parameterTypes: Type[] = [];\r\n\r\n        for (let p of parameterNodes) {\r\n            let typeNode = this.processNode(p);\r\n            if (typeNode == null) continue;\r\n            parameterTypes.push(typeNode.type);\r\n        }\r\n\r\n        let methods = enumClass.getMethodsThatFitWithCasting(enumClass.identifier,\r\n            parameterTypes, true, Visibility.private);\r\n\r\n        this.module.pushMethodCallPosition(position, commaPositions, enumClass.getMethods(Visibility.private, enumClass.identifier), rightBracketPosition);\r\n\r\n\r\n        if (methods.error != null) {\r\n            this.pushError(methods.error, position);\r\n            return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n        }\r\n\r\n        let method = methods.methodList[0];\r\n\r\n        let destType: Type = null;\r\n        for (let i = 0; i < parameterTypes.length; i++) {\r\n            if (i < method.getParameterCount()) {  // possible ellipsis!\r\n                destType = method.getParameterType(i);\r\n                if (i == method.getParameterCount() - 1 && method.hasEllipsis()) {\r\n                    destType = (<ArrayType>destType).arrayOfType;\r\n                }\r\n            }\r\n\r\n            let srcType = parameterTypes[i];\r\n            if (!srcType.equals(destType)) {\r\n\r\n                if (srcType instanceof PrimitiveType && destType instanceof PrimitiveType) {\r\n                    if (srcType.getCastInformation(destType).needsStatement) {\r\n                        this.pushStatements({\r\n                            type: TokenType.castValue,\r\n                            position: null,\r\n                            newType: destType,\r\n                            stackPosRelative: -parameterTypes.length + 1 + i\r\n                        });\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        let stackframeDelta = 0;\r\n        if (method.hasEllipsis()) {\r\n            let ellipsisParameterCount = parameterTypes.length - method.getParameterCount() + 1; // last parameter and subsequent ones\r\n            stackframeDelta = - (ellipsisParameterCount - 1);\r\n            this.pushStatements({\r\n                type: TokenType.makeEllipsisArray,\r\n                position: parameterNodes[method.getParameterCount() - 1].position,\r\n                parameterCount: ellipsisParameterCount,\r\n                stepFinished: false,\r\n                arrayType: method.getParameter(method.getParameterCount() - 1).type\r\n            })\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.callMethod,\r\n            method: method,\r\n            position: position,\r\n            stepFinished: true,\r\n            isSuperCall: false,\r\n            stackframeBegin: -(parameterTypes.length + 1 + stackframeDelta) // this-object followed by parameters\r\n        });\r\n    }\r\n\r\n    generateClass(classNode: ClassDeclarationNode) {\r\n\r\n        if (classNode.resolvedType == null) return;\r\n\r\n        this.pushNewSymbolTable(false, classNode.scopeFrom, classNode.scopeTo);\r\n\r\n        let klass = <Klass>classNode.resolvedType;\r\n\r\n        //this.pushUsagePosition(classNode.position, klass);\r\n\r\n        let inheritanceError = klass.checkInheritance();\r\n\r\n        if (inheritanceError.message != \"\") {\r\n            this.pushError(inheritanceError.message, classNode.position, \"error\", this.getInheritanceQuickFix(classNode.scopeTo, inheritanceError));\r\n        }\r\n\r\n        let baseClass = klass.baseClass;\r\n        if (baseClass != null && baseClass.module != klass.module && baseClass.visibility == Visibility.private) {\r\n            this.pushError(\"Die Basisklasse \" + baseClass.identifier + \" der Klasse \" + klass.identifier + \" ist hier nicht sichtbar.\", classNode.position);\r\n        }\r\n\r\n        this.currentSymbolTable.classContext = klass;\r\n        this.currentProgram = klass.attributeInitializationProgram;\r\n\r\n        for (let attribute of classNode.attributes) {\r\n            if (attribute != null && !attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        if (klass.attributeInitializationProgram.statements.length > 0) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: this.lastStatement.position,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: false,\r\n                leaveThisObjectOnStack: true\r\n            });\r\n        }\r\n\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of classNode.methods) {\r\n            if (methodNode != null && !methodNode.isAbstract && !methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n                let m: Method = methodNode.resolvedType;\r\n                if (m != null && m.annotation == \"@Override\") {\r\n                    if (klass.baseClass != null) {\r\n                        if (klass.baseClass.getMethodBySignature(m.signature) == null) {\r\n                            this.pushError(\"Die Methode \" + m.signature + \" ist mit @Override annotiert, überschreibt aber keine Methode gleicher Signatur einer Oberklasse.\", methodNode.position, \"warning\");\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        this.checkDoubleMethodDeclaration(klass);\r\n\r\n        this.popSymbolTable(null);\r\n\r\n        // static attributes/methods\r\n        this.pushNewSymbolTable(false, classNode.scopeFrom, classNode.scopeTo);\r\n\r\n        this.currentSymbolTable.classContext = klass.staticClass;\r\n        this.currentProgram = klass.staticClass.attributeInitializationProgram;\r\n\r\n        for (let attribute of classNode.attributes) {\r\n            if (attribute != null && attribute.isStatic && attribute.initialization != null) {\r\n                this.initializeAttribute(attribute);\r\n            }\r\n        }\r\n\r\n        if (klass.staticClass.attributeInitializationProgram.statements.length > 0) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: this.lastStatement.position,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: false,\r\n                leaveThisObjectOnStack: true\r\n            });\r\n        }\r\n\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        for (let methodNode of classNode.methods) {\r\n            if (methodNode != null && methodNode.isStatic) {\r\n                this.compileMethod(methodNode);\r\n            }\r\n        }\r\n\r\n        this.popSymbolTable(null);\r\n\r\n    }\r\n\r\n    checkDoubleMethodDeclaration(cie: Klass | Interface) {  // N.B.: Enum extends Klass\r\n\r\n        let signatureMap: { [key: string]: Method } = {};\r\n\r\n        for (let m of cie.methods) {\r\n\r\n            let signature = m.getSignatureWithReturnParameter();\r\n            if (signatureMap[signature] != null) {\r\n\r\n                let cieType: String = \"In der Klasse \";\r\n                if (cie instanceof Interface) cieType = \"Im Interface \";\r\n                if (cie instanceof Enum) cieType = \"Im Enum \";\r\n\r\n                this.pushError(cieType + cie.identifier + \" gibt es zwei Methoden mit derselben Signatur: \" + signature, m.usagePositions.get(this.module)[0], \"error\");\r\n                this.pushError(cieType + cie.identifier + \" gibt es zwei Methoden mit derselben Signatur: \" + signature, signatureMap[signature].usagePositions.get(this.module)[0], \"error\");\r\n\r\n            } else {\r\n                signatureMap[signature] = m;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getInheritanceQuickFix(position: TextPosition, inheritanceError: { message: string; missingMethods: Method[]; }): QuickFix {\r\n\r\n        let s: string = \"\";\r\n        for (let m of inheritanceError.missingMethods) {\r\n            s += \"\\tpublic \" + (m.returnType == null ? \" void\" : getTypeIdentifier(m.returnType)) + \" \" + m.identifier + \"(\";\r\n            s += m.parameterlist.parameters.map(p => getTypeIdentifier(p.type) + \" \" + p.identifier).join(\", \");\r\n            s += \") {\\n\\t\\t//TODO: Methode füllen\\n\\t}\\n\\n\";\r\n        }\r\n\r\n        return {\r\n            title: \"Fehlende Methoden einfügen\",\r\n            editsProvider: (uri) => {\r\n                return [\r\n                    {\r\n                        resource: uri,\r\n                        edit: {\r\n                            range: { startLineNumber: position.line, startColumn: position.column - 1, endLineNumber: position.line, endColumn: position.column - 1 },\r\n                            text: s\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    getSuperconstructorCalls(nodes: ASTNode[], superconstructorCallsFound: ASTNode[], isFirstStatement: boolean): boolean {\r\n        for (let node of nodes) {\r\n            if (node == null) continue;\r\n            if (node.type == TokenType.superConstructorCall) {\r\n\r\n                if (!isFirstStatement) {\r\n                    if (superconstructorCallsFound.length > 0) {\r\n                        this.pushError(\"Ein Konstruktor darf nur einen einzigen Aufruf des Superkonstruktors enthalten.\", node.position, \"error\");\r\n                    } else {\r\n                        this.pushError(\"Vor dem Aufruf des Superkonstruktors darf keine andere Anweisung stehen.\", node.position, \"error\");\r\n                    }\r\n                }\r\n\r\n                superconstructorCallsFound.push(node);\r\n                isFirstStatement = false;\r\n            } else if (node.type == TokenType.scopeNode && node.statements != null) {\r\n                isFirstStatement = isFirstStatement && this.getSuperconstructorCalls(node.statements, superconstructorCallsFound, isFirstStatement);\r\n            } else {\r\n                isFirstStatement = false;\r\n            }\r\n        }\r\n        return isFirstStatement;\r\n    }\r\n\r\n\r\n    compileMethod(methodNode: MethodDeclarationNode) {\r\n        // Assumption: methodNode != null\r\n        let method = methodNode.resolvedType;\r\n\r\n        this.checkIfMethodIsVirtual(method);\r\n\r\n        if (method == null) return;\r\n\r\n        // this.pushUsagePosition(methodNode.position, method);\r\n\r\n        this.initCurrentProgram();\r\n        method.program = this.currentProgram;\r\n\r\n        this.pushNewSymbolTable(false, methodNode.scopeFrom, methodNode.scopeTo);\r\n        this.currentSymbolTable.method = method;\r\n\r\n        let stackPos: number = 1;\r\n\r\n        for (let v of method.getParameterList().parameters) {\r\n            v.stackPos = stackPos++;\r\n\r\n            this.currentSymbolTable.variableMap.set(v.identifier, v);\r\n        }\r\n\r\n        // \" + 1\" is for \"this\"-object\r\n        this.nextFreeRelativeStackPos = methodNode.parameters.length + 1;\r\n\r\n        if (method.isConstructor && this.currentSymbolTable.classContext instanceof Klass && methodNode.statements != null) {\r\n            let c: Klass = this.currentSymbolTable.classContext;\r\n\r\n            let superconstructorCalls: ASTNode[] = [];\r\n            this.getSuperconstructorCalls(methodNode.statements, superconstructorCalls, true);\r\n\r\n            let superconstructorCallEnsured: boolean = superconstructorCalls.length > 0;\r\n\r\n            // if (methodNode.statements.length > 0 && methodNode.statements[0].type == TokenType.scopeNode) {\r\n            //     let stm = methodNode.statements[0].statements;\r\n            //     if (stm.length > 0 && [TokenType.superConstructorCall, TokenType.constructorCall].indexOf(stm[0].type) >= 0) {\r\n            //         superconstructorCallEnsured = true;\r\n            //     }\r\n            // } else if ([TokenType.superConstructorCall, TokenType.constructorCall].indexOf(methodNode.statements[0].type) >= 0) {\r\n            //     superconstructorCallEnsured = true;\r\n            // }\r\n\r\n            if (c != null && c.baseClass?.hasConstructor() && !c.baseClass?.hasParameterlessConstructor()) {\r\n                let error: boolean = false;\r\n                if (methodNode.statements == null || methodNode.statements.length == 0) error = true;\r\n                if (!error) {\r\n                    error = !superconstructorCallEnsured;\r\n                }\r\n                if (error) {\r\n                    let quickFix: QuickFix = null;\r\n                    let constructors = c.baseClass.methods.filter(m => m.isConstructor);\r\n                    if (constructors.length == 1) {\r\n                        let methodCall = \"super(\" + constructors[0].parameterlist.parameters.map(p => p.identifier).join(\", \") + \");\";\r\n                        let position = methodNode.position;\r\n                        quickFix = {\r\n                            title: 'Aufruf des Konstruktors der Basisklasse einfügen',\r\n                            //06.06.2020\r\n                            editsProvider: (uri) => {\r\n                                return [{\r\n                                    resource: uri,\r\n                                    edit: {\r\n                                        range: {\r\n                                            startLineNumber: position.line + 1, startColumn: 0, endLineNumber: position.line + 1, endColumn: 0,\r\n                                            message: \"\",\r\n                                            severity: monaco.MarkerSeverity.Error\r\n                                        },\r\n                                        text: \"\\t\\t\" + methodCall + \"\\n\"\r\n                                    }\r\n                                }\r\n                                ];\r\n                            }\r\n                        }\r\n                    }\r\n                    this.pushError(\"Die Basisklasse der Klasse \" + c.identifier + \" besitzt keinen parameterlosen Konstruktor, daher muss diese Konstruktordefinition mit einem Aufruf eines Konstruktors der Basisklasse (super(...)) beginnen.\",\r\n                        methodNode.position, \"error\", quickFix);\r\n                }\r\n            } else if (!superconstructorCallEnsured && c.baseClass?.hasParameterlessConstructor()) {\r\n                // invoke parameterless constructor\r\n                let baseClassConstructor = c.baseClass.getParameterlessConstructor();\r\n                this.pushStatements([\r\n                    // Push this-object to stack:\r\n                    {\r\n                        type: TokenType.pushLocalVariableToStack,\r\n                        position: methodNode.position,\r\n                        stackposOfVariable: 0\r\n                    },\r\n                    {\r\n                        type: TokenType.callMethod,\r\n                        method: baseClassConstructor,\r\n                        isSuperCall: true,\r\n                        position: methodNode.position,\r\n                        stackframeBegin: -1 // this-object followed by parameters\r\n                    }\r\n\r\n                ])\r\n            }\r\n        }\r\n\r\n        let actorClass = <Klass>this.moduleStore.getType(\"Actor\").type;\r\n        let methodIdentifiers = [\"act\", \"onKeyTyped\", \"onKeyDown\", \"onKeyUp\",\r\n            \"onMouseDown\", \"onMouseUp\", \"onMouseMove\", \"onMouseEnter\", \"onMouseLeave\"];\r\n        if (methodIdentifiers.indexOf(method.identifier) >= 0 && this.currentSymbolTable.classContext.hasAncestorOrIs(actorClass)) {\r\n            this.pushStatements([\r\n\r\n                {\r\n                    type: TokenType.returnIfDestroyed,\r\n                    position: methodNode.position\r\n                },\r\n            ]);\r\n        }\r\n\r\n        let withReturnStatement = this.generateStatements(methodNode.statements).withReturnStatement;\r\n\r\n        if (!withReturnStatement) {\r\n            this.pushStatements({\r\n                type: TokenType.return,\r\n                position: methodNode.scopeTo,\r\n                copyReturnValueToStackframePos0: false,\r\n                stepFinished: true,\r\n                leaveThisObjectOnStack: false\r\n            });\r\n\r\n            let rt = method.getReturnType();\r\n            if (!method.isConstructor && rt != null && rt != voidPrimitiveType) {\r\n                this.pushError(\"Die Deklaration der Methode verlangt die Rückgabe eines Wertes vom Typ \" + rt.identifier + \". Es fehlt (mindestens) eine entsprechende return-Anweisung.\", methodNode.position);\r\n            }\r\n        }\r\n\r\n        method.reserveStackForLocalVariables = this.nextFreeRelativeStackPos\r\n            - methodNode.parameters.length - 1;\r\n\r\n        this.popSymbolTable();\r\n        this.currentProgram.labelManager.resolveNodes();\r\n    }\r\n\r\n\r\n    /**\r\n     * checks if child classes have method with same signature\r\n     */\r\n    checkIfMethodIsVirtual(method: Method) {\r\n\r\n        let klass = this.currentSymbolTable.classContext;\r\n        if (klass != null) {\r\n\r\n            for (let mo of this.moduleStore.getModules(false)) {\r\n                for (let c of mo.typeStore.typeList) {\r\n                    if (c instanceof Klass && c != klass && c.hasAncestorOrIs(klass)) {\r\n                        for (let m of c.methods) {\r\n                            if (m != null && method != null && m.signature == method.signature) {\r\n                                method.isVirtual = true;\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    initializeAttribute(attribute: AttributeDeclarationNode) {\r\n\r\n        if (attribute == null) return;\r\n\r\n        // assumption: attribute != null\r\n        if (attribute.identifier == null || attribute.initialization == null) return;\r\n\r\n        if (attribute.isStatic) {\r\n            this.pushStatements({\r\n                type: TokenType.pushStaticAttribute,\r\n                attributeIndex: attribute.resolvedType.index,\r\n                attributeIdentifier: attribute.resolvedType.identifier,\r\n                position: attribute.initialization.position,\r\n                klass: <StaticClass>(this.currentSymbolTable.classContext)\r\n            });\r\n        } else {\r\n            this.pushStatements({\r\n                type: TokenType.pushAttribute,\r\n                attributeIndex: attribute.resolvedType.index,\r\n                attributeIdentifier: attribute.identifier,\r\n                position: attribute.initialization.position,\r\n                useThisObject: true\r\n            });\r\n        }\r\n\r\n\r\n        let initializationType = this.processNode(attribute.initialization);\r\n\r\n        if (initializationType != null && initializationType.type != null) {\r\n            if (!this.ensureAutomaticCasting(initializationType.type, attribute.attributeType.resolvedType)) {\r\n\r\n                if (attribute.attributeType.resolvedType == null) {\r\n                    this.pushError(\"Der Datentyp von \" + attribute.identifier + \" konnte nicht ermittelt werden. \", attribute.position);\r\n                } else {\r\n                    this.pushError(\"Der Wert des Term vom Datentyp \" + initializationType.type + \" kann dem Attribut \" + attribute.identifier + \" vom Typ \" + attribute.attributeType.resolvedType.identifier + \" nicht zugewiesen werden.\", attribute.initialization.position);\r\n                }\r\n\r\n\r\n            }\r\n\r\n            this.pushStatements({\r\n                type: TokenType.assignment,\r\n                position: attribute.initialization.position,\r\n                stepFinished: false,\r\n                leaveValueOnStack: false\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    initCurrentProgram() {\r\n\r\n        this.currentProgram = {\r\n            module: this.module,\r\n            statements: [],\r\n            labelManager: null\r\n        };\r\n\r\n        this.currentProgram.labelManager = new LabelManager(this.currentProgram);\r\n\r\n        this.lastStatement = null;\r\n\r\n    }\r\n\r\n    generateMain(isAdhocCompilation: boolean = false) {\r\n\r\n        this.initCurrentProgram();\r\n\r\n        let position: TextPosition = { line: 1, column: 1, length: 0 };\r\n\r\n        let mainProgramAst = this.module.mainProgramAst;\r\n        if (mainProgramAst != null && mainProgramAst.length > 0 && mainProgramAst[0] != null) {\r\n            position = this.module.mainProgramAst[0].position;\r\n        }\r\n\r\n        if (!isAdhocCompilation) {\r\n            this.pushNewSymbolTable(true, position, { line: 100000, column: 1, length: 0 }, this.currentProgram);\r\n            this.heap = {};\r\n        }\r\n\r\n        this.module.mainProgram = this.currentProgram;\r\n\r\n        let hasMainProgram: boolean = false;\r\n\r\n        if (this.module.mainProgramAst != null && this.module.mainProgramAst.length > 0) {\r\n\r\n            hasMainProgram = true;\r\n            this.generateStatements(this.module.mainProgramAst);\r\n\r\n            if (isAdhocCompilation && this.lastStatement != null && this.lastStatement.type == TokenType.decreaseStackpointer) {\r\n                this.removeLastStatement();\r\n            }\r\n\r\n            this.lastPosition = this.module.mainProgramEnd;\r\n            if (this.lastPosition == null) this.lastPosition = { line: 100000, column: 0, length: 0 };\r\n            // if(this.lastPosition == null) this.lastPosition = {line: 100000, column: 0, length: 0};\r\n\r\n            this.currentSymbolTable.positionTo = this.lastPosition;\r\n            if (!isAdhocCompilation) this.popSymbolTable(this.currentProgram, true);\r\n            this.heap = null;\r\n\r\n            this.pushStatements({\r\n                type: TokenType.programEnd,\r\n                position: this.lastPosition,\r\n                stepFinished: true,\r\n                pauseAfterProgramEnd: true\r\n            }, true);\r\n\r\n        }\r\n\r\n        this.currentProgram.labelManager.resolveNodes();\r\n\r\n        if (!isAdhocCompilation && !hasMainProgram) {\r\n            this.popSymbolTable(this.currentProgram);\r\n            this.heap = null;\r\n        }\r\n\r\n    }\r\n\r\n    ensureAutomaticCasting(typeFrom: Type, typeTo: Type, position?: TextPosition, nodeFrom?: ASTNode): boolean {\r\n\r\n        if (typeFrom == null || typeTo == null) return false;\r\n\r\n        if (typeFrom.equals(typeTo)) {\r\n            return true;\r\n        }\r\n\r\n        if (!typeFrom.canCastTo(typeTo)) {\r\n\r\n            if (typeTo == booleanPrimitiveType && nodeFrom != null) {\r\n\r\n                this.checkIfAssignmentInstedOfEqual(nodeFrom);\r\n\r\n            }\r\n\r\n\r\n            return false;\r\n        }\r\n\r\n        if (typeFrom[\"unboxableAs\"] != null && typeFrom[\"unboxableAs\"].indexOf(typeTo) >= 0) {\r\n            return true;\r\n        }\r\n\r\n        if (typeFrom instanceof Klass && typeTo == stringPrimitiveType) {\r\n\r\n            let toStringStatement = this.getToStringStatement(typeFrom, position);\r\n\r\n            if (toStringStatement != null) {\r\n                this.pushStatements(toStringStatement);\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n\r\n        if (typeFrom instanceof PrimitiveType && (typeTo instanceof PrimitiveType || typeTo == stringPrimitiveType)) {\r\n            let castInfo = typeFrom.getCastInformation(typeTo);\r\n            if (!castInfo.automatic) {\r\n                return false;\r\n            }\r\n            if (castInfo.needsStatement) {\r\n                this.pushStatements({\r\n                    type: TokenType.castValue,\r\n                    newType: typeTo,\r\n                    position: position\r\n                });\r\n            }\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    getToStringStatement(type: Klass, position: TextPosition): Statement {\r\n        let toStringMethod = type.getMethodBySignature(\"toString()\");\r\n        if (toStringMethod != null && toStringMethod.getReturnType() == stringPrimitiveType) {\r\n\r\n            return {\r\n                type: TokenType.callMethod,\r\n                position: position,\r\n                method: toStringMethod,\r\n                isSuperCall: false,\r\n                stackframeBegin: -1,\r\n                stepFinished: false\r\n            };\r\n\r\n\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    checkIfAssignmentInstedOfEqual(nodeFrom: ASTNode, conditionType?: Type) {\r\n        if (nodeFrom == null) return;\r\n\r\n        if (nodeFrom.type == TokenType.binaryOp && nodeFrom.operator == TokenType.assignment) {\r\n            let pos = nodeFrom.position;\r\n            this.pushError(\"= ist der Zuweisungsoperator. Du willst sicher zwei Werte vergleichen. Dazu benötigst Du den Vergleichsoperator ==.\",\r\n                pos, conditionType == booleanPrimitiveType ? \"warning\" : \"error\", {\r\n                title: '= durch == ersetzen',\r\n                editsProvider: (uri) => {\r\n                    return [{\r\n                        resource: uri,\r\n                        edit: {\r\n                            range: {\r\n                                startLineNumber: pos.line, startColumn: pos.column, endLineNumber: pos.line, endColumn: pos.column + 1,\r\n                                message: \"\",\r\n                                severity: monaco.MarkerSeverity.Error\r\n                            },\r\n                            text: \"==\"\r\n                        }\r\n                    }\r\n                    ];\r\n                }\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    generateStatements(nodes: ASTNode[]): { withReturnStatement: boolean, endPosition?: TextPosition } {\r\n\r\n\r\n        if (nodes == null || nodes.length == 0 || nodes[0] == null) return { withReturnStatement: false };\r\n\r\n        let withReturnStatement: boolean = this.processStatementsInsideBlock(nodes);\r\n\r\n        let lastNode = nodes[nodes.length - 1];\r\n        let endPosition: TextPosition;\r\n        if (lastNode != null) {\r\n            if (lastNode.type == TokenType.scopeNode) {\r\n                endPosition = lastNode.positionTo;\r\n            } else {\r\n                endPosition = Object.assign({}, lastNode.position);\r\n                if (endPosition != null) {\r\n                    endPosition.column += endPosition.length;\r\n                    endPosition.length = 1;\r\n                }\r\n            }\r\n            this.lastPosition = endPosition;\r\n        } else {\r\n            endPosition = this.lastPosition;\r\n        }\r\n\r\n        return { withReturnStatement: withReturnStatement, endPosition: endPosition };\r\n\r\n    }\r\n\r\n    processStatementsInsideBlock(nodes: ASTNode[]) {\r\n        let withReturnStatement = false;\r\n\r\n        for (let node of nodes) {\r\n\r\n            if (node == null) continue;\r\n\r\n            let type = this.processNode(node);\r\n\r\n            if (type != null && type.withReturnStatement != null && type.withReturnStatement) {\r\n                withReturnStatement = true;\r\n            }\r\n\r\n            // If last Statement has value which is not used further then pop this value from stack.\r\n            // e.g. statement 12 + 17 -7;\r\n            // Parser issues a warning in this case, see Parser.checkIfStatementHasNoEffekt\r\n            if (type != null && type.type != null && type.type != voidPrimitiveType) {\r\n\r\n                if (this.lastStatement != null &&\r\n                    this.lastStatement.type == TokenType.assignment && this.lastStatement.leaveValueOnStack) {\r\n                    this.lastStatement.leaveValueOnStack = false;\r\n                } else {\r\n                    this.pushStatements({\r\n                        type: TokenType.decreaseStackpointer,\r\n                        position: null,\r\n                        popCount: 1,\r\n                        stepFinished: true\r\n                    }, true)\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return withReturnStatement;\r\n    }\r\n\r\n\r\n    lastPosition: TextPosition;\r\n    lastStatement: Statement;\r\n\r\n    insertStatements(pos: number, statements: Statement | Statement[]) {\r\n        if (statements == null) return;\r\n        if (!Array.isArray(statements)) statements = [statements];\r\n        for (let st of statements) {\r\n            this.currentProgram.statements.splice(pos++, 0, st);\r\n        }\r\n    }\r\n\r\n    pushStatements(statement: Statement | Statement[], deleteStepFinishedFlagOnStepBefore: boolean = false) {\r\n\r\n        if (statement == null) return;\r\n\r\n        if (deleteStepFinishedFlagOnStepBefore && this.currentProgram.statements.length > 0) {\r\n            let stepBefore: Statement = this.currentProgram.statements[this.currentProgram.statements.length - 1];\r\n            stepBefore.stepFinished = false;\r\n        }\r\n\r\n        if (Array.isArray(statement)) {\r\n            for (let st of statement) {\r\n                this.currentProgram.statements.push(st);\r\n                if (st.type == TokenType.return || st.type == TokenType.jumpAlways) {\r\n                    if (this.lastStatement != null) this.lastStatement.stepFinished = false;\r\n                }\r\n                if (st.position != null) {\r\n                    this.lastPosition = st.position;\r\n                } else {\r\n                    st.position = this.lastPosition;\r\n                }\r\n                this.lastStatement = st;\r\n            }\r\n        } else {\r\n            this.currentProgram.statements.push(statement);\r\n            if (statement.type == TokenType.return || statement.type == TokenType.jumpAlways) {\r\n                if (this.lastStatement != null && this.lastStatement.type != TokenType.noOp) this.lastStatement.stepFinished = false;\r\n            }\r\n            if (statement.position != null) {\r\n                this.lastPosition = statement.position;\r\n            } else {\r\n                statement.position = this.lastPosition;\r\n            }\r\n\r\n            this.lastStatement = statement;\r\n        }\r\n    }\r\n\r\n    removeLastStatement() {\r\n        let lst = this.currentProgram.statements.pop();\r\n        if (this.currentProgram.labelManager != null) {\r\n            this.currentProgram.labelManager.removeNode(lst);\r\n        }\r\n    }\r\n\r\n    initStackFrameNodes: InitStackframeStatement[] = [];\r\n\r\n\r\n    pushNewSymbolTable(beginNewStackframe: boolean, positionFrom: TextPosition, positionTo: TextPosition,\r\n        program?: Program): SymbolTable {\r\n\r\n        let st = new SymbolTable(this.currentSymbolTable, positionFrom, positionTo);\r\n\r\n        this.symbolTableStack.push(this.currentSymbolTable);\r\n\r\n        if (beginNewStackframe) {\r\n            st.beginsNewStackframe = true;\r\n            this.currentSymbolTable.stackframeSize = this.nextFreeRelativeStackPos;\r\n            this.nextFreeRelativeStackPos = 0;\r\n\r\n            if (program != null) {\r\n                let initStackFrameNode: InitStackframeStatement = {\r\n                    type: TokenType.initStackframe,\r\n                    position: positionFrom,\r\n                    reserveForLocalVariables: 0\r\n                }\r\n\r\n                program.statements.push(initStackFrameNode);\r\n                this.initStackFrameNodes.push(initStackFrameNode);\r\n            }\r\n\r\n        }\r\n\r\n        this.currentSymbolTable = st;\r\n\r\n        return st;\r\n\r\n    }\r\n\r\n    popSymbolTable(program?: Program, deleteStepFinishedFlagOnStepBefore: boolean = false): void {\r\n\r\n        let st = this.currentSymbolTable;\r\n        this.currentSymbolTable = this.symbolTableStack.pop();\r\n\r\n        // if v.declarationError != null then variable has been used before initialization.\r\n        st.variableMap.forEach(v => {\r\n            if (v.declarationError != null && v.usedBeforeInitialization) {\r\n                this.errorList.push(v.declarationError);\r\n                v.declarationError = null;\r\n            }\r\n        });\r\n\r\n        // if (!st.beginsNewStackframe && st.variableMap.size == 0 && removeI) {\r\n        //     // empty symbol table => remove it!\r\n        //     if (st.parent != null) {\r\n        //         st.parent.childSymbolTables.pop();\r\n        //     }\r\n        // } else \r\n        {\r\n            // TODO: add length of token\r\n\r\n            if (st.beginsNewStackframe) {\r\n\r\n                st.stackframeSize = this.nextFreeRelativeStackPos;\r\n                this.nextFreeRelativeStackPos = this.currentSymbolTable.stackframeSize;\r\n\r\n                if (program != null) {\r\n                    let initStackframeNode = this.initStackFrameNodes.pop();\r\n                    if (initStackframeNode != null) initStackframeNode.reserveForLocalVariables = st.stackframeSize;\r\n\r\n                    if (program.statements.length > 0 && deleteStepFinishedFlagOnStepBefore) {\r\n                        let statement = program.statements[program.statements.length - 1];\r\n\r\n                        // don't set stepFinished = false in jump-statements\r\n                        // as this could lead to infinity-loop is user sets \"while(true);\" just before program end\r\n                        if ([TokenType.jumpAlways, TokenType.jumpIfTrue, TokenType.jumpIfFalse, TokenType.jumpIfFalseAndLeaveOnStack, TokenType.jumpIfTrueAndLeaveOnStack].indexOf(statement.type) == -1) {\r\n                            program.statements[program.statements.length - 1].stepFinished = false;\r\n                        }\r\n                    }\r\n\r\n                    program.statements.push({\r\n                        type: TokenType.closeStackframe,\r\n                        position: st.positionTo\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    pushError(text: string, position: TextPosition, errorLevel: ErrorLevel = \"error\", quickFix?: QuickFix) {\r\n        this.errorList.push({\r\n            text: text,\r\n            position: position,\r\n            quickFix: quickFix,\r\n            level: errorLevel\r\n        });\r\n    }\r\n\r\n    openBreakScope() {\r\n        this.breakNodeStack.push([]);\r\n    }\r\n\r\n    openContinueScope() {\r\n        this.continueNodeStack.push([]);\r\n    }\r\n\r\n    pushBreakNode(breakNode: JumpAlwaysStatement) {\r\n        if (this.breakNodeStack.length == 0) {\r\n            this.pushError(\"Eine break-Anweisung ist nur innerhalb einer umgebenden Schleife oder switch-Anweisung sinnvoll.\", breakNode.position);\r\n        } else {\r\n            this.breakNodeStack[this.breakNodeStack.length - 1].push(breakNode);\r\n            this.pushStatements(breakNode);\r\n        }\r\n    }\r\n\r\n    pushContinueNode(continueNode: JumpAlwaysStatement) {\r\n        if (this.continueNodeStack.length == 0) {\r\n            this.pushError(\"Eine continue-Anweisung ist nur innerhalb einer umgebenden Schleife oder switch-Anweisung sinnvoll.\", continueNode.position);\r\n        } else {\r\n            this.continueNodeStack[this.continueNodeStack.length - 1].push(continueNode);\r\n            this.pushStatements(continueNode);\r\n        }\r\n    }\r\n\r\n    closeBreakScope(breakTargetLabel: number, lm: LabelManager) {\r\n        let breakNodes = this.breakNodeStack.pop();\r\n        for (let bn of breakNodes) {\r\n            lm.registerJumpNode(bn, breakTargetLabel);\r\n        }\r\n    }\r\n\r\n    closeContinueScope(continueTargetLabel: number, lm: LabelManager) {\r\n        let continueNodes = this.continueNodeStack.pop();\r\n        for (let bn of continueNodes) {\r\n            lm.registerJumpNode(bn, continueTargetLabel);\r\n        }\r\n    }\r\n\r\n    breakOccured(): boolean {\r\n        return this.breakNodeStack.length > 0 && this.breakNodeStack[this.breakNodeStack.length - 1].length > 0;\r\n    }\r\n\r\n    processNode(node: ASTNode, isLeftSideOfAssignment: boolean = false): StackType {\r\n\r\n        if (node == null) return;\r\n\r\n        switch (node.type) {\r\n            case TokenType.binaryOp:\r\n                return this.processBinaryOp(node);\r\n            case TokenType.unaryOp:\r\n                return this.processUnaryOp(node);\r\n            case TokenType.pushConstant:\r\n                return this.pushConstant(node);\r\n            case TokenType.callMethod:\r\n                return this.callMethod(node);\r\n            case TokenType.identifier:\r\n                {\r\n                    let stackType = this.resolveIdentifier(node);\r\n                    let v = node.variable;\r\n                    if (v != null) {\r\n                        if (isLeftSideOfAssignment) {\r\n                            v.initialized = true;\r\n                            if (!v.usedBeforeInitialization) {\r\n                                v.declarationError = null;\r\n                            }\r\n                        } else {\r\n                            if (v.initialized != null && !v.initialized) {\r\n                                v.usedBeforeInitialization = true;\r\n                                this.pushError(\"Die Variable \" + v.identifier + \" wird hier benutzt bevor sie initialisiert wurde.\", node.position, \"info\");\r\n                            }\r\n                        }\r\n                    }\r\n                    return stackType;\r\n                }\r\n            case TokenType.selectArrayElement:\r\n                return this.selectArrayElement(node);\r\n            case TokenType.incrementDecrementBefore:\r\n            case TokenType.incrementDecrementAfter:\r\n                return this.incrementDecrementBeforeOrAfter(node);\r\n            case TokenType.superConstructorCall:\r\n                return this.superconstructorCall(node);\r\n            case TokenType.constructorCall:\r\n                return this.superconstructorCall(node);\r\n            case TokenType.keywordThis:\r\n                return this.pushThisOrSuper(node, false);\r\n            case TokenType.keywordSuper:\r\n                return this.pushThisOrSuper(node, true);\r\n            case TokenType.pushAttribute:\r\n                return this.pushAttribute(node);\r\n            case TokenType.newObject:\r\n                return this.newObject(node);\r\n            case TokenType.keywordWhile:\r\n                return this.processWhile(node);\r\n            case TokenType.keywordDo:\r\n                return this.processDo(node);\r\n            case TokenType.keywordFor:\r\n                return this.processFor(node);\r\n            case TokenType.forLoopOverCollection:\r\n                return this.processForLoopOverCollection(node);\r\n            case TokenType.keywordIf:\r\n                return this.processIf(node);\r\n            case TokenType.keywordSwitch:\r\n                return this.processSwitch(node);\r\n            case TokenType.keywordReturn:\r\n                return this.processReturn(node);\r\n            case TokenType.localVariableDeclaration:\r\n                return this.localVariableDeclaration(node);\r\n            case TokenType.arrayInitialization:\r\n                return this.processArrayLiteral(node);\r\n            case TokenType.newArray:\r\n                return this.processNewArray(node);\r\n            case TokenType.keywordPrint:\r\n            case TokenType.keywordPrintln:\r\n                return this.processPrint(node);\r\n            case TokenType.castValue:\r\n                return this.processManualCast(node);\r\n            case TokenType.keywordBreak:\r\n                this.pushBreakNode({\r\n                    type: TokenType.jumpAlways,\r\n                    position: node.position\r\n                });\r\n                return null;\r\n            case TokenType.keywordContinue:\r\n                this.pushContinueNode({\r\n                    type: TokenType.jumpAlways,\r\n                    position: node.position\r\n                });\r\n                return null;\r\n            case TokenType.rightBracket:\r\n                let type = this.processNode(node.termInsideBrackets);\r\n                if (type != null && type.type instanceof Klass) this.pushTypePosition(node.position, type.type);\r\n                return type;\r\n            case TokenType.scopeNode:\r\n                this.pushNewSymbolTable(false, node.position, node.positionTo);\r\n\r\n                let withReturnStatement = this.processStatementsInsideBlock(node.statements);\r\n\r\n                this.popSymbolTable();\r\n\r\n                return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n        }\r\n\r\n    }\r\n\r\n    processManualCast(node: CastManuallyNode): StackType {\r\n\r\n        let typeFrom1 = this.processNode(node.whatToCast);\r\n\r\n        if (typeFrom1 == null || typeFrom1.type == null) return;\r\n        let typeFrom: Type = typeFrom1.type;\r\n\r\n        if (typeFrom != null && node.castToType != null && node.castToType.resolvedType != null) {\r\n\r\n            let typeTo = node.castToType.resolvedType;\r\n\r\n            if (typeFrom.canCastTo(typeTo)) {\r\n\r\n                if (typeFrom instanceof PrimitiveType && typeTo instanceof PrimitiveType) {\r\n                    let castInfo = typeFrom.getCastInformation(typeTo);\r\n                    if (castInfo.needsStatement) {\r\n                        this.pushStatements({\r\n                            type: TokenType.castValue,\r\n                            position: node.position,\r\n                            newType: typeTo\r\n                        });\r\n                    }\r\n                } else if (typeFrom instanceof Klass && typeTo == stringPrimitiveType) {\r\n                    let toStringMethod = typeFrom.getMethodBySignature(\"toString()\");\r\n                    if (toStringMethod != null && toStringMethod.getReturnType() == stringPrimitiveType) {\r\n\r\n                        this.pushStatements({\r\n                            type: TokenType.callMethod,\r\n                            position: node.position,\r\n                            method: toStringMethod,\r\n                            isSuperCall: false,\r\n                            stackframeBegin: -1,\r\n                            stepFinished: false\r\n                        });\r\n\r\n                    } else {\r\n                        this.pushError(\"Der Datentyp \" + typeFrom.identifier + \" kann (zumindest durch casting) nicht in den Datentyp \" + typeTo.identifier + \" umgewandelt werden.\", node.position);\r\n                        this.pushStatements({\r\n                            type: TokenType.castValue,\r\n                            position: node.position,\r\n                            newType: typeTo\r\n                        });\r\n                    }\r\n\r\n                }\r\n\r\n                return {\r\n                    isAssignable: typeFrom1.isAssignable,\r\n                    type: typeTo\r\n                };\r\n\r\n            }\r\n\r\n            if ((typeFrom instanceof Klass || typeFrom instanceof Interface) && (typeTo instanceof Klass || typeTo instanceof Interface))\r\n\r\n            // if (typeFrom instanceof Klass &&\r\n            //     (typeTo instanceof Klass && !typeFrom.hasAncestorOrIs(typeTo) && typeTo.hasAncestorOrIs(typeFrom)) ||\r\n            //     (typeTo instanceof Interface && !(<Klass>typeFrom).implementsInterface(typeTo))) \r\n            {\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.checkCast,\r\n                    position: node.position,\r\n                    newType: typeTo,\r\n                    stepFinished: false\r\n                });\r\n\r\n                return {\r\n                    isAssignable: typeFrom1.isAssignable,\r\n                    type: typeTo\r\n                };\r\n            }\r\n            else {\r\n                this.pushError(\"Der Datentyp \" + typeFrom.identifier + \" kann (zumindest durch casting) nicht in den Datentyp \" + typeTo.identifier + \" umgewandelt werden.\", node.position);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    processPrint(node: PrintNode): StackType {\r\n\r\n        let type = node.type == TokenType.keywordPrint ? TokenType.print : TokenType.println;\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, TokenTypeReadable[node.type], node.rightBracketPosition);\r\n\r\n        if (node.text != null) {\r\n\r\n            let type = this.processNode(node.text);\r\n\r\n            if (type != null) {\r\n                if (!this.ensureAutomaticCasting(type.type, stringPrimitiveType)) {\r\n                    this.pushError(\"Die Methoden print und println erwarten einen Parameter vom Typ String. Gefunden wurde ein Wert vom Typ \" + type.type?.identifier + \".\", node.position);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        let withColor: boolean = false;\r\n\r\n        if (node.color != null) {\r\n\r\n            let type = this.processNode(node.color);\r\n\r\n            if (type != null) {\r\n                if (type.type != stringPrimitiveType && type.type != intPrimitiveType) {\r\n                    if (!this.ensureAutomaticCasting(type.type, stringPrimitiveType)) {\r\n                        this.pushError(\"Die Methoden print und println erwarten als Farbe einen Parameter vom Typ String oder int. Gefunden wurde ein Wert vom Typ \" + type.type.identifier + \".\", node.position);\r\n                    }\r\n                }\r\n            }\r\n\r\n            withColor = true;\r\n        }\r\n\r\n\r\n        this.pushStatements({\r\n            type: type,\r\n            position: node.position,\r\n            empty: (node.text == null),\r\n            stepFinished: true,\r\n            withColor: withColor\r\n        });\r\n\r\n\r\n        return null;\r\n    }\r\n\r\n    processNewArray(node: NewArrayNode): StackType {\r\n\r\n        if (node.initialization != null) {\r\n            return this.processArrayLiteral(node.initialization);\r\n        }\r\n\r\n        // int[7][2][] are 7 arrays each with arrays of length 2 which are empty\r\n\r\n        let dimension = 0;\r\n        for (let ec of node.elementCount) {\r\n            if (ec != null) {\r\n                this.processNode(ec); // push number of elements for this dimension on stack\r\n                dimension++;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        // for the array above: arrayType is array of array of int; dimension is 2; stack: 7 2\r\n        this.pushStatements({\r\n            type: TokenType.pushEmptyArray,\r\n            position: node.position,\r\n            arrayType: node.arrayType.resolvedType,\r\n            dimension: dimension\r\n        });\r\n\r\n        return {\r\n            isAssignable: false,\r\n            type: node.arrayType.resolvedType\r\n        }\r\n\r\n    }\r\n\r\n\r\n    processArrayLiteral(node: ArrayInitializationNode): StackType {\r\n\r\n        let bes: BeginArrayStatement = {\r\n            type: TokenType.beginArray,\r\n            position: node.position,\r\n            arrayType: node.arrayType.resolvedType\r\n        };\r\n\r\n        this.pushStatements(bes);\r\n\r\n        for (let ain of node.nodes) {\r\n\r\n            // Did an error occur when parsing a constant?\r\n            if (ain == null) {\r\n                continue;\r\n            }\r\n\r\n            if (ain.type == TokenType.arrayInitialization) {\r\n                this.processArrayLiteral(ain);\r\n            } else {\r\n                let sType = this.processNode(ain);\r\n                if (sType == null) {\r\n                    return;\r\n                }\r\n                let targetType = (<ArrayType>node.arrayType.resolvedType).arrayOfType;\r\n                if (!this.ensureAutomaticCasting(sType.type, targetType, ain.position)) {\r\n                    this.pushError(\"Der Datentyp des Terms (\" + sType.type?.identifier + \") kann nicht in den Datentyp \" + targetType?.identifier + \" konvertiert werden.\", ain.position);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.addToArray,\r\n            position: node.position,\r\n            numberOfElementsToAdd: node.nodes.length\r\n        });\r\n\r\n        return {\r\n            isAssignable: false,\r\n            type: node.arrayType.resolvedType\r\n        }\r\n\r\n    }\r\n\r\n    localVariableDeclaration(node: LocalVariableDeclarationNode, dontWarnWhenNoInitialization: boolean = false): StackType {\r\n\r\n        if (node.variableType.resolvedType == null) {\r\n            node.variableType.resolvedType = nullType; // Make the best out of it...\r\n        }\r\n\r\n        let declareVariableOnHeap = (this.heap != null && this.symbolTableStack.length <= 2);\r\n\r\n        let variable: Variable = {\r\n            identifier: node.identifier,\r\n            stackPos: declareVariableOnHeap ? null : this.nextFreeRelativeStackPos++,\r\n            type: node.variableType.resolvedType,\r\n            usagePositions: new Map(),\r\n            declaration: { module: this.module, position: node.position },\r\n            isFinal: node.isFinal\r\n        };\r\n\r\n        this.pushUsagePosition(node.position, variable);\r\n\r\n        if (declareVariableOnHeap) {\r\n\r\n            this.pushStatements({\r\n                type: TokenType.heapVariableDeclaration,\r\n                position: node.position,\r\n                pushOnTopOfStackForInitialization: node.initialization != null,\r\n                variable: variable,\r\n                stepFinished: node.initialization == null\r\n            });\r\n\r\n            if (this.heap[variable.identifier]) {\r\n                this.pushError(\"Die Variable \" + node.identifier + \" darf im selben Sichtbarkeitsbereich (Scope) nicht mehrmals definiert werden.\", node.position);\r\n            }\r\n\r\n            this.heap[variable.identifier] = variable;\r\n            // only for code completion:\r\n            this.currentSymbolTable.variableMap.set(node.identifier, variable);\r\n\r\n        } else {\r\n\r\n            if (this.currentSymbolTable.variableMap.get(node.identifier)) {\r\n                this.pushError(\"Die Variable \" + node.identifier + \" darf im selben Sichtbarkeitsbereich (Scope) nicht mehrmals definiert werden.\", node.position);\r\n            }\r\n\r\n            this.currentSymbolTable.variableMap.set(node.identifier, variable);\r\n\r\n            this.pushStatements({\r\n                type: TokenType.localVariableDeclaration,\r\n                position: node.position,\r\n                pushOnTopOfStackForInitialization: node.initialization != null,\r\n                variable: variable,\r\n                stepFinished: node.initialization == null\r\n            })\r\n\r\n        }\r\n\r\n        if (node.initialization != null) {\r\n            let initType = this.processNode(node.initialization);\r\n\r\n            if (initType != null) {\r\n\r\n                if (variable.type == varType) {\r\n                    variable.type = initType.type;\r\n                } else if (initType.type == null) {\r\n                    this.pushError(\"Der Typ des Terms auf der rechten Seite des Zuweisungsoperators (=) konnte nicht bestimmt werden.\", node.initialization.position);\r\n                } else\r\n                    if (!this.ensureAutomaticCasting(initType.type, variable.type)) {\r\n                        this.pushError(\"Der Term vom Typ \" + initType.type.identifier + \" kann der Variable vom Typ \" + variable.type.identifier + \" nicht zugeordnet werden.\", node.initialization.position);\r\n                    };\r\n                this.pushStatements({\r\n                    type: TokenType.assignment,\r\n                    position: node.initialization.position,\r\n                    stepFinished: true,\r\n                    leaveValueOnStack: false\r\n                });\r\n            }\r\n\r\n        } else {\r\n            if (variable.type == varType) {\r\n                this.pushError(\"Die Verwendung von var ist nur dann zulässig, wenn eine lokale Variable in einer Anweisung deklariert und initialisiert wird, also z.B. var i = 12;\", node.variableType.position);\r\n            } else {\r\n                let initializer: string = \" = null\";\r\n                if (variable.type == intPrimitiveType) initializer = \" = 0\";\r\n                if (variable.type == doublePrimitiveType) initializer = \" = 0.0\";\r\n                if (variable.type == booleanPrimitiveType) initializer = \" = false\";\r\n                if (variable.type == charPrimitiveType) initializer = \" = ' '\";\r\n                if (variable.type == stringPrimitiveType) initializer = ' = \"\"';\r\n\r\n                variable.declarationError = {\r\n                    text: \"Jede lokale Variable sollte vor ihrer ersten Verwendung initialisiert werden.\",\r\n                    position: node.position,\r\n                    quickFix:\r\n                    {\r\n                        title: initializer + \" ergänzen\",\r\n                        editsProvider: (uri) => {\r\n                            let pos = node.position;\r\n                            return [\r\n                                {\r\n                                    resource: uri,\r\n                                    edit: {\r\n                                        range: { startLineNumber: pos.line, startColumn: pos.column + pos.length, endLineNumber: pos.line, endColumn: pos.column + pos.length },\r\n                                        text: initializer\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    },\r\n                    level: \"info\"\r\n                }\r\n\r\n                variable.usedBeforeInitialization = false;\r\n                variable.initialized = dontWarnWhenNoInitialization;\r\n\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    processReturn(node: ReturnNode): StackType {\r\n\r\n        let method = this.currentSymbolTable.method;\r\n\r\n        if (method == null) {\r\n            this.pushError(\"Eine return-Anweisung ist nur im Kontext einer Methode erlaubt.\", node.position);\r\n            return null;\r\n        }\r\n\r\n        if (node.term != null) {\r\n\r\n            if (method.getReturnType() == null) {\r\n                this.pushError(\"Die Methode \" + method.identifier + \" erwartet keinen Rückgabewert.\", node.position);\r\n                return null;\r\n            }\r\n\r\n            let type = this.processNode(node.term);\r\n\r\n            if (type != null) {\r\n                if (!this.ensureAutomaticCasting(type.type, method.getReturnType(), null, node)) {\r\n                    this.pushError(\"Die Methode \" + method.identifier + \" erwartet einen Rückgabewert vom Typ \" + method.getReturnType().identifier + \". Gefunden wurde ein Wert vom Typ \" + type.type.identifier + \".\", node.position);\r\n                }\r\n\r\n            }\r\n\r\n        } else {\r\n            if (method.getReturnType() != null && method.getReturnType() != voidPrimitiveType) {\r\n                this.pushError(\"Die Methode \" + method.identifier + \" erwartet einen Rückgabewert vom Typ \" + method.getReturnType().identifier + \", daher ist die leere Return-Anweisung (return;) nicht ausreichend.\", node.position);\r\n            }\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.return,\r\n            position: node.position,\r\n            copyReturnValueToStackframePos0: node.term != null,\r\n            stepFinished: true,\r\n            leaveThisObjectOnStack: false\r\n        });\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: true };\r\n\r\n    }\r\n\r\n    processSwitch(node: SwitchNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        let ct = this.processNode(node.condition);\r\n        if (ct == null || ct.type == null) return;\r\n\r\n        let conditionType = ct.type;\r\n\r\n        let isString = conditionType == stringPrimitiveType || conditionType == charPrimitiveType;\r\n        let isInteger = conditionType == intPrimitiveType;\r\n        let isEnum = conditionType instanceof Enum;\r\n\r\n        if (!(isString || isInteger || isEnum)) {\r\n            this.pushError(\"Der Unterscheidungsterms einer switch-Anweisung muss den Datentyp String, char, int oder enum besitzen. Dieser hier ist vom Typ \" + conditionType.identifier, node.condition.position);\r\n        }\r\n\r\n        if (isEnum) {\r\n            this.pushStatements({\r\n                type: TokenType.castValue,\r\n                position: node.condition.position,\r\n                newType: intPrimitiveType\r\n            });\r\n        }\r\n\r\n        let switchStatement: JumpOnSwitchStatement = {\r\n            type: TokenType.keywordSwitch,\r\n            position: node.position,\r\n            defaultDestination: null,\r\n            switchType: isString ? \"string\" : \"number\",\r\n            destinationLabels: [],\r\n            destinationMap: {}\r\n        }\r\n\r\n        this.pushStatements(switchStatement);\r\n\r\n        // if value not included in case-statement and no default-statement present:\r\n        let endLabel = lm.insertJumpNode(TokenType.jumpAlways, node.position, this);\r\n\r\n        switchStatement.stepFinished = true;\r\n\r\n        lm.registerSwitchStatement(switchStatement);\r\n\r\n        this.openBreakScope();\r\n\r\n        let withReturnStatement = node.caseNodes.length > 0;\r\n\r\n        for (let caseNode of node.caseNodes) {\r\n\r\n            let isDefault = caseNode.caseTerm == null;\r\n\r\n            if (!isDefault) {\r\n\r\n                let constant: string | number = null;\r\n\r\n                if (isEnum && caseNode.caseTerm.type == TokenType.identifier) {\r\n                    let en: Enum = <Enum>conditionType;\r\n                    let info = en.identifierToInfoMap[caseNode.caseTerm.identifier];\r\n                    if (info == null) {\r\n                        this.pushError(\"Die Enum-Klasse \" + conditionType.identifier + \" hat kein Element mit dem Bezeichner \" + caseNode.caseTerm.identifier, caseNode.position, \"error\");\r\n                    } else {\r\n                        constant = info.ordinal;\r\n                    }\r\n                } else {\r\n                    let caseTerm = this.processNode(caseNode.caseTerm);\r\n\r\n                    let ls = this.lastStatement;\r\n\r\n                    if (ls.type == TokenType.pushConstant) {\r\n                        constant = ls.value;\r\n                    }\r\n\r\n                    if (ls.type == TokenType.pushEnumValue) {\r\n                        constant = ls.enumClass.getOrdinal(ls.valueIdentifier);\r\n                    }\r\n\r\n                    this.removeLastStatement();\r\n                }\r\n\r\n                if (constant == null) {\r\n                    this.pushError(\"Der Term bei case muss konstant sein.\", caseNode.caseTerm.position);\r\n                }\r\n\r\n                let label = lm.markJumpDestination(1);\r\n                let statements = this.generateStatements(caseNode.statements);\r\n\r\n                if (statements?.withReturnStatement == null || !statements.withReturnStatement) {\r\n                    withReturnStatement = false;\r\n                }\r\n\r\n                switchStatement.destinationLabels.push({\r\n                    constant: constant,\r\n                    label: label\r\n                });\r\n            } else {\r\n                // default case\r\n                let label = lm.markJumpDestination(1);\r\n                let statements = this.generateStatements(caseNode.statements);\r\n                if (statements?.withReturnStatement == null || !statements.withReturnStatement) {\r\n                    withReturnStatement = false;\r\n                }\r\n                switchStatement.defaultDestination = label;\r\n            }\r\n\r\n        }\r\n\r\n        if(switchStatement.defaultDestination == null){\r\n            withReturnStatement = false;\r\n        }\r\n\r\n        lm.markJumpDestination(1, endLabel);\r\n\r\n        this.closeBreakScope(endLabel, lm);\r\n\r\n        this.popSymbolTable(null);\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n    }\r\n\r\n    processIf(node: IfNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        this.checkIfAssignmentInstedOfEqual(node.condition, conditionType?.type);\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.pushError(\"Der Wert des Terms in Klammern hinter 'if' muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        let beginElse = lm.insertJumpNode(TokenType.jumpIfFalse, null, this);\r\n\r\n        let withReturnStatementIf = this.generateStatements(node.statementsIfTrue).withReturnStatement;\r\n\r\n        let endOfIf: number;\r\n        if (node.statementsIfFalse != null) {\r\n            endOfIf = lm.insertJumpNode(TokenType.jumpAlways, null, this);\r\n        }\r\n\r\n        lm.markJumpDestination(1, beginElse);\r\n\r\n        let withReturnStatementElse: boolean;\r\n        if (node.statementsIfFalse == null || node.statementsIfFalse.length == 0) {\r\n            withReturnStatementElse = false;\r\n        } else {\r\n            withReturnStatementElse = this.generateStatements(node.statementsIfFalse).withReturnStatement;\r\n        }\r\n\r\n        if (endOfIf != null) {\r\n            lm.markJumpDestination(1, endOfIf);\r\n        }\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatementIf && withReturnStatementElse };\r\n\r\n    }\r\n\r\n\r\n    processFor(node: ForNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        this.generateStatements(node.statementsBefore);\r\n\r\n        let labelBeforeCondition = lm.markJumpDestination(1);\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.checkIfAssignmentInstedOfEqual(node.condition);\r\n            this.pushError(\"Der Wert der Bedingung muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        let labelAfterForLoop = lm.insertJumpNode(TokenType.jumpIfFalse, null, this);\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        let continueLabelIndex = lm.markJumpDestination(1);\r\n        this.closeContinueScope(continueLabelIndex, lm);\r\n        this.generateStatements(node.statementsAfter);\r\n\r\n        lm.insertJumpNode(TokenType.jumpAlways, statements.endPosition, this, labelBeforeCondition);\r\n\r\n        lm.markJumpDestination(1, labelAfterForLoop);\r\n\r\n        this.closeBreakScope(labelAfterForLoop, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    processForLoopOverCollection(node: ForNodeOverCollecion): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        // reserve position on stack for collection\r\n        let stackPosForCollection = this.nextFreeRelativeStackPos++;\r\n\r\n        // assign value of collection term to collection\r\n        let ct = this.processNode(node.collection);\r\n        if (ct == null) return;\r\n        let collectionType = ct.type;\r\n\r\n        this.pushStatements({\r\n            type: TokenType.popAndStoreIntoVariable,\r\n            position: node.collection.position,\r\n            stackposOfVariable: stackPosForCollection,\r\n            stepFinished: false\r\n        })\r\n\r\n        let collectionElementType: Type;\r\n\r\n        let kind: \"array\" | \"internalList\" | \"group\" | \"userDefinedIterable\" = null;\r\n\r\n        if (collectionType instanceof ArrayType) {\r\n            collectionElementType = collectionType.arrayOfType;\r\n            kind = \"array\";\r\n        } else if (collectionType instanceof Klass && collectionType.getImplementedInterface(\"Iterable\") != null) {\r\n            if (collectionType.module.isSystemModule) {\r\n                kind = \"internalList\";\r\n            } else {\r\n                kind = \"userDefinedIterable\";\r\n            }\r\n            let iterableInterface = collectionType.getImplementedInterface(\"Iterable\");\r\n            if(collectionType.typeVariables.length == 0){\r\n                collectionElementType = objectType;\r\n            } else {\r\n                collectionElementType = collectionType.typeVariables[0].type;\r\n            }\r\n        } else if (collectionType instanceof Klass && collectionType.identifier == \"Group\") {\r\n            kind = \"group\";\r\n            collectionElementType = this.moduleStore.getType(\"Shape\").type;\r\n        }\r\n        else {\r\n            this.pushError(\"Mit der vereinfachten for-Schleife (for identifier : collectionOrArray) kann man nur über Arrays oder Klassen, die das Interface Iterable implementieren, iterieren.\", node.collection.position);\r\n            return null;\r\n        }\r\n\r\n        let variableType = node.variableType.resolvedType;\r\n        if (variableType == null) return null;\r\n\r\n        let noCastingNeeded = variableType == varType;\r\n        if (noCastingNeeded) {\r\n            variableType = collectionElementType;\r\n            node.variableType.resolvedType = collectionElementType\r\n        } else {\r\n            if (!collectionElementType.canCastTo(variableType)) {\r\n                this.pushError(\"Der ElementTyp \" + collectionElementType.identifier + \" der Collection kann nicht in den Typ \" + variableType.identifier + \" der Iterationsvariable \" + node.variableIdentifier + \" konvertiert werden.\", node.position);\r\n                return null;\r\n            }\r\n        }\r\n\r\n        this.localVariableDeclaration({\r\n            type: TokenType.localVariableDeclaration,\r\n            identifier: node.variableIdentifier,\r\n            initialization: null,\r\n            isFinal: false,\r\n            position: node.variablePosition,\r\n            variableType: node.variableType\r\n        }, true)\r\n\r\n        let variableStackPos = this.nextFreeRelativeStackPos - 1;\r\n        let stackPosOfCounterVariableOrIterator = this.nextFreeRelativeStackPos++;\r\n\r\n        if (kind == \"array\" || kind == \"internalList\" || kind == \"group\") {\r\n            this.pushStatements([{\r\n                type: TokenType.extendedForLoopInit,\r\n                position: node.position,\r\n                stepFinished: false,\r\n                stackPosOfCollection: stackPosForCollection,\r\n                stackPosOfElement: variableStackPos,\r\n                typeOfElement: variableType,\r\n                stackPosOfCounter: stackPosOfCounterVariableOrIterator\r\n            }], true);\r\n        } else {\r\n            // get Iterator from collection\r\n            this.pushStatements([\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: stackPosOfCounterVariableOrIterator,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: stackPosForCollection,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.callMethod,\r\n                    position: node.position,\r\n                    stepFinished: false,\r\n                    isSuperCall: false,\r\n                    method: collectionType.getMethod(\"iterator\", new Parameterlist([])),\r\n                    stackframeBegin: -1\r\n                },\r\n                {\r\n                    type: TokenType.assignment,\r\n                    position: node.position,\r\n                    stepFinished: true,\r\n                    leaveValueOnStack: false\r\n                }], true);\r\n        }\r\n\r\n        let labelBeforeCondition = lm.markJumpDestination(1);\r\n        let labelAfterForLoop: number;\r\n        let lastStatementBeforeCasting: Statement;\r\n\r\n        if (kind == \"array\" || kind == \"internalList\" || kind == \"group\") {\r\n            let jumpNode: ExtendedForLoopCheckCounterAndGetElement = {\r\n                type: TokenType.extendedForLoopCheckCounterAndGetElement,\r\n                kind: kind,\r\n                position: node.variablePosition,\r\n                stepFinished: true,\r\n                stackPosOfCollection: stackPosForCollection,\r\n                stackPosOfElement: variableStackPos,\r\n                stackPosOfCounter: stackPosOfCounterVariableOrIterator,\r\n                destination: 0 // gets filled in later,\r\n            };\r\n            lastStatementBeforeCasting = jumpNode;\r\n            labelAfterForLoop = lm.registerJumpNode(jumpNode);\r\n\r\n            this.pushStatements(\r\n                jumpNode\r\n            );\r\n\r\n        } else {\r\n            // call collection.hasNext()\r\n            this.pushStatements([\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.variablePosition,\r\n                    stackposOfVariable: stackPosForCollection,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.callMethod,\r\n                    position: node.position,\r\n                    stepFinished: false,\r\n                    isSuperCall: false,\r\n                    method: collectionType.getMethod(\"hasNext\", new Parameterlist([])),\r\n                    stackframeBegin: -1\r\n                },\r\n            ]);\r\n            labelAfterForLoop = lm.insertJumpNode(TokenType.jumpIfFalse, null, this);\r\n            // call collection.next() and assign to loop variable\r\n            this.pushStatements([\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: variableStackPos,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: stackPosForCollection,\r\n                    stepFinished: false\r\n                },\r\n                {\r\n                    type: TokenType.callMethod,\r\n                    position: node.position,\r\n                    stepFinished: false,\r\n                    isSuperCall: false,\r\n                    method: collectionType.getMethod(\"next\", new Parameterlist([])),\r\n                    stackframeBegin: -1\r\n                },\r\n                {\r\n                    type: TokenType.assignment,\r\n                    position: node.position,\r\n                    stepFinished: true,\r\n                    leaveValueOnStack: false\r\n                }]);\r\n        }\r\n\r\n        if (!noCastingNeeded) {\r\n            let oldStatementCount = this.currentProgram.statements.length;\r\n            this.pushStatements({\r\n                type: TokenType.pushLocalVariableToStack,\r\n                position: node.position,\r\n                stackposOfVariable: variableStackPos,\r\n                stepFinished: false\r\n            });\r\n            this.ensureAutomaticCasting(collectionElementType, variableType);\r\n            if (this.currentProgram.statements.length < oldStatementCount + 2) {\r\n                // casting needed no statement, so delete pushLocalVariabletoStack-Statement\r\n                this.currentProgram.statements.pop();\r\n            } else {\r\n                this.pushStatements({\r\n                    type: TokenType.popAndStoreIntoVariable,\r\n                    stackposOfVariable: variableStackPos,\r\n                    position: node.position,\r\n                    stepFinished: true\r\n                });\r\n                lastStatementBeforeCasting.stepFinished = false;\r\n            }\r\n        }\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        let continueLabelIndex = lm.markJumpDestination(1);\r\n        this.closeContinueScope(continueLabelIndex, lm);\r\n\r\n        lm.insertJumpNode(TokenType.jumpAlways, statements.endPosition, this, labelBeforeCondition);\r\n\r\n        lm.markJumpDestination(1, labelAfterForLoop);\r\n\r\n        this.closeBreakScope(labelAfterForLoop, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    processWhile(node: WhileNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        let conditionBeginLabel = lm.markJumpDestination(1);\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.checkIfAssignmentInstedOfEqual(node.condition);\r\n            this.pushError(\"Der Wert des Terms in Klammern hinter 'while' muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        let position = node.position;\r\n\r\n        if (node.condition != null) {\r\n            position = node.condition.position;\r\n        }\r\n\r\n        let afterWhileStatementLabel = lm.insertJumpNode(TokenType.jumpIfFalse, position, this);\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let pc = this.currentProgram.statements.length;        \r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        if(this.currentProgram.statements.length == pc){\r\n            this.insertNoOp(node.scopeTo, false);\r\n        }\r\n\r\n        this.closeContinueScope(conditionBeginLabel, lm);\r\n        lm.insertJumpNode(TokenType.jumpAlways, statements.endPosition, this, conditionBeginLabel);\r\n\r\n        lm.markJumpDestination(1, afterWhileStatementLabel);\r\n\r\n        this.closeBreakScope(afterWhileStatementLabel, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    insertNoOp(position: TextPosition, stepFinished: boolean){\r\n        this.pushStatements({\r\n            type: TokenType.noOp,\r\n            position: position,\r\n            stepFinished: stepFinished\r\n        })\r\n    }\r\n\r\n    processDo(node: DoWhileNode): StackType {\r\n\r\n        let lm = this.currentProgram.labelManager;\r\n\r\n        this.pushNewSymbolTable(false, node.scopeFrom, node.scopeTo);\r\n\r\n        let statementsBeginLabel = lm.markJumpDestination(1);\r\n\r\n        this.openBreakScope();\r\n        this.openContinueScope();\r\n\r\n        let pc = this.currentProgram.statements.length;        \r\n        let statements = this.generateStatements(node.statements);\r\n        let withReturnStatement = statements.withReturnStatement;\r\n\r\n        if(this.currentProgram.statements.length == pc){\r\n            this.insertNoOp(node.scopeTo, false);\r\n        }\r\n\r\n        let continueLabelIndex = lm.markJumpDestination(1);\r\n        this.closeContinueScope(continueLabelIndex, lm);\r\n\r\n        let conditionType = this.processNode(node.condition);\r\n\r\n        if (conditionType != null && conditionType.type != booleanPrimitiveType) {\r\n            this.checkIfAssignmentInstedOfEqual(node.condition);\r\n            this.pushError(\"Der Wert des Terms in Klammern hinter 'while' muss den Datentyp boolean besitzen.\", node.condition.position);\r\n        }\r\n\r\n        lm.insertJumpNode(TokenType.jumpIfTrue, statements.endPosition, this, statementsBeginLabel);\r\n\r\n        let endLabel = lm.markJumpDestination(1);\r\n\r\n        this.closeBreakScope(endLabel, lm);\r\n\r\n        this.popSymbolTable();\r\n\r\n        return { type: null, isAssignable: false, withReturnStatement: withReturnStatement };\r\n\r\n    }\r\n\r\n    newObject(node: NewObjectNode): StackType {\r\n\r\n        if (node.classType == null || node.classType.resolvedType == null) return null;\r\n\r\n        let resolvedType: Klass = <Klass>node.classType.resolvedType;\r\n        if (!(resolvedType instanceof Klass)) {\r\n            this.pushError(node.classType.identifier + \" ist keine Klasse, daher kann davon mit 'new' kein Objekt erzeugt werden.\", node.position);\r\n            return null;\r\n        }\r\n\r\n        if (resolvedType.isAbstract) {\r\n            this.pushError(`${node.classType.identifier} ist eine abstrakte Klasse, daher kann von ihr mit 'new' kein Objekt instanziert werden. Falls ${node.classType.identifier} nicht-abstrakte Kindklassen besitzt, könntest Du von DENEN mit new Objekte instanzieren...`, node.position);\r\n            return null;\r\n        }\r\n\r\n        //this.pushTypePosition(node.rightBracketPosition, classType);\r\n\r\n        if (resolvedType.module != this.module && resolvedType.visibility != Visibility.public) {\r\n            this.pushError(\"Die Klasse \" + resolvedType.identifier + \" ist hier nicht sichtbar.\", node.position);\r\n        }\r\n\r\n        let newStatement: NewObjectStatement = {\r\n            type: TokenType.newObject,\r\n            position: node.position,\r\n            class: resolvedType,\r\n            subsequentConstructorCall: false,\r\n            stepFinished: true\r\n        };\r\n\r\n        this.pushStatements(newStatement);\r\n        this.pushTypePosition(node.rightBracketPosition, resolvedType); // to enable code completion when typing a point after the closing bracket\r\n\r\n        let parameterTypes: Type[] = [];\r\n        // let parameterStatements: Statement[][] = [];\r\n        let positionsAfterParameterStatements: number[] = []\r\n        let allStatements = this.currentProgram.statements;\r\n\r\n        if (node.constructorOperands?.length > 0) {\r\n            // for (let p of node.constructorOperands) {\r\n            for (let j = 0; j < node.constructorOperands.length; j++) {\r\n                let p = node.constructorOperands[j];\r\n                // let programPointer = allStatements.length;\r\n                let typeNode = this.processNode(p);\r\n                // parameterStatements.push(allStatements.splice(programPointer, allStatements.length - programPointer));\r\n                positionsAfterParameterStatements.push(allStatements.length);\r\n                if (typeNode == null) {\r\n                    parameterTypes.push(voidPrimitiveType);\r\n                } else {\r\n                    parameterTypes.push(typeNode.type);\r\n                }\r\n            }\r\n        }\r\n\r\n        let upToVisibility = getVisibilityUpTo(resolvedType, this.currentSymbolTable.classContext);\r\n\r\n        // let methods = resolvedType.getMethodsThatFitWithCasting(resolvedType.identifier,\r\n        //     parameterTypes, true, upToVisibility);\r\n\r\n        let methods = resolvedType.getConstructor(parameterTypes, upToVisibility);\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, resolvedType.getMethods(Visibility.public, resolvedType.identifier), node.rightBracketPosition);\r\n\r\n        // if there's no parameterless constructor then return without error:\r\n        if (parameterTypes.length > 0 || resolvedType.hasConstructor()) {\r\n\r\n            if (methods.error != null) {\r\n                this.pushError(methods.error, node.position);\r\n                return { type: resolvedType, isAssignable: false }; // try to continue...\r\n            }\r\n\r\n            let method = methods.methodList[0];\r\n            this.pushUsagePosition(node.position, method);\r\n\r\n            let staticClassContext = null;\r\n            let classContext = this.currentSymbolTable.classContext;\r\n            if (classContext != null && classContext instanceof Klass) {\r\n                staticClassContext = classContext.staticClass;\r\n            }\r\n\r\n            if (method.visibility == Visibility.private && resolvedType != classContext && resolvedType != staticClassContext) {\r\n                let ok = (resolvedType == classContext || resolvedType != staticClassContext || (classContext instanceof StaticClass && resolvedType == classContext.Klass));\r\n                if (!ok) {\r\n                    this.pushError(\"Die Konstruktormethode ist private und daher hier nicht sichtbar.\", node.position);\r\n                }\r\n            }\r\n\r\n            let destType: Type = null;\r\n            for (let i = 0; i < parameterTypes.length; i++) {\r\n                if (i < method.getParameterCount()) {  // possible ellipsis!\r\n                    destType = method.getParameterType(i);\r\n                    if (i == method.getParameterCount() - 1 && method.hasEllipsis()) {\r\n                        destType = (<ArrayType>destType).arrayOfType;\r\n                    }\r\n                }\r\n\r\n                let srcType = parameterTypes[i];\r\n                // for (let st of parameterStatements[i]) {\r\n                //     this.currentProgram.statements.push(st);\r\n                // }\r\n                let programPosition = allStatements.length;\r\n                if (!this.ensureAutomaticCasting(srcType, destType, node.constructorOperands[i].position, node.constructorOperands[i])) {\r\n                    this.pushError(\"Der Wert vom Datentyp \" + srcType.identifier + \" kann nicht als Parameter (Datentyp \" + destType.identifier + \") verwendet werden.\", node.constructorOperands[i].position);\r\n                }\r\n\r\n                if (allStatements.length > programPosition) {\r\n                    let castingStatements = allStatements.splice(programPosition, allStatements.length - programPosition);\r\n                    allStatements.splice(positionsAfterParameterStatements[i], 0, ...castingStatements);\r\n                    this.currentProgram.labelManager.correctPositionsAfterInsert(positionsAfterParameterStatements[i], castingStatements.length);\r\n                }\r\n\r\n            }\r\n\r\n            let stackframeDelta = 0;\r\n            if (method.hasEllipsis()) {\r\n                let ellipsisParameterCount = parameterTypes.length - method.getParameterCount() + 1; // last parameter and subsequent ones\r\n                stackframeDelta = - (ellipsisParameterCount - 1);\r\n                this.pushStatements({\r\n                    type: TokenType.makeEllipsisArray,\r\n                    position: node.constructorOperands[method.getParameterCount() - 1].position,\r\n                    parameterCount: ellipsisParameterCount,\r\n                    stepFinished: false,\r\n                    arrayType: method.getParameter(method.getParameterCount() - 1).type\r\n                })\r\n            }\r\n\r\n\r\n            this.pushStatements({\r\n                type: TokenType.callMethod,\r\n                method: method,\r\n                position: node.position,\r\n                isSuperCall: false,\r\n                stepFinished: resolvedType.getPostConstructorCallbacks() == null,\r\n                stackframeBegin: -(parameterTypes.length + 1 + stackframeDelta) // this-object followed by parameters\r\n            }, true);\r\n\r\n            newStatement.subsequentConstructorCall = true;\r\n            newStatement.stepFinished = false;\r\n\r\n        }\r\n\r\n        if (resolvedType.getPostConstructorCallbacks() != null) {\r\n            this.pushStatements({\r\n                type: TokenType.processPostConstructorCallbacks,\r\n                position: node.position,\r\n                stepFinished: true\r\n            }, true);\r\n        }\r\n\r\n        return { type: resolvedType, isAssignable: false };\r\n\r\n    }\r\n\r\n    pushAttribute(node: SelectArributeNode): StackType {\r\n\r\n        if (node.object == null || node.identifier == null) return null;\r\n\r\n        let ot = this.processNode(node.object);\r\n        if (ot == null) {\r\n            this.pushError('Links vom Punkt steht kein Objekt.', node.position);\r\n            return null;\r\n        }\r\n\r\n        if (!(ot.type instanceof Klass || ot.type instanceof StaticClass || ot.type instanceof ArrayType)) {\r\n            if (ot.type == null) {\r\n                this.pushError('Der Ausdruck links vom Punkt hat kein Attribut ' + node.identifier + \".\", node.position);\r\n            } else {\r\n                this.pushError('Links vom Punkt steht ein Ausdruck vom Datentyp ' + ot.type.identifier + \". Dieser hat kein Attribut \" + node.identifier + \".\", node.position);\r\n            }\r\n            return null;\r\n        }\r\n\r\n        let objectType: Klass | StaticClass | ArrayType = ot.type;\r\n\r\n        if (objectType instanceof Klass) {\r\n\r\n            let visibilityUpTo = getVisibilityUpTo(objectType, this.currentSymbolTable.classContext);\r\n\r\n            let attributeWithError = objectType.getAttribute(node.identifier, visibilityUpTo);\r\n\r\n            let staticAttributeWithError: { attribute: Attribute, error: string, foundButInvisible: boolean, staticClass: StaticClass }\r\n                = null;\r\n            if (attributeWithError.attribute == null) {\r\n                staticAttributeWithError = objectType.staticClass.getAttribute(node.identifier, visibilityUpTo);\r\n            }\r\n\r\n            if (attributeWithError.attribute == null && staticAttributeWithError.attribute == null) {\r\n                if (attributeWithError.foundButInvisible || !staticAttributeWithError.foundButInvisible) {\r\n                    this.pushError(attributeWithError.error, node.position);\r\n                } else {\r\n                    this.pushError(staticAttributeWithError.error, node.position);\r\n                }\r\n                return {\r\n                    type: objectType,\r\n                    isAssignable: false\r\n                }\r\n            } else {\r\n                let attribute: Attribute;\r\n                if (attributeWithError.attribute != null) {\r\n                    this.pushStatements({\r\n                        type: TokenType.pushAttribute,\r\n                        position: node.position,\r\n                        attributeIndex: attributeWithError.attribute.index,\r\n                        attributeIdentifier: attributeWithError.attribute.identifier,\r\n                        useThisObject: false\r\n                    });\r\n                    attribute = attributeWithError.attribute;\r\n                } else {\r\n                    this.pushStatements([{\r\n                        type: TokenType.decreaseStackpointer,\r\n                        position: node.position,\r\n                        popCount: 1\r\n                    }, {\r\n                        type: TokenType.pushStaticAttribute,\r\n                        position: node.position,\r\n                        // klass: (<Klass>objectType).staticClass,\r\n                        klass: staticAttributeWithError.staticClass,\r\n                        attributeIndex: staticAttributeWithError.attribute.index,\r\n                        attributeIdentifier: staticAttributeWithError.attribute.identifier\r\n                    }]);\r\n                    attribute = staticAttributeWithError.attribute;\r\n                }\r\n\r\n                this.pushUsagePosition(node.position, attribute);\r\n\r\n                return {\r\n                    type: attribute.type,\r\n                    isAssignable: !attribute.isFinal\r\n                }\r\n            }\r\n\r\n        } else if (objectType instanceof StaticClass) {\r\n            // Static class\r\n            if (objectType.Klass instanceof Enum) {\r\n                this.removeLastStatement(); // remove push static enum class to stack\r\n\r\n                let enumInfo = objectType.Klass.enumInfoList.find(ei => ei.identifier == node.identifier);\r\n\r\n                if (enumInfo == null) {\r\n                    this.pushError(\"Die enum-Klasse \" + objectType.identifier + \" hat keinen enum-Wert mit dem Bezeichner \" + node.identifier, node.position);\r\n                }\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.pushEnumValue,\r\n                    position: node.position,\r\n                    enumClass: objectType.Klass,\r\n                    valueIdentifier: node.identifier\r\n                });\r\n\r\n                return {\r\n                    type: objectType.Klass,\r\n                    isAssignable: false\r\n                }\r\n\r\n            } else {\r\n                let upToVisibility = getVisibilityUpTo(objectType, this.currentSymbolTable.classContext);\r\n                let staticAttributeWithError = objectType.getAttribute(node.identifier, upToVisibility);\r\n                if (staticAttributeWithError.attribute != null) {\r\n                    // if (staticAttributeWithError.attribute.updateValue != undefined) {\r\n                    //     this.removeLastStatement();\r\n                    //     this.pushStatements({\r\n                    //         type: TokenType.pushStaticAttributeIntrinsic,\r\n                    //         position: node.position,\r\n                    //         attribute: staticAttributeWithError.attribute\r\n                    //     });\r\n                    // } else \r\n                    {\r\n                        this.removeLastStatement();\r\n                        this.pushStatements({\r\n                            type: TokenType.pushStaticAttribute,\r\n                            position: node.position,\r\n                            attributeIndex: staticAttributeWithError.attribute.index,\r\n                            attributeIdentifier: staticAttributeWithError.attribute.identifier,\r\n                            klass: staticAttributeWithError.staticClass\r\n                        });\r\n                        this.pushUsagePosition(node.position, staticAttributeWithError.attribute);\r\n\r\n                    }\r\n                    return {\r\n                        type: staticAttributeWithError.attribute.type,\r\n                        isAssignable: !staticAttributeWithError.attribute.isFinal\r\n                    }\r\n                } else {\r\n                    this.pushError(staticAttributeWithError.error, node.position);\r\n                    return {\r\n                        type: objectType,\r\n                        isAssignable: false\r\n                    }\r\n                }\r\n            }\r\n\r\n        } else {\r\n\r\n            if (node.identifier != \"length\") {\r\n                this.pushError('Der Wert vom Datentyp ' + ot.type.identifier + \" hat kein Attribut \" + node.identifier, node.position);\r\n                return null;\r\n            }\r\n\r\n            this.pushStatements({\r\n                type: TokenType.pushArrayLength,\r\n                position: node.position\r\n            });\r\n\r\n            let element: Attribute = new Attribute(\"length\", intPrimitiveType, null, true, Visibility.public, true, \"Länge des Arrays\");\r\n\r\n            this.module.addIdentifierPosition(node.position, element);\r\n\r\n            return {\r\n                type: intPrimitiveType,\r\n                isAssignable: false\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    pushThisOrSuper(node: ThisNode | SuperNode, isSuper: boolean): StackType {\r\n\r\n        let classContext = this.currentSymbolTable.classContext;\r\n\r\n        if (isSuper && classContext != null) {\r\n            classContext = classContext.baseClass;\r\n        }\r\n\r\n        let methodContext = this.currentSymbolTable.method;\r\n\r\n        if (classContext == null || methodContext == null) {\r\n            this.pushError(\"Das Objekt \" + (isSuper ? \"super\" : \"this\") + \" existiert nur innerhalb einer Methodendeklaration.\", node.position);\r\n            return null;\r\n        } else {\r\n            this.pushStatements({\r\n                type: TokenType.pushLocalVariableToStack,\r\n                position: node.position,\r\n                stackposOfVariable: 0\r\n            })\r\n\r\n            this.pushTypePosition(node.position, classContext);\r\n            return { type: classContext, isAssignable: false, isSuper: isSuper };\r\n        }\r\n\r\n    }\r\n\r\n    superconstructorCall(node: SuperconstructorCallNode | ConstructorCallNode): StackType {\r\n\r\n        let classContext = this.currentSymbolTable.classContext;\r\n\r\n        let isSuperConstructorCall: boolean = node.type == TokenType.superConstructorCall;\r\n\r\n        if (isSuperConstructorCall) {\r\n            if (classContext?.baseClass == null || classContext.baseClass.identifier == \"Object\") {\r\n                this.pushError(\"Die Klasse ist nur Kindklasse der Klasse Object, daher ist der Aufruf des Superkonstruktors nicht möglich.\", node.position);\r\n            }\r\n        }\r\n\r\n        let methodContext = this.currentSymbolTable.method;\r\n\r\n        if (classContext == null || methodContext == null || !methodContext.isConstructor) {\r\n            this.pushError(\"Ein Aufruf des Konstruktors oder des Superkonstructors ist nur innerhalb des Konstruktors einer Klasse möglich.\", node.position);\r\n            return null;\r\n        }\r\n\r\n\r\n        let superclassType: Klass | StaticClass;\r\n\r\n        if (isSuperConstructorCall) {\r\n            superclassType = <Klass>classContext.baseClass;\r\n            if (superclassType instanceof StaticClass) {\r\n                this.pushError(\"Statische Methoden haben keine super-Methodenaufrufe.\", node.position);\r\n                return { type: null, isAssignable: false };\r\n            }\r\n            if (superclassType == null) superclassType = <Klass>this.moduleStore.getType(\"Object\").type;\r\n        } else {\r\n            superclassType = <Klass>classContext;\r\n            if (superclassType instanceof StaticClass) {\r\n                this.pushError(\"Statische Methoden haben keine this-Methodenaufrufe.\", node.position);\r\n                return { type: null, isAssignable: false };\r\n            }\r\n        }\r\n\r\n        // Push this-object to stack:\r\n        this.pushStatements({\r\n            type: TokenType.pushLocalVariableToStack,\r\n            position: node.position,\r\n            stackposOfVariable: 0\r\n        });\r\n\r\n        let parameterTypes: Type[] = [];\r\n\r\n        if (node.operands != null) {\r\n            let errorInOperands: boolean = false;\r\n            for (let p of node.operands) {\r\n                let pt = this.processNode(p);\r\n                if (pt != null) {\r\n                    parameterTypes.push(pt.type);\r\n                } else {\r\n                    errorInOperands = true;\r\n                }\r\n            }\r\n            if (errorInOperands) {\r\n                return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n            }\r\n        }\r\n\r\n        let methods = superclassType.getConstructor(parameterTypes, Visibility.protected);\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, superclassType.getMethods(Visibility.protected, superclassType.identifier),\r\n            node.rightBracketPosition);\r\n\r\n        if (methods.error != null) {\r\n            this.pushError(methods.error, node.position);\r\n            return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n        }\r\n\r\n        let method = methods.methodList[0];\r\n\r\n        this.pushUsagePosition(node.position, method);\r\n\r\n        let stackframeDelta = 0;\r\n        if (method.hasEllipsis()) {\r\n            let ellipsisParameterCount = parameterTypes.length - method.getParameterCount() + 1; // last parameter and subsequent ones\r\n            stackframeDelta = - (ellipsisParameterCount - 1);\r\n            this.pushStatements({\r\n                type: TokenType.makeEllipsisArray,\r\n                position: node.operands[method.getParameterCount() - 1].position,\r\n                parameterCount: ellipsisParameterCount,\r\n                stepFinished: false,\r\n                arrayType: method.getParameter(method.getParameterCount() - 1).type\r\n            })\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.callMethod,\r\n            method: method,\r\n            isSuperCall: isSuperConstructorCall,\r\n            position: node.position,\r\n            stackframeBegin: -(parameterTypes.length + 1 + stackframeDelta) // this-object followed by parameters\r\n        });\r\n        // Pabst, 21.10.2020:\r\n        // super method is constructor => returns nothing even if method.getReturnType() is class object\r\n        // return { type: method.getReturnType(), isAssignable: false };\r\n        return { type: null, isAssignable: false };\r\n\r\n    }\r\n\r\n    incrementDecrementBeforeOrAfter(node: IncrementDecrementNode): StackType {\r\n        let type = this.processNode(node.operand);\r\n\r\n        if (type == null) return;\r\n\r\n        if (!type.isAssignable) {\r\n            this.pushError(\"Die Operatoren ++ und -- können nur auf Variablen angewendet werden, nicht auf konstante Werte oder Rückgabewerte von Methoden.\", node.position);\r\n            return type;\r\n        }\r\n\r\n        if (!type.type.canCastTo(floatPrimitiveType)) {\r\n            this.pushError(\"Die Operatoren ++ und -- können nur auf Zahlen angewendet werden, nicht auf Werte des Datentyps \" + type.type.identifier, node.position);\r\n            return type;\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: node.type,\r\n            position: node.position,\r\n            incrementDecrementBy: node.operator == TokenType.doubleMinus ? - 1 : 1\r\n\r\n        });\r\n\r\n        return type;\r\n\r\n    }\r\n\r\n    selectArrayElement(node: SelectArrayElementNode): StackType {\r\n\r\n        let arrayType = this.processNode(node.object); // push array-object \r\n        let indexType = this.processNode(node.index); // push index\r\n\r\n        if (arrayType == null || indexType == null) return;\r\n\r\n        if (!(arrayType.type instanceof ArrayType)) {\r\n            this.pushError(\"Der Typ der Variablen ist kein Array, daher ist [] nicht zulässig. \", node.object.position);\r\n            return null;\r\n        }\r\n\r\n        this.module.addIdentifierPosition({\r\n            line: node.position.line,\r\n            column: node.position.column + node.position.length,\r\n            length: 0  // Module.getTypeAtPosition needs length == 0 here to know that this type-position is not in static context for code completion\r\n        }, arrayType.type.arrayOfType);\r\n\r\n        if (!this.ensureAutomaticCasting(indexType.type, intPrimitiveType)) {\r\n            this.pushError(\"Als Index eines Arrays wird ein ganzzahliger Wert erwartet. Gefunden wurde ein Wert vom Typ \" + indexType.type.identifier + \".\", node.index.position);\r\n            return { type: (<ArrayType>arrayType.type).arrayOfType, isAssignable: arrayType.isAssignable };\r\n        }\r\n\r\n\r\n        this.pushStatements({\r\n            type: TokenType.selectArrayElement,\r\n            position: node.position\r\n        })\r\n\r\n        return { type: (<ArrayType>arrayType.type).arrayOfType, isAssignable: arrayType.isAssignable };\r\n\r\n    }\r\n\r\n    pushTypePosition(position: TextPosition, type: Type) {\r\n        if (position == null) return;\r\n        if (position.length > 0) {\r\n            position = {\r\n                line: position.line,\r\n                column: position.column + position.length,\r\n                length: 0\r\n            }\r\n        }\r\n        this.module.addIdentifierPosition(position, type);\r\n    }\r\n\r\n\r\n\r\n    pushUsagePosition(position: TextPosition, element: Klass | Interface | Method | Attribute | Variable) {\r\n\r\n        this.module.addIdentifierPosition(position, element);\r\n\r\n        if (element instanceof PrimitiveType) {\r\n            return;\r\n        }\r\n\r\n        let positionList: TextPosition[] = element.usagePositions.get(this.module);\r\n        if (positionList == null) {\r\n            positionList = [];\r\n            element.usagePositions.set(this.module, positionList);\r\n        }\r\n\r\n        positionList.push(position);\r\n\r\n    }\r\n\r\n    resolveIdentifier(node: IdentifierNode): StackType {\r\n\r\n        if (node.identifier == null) return null;\r\n\r\n        let variable = this.findLocalVariable(node.identifier);\r\n        if (variable != null) {\r\n            this.pushStatements({\r\n                type: TokenType.pushLocalVariableToStack,\r\n                position: node.position,\r\n                stackposOfVariable: variable.stackPos\r\n            })\r\n\r\n            this.pushUsagePosition(node.position, variable);\r\n            node.variable = variable;\r\n\r\n            return { type: variable.type, isAssignable: !variable.isFinal };\r\n        }\r\n\r\n        if (this.heap != null) {\r\n            let variable = this.heap[node.identifier];\r\n            if (variable != null) {\r\n                this.pushStatements({\r\n                    type: TokenType.pushFromHeapToStack,\r\n                    position: node.position,\r\n                    identifier: node.identifier\r\n                })\r\n\r\n                this.pushUsagePosition(node.position, variable);\r\n                node.variable = variable;\r\n\r\n\r\n                return { type: variable.type, isAssignable: !variable.isFinal };\r\n            }\r\n\r\n        }\r\n\r\n        let attribute = this.findAttribute(node.identifier, node.position);\r\n        if (attribute != null) {\r\n\r\n            if (attribute.isStatic) {\r\n                let cc = this.currentSymbolTable.classContext;\r\n                let scc = (cc instanceof StaticClass) ? cc : cc.staticClass;\r\n\r\n                while (scc != null && scc.attributes.indexOf(attribute) == -1) {\r\n                    scc = scc.baseClass;\r\n                }\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.pushStaticAttribute,\r\n                    position: node.position,\r\n                    klass: scc,\r\n                    attributeIndex: attribute.index,\r\n                    attributeIdentifier: attribute.identifier\r\n                });\r\n            } else {\r\n                this.pushStatements({\r\n                    type: TokenType.pushAttribute,\r\n                    position: node.position,\r\n                    attributeIndex: attribute.index,\r\n                    attributeIdentifier: attribute.identifier,\r\n                    useThisObject: true\r\n                });\r\n                node.attribute = attribute;\r\n            }\r\n\r\n\r\n            this.pushUsagePosition(node.position, attribute);\r\n\r\n            return { type: attribute.type, isAssignable: !attribute.isFinal };\r\n        }\r\n\r\n        let klassModule = this.moduleStore.getType(node.identifier);\r\n        if (klassModule != null) {\r\n            let klass = klassModule.type;\r\n            if (!(klass instanceof Klass || klass instanceof Interface)) {\r\n                this.pushError(\"Der Typ \" + klass.identifier + \" hat keine statischen Attribute/Methoden.\", node.position);\r\n            } else {\r\n                this.pushStatements({\r\n                    type: TokenType.pushStaticClassObject,\r\n                    position: node.position,\r\n                    klass: klass\r\n                });\r\n\r\n                this.pushUsagePosition(node.position, klass);\r\n\r\n                return {\r\n                    type: klass instanceof Klass ? klass.staticClass : klass,\r\n                    isAssignable: false\r\n                }\r\n            }\r\n\r\n            return {\r\n                type: klass,\r\n                isAssignable: false\r\n            }\r\n        }\r\n\r\n        this.pushError(\"Der Bezeichner \" + node.identifier + \" ist hier nicht bekannt.\", node.position);\r\n\r\n    }\r\n\r\n    findLocalVariable(identifier: string): Variable {\r\n        let st = this.currentSymbolTable;\r\n\r\n        while (st != null) {\r\n\r\n            let variable = st.variableMap.get(identifier);\r\n\r\n            if (variable != null && variable.stackPos != null) {\r\n                return variable;\r\n            }\r\n\r\n            st = st.parent;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    findAttribute(identifier: string, position: TextPosition): Attribute {\r\n        let classContext = this.currentSymbolTable.classContext;\r\n        if (classContext == null) {\r\n            return null;\r\n        }\r\n\r\n        let attribute = classContext.getAttribute(identifier, Visibility.private);\r\n        if (attribute.attribute != null) return attribute.attribute;\r\n\r\n        if (classContext instanceof Klass) {\r\n            let staticAttribute = classContext.staticClass.getAttribute(identifier, Visibility.private);\r\n            if (staticAttribute.attribute != null) return staticAttribute.attribute;\r\n        }\r\n\r\n        // this.pushError(attribute.error, position);\r\n\r\n        return null;\r\n    }\r\n\r\n    callMethod(node: MethodcallNode): StackType {\r\n\r\n        let objectNode: StackType = null;\r\n\r\n        if (node.object == null) {\r\n\r\n            // call method of this-class?\r\n\r\n            let thisClass = this.currentSymbolTable.classContext;\r\n            if (thisClass != null) {\r\n\r\n                this.pushStatements({\r\n                    type: TokenType.pushLocalVariableToStack,\r\n                    position: node.position,\r\n                    stackposOfVariable: 0\r\n                });\r\n\r\n                objectNode = {\r\n                    type: thisClass,\r\n                    isAssignable: false\r\n                }\r\n\r\n            } else {\r\n                this.pushError(\"Ein Methodenaufruf (hier: \" + node.identifier +\r\n                    \") ohne Punktschreibweise ist nur innerhalb anderer Methoden möglich.\", node.position);\r\n                return null;\r\n            }\r\n\r\n        } else {\r\n            objectNode = this.processNode(node.object);\r\n        }\r\n\r\n        if (objectNode == null) return null;\r\n\r\n        if (!(\r\n            (objectNode.type instanceof Klass) || (objectNode.type instanceof StaticClass) ||\r\n            (objectNode.type instanceof Interface && (node.object[\"variable\"] != null || node.object[\"attribute\"] != null || node.object[\"termInsideBrackets\"] != null)) || (objectNode.type instanceof Enum))) {\r\n\r\n            if (objectNode.type == null) {\r\n                this.pushError(\"Werte dieses Datentyps besitzen keine Methoden.\", node.position);\r\n            } else {\r\n                if (objectNode.type instanceof Interface) {\r\n                    this.pushError('Methodendefinitionen eines Interfaces können nicht statisch aufgerufen werden.', node.position);\r\n                } else {\r\n                    this.pushError('Werte des Datentyps ' + objectNode.type.identifier + \" besitzen keine Methoden.\", node.position);\r\n                }\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        let objectType: Klass | StaticClass | Interface = <any>objectNode.type;\r\n\r\n        let posBeforeParameterEvaluation = this.currentProgram.statements.length;\r\n\r\n        let parameterTypes: Type[] = [];\r\n        // let parameterStatements: Statement[][] = [];\r\n        let positionsAfterParameterStatements: number[] = []\r\n\r\n        let allStatements = this.currentProgram.statements;\r\n        if (node.operands != null) {\r\n            // for (let p of node.operands) {\r\n            for (let j = 0; j < node.operands.length; j++) {\r\n                let p = node.operands[j];\r\n                // let programPointer = allStatements.length;\r\n                let typeNode = this.processNode(p);\r\n                // parameterStatements.push(allStatements.splice(programPointer, allStatements.length - programPointer));\r\n                positionsAfterParameterStatements.push(allStatements.length);\r\n                if (typeNode == null) {\r\n                    parameterTypes.push(voidPrimitiveType);\r\n                } else {\r\n                    parameterTypes.push(typeNode.type);\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        let methods: { error: string, methodList: Method[] };\r\n        if (objectType instanceof Interface) {\r\n            methods = objectType.getMethodsThatFitWithCasting(node.identifier,\r\n                parameterTypes, false);\r\n        } else {\r\n            let upToVisibility = getVisibilityUpTo(objectType, this.currentSymbolTable.classContext);\r\n\r\n            methods = objectType.getMethodsThatFitWithCasting(node.identifier,\r\n                parameterTypes, false, upToVisibility);\r\n\r\n        }\r\n\r\n        this.module.pushMethodCallPosition(node.position, node.commaPositions, objectType.getMethods(Visibility.private, node.identifier), node.rightBracketPosition);\r\n\r\n        if (methods.error != null) {\r\n            this.pushError(methods.error, node.position);\r\n            return { type: stringPrimitiveType, isAssignable: false }; // try to continue...\r\n        }\r\n\r\n        let method = methods.methodList[0];\r\n\r\n        this.pushUsagePosition(node.position, method);\r\n\r\n        // You CAN call a static method on a object..., so:\r\n        if (method.isStatic && objectType instanceof Klass && objectType.identifier != \"PrintStream\") {\r\n            this.pushError(\"Es ist kein guter Programmierstil, statische Methoden einer Klasse mithilfe eines Objekts aufzurufen. Besser wäre hier \" + objectType.identifier + \".\" + method.identifier + \"(...).\", node.position, \"info\");\r\n            this.insertStatements(posBeforeParameterEvaluation, [{\r\n                type: TokenType.decreaseStackpointer,\r\n                position: node.position,\r\n                popCount: 1\r\n            },\r\n            {\r\n                type: TokenType.pushStaticClassObject,\r\n                position: node.position,\r\n                klass: objectType\r\n            }\r\n            ]);\r\n        }\r\n\r\n        let destType: Type = null;\r\n        for (let i = 0; i < parameterTypes.length; i++) {\r\n            if (i < method.getParameterCount()) {  // possible ellipsis!\r\n                destType = method.getParameterType(i);\r\n                if (i == method.getParameterCount() - 1 && method.hasEllipsis()) {\r\n                    destType = (<ArrayType>destType).arrayOfType;\r\n                }\r\n            }\r\n\r\n            // Marker 1\r\n            let srcType = parameterTypes[i];\r\n            // for (let st of parameterStatements[i]) {\r\n            //     this.currentProgram.statements.push(st);\r\n            // }\r\n            let programPosition = allStatements.length;\r\n\r\n            if (!this.ensureAutomaticCasting(srcType, destType, node.operands[i].position, node.operands[i])) {\r\n                this.pushError(\"Der Wert vom Datentyp \" + srcType.identifier + \" kann nicht als Parameter (Datentyp \" + destType.identifier + \") verwendet werden.\", node.operands[i].position);\r\n            }\r\n\r\n            if (allStatements.length > programPosition) {\r\n                let castingStatements = allStatements.splice(programPosition, allStatements.length - programPosition);\r\n                allStatements.splice(positionsAfterParameterStatements[i], 0, ...castingStatements);\r\n                this.currentProgram.labelManager.correctPositionsAfterInsert(positionsAfterParameterStatements[i], castingStatements.length);\r\n            }\r\n\r\n\r\n            // if (srcType instanceof PrimitiveType && destType instanceof PrimitiveType) {\r\n            //     if (srcType.getCastInformation(destType).needsStatement) {\r\n            //         this.pushStatements({\r\n            //             type: TokenType.castValue,\r\n            //             position: null,\r\n            //             newType: destType,\r\n            //             stackPosRelative: -parameterTypes.length + 1 + i\r\n            //         });\r\n            //     }\r\n            // }\r\n\r\n        }\r\n\r\n        let stackframeDelta = 0;\r\n        if (method.hasEllipsis()) {\r\n            let ellipsisParameterCount = parameterTypes.length - method.getParameterCount() + 1; // last parameter and subsequent ones\r\n            stackframeDelta = - (ellipsisParameterCount - 1);\r\n            this.pushStatements({\r\n                type: TokenType.makeEllipsisArray,\r\n                position: node.operands[method.getParameterCount() - 1].position,\r\n                parameterCount: ellipsisParameterCount,\r\n                stepFinished: false,\r\n                arrayType: method.getParameter(method.getParameterCount() - 1).type\r\n            })\r\n        }\r\n\r\n        if (method.visibility != Visibility.public) {\r\n\r\n            let visible = true;\r\n            let classContext = this.currentSymbolTable.classContext;\r\n            if (classContext == null) {\r\n                visible = false;\r\n            } else {\r\n                if (classContext != objectType &&\r\n                    !(classContext instanceof Klass && classContext.implements.indexOf(<Interface>objectType) > 0)) {\r\n                    if (method.visibility == Visibility.private) {\r\n                        visible = false;\r\n                    } else {\r\n                        visible = classContext.hasAncestorOrIs(<Klass | StaticClass>objectType);\r\n                    }\r\n                }\r\n            }\r\n            if (!visible) {\r\n                this.pushError(\"Die Methode \" + method.identifier + \" ist an dieser Stelle des Programms nicht sichtbar.\", node.position);\r\n            }\r\n        }\r\n\r\n        let isSystemMethod: boolean = false;        \r\n        if (method.isStatic && objectNode.type != null &&\r\n            (objectNode.type instanceof StaticClass)){\r\n                let classIdentifier = objectNode.type.Klass.identifier;\r\n\r\n                switch (classIdentifier) {\r\n                    case \"Input\":\r\n                        this.pushStatements({\r\n                            type: TokenType.callInputMethod,\r\n                            method: method,\r\n                            position: node.position,\r\n                            stepFinished: true,\r\n                            stackframeBegin: -(parameterTypes.length + 1 + stackframeDelta) // this-object followed by parameters\r\n                        });\r\n                        isSystemMethod = true;\r\n                        break;\r\n                    case \"SystemTools\":\r\n                    case \"Robot\":\r\n                        if([\"pause\", \"warten\"].indexOf(method.identifier) >= 0){\r\n                            this.pushStatements([{\r\n                                type: TokenType.setPauseDuration,\r\n                                position: node.position,\r\n                                stepFinished: true\r\n                            },{\r\n                                type: TokenType.pause,\r\n                                position: node.position,\r\n                                stepFinished: true\r\n                            }\r\n                        ]);\r\n                            isSystemMethod = true;    \r\n                        }\r\n                        break;\r\n                }\r\n\r\n            }\r\n\r\n            if(!isSystemMethod) {\r\n            this.pushStatements({\r\n                type: TokenType.callMethod,\r\n                method: method,\r\n                position: node.position,\r\n                isSuperCall: objectNode.isSuper == null ? false : objectNode.isSuper,\r\n                stepFinished: true,\r\n                stackframeBegin: -(parameterTypes.length + 1 + stackframeDelta) // this-object followed by parameters\r\n            });\r\n        }\r\n\r\n\r\n\r\n        this.pushTypePosition(node.rightBracketPosition, method.getReturnType());\r\n\r\n        return { type: method.getReturnType(), isAssignable: false };\r\n\r\n    }\r\n\r\n    pushConstant(node: ConstantNode): StackType {\r\n\r\n        let type: Type;\r\n\r\n        switch (node.constantType) {\r\n            case TokenType.integerConstant:\r\n                type = intPrimitiveType;\r\n                break;\r\n            case TokenType.booleanConstant:\r\n                type = booleanPrimitiveType;\r\n                break;\r\n            case TokenType.floatingPointConstant:\r\n                type = floatPrimitiveType;\r\n                break;\r\n            case TokenType.stringConstant:\r\n                type = stringPrimitiveType;\r\n                this.pushTypePosition(node.position, type);\r\n                break;\r\n            case TokenType.charConstant:\r\n                type = charPrimitiveType;\r\n                break;\r\n            case TokenType.keywordNull:\r\n                type = nullType\r\n                break;\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.pushConstant,\r\n            dataType: type,\r\n            position: node.position,\r\n            value: node.constant\r\n        })\r\n\r\n        return { type: type, isAssignable: false };\r\n\r\n    }\r\n\r\n    processBinaryOp(node: BinaryOpNode): StackType {\r\n\r\n        let isAssignment = CodeGenerator.assignmentOperators.indexOf(node.operator) >= 0;\r\n\r\n        if (node.operator == TokenType.ternaryOperator) {\r\n            return this.processTernaryOperator(node);\r\n        }\r\n\r\n        let leftType = this.processNode(node.firstOperand, isAssignment);\r\n\r\n        let programPosAfterLeftOpoerand = this.currentProgram.statements.length;\r\n\r\n        let lazyEvaluationDest = null;\r\n        if (node.operator == TokenType.and) {\r\n            lazyEvaluationDest = this.currentProgram.labelManager.insertJumpNode(TokenType.jumpIfFalseAndLeaveOnStack, node.firstOperand.position, this);\r\n        } else if (node.operator == TokenType.or) {\r\n            lazyEvaluationDest = this.currentProgram.labelManager.insertJumpNode(TokenType.jumpIfTrueAndLeaveOnStack, node.firstOperand.position, this);\r\n        }\r\n\r\n        let rightType = this.processNode(node.secondOperand);\r\n\r\n        if (leftType == null || leftType.type == null || rightType == null || rightType.type == null) return null;\r\n\r\n        if (isAssignment) {\r\n            if (!this.ensureAutomaticCasting(rightType.type, leftType.type, node.position, node.firstOperand)) {\r\n                this.pushError(\"Der Wert vom Datentyp \" + rightType.type.identifier + \" auf der rechten Seite kann der Variablen auf der linken Seite (Datentyp \" + leftType.type.identifier + \") nicht zugewiesen werden.\", node.position);\r\n                return leftType;\r\n            }\r\n\r\n            if (!leftType.isAssignable) {\r\n                this.pushError(\"Dem Term/der Variablen auf der linken Seite des Zuweisungsoperators (=) kann kein Wert zugewiesen werden.\", node.position);\r\n            }\r\n\r\n            let statement: AssignmentStatement = {\r\n                //@ts-ignore\r\n                type: node.operator,\r\n                position: node.position,\r\n                stepFinished: true,\r\n                leaveValueOnStack: true\r\n            };\r\n\r\n            this.pushStatements(statement);\r\n\r\n\r\n            return leftType;\r\n\r\n        } else {\r\n\r\n            if (node.firstOperand.type == TokenType.identifier && node.firstOperand.variable != null) {\r\n                let v = node.firstOperand.variable;\r\n                if (v.initialized != null && !v.initialized) {\r\n                    v.usedBeforeInitialization = true;\r\n                    this.pushError(\"Die Variable \" + v.identifier + \" wird hier benutzt bevor sie initialisiert wurde.\", node.position, \"info\");\r\n                }\r\n            }\r\n\r\n            let resultType = leftType.type.getResultType(node.operator, rightType.type);\r\n\r\n            let unboxableLeft = leftType.type[\"unboxableAs\"];\r\n            let unboxableRight = rightType.type[\"unboxableAs\"];\r\n\r\n            if (resultType == null && (unboxableLeft != null || unboxableRight != null)) {\r\n                let leftTypes: Type[] = unboxableLeft == null ? [leftType.type] : unboxableLeft;\r\n                let rightTypes: Type[] = unboxableRight == null ? [rightType.type] : unboxableRight;\r\n\r\n                for (let lt of leftTypes) {\r\n                    for (let rt of rightTypes) {\r\n                        resultType = lt.getResultType(node.operator, rt);\r\n                        if (resultType != null) {\r\n                            leftType.type = lt;\r\n                            rightType.type = rt;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (resultType != null) break;\r\n                }\r\n            }\r\n\r\n            // Situation Object + String: insert toString()-Method\r\n            if (resultType == null && node.operator == TokenType.plus) {\r\n                if (leftType.type instanceof Klass && rightType.type == stringPrimitiveType) {\r\n                    this.insertStatements(programPosAfterLeftOpoerand, this.getToStringStatement(leftType.type, node.firstOperand.position));\r\n                    resultType = stringPrimitiveType;\r\n                    leftType.type = stringPrimitiveType;\r\n                } else if (rightType.type instanceof Klass && leftType.type == stringPrimitiveType) {\r\n                    this.pushStatements(this.getToStringStatement(rightType.type, node.firstOperand.position));\r\n                    resultType = stringPrimitiveType;\r\n                }\r\n            }\r\n\r\n\r\n            if (node.operator in [TokenType.and, TokenType.or]) {\r\n                this.checkIfAssignmentInstedOfEqual(node.firstOperand);\r\n                this.checkIfAssignmentInstedOfEqual(node.secondOperand);\r\n            }\r\n\r\n            if (resultType == null) {\r\n                let bitOperators = [TokenType.ampersand, TokenType.OR];\r\n                let booleanOperators = [\"&& (boolescher UND-Operator)\", \"|| (boolescher ODER-Operator)\"];\r\n                let betterOperators = [\"& &\", \"||\"];\r\n                let opIndex = bitOperators.indexOf(node.operator);\r\n                if (opIndex >= 0 && leftType.type == booleanPrimitiveType && rightType.type == booleanPrimitiveType) {\r\n                    this.pushError(\"Die Operation \" + TokenTypeReadable[node.operator] + \" ist für die Operanden der Typen \" + leftType.type.identifier + \" und \" + rightType.type.identifier + \" nicht definiert. Du meintest wahrscheinlich den Operator \" + booleanOperators[opIndex] + \".\", node.position, \"error\",\r\n                        {\r\n                            title: \"Operator \" + betterOperators[opIndex] + \" verwenden statt \" + TokenTypeReadable[node.operator],\r\n                            editsProvider: (uri) => {\r\n                                return [\r\n                                    {\r\n                                        resource: uri,\r\n                                        edit: {\r\n                                            range: { startLineNumber: node.position.line, startColumn: node.position.column, endLineNumber: node.position.line, endColumn: node.position.column },\r\n                                            text: TokenTypeReadable[node.operator]\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            }\r\n\r\n                        });\r\n                } else {\r\n                    this.pushError(\"Die Operation \" + TokenTypeReadable[node.operator] + \" ist für die Operanden der Typen \" + leftType.type.identifier + \" und \" + rightType.type.identifier + \" nicht definiert.\", node.position);\r\n                }\r\n                return leftType;\r\n            }\r\n\r\n\r\n            this.pushStatements({\r\n                type: TokenType.binaryOp,\r\n                leftType: leftType.type,\r\n                operator: node.operator,\r\n                position: node.position\r\n            });\r\n\r\n            if (lazyEvaluationDest != null) {\r\n                this.currentProgram.labelManager.markJumpDestination(1, lazyEvaluationDest);\r\n            }\r\n\r\n            return { type: resultType, isAssignable: false };\r\n        }\r\n\r\n\r\n    }\r\n\r\n    processTernaryOperator(node: BinaryOpNode): StackType {\r\n\r\n        let leftType = this.processNode(node.firstOperand);\r\n\r\n        if (leftType == null) return;\r\n\r\n        if (this.ensureAutomaticCasting(leftType.type, booleanPrimitiveType, null, node.firstOperand)) {\r\n\r\n            let secondOperand = node.secondOperand;\r\n            if (secondOperand != null) {\r\n                if (secondOperand.type != TokenType.binaryOp || secondOperand.operator != TokenType.colon) {\r\n                    this.pushError(\"Auf den Fragezeichenoperator müssen - mit Doppelpunkt getrennt - zwei Alternativterme folgen.\", node.position);\r\n                } else {\r\n                    let lm = this.currentProgram.labelManager;\r\n                    let variantFalseLabel = lm.insertJumpNode(TokenType.jumpIfFalse, node.position, this);\r\n                    let firstType = this.processNode(secondOperand.firstOperand);\r\n\r\n                    let endLabel = lm.insertJumpNode(TokenType.jumpAlways, secondOperand.firstOperand.position, this);\r\n                    lm.markJumpDestination(1, variantFalseLabel);\r\n                    let secondType = this.processNode(secondOperand.secondOperand);\r\n                    lm.markJumpDestination(1, endLabel);\r\n\r\n                    let type = firstType.type;\r\n                    if (secondType != null && type != secondType.type && type.canCastTo(secondType.type)) {\r\n                        type = secondType.type;\r\n                    }\r\n\r\n                    return {\r\n                        type: type,\r\n                        isAssignable: false\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    processUnaryOp(node: UnaryOpNode): StackType {\r\n        let leftType = this.processNode(node.operand);\r\n\r\n        if (leftType == null || leftType.type == null) return;\r\n\r\n        if (node.operator == TokenType.minus) {\r\n            if (!leftType.type.canCastTo(floatPrimitiveType)) {\r\n                this.pushError(\"Der Operator - ist für den Typ \" + leftType.type.identifier + \" nicht definiert.\", node.position);\r\n                return leftType;\r\n            }\r\n\r\n        }\r\n\r\n        if (node.operator == TokenType.not) {\r\n            if (!(leftType.type == booleanPrimitiveType)) {\r\n                this.checkIfAssignmentInstedOfEqual(node.operand);\r\n                this.pushError(\"Der Operator ! ist für den Typ \" + leftType.type.identifier + \" nicht definiert.\", node.position);\r\n                return leftType;\r\n            }\r\n\r\n        }\r\n\r\n        this.pushStatements({\r\n            type: TokenType.unaryOp,\r\n            operator: node.operator,\r\n            position: node.position\r\n        });\r\n\r\n        return leftType;\r\n    }\r\n\r\n}","import { Error, QuickFix, ErrorLevel } from \"../lexer/Lexer.js\";\r\nimport { TextPosition, Token, TokenList, TokenType, TokenTypeReadable } from \"../lexer/Token.js\";\r\nimport { Visibility, Klass } from \"../types/Class.js\";\r\nimport { ArrayInitializationNode, ASTNode, AttributeDeclarationNode, MethodDeclarationNode, NewArrayNode, ParameterNode, TermNode, TypeNode, EnumValueNode, SwitchNode, SwitchCaseNode, ConstantNode, BracketsNode, ScopeNode, TypeParameterNode, LocalVariableDeclarationNode } from \"./AST.js\";\r\nimport { Module } from \"./Module.js\";\r\nimport { stringPrimitiveType, intPrimitiveType, charPrimitiveType, TokenTypeToDataTypeMap, voidPrimitiveType } from \"../types/PrimitiveTypes.js\";\r\nimport { Enum } from \"../types/Enum.js\";\r\nimport { PrimitiveType, Type } from \"../types/Types.js\";\r\n\r\ntype ASTNodes = ASTNode[];\r\n\r\nexport class Parser {\r\n\r\n    static assignmentOperators = [TokenType.assignment, TokenType.plusAssignment, TokenType.minusAssignment, \r\n        TokenType.multiplicationAssignment, TokenType.divisionAssignment, TokenType.moduloAssignment, \r\n        TokenType.ANDAssigment, TokenType.XORAssigment, TokenType.ORAssigment, \r\n        TokenType.shiftLeftAssigment, TokenType.shiftRightAssigment, TokenType.shiftRightUnsignedAssigment];\r\n\r\n    static operatorPrecedence: TokenType[][] = [Parser.assignmentOperators,\r\n    [TokenType.ternaryOperator], [TokenType.colon],\r\n\r\n    [TokenType.or], [TokenType.and], [TokenType.OR], [TokenType.XOR], [TokenType.ampersand],\r\n    [TokenType.equal, TokenType.notEqual],\r\n    [TokenType.keywordInstanceof, TokenType.lower, TokenType.lowerOrEqual, TokenType.greater, TokenType.greaterOrEqual],\r\n    [TokenType.shiftLeft, TokenType.shiftRight, TokenType.shiftRightUnsigned],\r\n\r\n    // [TokenType.or], [TokenType.and],\r\n    // [TokenType.keywordInstanceof, TokenType.lower, TokenType.lowerOrEqual, TokenType.greater, TokenType.greaterOrEqual, TokenType.equal, TokenType.notEqual],\r\n    \r\n    [TokenType.plus, TokenType.minus], [TokenType.multiplication, TokenType.division, TokenType.modulo]\r\n    ];\r\n\r\n    static TokenTypeToVisibilityMap = {\r\n        [TokenType.keywordPublic]: Visibility.public,\r\n        [TokenType.keywordPrivate]: Visibility.private,\r\n        [TokenType.keywordProtected]: Visibility.protected\r\n    };\r\n\r\n    static forwardToInsideClass = [TokenType.keywordPublic, TokenType.keywordPrivate, TokenType.keywordProtected, TokenType.keywordVoid,\r\n    TokenType.identifier, TokenType.rightCurlyBracket, TokenType.keywordStatic, TokenType.keywordAbstract,\r\n    TokenType.keywordClass, TokenType.keywordEnum, TokenType.keywordInterface];\r\n\r\n    module: Module;\r\n\r\n    pos: number;\r\n    tokenList: TokenList;\r\n\r\n    errorList: Error[];\r\n    typeNodes: TypeNode[];\r\n\r\n    lookahead = 4;\r\n    ct: Token[];\r\n    lastToken: Token;\r\n    cct: Token;\r\n    tt: TokenType;\r\n    position: TextPosition;\r\n    lastComment: Token;\r\n\r\n    endToken: Token = {\r\n        position: { line: 0, column: 0, length: 1 },\r\n        tt: TokenType.endofSourcecode,\r\n        value: \"das Ende des Programms\"\r\n    };\r\n\r\n\r\n    constructor(private isInConsoleMode: boolean){\r\n\r\n    }\r\n\r\n    parse(m: Module) {\r\n\r\n        this.module = m;\r\n\r\n        this.tokenList = m.tokenList;\r\n        this.errorList = [];\r\n\r\n        if (this.tokenList.length == 0) {\r\n            this.module.mainProgramAst = [];\r\n            this.module.classDefinitionsAST = [];\r\n            this.module.typeNodes = [];\r\n            this.module.errors[1] = this.errorList;\r\n            return;\r\n        }\r\n\r\n        this.pos = 0;\r\n        this.initializeLookahead();\r\n\r\n        this.typeNodes = [];\r\n\r\n        let lastToken = this.tokenList[this.tokenList.length - 1];\r\n        this.endToken.position = { line: lastToken.position.line, column: lastToken.position.column + lastToken.position.length, length: 1 };\r\n\r\n        let astNodes = this.parseMain();\r\n        this.module.mainProgramAst = astNodes.mainProgramAST;\r\n        this.module.classDefinitionsAST = astNodes.classDefinitionAST;\r\n        this.module.mainProgramEnd = astNodes.mainProgramEnd;\r\n        this.module.typeNodes = this.typeNodes;\r\n\r\n        this.module.errors[1] = this.errorList;\r\n\r\n    }\r\n\r\n    initializeLookahead() {\r\n\r\n        this.ct = [];\r\n\r\n        for (let i = 0; i < this.lookahead; i++) {\r\n\r\n            let token: Token = this.endToken;\r\n\r\n            while (true) {\r\n\r\n                if (this.pos >= this.tokenList.length) break;\r\n\r\n                let token1 = this.tokenList[this.pos]\r\n                if(token1.tt == TokenType.comment){\r\n                    this.lastComment = token1;\r\n                } \r\n\r\n                if (token1.tt != TokenType.newline && token1.tt != TokenType.space && token1.tt != TokenType.comment) {\r\n                    token = token1;\r\n                    if(this.lastComment != null){\r\n                        token.commentBefore = this.lastComment;\r\n                        this.lastComment = null;\r\n                    }\r\n                    break;\r\n                }\r\n\r\n                this.pos++;\r\n\r\n            }\r\n\r\n            this.ct.push(token);\r\n\r\n            if (i < this.lookahead - 1) {\r\n                this.pos++;\r\n            }\r\n\r\n        }\r\n\r\n        this.cct = this.ct[0];\r\n        this.tt = this.cct.tt;\r\n        this.position = this.cct.position;\r\n\r\n    }\r\n\r\n    nextToken() {\r\n\r\n        let token: Token;\r\n        this.lastToken = this.cct;\r\n\r\n        while (true) {\r\n\r\n            this.pos++;\r\n\r\n            if (this.pos >= this.tokenList.length) {\r\n                token = this.endToken;\r\n                break;\r\n            }\r\n\r\n            token = this.tokenList[this.pos]\r\n            if(token.tt == TokenType.comment){\r\n                this.lastComment = token;\r\n            } \r\n\r\n            if (token.tt != TokenType.newline && token.tt != TokenType.space && token.tt != TokenType.comment) {\r\n                token.commentBefore = this.lastComment;\r\n                this.lastComment = null;\r\n                break;\r\n            }\r\n\r\n        }\r\n\r\n        for (let i = 0; i < this.lookahead - 1; i++) {\r\n            this.ct[i] = this.ct[i + 1];\r\n        }\r\n\r\n        this.ct[this.lookahead - 1] = token;\r\n\r\n        this.cct = this.ct[0];\r\n        this.tt = this.cct.tt;\r\n        this.position = this.cct.position;\r\n\r\n    }\r\n\r\n    pushError(text: string, errorLevel: ErrorLevel = \"error\", position?: TextPosition, quickFix?: QuickFix) {\r\n        if (position == null) position = Object.assign({}, this.position);\r\n        this.errorList.push({\r\n            text: text,\r\n            position: position,\r\n            quickFix: quickFix,\r\n            level: errorLevel\r\n        });\r\n    }\r\n\r\n    expect(tt: TokenType, skip: boolean = true, invokeSemicolonAngel: boolean = false): boolean {\r\n        if (this.tt != tt) {\r\n            if (tt == TokenType.semicolon && this.tt == TokenType.endofSourcecode) {\r\n                return true;\r\n            }\r\n\r\n            let position: TextPosition = this.cct.position;\r\n            if (tt == TokenType.semicolon && this.lastToken != null) {\r\n\r\n                if (this.lastToken.position.line < position.line) {\r\n                    position = {\r\n                        line: this.lastToken.position.line,\r\n                        column: this.lastToken.position.column + this.lastToken.position.length,\r\n                        length: 1\r\n                    }\r\n                }\r\n            }\r\n\r\n            let quickFix: QuickFix = null;\r\n            if (tt == TokenType.semicolon && this.lastToken.position.line < this.cct.position.line &&\r\n                !this.isOperatorOrDot(this.lastToken.tt) \r\n            ) {\r\n                quickFix = {\r\n                    title: 'Strichpunkt hier einfügen',\r\n                    editsProvider: (uri) => {\r\n                        return [{\r\n                            resource: uri,\r\n                            edit: {\r\n                                range: {\r\n                                    startLineNumber: position.line, startColumn: position.column, endLineNumber: position.line, endColumn: position.column,\r\n                                    message: \"\",\r\n                                    severity: monaco.MarkerSeverity.Error\r\n                                },\r\n                                text: \";\"\r\n                            }\r\n                        }\r\n                        ];\r\n                    }\r\n                }\r\n\r\n                if (invokeSemicolonAngel && this.errorList.length < 3) {\r\n                    this.module.main.getSemicolonAngel().register(position, this.module);\r\n                }\r\n            }\r\n\r\n\r\n            this.pushError(\"Erwartet wird: \" + TokenTypeReadable[tt] + \" - Gefunden wurde: \" + TokenTypeReadable[this.tt], \"error\", position, quickFix);\r\n            return false;\r\n        }\r\n\r\n        if (skip) {\r\n            this.nextToken();\r\n        }\r\n\r\n        return true;\r\n    }\r\n    isOperatorOrDot(tt: TokenType): boolean {\r\n        if (tt == TokenType.dot) return true;\r\n        for (let op of Parser.operatorPrecedence) {\r\n            for (let operator of op) {\r\n                if (tt == operator) return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    isEnd(): boolean {\r\n        return this.cct == this.endToken;\r\n    }\r\n\r\n    comesToken(token: TokenType | TokenType[]): boolean {\r\n\r\n        if (!Array.isArray(token)) {\r\n            return this.tt == token;\r\n        }\r\n\r\n        return token.indexOf(this.tt) >= 0;\r\n\r\n    }\r\n\r\n    getCurrentPosition(): TextPosition {\r\n        return Object.assign({}, this.position);\r\n    }\r\n\r\n    getEndOfCurrentToken(): TextPosition {\r\n\r\n        let position = this.getCurrentPosition();\r\n        position.column = position.column + this.position.length;\r\n        position.length = 0;\r\n\r\n        return position;\r\n    }\r\n\r\n    static ClassTokens: TokenType[] = [TokenType.keywordClass, TokenType.keywordEnum, TokenType.keywordInterface];\r\n    static VisibilityTokens: TokenType[] = [TokenType.keywordPrivate, TokenType.keywordProtected, TokenType.keywordPublic];\r\n    static BeforeClassDefinitionTokens: TokenType[] = Parser.ClassTokens.concat(Parser.VisibilityTokens).concat(TokenType.keywordAbstract).concat(Parser.ClassTokens);\r\n\r\n    parseMain(): { mainProgramAST: ASTNodes, mainProgramEnd: TextPosition, classDefinitionAST: ASTNodes } {\r\n\r\n        let mainProgram: ASTNodes = [];\r\n        let classDefinitions: ASTNodes = [];\r\n\r\n        let mainProgramEnd: TextPosition = {\r\n            column: 0,\r\n            line: 10000,\r\n            length: 1\r\n        }\r\n\r\n        while (!this.isEnd()) {\r\n\r\n            let oldPos = this.pos;\r\n\r\n            if (this.comesToken(Parser.BeforeClassDefinitionTokens)) {\r\n                let cd = this.parseClassDefinition();\r\n                if (cd != null) classDefinitions = classDefinitions.concat(cd);\r\n            } else {\r\n                let st = this.parseStatement();\r\n\r\n                if (st != null) {\r\n                    mainProgram = mainProgram.concat(st);\r\n                }\r\n                mainProgramEnd = this.getCurrentPosition();\r\n            }\r\n\r\n            // emergency-forward:\r\n            if (this.pos == oldPos) {\r\n                this.pos++;\r\n                this.initializeLookahead();\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n            mainProgramAST: mainProgram,\r\n            classDefinitionAST: classDefinitions,\r\n            mainProgramEnd: mainProgramEnd\r\n        }\r\n\r\n    }\r\n\r\n\r\n    checkIfStatementHasNoEffekt(st: ASTNode) {\r\n        \r\n        if(this.isInConsoleMode) return;\r\n\r\n        if ((st.type == TokenType.binaryOp && Parser.assignmentOperators.indexOf(st.operator) < 0)) {\r\n            let s = \"dieses Terms\";\r\n            switch (st.operator) {\r\n                case TokenType.plus: s = \"dieser Summe\"; break;\r\n                case TokenType.minus: s = \"dieser Differenz\"; break;\r\n                case TokenType.multiplication: s = \"dieses Produkts\"; break;\r\n                case TokenType.division: s = \"dieses Quotienten\"; break;\r\n            }\r\n            s += \" (Operator \" + TokenTypeReadable[st.operator] + \")\"\r\n            this.pushError(`Der Wert ${s} wird zwar berechnet, aber danach verworfen. Möchtest Du ihn vielleicht einer Variablen zuweisen?`,\r\n                \"info\", st.position);\r\n        } else if (\r\n            [TokenType.unaryOp, TokenType.pushConstant,\r\n            TokenType.identifier, TokenType.selectArrayElement].indexOf(st.type) >= 0) {\r\n            this.pushError(\"Der Wert dieses Terms wird zwar berechnet, aber danach verworfen. Möchtest Du ihn vielleicht einer Variablen zuweisen?\",\r\n                \"info\", st.position);\r\n        }\r\n    }\r\n\r\n    parseStatement(expectSemicolon: boolean = true): ASTNode[] {\r\n\r\n        let retStatements: ASTNode[] = null;\r\n\r\n        switch (this.tt) {\r\n            case TokenType.leftBracket:\r\n            case TokenType.identifier:\r\n            case TokenType.keywordThis:\r\n            case TokenType.keywordSuper:\r\n            case TokenType.keywordFinal:\r\n            case TokenType.charConstant:\r\n            case TokenType.integerConstant:\r\n            case TokenType.stringConstant:\r\n            case TokenType.booleanConstant:\r\n            case TokenType.floatingPointConstant:\r\n            case TokenType.keywordNew:\r\n                let ret = this.parseVariableDeclarationOrTerm();\r\n                if (expectSemicolon) this.expect(TokenType.semicolon, true, true);\r\n                retStatements = ret;\r\n                break;\r\n            case TokenType.leftCurlyBracket:\r\n                let statements: ASTNode[] = [];\r\n                let positionFrom = this.getCurrentPosition();\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                while (this.tt != TokenType.rightCurlyBracket && this.tt != TokenType.endofSourcecode\r\n                    && Parser.BeforeClassDefinitionTokens.indexOf(this.tt) < 0) {\r\n                    statements = statements.concat(this.parseStatement());\r\n                }\r\n                let positionTo = this.getCurrentPosition();\r\n                positionTo.column = positionTo.column + positionTo.length;\r\n                positionTo.length = 0;\r\n                this.expect(TokenType.rightCurlyBracket);\r\n\r\n                retStatements = [{\r\n                    type: TokenType.scopeNode,\r\n                    position: positionFrom,\r\n                    positionTo: positionTo,\r\n                    statements: statements\r\n                }];\r\n                break;\r\n\r\n            case TokenType.keywordWhile:\r\n                retStatements = this.parseWhile();\r\n                break;\r\n            case TokenType.keywordFor:\r\n                retStatements = this.parseFor();\r\n                break;\r\n            case TokenType.keywordDo:\r\n                retStatements = this.parseDo();\r\n                break;\r\n            case TokenType.keywordIf:\r\n                retStatements = this.parseIf();\r\n                break;\r\n            case TokenType.keywordReturn:\r\n                retStatements = this.parseReturn();\r\n                break;\r\n            case TokenType.keywordPrint:\r\n            case TokenType.keywordPrintln:\r\n                retStatements = this.parsePrint();\r\n                break;\r\n            case TokenType.keywordSwitch:\r\n                retStatements = this.parseSwitch();\r\n                break;\r\n            case TokenType.keywordBreak:\r\n                let position = this.getCurrentPosition();\r\n                this.nextToken();\r\n                retStatements = [{\r\n                    type: TokenType.keywordBreak,\r\n                    position: position\r\n                }];\r\n                break;\r\n            case TokenType.keywordContinue:\r\n                let position1 = this.getCurrentPosition();\r\n                this.nextToken();\r\n                retStatements = [{\r\n                    type: TokenType.keywordContinue,\r\n                    position: position1\r\n                }];\r\n                break;\r\n            case TokenType.semicolon:\r\n                break;\r\n            default:\r\n                let s = TokenTypeReadable[this.tt];\r\n                if (s != this.cct.value) s += \"(\" + this.cct.value + \")\";\r\n                s += \" wird hier nicht erwartet.\";\r\n                this.pushError(s);\r\n\r\n                let dontSkip = Parser.BeforeClassDefinitionTokens.indexOf(this.tt) >= 0;\r\n                if (!dontSkip) {\r\n                    this.nextToken();\r\n                }\r\n                break;\r\n        }\r\n\r\n        if(retStatements == null){\r\n            // skip additional semicolons if present...\r\n            while (this.tt == TokenType.semicolon && expectSemicolon) {\r\n                this.nextToken();\r\n            }\r\n        }\r\n\r\n        if(retStatements != null && retStatements.length > 0){\r\n            let retStmt = retStatements[retStatements.length - 1];\r\n            if(retStmt != null){\r\n                this.checkIfStatementHasNoEffekt(retStatements[retStatements.length - 1]);\r\n            } else {\r\n                retStatements = null;\r\n            }\r\n        }\r\n\r\n        return retStatements;\r\n\r\n    }\r\n\r\n    parseReturn(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken();\r\n\r\n        let term: TermNode;\r\n\r\n        if (!(this.tt == TokenType.semicolon)) {\r\n            term = this.parseTerm();\r\n            this.expect(TokenType.semicolon, true, true);\r\n        }\r\n\r\n        return [{\r\n            type: TokenType.keywordReturn,\r\n            position: position,\r\n            term: term\r\n        }];\r\n\r\n    }\r\n\r\n    parseWhile(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken(); // consume while\r\n        let scopeFrom = this.getCurrentPosition();\r\n\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n            let condition = this.parseTerm();\r\n            let rightBracketPosition  = this.getCurrentPosition();\r\n\r\n            this.module.pushMethodCallPosition(position, [], \"while\", rightBracketPosition);\r\n\r\n            this.expect(TokenType.rightBracket, true);\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.pushError(\"Diese while-loop wiederholt nur den Strichpunkt (leere Anweisung).\", \"warning\");\r\n            }\r\n            let statements = this.parseStatement();\r\n            let scopeTo = this.getCurrentPosition();\r\n            scopeTo.length = 0;\r\n\r\n            if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n                scopeTo = (<ScopeNode>statements[0]).positionTo;\r\n            }\r\n\r\n            return [\r\n                {\r\n                    type: TokenType.keywordWhile,\r\n                    position: position,\r\n                    scopeFrom: scopeFrom,\r\n                    scopeTo: scopeTo,\r\n                    condition: condition,\r\n                    statements: statements\r\n                }\r\n            ];\r\n\r\n        }\r\n\r\n        return [];\r\n\r\n    }\r\n\r\n    parseFor(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        let semicolonPositions: TextPosition[] = [];\r\n\r\n        this.nextToken(); // consume for\r\n\r\n        let scopeFrom = this.getCurrentPosition();\r\n\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n\r\n            if (this.ct[2].tt == TokenType.colon) {\r\n                return this.parseForLoopOverCollection(position, scopeFrom);\r\n            }\r\n\r\n            let statementsBefore = this.parseStatement(false);\r\n            semicolonPositions.push(this.getCurrentPosition());\r\n            this.expect(TokenType.semicolon);\r\n            let condition = this.parseTerm();\r\n            semicolonPositions.push(this.getCurrentPosition());\r\n            this.expect(TokenType.semicolon, true);\r\n            let statementsAfter = this.parseStatement(false);\r\n\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            this.module.pushMethodCallPosition(position, semicolonPositions, \"for\", rightBracketPosition);\r\n\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.pushError(\"Diese for-loop wiederholt nur den Strichpunkt (leere Anweisung).\", \"warning\");\r\n            }\r\n\r\n\r\n            let statements = this.parseStatement();\r\n            let scopeTo = this.getCurrentPosition();\r\n            scopeTo.length = 0;\r\n\r\n            if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n                scopeTo = (<ScopeNode>statements[0]).positionTo;\r\n            }\r\n\r\n            if (condition == null) {\r\n                condition = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: TokenType.booleanConstant,\r\n                    constant: true\r\n                }\r\n            }\r\n\r\n            return [\r\n                {\r\n                    type: TokenType.keywordFor,\r\n                    position: position,\r\n                    scopeFrom: scopeFrom,\r\n                    scopeTo: scopeTo,\r\n                    condition: condition,\r\n                    statementsBefore: statementsBefore,\r\n                    statementsAfter: statementsAfter,\r\n                    statements: statements\r\n                }\r\n            ];\r\n\r\n        }\r\n\r\n        return [];\r\n\r\n    }\r\n\r\n    parseForLoopOverCollection(position: TextPosition, scopeFrom: TextPosition): ASTNode[] {\r\n\r\n        let variableType = this.parseType();\r\n\r\n        let variableIdentifier = <string>this.cct.value;\r\n        let variableIdentifierPosition = this.getCurrentPosition();\r\n        this.nextToken();\r\n\r\n        this.expect(TokenType.colon, true);\r\n\r\n        let collection = this.parseTerm();\r\n\r\n        this.expect(TokenType.rightBracket, true);\r\n\r\n        if (this.tt == TokenType.semicolon) {\r\n            this.pushError(\"Diese for-loop wiederholt nur den Strichpunkt (leere Anweisung).\", \"warning\");\r\n        }\r\n\r\n        let statements = this.parseStatement();\r\n        let scopeTo = this.getCurrentPosition();\r\n        scopeTo.length = 0;\r\n\r\n        if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n            scopeTo = (<ScopeNode>statements[0]).positionTo;\r\n        }\r\n\r\n        if (collection == null || variableType == null || statements == null) return [];\r\n\r\n        return [\r\n            {\r\n                type: TokenType.forLoopOverCollection,\r\n                position: position,\r\n                scopeFrom: scopeFrom,\r\n                scopeTo: scopeTo,\r\n                variableIdentifier: variableIdentifier,\r\n                variableType: variableType,\r\n                variablePosition: variableIdentifierPosition,\r\n                collection: collection,\r\n                statements: statements\r\n            }\r\n        ];\r\n\r\n    }\r\n\r\n    parsePrint(): ASTNode[] {\r\n\r\n        let tt = this.tt;\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken();\r\n\r\n        if (this.expect(TokenType.leftBracket, false)) {\r\n            let mcp = this.parseMethodCallParameters();\r\n            let paramenters = mcp.nodes;\r\n            if (paramenters.length > 2) {\r\n                this.pushError(\"Die Methoden print und println haben maximal zwei Parameter.\", \"error\", position);\r\n            }\r\n\r\n            this.expect(TokenType.semicolon, true, true);\r\n\r\n            return [{\r\n                //@ts-ignore\r\n                type: tt,\r\n                position: position,\r\n                text: paramenters.length == 0 ? null : paramenters[0],\r\n                color: paramenters.length <= 1 ? null : paramenters[1],\r\n                commaPositions: mcp.commaPositions,\r\n                rightBracketPosition: mcp.rightBracketPosition\r\n            }];\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    parseSwitch(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n        this.nextToken();\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n\r\n            let switchTerm = this.parseTerm();\r\n\r\n            this.module.pushMethodCallPosition(position, [], \"switch\", this.getCurrentPosition());\r\n\r\n            this.expect(TokenType.rightBracket);\r\n            let scopeFrom = this.getCurrentPosition();\r\n\r\n            this.expect(TokenType.leftCurlyBracket, true);\r\n\r\n            let switchNode: SwitchNode = {\r\n                type: TokenType.keywordSwitch,\r\n                position: position,\r\n                scopeFrom: scopeFrom,\r\n                scopeTo: null,\r\n                condition: switchTerm,\r\n                caseNodes: []\r\n            }\r\n\r\n            let defaultAlreadyThere = false;\r\n\r\n            while (this.tt == TokenType.keywordCase || this.tt == TokenType.keywordDefault) {\r\n                let casePosition = this.getCurrentPosition();\r\n\r\n                let isDefault = this.tt == TokenType.keywordDefault;\r\n                if (isDefault) {\r\n                    if (defaultAlreadyThere) {\r\n                        this.pushError(\"Eine switch-Anweisung darf nur maximal einen default-Zweig haben.\", \"error\", casePosition);\r\n                    } else {\r\n                        defaultAlreadyThere = true;\r\n                    }\r\n                }\r\n\r\n                this.nextToken();\r\n\r\n                let caseTerm = null;\r\n                if (!isDefault) {\r\n                    caseTerm = this.parseUnary();\r\n                }\r\n\r\n                this.expect(TokenType.colon, true);\r\n\r\n                let statements: ASTNode[] = [];\r\n                //@ts-ignore\r\n                while (this.tt != TokenType.rightCurlyBracket && this.tt != TokenType.endofSourcecode\r\n                    && this.tt != TokenType.keywordCase && this.tt != TokenType.keywordDefault\r\n                ) {\r\n                    let oldPos = this.pos;\r\n                    let statement = this.parseStatement();\r\n                    if (statement != null) {\r\n                        statements = statements.concat(statement);\r\n                    }\r\n                    if(oldPos == this.pos){\r\n                        this.pushError(this.cct.value + \" wird hier nicht erwartet.\");\r\n                        this.nextToken();\r\n                    }\r\n                }\r\n\r\n                let switchCaseNode: SwitchCaseNode = {\r\n                    type: TokenType.keywordCase,\r\n                    position: casePosition,\r\n                    caseTerm: caseTerm,\r\n                    statements: statements\r\n                }\r\n\r\n                switchNode.caseNodes.push(switchCaseNode);\r\n\r\n            }\r\n\r\n            switchNode.scopeTo = this.getEndOfCurrentToken();\r\n            this.expect(TokenType.rightCurlyBracket, true);\r\n\r\n            return [switchNode];\r\n\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    parseIf(): ASTNode[] {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken(); // consume if\r\n        if (this.expect(TokenType.leftBracket, true)) {\r\n            let condition = this.parseTerm();\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.module.pushMethodCallPosition(position, [], \"if\", rightBracketPosition);\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.pushError(\"Falls die Bedingung zutrifft, wird nur der Strichpunkt ausgeführt (leere Anweisung).\", \"warning\");\r\n            }\r\n\r\n            let statements = this.parseStatement();\r\n\r\n            if (this.tt == TokenType.semicolon) {\r\n                this.nextToken();\r\n            }\r\n\r\n            let elseStatements: ASTNode[] = null;\r\n\r\n            if (this.comesToken(TokenType.keywordElse)) {\r\n                this.nextToken();\r\n                elseStatements = this.parseStatement();\r\n            }\r\n\r\n            if (condition == null && this.errorList.length == 0) {\r\n                condition = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: TokenType.booleanConstant,\r\n                    constant: true\r\n                }\r\n            }\r\n\r\n            return [\r\n                {\r\n                    type: TokenType.keywordIf,\r\n                    position: position,\r\n                    condition: condition,\r\n                    statementsIfTrue: statements,\r\n                    statementsIfFalse: elseStatements\r\n                }\r\n            ];\r\n\r\n        }\r\n\r\n        return [];\r\n\r\n    }\r\n\r\n    parseDo(): ASTNode[] {\r\n\r\n        // let i = 10;\r\n        // do {\r\n        //     i = i +7;\r\n        // } while (i < 100);\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        let scopeFrom = this.getCurrentPosition();\r\n        this.nextToken(); // consume do\r\n        let statements = this.parseStatement();\r\n\r\n        if (this.expect(TokenType.keywordWhile, true)) {\r\n            if (this.expect(TokenType.leftBracket, true)) {\r\n                let condition = this.parseTerm();\r\n                let scopeTo = this.getEndOfCurrentToken();\r\n\r\n                this.expect(TokenType.rightBracket, true);\r\n\r\n                return [\r\n                    {\r\n                        type: TokenType.keywordDo,\r\n                        position: position,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        condition: condition,\r\n                        statements: statements\r\n                    }\r\n                ];\r\n\r\n            }\r\n        }\r\n        return [];\r\n\r\n    }\r\n\r\n    comesGenericType(): boolean {\r\n        if (this.ct[1].tt != TokenType.lower) return false;\r\n        if (this.ct[2].tt != TokenType.identifier) return false;\r\n        return this.ct[3].tt == TokenType.greater || this.ct[3].tt == TokenType.comma;\r\n\r\n    }\r\n\r\n    parseVariableDeclarationOrTerm(): ASTNode[] {\r\n\r\n        // Two identifiers in a row or identifier[]\r\n        if (\r\n            (this.tt == TokenType.identifier || this.tt == TokenType.keywordFinal) &&\r\n            (this.ct[1].tt == TokenType.identifier\r\n                || this.ct[1].tt == TokenType.leftRightSquareBracket ||\r\n                this.comesGenericType() \r\n            )\r\n        ) {\r\n            let ret: ASTNode[] = [];\r\n            let type: TypeNode = null;\r\n            do {\r\n                if (type != null) this.expect(TokenType.comma, true);\r\n                let vd = this.parseVariableDeclaration(type);\r\n                ret.push(vd);\r\n                type = vd?.variableType;\r\n                //@ts-ignore\r\n            } while (this.tt == TokenType.comma);\r\n\r\n            return ret;\r\n        } else {\r\n            return [this.parseTerm()];\r\n        }\r\n\r\n    }\r\n\r\n    parseTerm(): TermNode {\r\n        return this.parseTermBinary(0);\r\n    }\r\n\r\n    parseTermBinary(precedence: number): TermNode {\r\n\r\n        let left: TermNode;\r\n        if (precedence < Parser.operatorPrecedence.length - 1) {\r\n            left = this.parseTermBinary(precedence + 1);\r\n        } else {\r\n            left = this.parsePlusPlusMinusMinus();\r\n        }\r\n\r\n        let operators = Parser.operatorPrecedence[precedence];\r\n\r\n        if (left == null || operators.indexOf(this.tt) < 0) {\r\n            return left;\r\n        }\r\n\r\n        let first = true;\r\n\r\n        // 28.05.2021: This broke evalation of ternery operator, so i commented it out.\r\n        // Don't know why it was there in the first place, so i expect some havoc to come...\r\n        // 15 Minutes later:\r\n        // This if-clause was here to make terms aber case possible, e.g. switch(a){ case 7 + 2: println(\"Here!\")}\r\n        // -> Bad idea. I changed this to only parse unary Terms left of the colon so i can comment out this if-clause here\r\n        // and fix the ternary operator.\r\n        //\r\n        // if (this.tt == TokenType.colon) {\r\n        //     return left;\r\n        // }\r\n\r\n        while (first || operators.indexOf(this.tt) >= 0) {\r\n\r\n            let operator: TokenType = this.tt;\r\n\r\n            first = false;\r\n            let position = this.getCurrentPosition();\r\n\r\n            this.nextToken();\r\n\r\n            for (let opData of [{ op: TokenType.lower, wrong: \"=<\", right: \"<=\", correctOp: TokenType.lowerOrEqual }, \r\n                                { op: TokenType.greater, wrong: \"=>\", right: \">=\", correctOp: TokenType.greaterOrEqual }]) {\r\n                if (operator == TokenType.assignment && this.tt == opData.op) {\r\n                    let position2 = this.getCurrentPosition();\r\n                    this.pushError(`Den Operator ${opData.wrong} gibt es nicht. Du meintest sicher: ${opData.right}`, \"error\",\r\n                        Object.assign({}, position, { length: 2 }), {\r\n                        title: `${opData.wrong} durch ${opData.right} ersetzen`,\r\n                        editsProvider: (uri) => {\r\n                            return [\r\n                                {\r\n                                    resource: uri,\r\n                                    edit: {\r\n                                        range: { startLineNumber: position.line, startColumn: position.column, endLineNumber: position.line, endColumn: position2.column + position2.length },\r\n                                        text: opData.right\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    });\r\n                    this.nextToken();\r\n                    operator = opData.correctOp;\r\n                }\r\n            }\r\n\r\n            let right: TermNode;\r\n            if (precedence < Parser.operatorPrecedence.length - 1) {\r\n                right = this.parseTermBinary(precedence + 1);\r\n            } else {\r\n                right = this.parsePlusPlusMinusMinus();\r\n            }\r\n\r\n            if (right != null) {\r\n\r\n                let constantFolding = false;\r\n                if (this.isConstant(left) && this.isConstant(right)) {\r\n                    let pcLeft = <ConstantNode>left;\r\n                    let pcRight = <ConstantNode>right;\r\n                    let typeLeft = TokenTypeToDataTypeMap[pcLeft.constantType];\r\n                    let typeRight = TokenTypeToDataTypeMap[pcRight.constantType];\r\n                    let resultType = typeLeft.getResultType(operator, typeRight);\r\n                    if (resultType != null) {\r\n                        constantFolding = true;\r\n                        let result = typeLeft.compute(operator, { type: typeLeft, value: pcLeft.constant },\r\n                            { type: typeRight, value: pcRight.constant });\r\n\r\n                        this.considerIntDivisionWarning(operator, typeLeft, pcLeft.constant, typeRight, pcRight.constant, position);\r\n\r\n                        pcLeft.constantType = (<PrimitiveType>resultType).toTokenType();\r\n                        pcLeft.constant = result;\r\n                        pcLeft.position.length = pcRight.position.column + pcRight.position.length - pcLeft.position.column;\r\n                    }\r\n                }\r\n\r\n                if (!constantFolding)\r\n                    left = {\r\n                        type: TokenType.binaryOp,\r\n                        position: position,\r\n                        operator: operator,\r\n                        firstOperand: left,\r\n                        secondOperand: right\r\n                    };\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        return left;\r\n\r\n    }\r\n\r\n    considerIntDivisionWarning(operator: TokenType, typeLeft: Type, leftConstant: any, typeRight: Type, rightConstant: any, position: TextPosition) {\r\n    \r\n        if(operator == TokenType.division){\r\n            if(this.isIntegerType(typeLeft) && this.isIntegerType(typeRight)){\r\n                if(rightConstant != 0 && leftConstant/rightConstant != Math.floor(leftConstant/rightConstant)){\r\n                    this.pushError(\"Da \" + leftConstant + \" und \" + rightConstant + \" ganzzahlige Werte sind, wird diese Division als Ganzzahldivision ausgeführt und ergibt den Wert \" + Math.floor(leftConstant/rightConstant) + \". Falls das nicht gewünscht ist, hänge '.0' an einen der Operanden.\", \"info\", position);\r\n                }\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n    isIntegerType(type: Type): boolean {\r\n        return type == intPrimitiveType;\r\n    }\r\n\r\n    isConstant(node: TermNode) {\r\n\r\n        return (node != null && node.type == TokenType.pushConstant);\r\n\r\n    }\r\n\r\n    parsePlusPlusMinusMinus(): TermNode {\r\n\r\n        let incrementDecrementBefore: TokenType = null;\r\n        let position = null;\r\n\r\n        if (this.comesToken([TokenType.doublePlus, TokenType.doubleMinus])) {\r\n            incrementDecrementBefore = this.tt;\r\n            position = this.getCurrentPosition();\r\n            this.nextToken();\r\n        }\r\n\r\n        let t: TermNode = this.parseUnary();\r\n\r\n        if (incrementDecrementBefore != null) {\r\n            t = {\r\n                type: TokenType.incrementDecrementBefore,\r\n                position: position,\r\n                operator: incrementDecrementBefore,\r\n                operand: t\r\n            }\r\n        }\r\n\r\n        if (this.comesToken([TokenType.doublePlus, TokenType.doubleMinus])) {\r\n            t = {\r\n                type: TokenType.incrementDecrementAfter,\r\n                position: this.getCurrentPosition(),\r\n                operator: this.tt,\r\n                operand: t\r\n            }\r\n            this.nextToken();\r\n        }\r\n\r\n        return t;\r\n\r\n    }\r\n\r\n    // -, not, this, super, a.b.c[][].d, a.b(), b() (== this.b()), super.b(), super()\r\n    parseUnary(): TermNode {\r\n\r\n        let term: TermNode;\r\n        let position: TextPosition = this.getCurrentPosition();\r\n\r\n        switch (this.tt) {\r\n            case TokenType.leftBracket:\r\n                return this.parseDotOrArrayChains(this.bracketOrCasting());\r\n            case TokenType.minus:\r\n            case TokenType.not:\r\n            case TokenType.tilde:\r\n                position = position;\r\n                let tt1 = this.tt;\r\n                this.nextToken();\r\n                term = this.parseUnary();\r\n\r\n                if (this.isConstant(term)) {\r\n                    let pcTerm = <ConstantNode>term;\r\n                    let typeTerm = TokenTypeToDataTypeMap[pcTerm.constantType];\r\n                    let resultType = typeTerm.getResultType(tt1);\r\n                    if (resultType != null) {\r\n                        let result = typeTerm.compute(tt1, { type: typeTerm, value: pcTerm.constant });\r\n                        pcTerm.constantType = (<PrimitiveType>resultType).toTokenType();\r\n                        pcTerm.constant = result;\r\n                        position.length = pcTerm.position.column - position.column + 1;\r\n                        return pcTerm;\r\n                    }\r\n                }\r\n\r\n                return {\r\n                    type: TokenType.unaryOp,\r\n                    position: position,\r\n                    operand: term,\r\n                    operator: tt1\r\n                };\r\n            case TokenType.keywordSuper:\r\n                if (this.ct[1].tt == TokenType.leftBracket) {\r\n                    this.nextToken(); // skip \"super\"\r\n                    let parameters = this.parseMethodCallParameters();\r\n                    term = {\r\n                        type: TokenType.superConstructorCall,\r\n                        position: position,\r\n                        operands: parameters.nodes,\r\n                        commaPositions: parameters.commaPositions,\r\n                        rightBracketPosition: parameters.rightBracketPosition\r\n                    };\r\n                    return term;\r\n                } else {\r\n                    term = {\r\n                        type: TokenType.keywordSuper,\r\n                        position: position\r\n                    };\r\n                }\r\n                this.nextToken();\r\n                return this.parseDotOrArrayChains(term);\r\n            case TokenType.keywordThis:\r\n                if (this.ct[1].tt == TokenType.leftBracket) {\r\n                    this.nextToken(); // skip \"super\"\r\n                    let parameters = this.parseMethodCallParameters();\r\n                    term = {\r\n                        type: TokenType.constructorCall,\r\n                        position: position,\r\n                        operands: parameters.nodes,\r\n                        commaPositions: parameters.commaPositions,\r\n                        rightBracketPosition: parameters.rightBracketPosition\r\n                    };\r\n                    return term;\r\n                } else {\r\n                    term = {\r\n                        type: TokenType.keywordThis,\r\n                        position: position\r\n                    };\r\n                }\r\n                this.nextToken();\r\n                return this.parseDotOrArrayChains(term);\r\n            case TokenType.keywordNew:\r\n                return this.parseDotOrArrayChains(this.parseNew());\r\n            case TokenType.integerConstant:\r\n            case TokenType.charConstant:\r\n            case TokenType.floatingPointConstant:\r\n            case TokenType.stringConstant:\r\n            case TokenType.booleanConstant:\r\n                term = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: this.tt,\r\n                    constant: this.cct.value\r\n                };\r\n                let isStringConstant = this.tt == TokenType.stringConstant;\r\n                this.nextToken();\r\n\r\n                if (isStringConstant) return this.parseDotOrArrayChains(term);\r\n\r\n                return term;\r\n            case TokenType.keywordNull:\r\n                term = {\r\n                    type: TokenType.pushConstant,\r\n                    position: this.getCurrentPosition(),\r\n                    constantType: TokenType.keywordNull,\r\n                    constant: null\r\n                };\r\n                this.nextToken();\r\n                return term;\r\n            case TokenType.identifier: // attribute of current class or local variable\r\n\r\n                let identifier1 = <string>this.cct.value;\r\n                let position1 = this.getCurrentPosition();\r\n\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                if (this.tt == TokenType.leftBracket) {\r\n                    let parameters = this.parseMethodCallParameters();\r\n                    let rightBracketPosition = parameters.rightBracketPosition;\r\n\r\n                    term = {\r\n                        type: TokenType.callMethod,\r\n                        position: position1,\r\n                        rightBracketPosition: rightBracketPosition,\r\n                        operands: parameters.nodes,\r\n                        object: term,\r\n                        identifier: identifier1,\r\n                        commaPositions: parameters.commaPositions\r\n                    }\r\n                } else {\r\n                    term = {\r\n                        type: TokenType.identifier,\r\n                        identifier: identifier1,\r\n                        position: position\r\n                    }\r\n                }\r\n\r\n                return this.parseDotOrArrayChains(term);\r\n            default:\r\n                this.pushError(\"Erwartet wird eine Variable, ein Methodenaufruf oder this oder super. Gefunden wurde: \" + this.cct.value);\r\n                return null;\r\n        }\r\n\r\n    }\r\n\r\n    tokensNotAfterCasting: TokenType[] = [TokenType.multiplication, TokenType.division, TokenType.plus,\r\n    TokenType.minus, TokenType.dot, TokenType.modulo, TokenType.semicolon, TokenType.rightBracket];\r\n\r\n    bracketOrCasting(): TermNode {\r\n\r\n        let position = this.getCurrentPosition();\r\n\r\n        this.nextToken(); // consume (\r\n\r\n        if (this.tt == TokenType.identifier && this.ct[1].tt == TokenType.rightBracket &&\r\n            this.tokensNotAfterCasting.indexOf(this.ct[2].tt) < 0) {\r\n\r\n            let castToType = this.parseType();\r\n            let position1 = this.getCurrentPosition(); // Position of )\r\n            position.length = position1.column - position.column + 1;\r\n\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            let whatToCast = this.parsePlusPlusMinusMinus();\r\n\r\n            return {\r\n                type: TokenType.castValue,\r\n                position: position,\r\n                castToType: castToType,\r\n                whatToCast: whatToCast\r\n            }\r\n\r\n\r\n        } else {\r\n\r\n            let term = this.parseTerm();\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.expect(TokenType.rightBracket, true);\r\n\r\n            if (this.isConstant(term)) {\r\n                return term;\r\n            }\r\n\r\n            let bracketsNode: BracketsNode = {\r\n                position: rightBracketPosition,\r\n                type: TokenType.rightBracket,\r\n                termInsideBrackets: term\r\n            }\r\n\r\n\r\n            return bracketsNode;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    parseNew(): TermNode {\r\n\r\n        this.nextToken();\r\n        let position = this.getCurrentPosition();\r\n\r\n        if (this.expect(TokenType.identifier, false)) {\r\n            let identifier = <string>this.cct.value;\r\n            let identifierPosition = this.getCurrentPosition();\r\n            this.nextToken();\r\n\r\n\r\n            let genericParameterTypes: TypeNode[] = null;\r\n\r\n            if (this.tt == TokenType.lower) {\r\n\r\n                genericParameterTypes = [];\r\n                let first: boolean = true;\r\n                this.nextToken();\r\n\r\n                //@ts-ignore\r\n                while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n\r\n                    if (!first) this.nextToken(); // consume comma\r\n\r\n                    first = false;\r\n\r\n                    genericParameterTypes.push(this.parseType());\r\n\r\n                }\r\n\r\n                this.expect(TokenType.greater);\r\n                if (genericParameterTypes.length == 0) genericParameterTypes = null;\r\n            }\r\n\r\n            if (this.tt == TokenType.leftSquareBracket || this.tt == TokenType.leftRightSquareBracket) {\r\n\r\n                let typenode: TypeNode = {\r\n                    type: TokenType.type,\r\n                    position: position,\r\n                    arrayDimension: 0,\r\n                    identifier: identifier,\r\n                    genericParameterTypes: genericParameterTypes\r\n                }\r\n                this.typeNodes.push(typenode);\r\n\r\n                let elementCount: TermNode[] = [];\r\n\r\n                while (this.tt == TokenType.leftSquareBracket || this.tt == TokenType.leftRightSquareBracket) {\r\n                    typenode.arrayDimension++;\r\n\r\n                    //@ts-ignore\r\n                    if (this.tt == TokenType.leftRightSquareBracket) {\r\n                        elementCount.push(null);\r\n                        this.nextToken();\r\n                    } else {\r\n                        this.nextToken();\r\n                        elementCount.push(this.parseTerm());\r\n                        this.expect(TokenType.rightSquareBracket, true);\r\n                    }\r\n\r\n                }\r\n\r\n                let initialization = null;\r\n\r\n                if (this.tt == TokenType.leftCurlyBracket) {\r\n                    initialization = this.parseArrayLiteral(typenode);\r\n                }\r\n\r\n                let newArrayNode: NewArrayNode = {\r\n                    type: TokenType.newArray,\r\n                    position: position,\r\n                    arrayType: typenode,\r\n                    elementCount: elementCount,\r\n                    initialization: initialization\r\n                }\r\n\r\n                return newArrayNode;\r\n\r\n\r\n            } else if (this.tt == TokenType.leftBracket) {\r\n                let parameters = this.parseMethodCallParameters();\r\n\r\n                let classType: TypeNode = {\r\n                    type: TokenType.type,\r\n                    position: identifierPosition,\r\n                    arrayDimension: 0,\r\n                    identifier: identifier,\r\n                    genericParameterTypes: genericParameterTypes\r\n                }\r\n\r\n                this.typeNodes.push(classType);\r\n\r\n                return {\r\n                    type: TokenType.newObject,\r\n                    position: position,\r\n                    classType: classType,\r\n                    constructorOperands: parameters.nodes,\r\n                    rightBracketPosition: parameters.rightBracketPosition,\r\n                    commaPositions: parameters.commaPositions\r\n                }\r\n            } else {\r\n                this.pushError(\"Konstruktoraufruf (also runde Klammer auf) oder Array-Intanzierung (eckige Klammer auf) erwartet.\", \"error\", this.getCurrentPosition());\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    parseArrayLiteral(arrayType: TypeNode): ArrayInitializationNode {\r\n        // expects { as next token\r\n\r\n        let nodes: (ArrayInitializationNode | TermNode)[] = [];\r\n        let position = this.getCurrentPosition();\r\n        let dimension = null;\r\n\r\n        this.expect(TokenType.leftCurlyBracket, true);\r\n        if (this.tt != TokenType.rightCurlyBracket) {\r\n\r\n            let first = true;\r\n            while (first || this.tt == TokenType.comma) {\r\n                let position1 = this.getCurrentPosition();\r\n\r\n                if (!first) {\r\n                    this.nextToken(); // consume comma\r\n                }\r\n                first = false;\r\n\r\n                let newDimension: number;\r\n                if (this.tt == TokenType.leftCurlyBracket) {\r\n                    let newType: TypeNode = {\r\n                        type: TokenType.type,\r\n                        position: this.getCurrentPosition(),\r\n                        arrayDimension: arrayType.arrayDimension - 1,\r\n                        identifier: arrayType.identifier\r\n                    }\r\n                    this.typeNodes.push(newType);\r\n                    let al = this.parseArrayLiteral(newType);\r\n                    newDimension = al.dimension + 1;\r\n                    nodes.push(al);\r\n                } else {\r\n                    nodes.push(this.parseTerm());\r\n                    newDimension = 1;\r\n                }\r\n\r\n                if (dimension != null) {\r\n                    if (dimension != newDimension) {\r\n                        this.pushError(\"Die Dimension dieses Array-Literals (\" + (newDimension - 1) + \" ist ungleich derjenigen der vorangegangenen Array-Literale (\" + (dimension - 1) + \").\", \"error\", position1);\r\n                    }\r\n                }\r\n                dimension = newDimension;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.expect(TokenType.rightCurlyBracket, true);\r\n\r\n        let ain: ArrayInitializationNode = {\r\n            type: TokenType.arrayInitialization,\r\n            position: position,\r\n            arrayType: arrayType,\r\n            dimension: dimension,\r\n            nodes: nodes\r\n        }\r\n\r\n        return ain;\r\n\r\n    }\r\n\r\n    parseMethodCallParameters(): { rightBracketPosition: TextPosition, nodes: TermNode[], commaPositions: TextPosition[] } {\r\n        // Assumption: current token is (        \r\n        this.nextToken();\r\n        if (this.tt == TokenType.rightBracket) {\r\n            let rightBracketPosition = this.getCurrentPosition();\r\n            this.nextToken();\r\n            return { rightBracketPosition: rightBracketPosition, nodes: [], commaPositions: [] };\r\n        }\r\n\r\n        let parameters: TermNode[] = [];\r\n        let commaPositions: TextPosition[] = [];\r\n\r\n        while (true) {\r\n            let pos = this.pos;\r\n\r\n            let parameter = this.parseTerm();\r\n            if (parameter != null) {\r\n                parameters.push(parameter);\r\n            }\r\n\r\n            if (this.tt != TokenType.comma) {\r\n                break;\r\n            } else {\r\n                commaPositions.push(this.getCurrentPosition());\r\n                this.nextToken(); // consume comma\r\n            }\r\n\r\n            // emergency-step:\r\n            if (this.pos == pos) {\r\n                this.nextToken();\r\n            }\r\n\r\n        }\r\n\r\n        let position = this.getCurrentPosition();\r\n        let rightBracketFound = this.expect(TokenType.rightBracket, true);\r\n\r\n        return { rightBracketPosition: rightBracketFound ? position : null, nodes: parameters, commaPositions: commaPositions };\r\n\r\n    }\r\n\r\n    parseDotOrArrayChains(term: TermNode): TermNode {\r\n\r\n        if (term == null) return null;\r\n\r\n        while (this.comesToken([TokenType.dot, TokenType.leftSquareBracket])) {\r\n            if (this.tt == TokenType.dot) {\r\n\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                if (this.tt != TokenType.identifier) {\r\n                    this.pushError(\"Erwartet wird der Bezeichner eines Attributs oder einer Methode, gefunden wurde: \" + this.cct.value);\r\n                    return term;\r\n                }\r\n\r\n                let identifier = <string>this.cct.value;\r\n                let position = this.getCurrentPosition();\r\n                this.nextToken();\r\n                //@ts-ignore\r\n                if (this.tt == TokenType.leftBracket) {\r\n                    let parameters = this.parseMethodCallParameters();\r\n                    term = {\r\n                        type: TokenType.callMethod,\r\n                        position: position,\r\n                        rightBracketPosition: parameters.rightBracketPosition,\r\n                        operands: parameters.nodes,\r\n                        object: term,\r\n                        identifier: identifier,\r\n                        commaPositions: parameters.commaPositions\r\n                    }\r\n                } else {\r\n                    term = {\r\n                        type: TokenType.pushAttribute,\r\n                        position: position,\r\n                        identifier: identifier,\r\n                        object: term\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                // let position = this.getCurrentPosition();\r\n                let position = term.position;\r\n                this.nextToken();\r\n                let index = this.parseTerm();\r\n                let positionEnd = this.getCurrentPosition();\r\n                let position1: TextPosition = Object.assign({}, position);\r\n                this.expect(TokenType.rightSquareBracket, true);\r\n                if (positionEnd.line == position.line) {\r\n                    position1.length = positionEnd.column + positionEnd.length - position1.column;\r\n                } else {\r\n                    position1 = positionEnd;\r\n                }\r\n                term = {\r\n                    type: TokenType.selectArrayElement,\r\n                    position: position1,\r\n                    index: index,\r\n                    object: term\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return term;\r\n    }\r\n\r\n    parseVariableDeclaration(type: TypeNode): LocalVariableDeclarationNode {\r\n\r\n        let isFinal = false;\r\n        if (this.tt == TokenType.keywordFinal) {\r\n            isFinal = true;\r\n            this.nextToken();\r\n        }\r\n\r\n        if (type == null) {\r\n            type = this.parseType();\r\n        }\r\n\r\n        if(this.tt != TokenType.identifier){\r\n            this.pushError(\"Hier wird ein Bezeichner (Name) einer Variable erwartet.\", \"error\", this.getCurrentPosition());\r\n            return null;\r\n        }\r\n\r\n        let identifier = <string>this.cct.value;\r\n        let position = this.getCurrentPosition();\r\n        this.nextToken();\r\n\r\n        let initialization: TermNode = null;\r\n\r\n        //@ts-ignore\r\n        if (this.tt == TokenType.assignment) {\r\n            this.nextToken();\r\n            //@ts-ignore\r\n            if (type.arrayDimension > 0 && this.tt == TokenType.leftCurlyBracket) {\r\n                initialization = this.parseArrayLiteral(type);\r\n            } else {\r\n                initialization = this.parseTerm();\r\n            }\r\n        }\r\n\r\n        //@ts-ignore\r\n        if (this.tt == TokenType.endofSourcecode && type == null && identifier == null) return null;\r\n\r\n        return {\r\n            type: TokenType.localVariableDeclaration,\r\n            position: position,\r\n            identifier: identifier,\r\n            variableType: type,\r\n            initialization: initialization,\r\n            isFinal: isFinal\r\n        }\r\n\r\n    }\r\n\r\n    parseType(): TypeNode {\r\n\r\n        /**\r\n         * e.g. int, int[][], Integer, ArrayList<Integer> ,HashMap<Integer, ArrayList<String>>[][]\r\n         */\r\n\r\n\r\n        if(this.tt != TokenType.identifier && this.tt != TokenType.keywordVoid){\r\n            this.pushError(\"Erwartet wird ein Datentyp. Dieser muss mit einem Bezeichner beginnen. Gefunden wurde: \" + this.cct.value, \"error\", this.getCurrentPosition());\r\n                this.nextToken();\r\n            return {\r\n                type: TokenType.type,\r\n                position: this.getCurrentPosition(),\r\n                arrayDimension: 0,\r\n                identifier: \"int\",\r\n                genericParameterTypes: []\r\n            };\r\n        }\r\n\r\n        let identifier = <string>this.cct.value;\r\n        let position = this.getCurrentPosition();\r\n        this.nextToken();\r\n\r\n        let genericParameterTypes: TypeNode[] = null;\r\n\r\n        //@ts-ignore\r\n        if (this.tt == TokenType.lower) {\r\n\r\n            genericParameterTypes = [];\r\n            let first: boolean = true;\r\n            this.nextToken();\r\n\r\n            //@ts-ignore\r\n            while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n\r\n                if (!first) this.nextToken(); // consume comma\r\n\r\n                first = false;\r\n\r\n                genericParameterTypes.push(this.parseType());\r\n\r\n            }\r\n\r\n            this.expect(TokenType.greater);\r\n\r\n        }\r\n\r\n        let arrayDimension = 0;\r\n        //@ts-ignore\r\n        while (this.tt == TokenType.leftRightSquareBracket) {\r\n            arrayDimension++;\r\n            position.length += 2;\r\n            this.nextToken();\r\n        }\r\n\r\n        let typenode: TypeNode = {\r\n            type: TokenType.type,\r\n            position: position,\r\n            arrayDimension: arrayDimension,\r\n            identifier: identifier,\r\n            genericParameterTypes: genericParameterTypes\r\n        }\r\n\r\n        this.typeNodes.push(typenode);\r\n\r\n        return typenode;\r\n\r\n    }\r\n\r\n\r\n    parseClassDefinition(): ASTNode {\r\n\r\n        let commentBefore = this.cct.commentBefore;\r\n        let modifiers = this.collectModifiers();\r\n\r\n        if (!this.comesToken(Parser.ClassTokens)) {\r\n            this.pushError(\"Erwartet wird class, interface oder enum. Gefunden wurde: \" + this.cct.value);\r\n            return null;\r\n        }\r\n\r\n        let classType = this.tt;\r\n        this.nextToken();\r\n\r\n        if (this.expect(TokenType.identifier, false)) {\r\n\r\n            let identifier = <string>this.cct.value;\r\n            let position = this.getCurrentPosition();\r\n            this.nextToken();\r\n\r\n            let typeParameters: TypeParameterNode[] = [];\r\n            // For Generics: parse expression like <E, F extends Test implements Comparable<Test>>\r\n            if (this.tt == TokenType.lower) {\r\n                typeParameters = this.parseTypeParameterDefinition();\r\n            }\r\n\r\n            let extendsImplements = this.parseExtendsImplements(classType == TokenType.keywordInterface);\r\n\r\n            if (classType == TokenType.keywordEnum) {\r\n                return this.parseEnum(identifier, extendsImplements, position, modifiers.visibility, commentBefore);\r\n            }\r\n\r\n            let scopeFrom = this.getCurrentPosition();\r\n            if (this.expect(TokenType.leftCurlyBracket, true)) {\r\n\r\n                let methodsAndAttributes = this.parseClassBody(classType, identifier);\r\n                let scopeTo = this.getEndOfCurrentToken();\r\n                this.expect(TokenType.rightCurlyBracket, true);\r\n                switch (classType) {\r\n\r\n                    case TokenType.keywordClass: return {\r\n                        type: TokenType.keywordClass,\r\n                        position: position,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        identifier: identifier,\r\n                        attributes: methodsAndAttributes.attributes,\r\n                        methods: methodsAndAttributes.methods,\r\n                        isAbstract: modifiers.isAbstract,\r\n                        visibility: modifiers.visibility,\r\n                        extends: extendsImplements.extends,\r\n                        implements: extendsImplements.implements,\r\n                        typeParameters: typeParameters,\r\n                        commentBefore: commentBefore\r\n                    }\r\n\r\n                    case TokenType.keywordInterface: return {\r\n                        type: TokenType.keywordInterface,\r\n                        position: position,\r\n                        identifier: identifier,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        methods: methodsAndAttributes.methods,\r\n                        typeParameters: typeParameters,\r\n                        extends: extendsImplements.implements,\r\n                        commentBefore: commentBefore\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    parseTypeParameterDefinition(): TypeParameterNode[] {\r\n\r\n        let typeParameters: TypeParameterNode[] = [];\r\n\r\n        let identifierMap = {};\r\n\r\n        this.expect(TokenType.lower, true);\r\n        let first: boolean = true;\r\n\r\n        while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n\r\n            if (!first) this.expect(TokenType.comma, true);\r\n\r\n            let tp: TypeParameterNode = {\r\n                type: TokenType.typeParameter,\r\n                position: this.getCurrentPosition(),\r\n                identifier: <string>this.cct.value,\r\n                extends: null,\r\n                implements: null\r\n            };\r\n\r\n            if (identifierMap[tp.identifier] != null) {\r\n                this.pushError(\"Zwei Typparameter dürfe nicht denselben Bezeichner tragen.\");\r\n            }\r\n\r\n            identifierMap[tp.identifier] = true;\r\n\r\n            this.nextToken();\r\n\r\n            let extendsImplements = this.parseTypeParameterBounds();\r\n\r\n            tp.extends = extendsImplements.extends;\r\n\r\n            if (tp.extends != null && tp.extends.arrayDimension > 0) {\r\n                this.pushError(\"Der Datentyp des Typparameters \" + tp.identifier + \" darf kein Array sein.\");\r\n            }\r\n\r\n            tp.implements = extendsImplements.implements;\r\n\r\n            tp.implements.forEach((im) => {\r\n                if (im.arrayDimension > 0) {\r\n                    this.pushError(\"Der Datentyp des Typparameters \" + tp.identifier + \" darf kein Array sein.\");\r\n                }\r\n            });\r\n\r\n            first = false;\r\n\r\n            typeParameters.push(tp);\r\n\r\n        }\r\n\r\n        this.expect(TokenType.greater, true);\r\n\r\n        return typeParameters;\r\n    }\r\n\r\n    parseEnum(identifier: string, extendsImplements: {\r\n        extends: TypeNode;\r\n        implements: TypeNode[];\r\n    }, position: TextPosition, visibility: Visibility, commentBefore: Token): ASTNode {\r\n\r\n        if (extendsImplements.extends != null) {\r\n            this.pushError(\"Ein enum kann nicht mit extends erweitert werden.\");\r\n        }\r\n        if (extendsImplements.implements.length > 0) {\r\n            this.pushError(\"Ein enum kann kein Interface implementieren.\");\r\n        }\r\n\r\n        let scopeFrom = this.getCurrentPosition();\r\n        if (this.expect(TokenType.leftCurlyBracket, true)) {\r\n\r\n            let values: EnumValueNode[] = this.parseEnumValues();\r\n\r\n            let methodsAndAttributes = this.parseClassBody(TokenType.keywordEnum, identifier);\r\n\r\n            let scopeTo = this.getEndOfCurrentToken();\r\n\r\n            this.expect(TokenType.rightCurlyBracket, true);\r\n\r\n\r\n            return {\r\n                type: TokenType.keywordEnum,\r\n                position: position,\r\n                scopeFrom: scopeFrom,\r\n                scopeTo: scopeTo,\r\n                attributes: methodsAndAttributes.attributes,\r\n                methods: methodsAndAttributes.methods,\r\n                identifier: identifier,\r\n                values: values,\r\n                visibility: visibility,\r\n                commentBefore: commentBefore\r\n            }\r\n\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    parseEnumValues(): EnumValueNode[] {\r\n\r\n        let values: EnumValueNode[] = [];\r\n\r\n        let pos: number = 0;\r\n        let first: boolean = true;\r\n\r\n        while ((first && this.tt == TokenType.identifier) || this.tt == TokenType.comma) {\r\n            pos = this.pos;\r\n            if (!first) this.nextToken(); // skip comma\r\n            first = false;\r\n\r\n            if (this.expect(TokenType.identifier, false)) {\r\n\r\n                let identifier = <string>this.cct.value;\r\n                let position = this.getCurrentPosition();\r\n                this.nextToken();\r\n                let constructorParameters: TermNode[] = null;\r\n\r\n                let commaPositions: TextPosition[] = [];\r\n                let rightBracketPosition: TextPosition = null;\r\n                //@ts-ignore\r\n                if (this.tt == TokenType.leftBracket) {\r\n                    let mcp = this.parseMethodCallParameters();\r\n                    constructorParameters = mcp.nodes;\r\n                    commaPositions = mcp.commaPositions;\r\n                    rightBracketPosition = mcp.rightBracketPosition;\r\n                }\r\n\r\n                values.push({\r\n                    type: TokenType.pushEnumValue,\r\n                    constructorParameters: constructorParameters,\r\n                    identifier: identifier,\r\n                    position: position,\r\n                    commaPositions: commaPositions,\r\n                    rightBracketPosition: rightBracketPosition\r\n                });\r\n\r\n            };\r\n\r\n            if (this.pos == pos) {\r\n                this.nextToken(); // in case of parsing-emergency\r\n            }\r\n        }\r\n\r\n        if (this.tt == TokenType.semicolon) {\r\n            this.nextToken();\r\n        }\r\n\r\n        return values;\r\n\r\n    }\r\n\r\n    parseClassBody(classType: TokenType, className: string): { methods: MethodDeclarationNode[], attributes: AttributeDeclarationNode[] } {\r\n\r\n        // Assumption: { is already consumed\r\n\r\n        let methods: MethodDeclarationNode[] = [];\r\n        let attributes: AttributeDeclarationNode[] = [];\r\n\r\n        while (true) {\r\n\r\n            if (this.tt == TokenType.rightCurlyBracket || this.tt == TokenType.endofSourcecode) {\r\n                break;\r\n            }\r\n\r\n            let commentBefore: Token = this.cct.commentBefore;\r\n\r\n            let annotation = null;\r\n            if(this.tt == TokenType.at){\r\n                annotation = this.cct.value;\r\n                this.nextToken();\r\n            }\r\n            let modifiers = this.collectModifiers();\r\n\r\n            let isConstructor = false;\r\n            let position = this.getCurrentPosition();\r\n\r\n            if (this.tt == TokenType.identifier && <string>this.cct.value == className && this.ct[1].tt == TokenType.leftBracket) {\r\n                isConstructor = true;\r\n            }\r\n\r\n            let type = this.parseType();\r\n\r\n            if(isConstructor) {\r\n                type = {\r\n                    identifier: \"void\",\r\n                    arrayDimension: 0,\r\n                    position: type.position,\r\n                    type: TokenType.type\r\n                }\r\n            }\r\n\r\n            if (isConstructor || this.expect(TokenType.identifier, false)) {\r\n\r\n                let identifier = className;\r\n\r\n                if (!isConstructor) {\r\n                    position = this.getCurrentPosition();\r\n\r\n                    identifier = <string>this.cct.value;\r\n                    this.nextToken();\r\n                }\r\n\r\n                if (this.tt == TokenType.leftBracket) {\r\n\r\n                    if (isConstructor && classType == TokenType.keywordEnum && modifiers.visibility != Visibility.private) {\r\n                        this.pushError(\"Konstruktoren in enums müssen private sein.\", \"error\", position);\r\n                    }\r\n\r\n                    let parameters: ParameterNode[] = this.parseMethodDeclarationParameters();\r\n\r\n                    let statements: ASTNode[];\r\n                    let scopeFrom: TextPosition = this.getCurrentPosition();\r\n                    let scopeTo: TextPosition = scopeFrom;\r\n\r\n                    if (modifiers.isAbstract) {\r\n                        this.expect(TokenType.semicolon, true);\r\n                        if (isConstructor) {\r\n                            this.pushError(\"Ein Konstruktor kann nicht abstrakt sein.\", \"error\", position);\r\n                        }\r\n                        statements = [];\r\n                    } else {\r\n                        scopeFrom = this.getCurrentPosition();\r\n                        statements = this.parseStatement();\r\n                        scopeTo = this.getEndOfCurrentToken();\r\n                        if (statements != null && statements.length > 0 && statements[0].type == TokenType.scopeNode) {\r\n                            let scopeNode = <ScopeNode>statements[0];\r\n                            scopeFrom = scopeNode.position;\r\n                            scopeTo = scopeNode.positionTo;\r\n                        }\r\n\r\n                    }\r\n\r\n                    methods.push({\r\n                        type: TokenType.methodDeclaration,\r\n                        identifier: identifier,\r\n                        position: position,\r\n                        scopeFrom: scopeFrom,\r\n                        scopeTo: scopeTo,\r\n                        parameters: parameters,\r\n                        statements: statements,\r\n                        visibility: modifiers.visibility,\r\n                        isAbstract: modifiers.isAbstract || classType == TokenType.keywordInterface,\r\n                        isStatic: modifiers.isStatic,\r\n                        isConstructor: isConstructor,\r\n                        returnType: type,\r\n                        annotation: annotation,\r\n                        isTransient: modifiers.isTransient,\r\n                        commentBefore: commentBefore\r\n                    });\r\n\r\n                } else {\r\n\r\n                    if (identifier == className) {\r\n                        this.pushError(\"Das Attribut \" + className + \" darf nicht denselben Bezeichner haben wie die Klasse.\", \"error\", position);\r\n                    }\r\n\r\n                    let initialization: TermNode = null;\r\n\r\n                    if (this.tt == TokenType.assignment) {\r\n                        this.nextToken();\r\n                        //@ts-ignore\r\n                        if (type.arrayDimension > 0 && this.tt == TokenType.leftCurlyBracket) {\r\n                            initialization = this.parseArrayLiteral(type);\r\n                        } else {\r\n                            initialization = this.parseTerm();\r\n                        }\r\n                    }\r\n\r\n                    this.expect(TokenType.semicolon);\r\n\r\n                    attributes.push({\r\n                        type: TokenType.attributeDeclaration,\r\n                        identifier: identifier,\r\n                        position: position,\r\n                        attributeType: type,\r\n                        isStatic: modifiers.isStatic,\r\n                        isFinal: modifiers.isFinal,\r\n                        visibility: modifiers.visibility,\r\n                        initialization: initialization,\r\n                        annotation: annotation,\r\n                        isTransient: modifiers.isTransient,\r\n                        commentBefore: commentBefore\r\n                    });\r\n\r\n                    if (classType == TokenType.keywordInterface) {\r\n                        this.pushError(\"Interfaces dürfen keine Attribute enthalten.\", \"error\", position);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n\r\n        }\r\n\r\n        return { methods: methods, attributes: attributes }\r\n\r\n    }\r\n\r\n    parseMethodDeclarationParameters(): ParameterNode[] {\r\n\r\n        // Assumption: next token is (\r\n        let parameters: ParameterNode[] = [];\r\n        this.nextToken();\r\n\r\n        if (this.tt == TokenType.rightBracket) {\r\n            this.nextToken();\r\n            return [];\r\n        }\r\n\r\n        let ellipsis = false;\r\n\r\n        while (true) {\r\n            if (ellipsis) {\r\n                this.pushError(\"Nur der letzte Parameter darf als Ellipsis (...) definiert werden.\");\r\n            }\r\n            let isFinal = this.tt == TokenType.keywordFinal;\r\n\r\n            if (isFinal) this.nextToken();\r\n\r\n            let type: TypeNode = this.parseType();\r\n\r\n            ellipsis = this.tt == TokenType.ellipsis;\r\n            if (ellipsis) {\r\n                this.nextToken();\r\n                type.arrayDimension++;\r\n            }\r\n\r\n            if (this.expect(TokenType.identifier, false)) {\r\n                let identifier = <string>this.cct.value;\r\n                parameters.push({\r\n                    type: TokenType.parameterDeclaration,\r\n                    position: this.getCurrentPosition(),\r\n                    identifier: identifier,\r\n                    parameterType: type,\r\n                    isFinal: isFinal,\r\n                    isEllipsis: ellipsis\r\n                });\r\n                this.nextToken();\r\n            }\r\n            if (this.tt != TokenType.comma) {\r\n                break;\r\n            }\r\n            this.nextToken(); // consume comma\r\n        }\r\n\r\n        this.expect(TokenType.rightBracket, true);\r\n\r\n        return parameters;\r\n\r\n    }\r\n\r\n    parseExtendsImplements(isInterface: boolean): { extends: TypeNode, implements: TypeNode[] } {\r\n\r\n        let sextends: TypeNode = null;\r\n        let simplements: TypeNode[] = [];\r\n\r\n        while(this.comesToken([TokenType.keywordExtends, TokenType.keywordImplements])){\r\n            if (this.comesToken(TokenType.keywordExtends) && !isInterface) {\r\n                if(sextends != null){\r\n                    this.pushError(\"Eine Klasse kann nicht Unterklasse von zwei anderen Klassen sein, es darf also hier nur ein Mal 'extends...' stehen.\", \"error\", sextends.position);\r\n                }\r\n                this.nextToken(); // skip extends\r\n                sextends = this.parseType();\r\n                if (sextends != null && sextends.arrayDimension > 0) {\r\n                    this.pushError(\"Der Datentyp der Basisklasse darf kein Array sein.\", \"error\", sextends.position);\r\n                }\r\n            }\r\n    \r\n            if ((!isInterface && this.comesToken(TokenType.keywordImplements)) || (isInterface && this.comesToken(TokenType.keywordExtends))) {\r\n                if(simplements.length > 0){\r\n                    this.pushError(\"Es darf hier nur ein Mal 'implements' stehen, hinter 'implements' ist aber eine kommaseparierte Liste von Interfaces erlaubt.\", \"warning\");\r\n                }\r\n                this.nextToken(); // Skip implements/extends\r\n                let first = true;\r\n                while ((first && this.tt == TokenType.identifier) || (!first && this.tt == TokenType.comma)) {\r\n                    if (!first) this.nextToken(); // skip comma\r\n                    first = false;\r\n                    simplements.push(this.parseType());\r\n                }\r\n            }\r\n        }\r\n\r\n        simplements.forEach((im) => {\r\n            if (im.arrayDimension > 0) {\r\n                this.pushError(im.identifier + \"[] ist kein Interface, sondern ein Array. Array-Datentypen sind hier nicht erlaubt.\");\r\n            }\r\n        });\r\n\r\n        return {\r\n            extends: sextends, implements: simplements\r\n        }\r\n    }\r\n\r\n    parseTypeParameterBounds(): { extends: TypeNode, implements: TypeNode[] } {\r\n\r\n        let sextends: TypeNode = null;\r\n        let simplements: TypeNode[] = [];\r\n\r\n        if (this.comesToken(TokenType.keywordExtends)) {\r\n            this.nextToken(); // skip extends\r\n            sextends = this.parseType();\r\n        }\r\n\r\n        while (this.comesToken(TokenType.ampersand)) {\r\n            this.nextToken(); // Skip ampersand\r\n            simplements.push(this.parseType());\r\n        }\r\n\r\n        return {\r\n            extends: sextends, implements: simplements\r\n        }\r\n\r\n    }\r\n\r\n    collectModifiers(): { isAbstract: boolean, isStatic: boolean, visibility: Visibility, isFinal: boolean, isTransient: boolean } {\r\n\r\n        let visibility = Visibility.public;\r\n        let isAbstract = false;\r\n        let isStatic = false;\r\n        let isFinal = false;\r\n        let isTransient = false;\r\n\r\n        let done = false;\r\n        let asError: boolean = false;\r\n\r\n        while (!done) {\r\n\r\n            switch (this.tt) {\r\n                case TokenType.keywordPublic:\r\n                    visibility = Visibility.public;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordPrivate:\r\n                    visibility = Visibility.private;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordProtected:\r\n                    visibility = Visibility.protected;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordStatic:\r\n                    isStatic = true;\r\n                    if(isAbstract && !asError){\r\n                        this.pushError(\"Die Modifier 'abstract' und 'static' können nicht kombiniert werden.\");\r\n                        asError = true;\r\n                    }\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordAbstract:\r\n                    isAbstract = true;\r\n                    if(isStatic && !asError){\r\n                        this.pushError(\"Die Modifier 'abstract' und 'static' können nicht kombiniert werden.\");\r\n                        asError = true;\r\n                    }\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordFinal:\r\n                    isFinal = true;\r\n                    this.nextToken();\r\n                    break;\r\n                case TokenType.keywordTransient:\r\n                    isTransient = true;\r\n                    this.nextToken();\r\n                    break;\r\n                default: done = true;\r\n            }\r\n\r\n        }\r\n\r\n\r\n        return { isAbstract: isAbstract, isStatic: isStatic, visibility: visibility, isFinal: isFinal, isTransient: isTransient };\r\n\r\n    }\r\n\r\n\r\n}","import { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ModuleStore } from \"../parser/Module.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { Interface, Klass } from \"./Class.js\";\r\nimport { Enum, EnumRuntimeObject } from \"./Enum.js\";\r\nimport { PrimitiveType, Type, Value } from \"./Types.js\";\r\n\r\ntype SerializedObject = {\r\n    \"!k\"?: string, // Class identifier or object index\r\n    \"!i\": number  // index\r\n}\r\n\r\nexport class JsonTool {\r\n    // to deserialize:\r\n    indexToObjectMap: { [index: number]: Value };\r\n    valuesToResolve: { v: Value, i: number }[];\r\n\r\n    // to serialize:\r\n    objectToIndexMap: Map<RuntimeObject, number>;\r\n    nextIndex: number;\r\n\r\n    primitiveTypes: String[] = [\"String\", \"Integer\", \"Double\", \"Boolean\", \"Float\", \"Character\"];\r\n\r\n    toJson(value: Value): string {\r\n        this.objectToIndexMap = new Map();\r\n        this.nextIndex = 0;\r\n        let json = JSON.stringify(this.toJsonObj(value));\r\n        this.objectToIndexMap = null; // free memory\r\n        return json;\r\n    }\r\n\r\n    toJsonObj(value: Value): any {\r\n        let type = value.type;\r\n        let v = value.value;\r\n        if (v == null) return null;\r\n\r\n        if ((type instanceof Klass || type instanceof Interface) && this.primitiveTypes.indexOf(type.identifier) < 0) {\r\n\r\n            if (type instanceof Enum) {\r\n                let enumObj = <EnumRuntimeObject>v;\r\n                return enumObj.enumValue.ordinal;\r\n            }\r\n\r\n            let rto = <RuntimeObject>v;\r\n            return this.objectToJsonObj(rto);\r\n        } else if (type instanceof ArrayType) {\r\n            let arrayValues: Value[] = v;\r\n            return arrayValues.map(value => this.toJsonObj(value));\r\n        } else {\r\n            // primitive Type\r\n            return value.value;\r\n        }\r\n    }\r\n\r\n    objectToJsonObj(rto: RuntimeObject): SerializedObject {\r\n        // We solve circular object references by serializing an index when the same object occurs more than once.\r\n        let index = this.objectToIndexMap.get(rto);\r\n        if (index != null) {\r\n            return { \"!i\": index };\r\n        }\r\n\r\n        index = this.nextIndex++;\r\n        this.objectToIndexMap.set(rto, index);\r\n        let klass: Klass = <Klass>rto.class;\r\n\r\n        let serializedObject: SerializedObject = { \"!k\": klass.identifier, \"!i\": index };\r\n        // Don't serialize system classes unless they are explicitely serializable\r\n        if (klass.module.isSystemModule) {\r\n            return null;\r\n        }\r\n\r\n        while (klass != null) {\r\n            let first: boolean = true;\r\n            let serializedAttributes: any;\r\n            for (let attribute of klass.attributes) {\r\n                if (!attribute.isStatic && !attribute.isTransient) {\r\n                    if (first) {\r\n                        first = false;\r\n                        serializedAttributes = {};\r\n                        serializedObject[klass.identifier] = serializedAttributes;\r\n                    }\r\n                    serializedAttributes[attribute.identifier] = this.toJsonObj(rto.attributes[attribute.index]);\r\n                }\r\n            }\r\n\r\n            klass = klass.baseClass;\r\n        }\r\n\r\n        return serializedObject;\r\n    }\r\n\r\n    fromJson(jsonString: string, type: Type, moduleStore: ModuleStore, interpreter: Interpreter): any {\r\n        this.indexToObjectMap = {};\r\n        this.valuesToResolve = [];\r\n\r\n        let obj: any = JSON.parse(jsonString);\r\n        let ret = this.fromJsonObj(obj, type, moduleStore, interpreter);\r\n\r\n        for (let vtr of this.valuesToResolve) {\r\n            let value = this.indexToObjectMap[vtr.i];\r\n            if (value != null) {\r\n                vtr.v.type = value.type;\r\n                vtr.v.value = value.value;\r\n            }\r\n        }\r\n\r\n        this.indexToObjectMap = null; // free memory\r\n        this.valuesToResolve = null;\r\n        return ret.value;\r\n    }\r\n\r\n    fromJsonObj(obj: any, type: Type, moduleStore: ModuleStore, interpreter: Interpreter): Value {\r\n        if (obj == null) return { type: type, value: null };\r\n\r\n        if ((type instanceof Klass || type instanceof Interface) && this.primitiveTypes.indexOf(type.identifier) < 0) {\r\n\r\n            if (type instanceof Enum) {\r\n                return {\r\n                    type: type,\r\n                    value: type.indexToInfoMap[obj].object\r\n                }\r\n            }\r\n\r\n            let serializedObject = <SerializedObject>obj;\r\n            return this.objectFromJsonObj(serializedObject, type, moduleStore, interpreter);\r\n\r\n        } else if (type instanceof ArrayType) {\r\n            let jsonArray: any[] = obj;\r\n            return {\r\n                type: type,\r\n                value: jsonArray.map(v => this.fromJsonObj(v, type.arrayOfType, moduleStore, interpreter))\r\n            }\r\n        } else {\r\n            // primitive Type\r\n            return { type: type, value: obj }\r\n        }\r\n\r\n    }\r\n\r\n    objectFromJsonObj(serializedObject: SerializedObject, type: Klass | Interface, moduleStore: ModuleStore,\r\n        interpreter: Interpreter): Value {\r\n\r\n        let identifier: string = serializedObject[\"!k\"];\r\n        let index = serializedObject[\"!i\"];\r\n        if (identifier != null) {\r\n\r\n            let klass1: Klass = <Klass>moduleStore.getType(identifier).type;\r\n            let klass = klass1;\r\n\r\n            let rto: RuntimeObject = interpreter.instantiateObjectImmediately(klass);\r\n\r\n            while (klass != null) {\r\n                let attributes = rto.attributes;\r\n                let serializedAttributes = serializedObject[klass.identifier];\r\n                if (attributes != null && serializedObject != null) {\r\n                    for (let attribute of klass.attributes) {\r\n                        if (!attribute.isStatic && !attribute.isTransient) {\r\n                            attributes[attribute.index] = this.fromJsonObj(serializedAttributes[attribute.identifier], attribute.type, moduleStore, interpreter);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                klass = klass.baseClass;\r\n            }\r\n\r\n            let value: Value = { type: klass1, value: rto };\r\n            this.indexToObjectMap[index] = value;\r\n            return value;\r\n\r\n        } else {\r\n            let index = serializedObject[\"!i\"];\r\n            let value = this.indexToObjectMap[index];\r\n            if (value == null) {\r\n                value = { type: type, value: null };\r\n                this.valuesToResolve.push({ v: value, i: index });\r\n                return value;\r\n            } else {\r\n                return { type: value.type, value: value.value }; // return copy\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n","import { TokenType, TextPosition } from \"../lexer/Token.js\";\r\nimport { ArrayType } from \"../types/Array.js\";\r\nimport { Klass, Interface, TypeVariable } from \"../types/Class.js\";\r\nimport { Attribute, Method, Parameterlist, Type, Variable, PrimitiveType } from \"../types/Types.js\";\r\nimport { ClassDeclarationNode, InterfaceDeclarationNode, MethodDeclarationNode, TypeNode, EnumDeclarationNode, TypeParameterNode } from \"./AST.js\";\r\nimport { Module, ModuleStore } from \"./Module.js\";\r\nimport { nullType, intPrimitiveType, booleanPrimitiveType, floatPrimitiveType, doublePrimitiveType, stringPrimitiveType, charPrimitiveType, objectType } from \"../types/PrimitiveTypes.js\";\r\nimport { Enum } from \"../types/Enum.js\";\r\nimport { JsonTool } from \"../types/TypeTools.js\";\r\nimport { MainBase } from \"../../main/MainBase.js\";\r\n\r\ntype GenericTypeList = { typeNode: TypeNode, module: Module }[];\r\n\r\ntype TypeParameterInfo = {\r\n    tpn: TypeParameterNode;\r\n    tp: TypeVariable;\r\n    ci: Klass | Interface;\r\n    cdn: ClassDeclarationNode | InterfaceDeclarationNode;\r\n    index: number\r\n};\r\n\r\n// TODO: find cyclic references in extends ...\r\nexport class TypeResolver {\r\n\r\n    static WATCHDOG: number = 5;\r\n    moduleStore: ModuleStore;\r\n\r\n    classes: ClassDeclarationNode[];\r\n    interfaces: InterfaceDeclarationNode[];\r\n    enums: EnumDeclarationNode[];\r\n\r\n    moduleToTypeParameterListMap: Map<Module, TypeVariable[]> = new Map();\r\n\r\n    unresolvedTypes: Map<Module, TypeNode[]>;\r\n\r\n    genericTypes: GenericTypeList = [];\r\n    genericTypesInClassDefinitions: GenericTypeList = [];\r\n\r\n    typeParameterList: TypeParameterInfo[] = [];\r\n\r\n    constructor(private main: MainBase) {\r\n\r\n    }\r\n\r\n    start(moduleStore: ModuleStore) {\r\n\r\n        this.classes = [];\r\n        this.interfaces = [];\r\n        this.enums = [];\r\n        this.unresolvedTypes = new Map();\r\n\r\n        this.moduleStore = moduleStore;\r\n\r\n        this.resolveTypesInModules();\r\n\r\n        this.setupClassesAndInterfaces();\r\n\r\n        let unresolvedGenericTypesInClasses = this.resolveTypeVariables();\r\n\r\n        this.resolveUnresolvedTypes(false);\r\n\r\n        this.resolveGenericTypes(unresolvedGenericTypesInClasses);\r\n\r\n        this.resolveExtendsImplements();\r\n\r\n        let unresolvedGenericTypes = this.resolveGenericTypes(this.genericTypes);\r\n\r\n        this.resolveUnresolvedTypes(true);\r\n\r\n        this.resolveGenericTypes(unresolvedGenericTypes);\r\n\r\n        this.setupMethodsAndAttributes();\r\n\r\n        this.checkDoubleIdentifierDefinition();\r\n\r\n        this.checkGenericTypesAgainsTypeGuards();\r\n\r\n        this.setupAttributeIndices();\r\n\r\n    }\r\n    \r\n    setupAttributeIndices() {\r\n        for(let cl of this.classes){\r\n            cl.resolvedType.setupAttributeIndicesRecursive();\r\n            if(cl.resolvedType.staticClass != null){\r\n                cl.resolvedType.staticClass.setupAttributeIndicesRecursive();\r\n            }\r\n        }\r\n        for(let cl of this.enums){\r\n            cl.resolvedType.setupAttributeIndicesRecursive();\r\n            if(cl.resolvedType.staticClass != null){\r\n                cl.resolvedType.staticClass.setupAttributeIndicesRecursive();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    checkGenericTypesAgainsTypeGuards() {\r\n\r\n        for (let tn of this.genericTypes) {\r\n            if (tn.typeNode.genericParameterTypes == null) continue; // Error in resolveGenericType => nothing to do.\r\n\r\n            let ci: Klass | Interface = <any>tn.typeNode.resolvedType;\r\n\r\n            if (ci.isGenericVariantFrom == null) continue;\r\n\r\n            if (ci.typeVariables.length != ci.isGenericVariantFrom.typeVariables.length) {\r\n                tn.module.errors[2].push({\r\n                    position: tn.typeNode.position,\r\n                    text: \"Der Generische Typ \" + ci.isGenericVariantFrom.identifier + \" hat \" + ci.isGenericVariantFrom.typeVariables.length + \" Typparameter. Hier wurden aber \" + ci.typeVariables.length + \" angegeben.\",\r\n                    level: \"error\"\r\n                });\r\n                continue;\r\n            }\r\n\r\n            for (let i = 0; i < ci.typeVariables.length; i++) {\r\n\r\n                let error: string = null;\r\n\r\n                let actualType = ci.typeVariables[i];\r\n                let typeGuard = ci.isGenericVariantFrom.typeVariables[i];\r\n                let genericParameterType = tn.typeNode.genericParameterTypes[i];\r\n                actualType.scopeFrom = typeGuard.scopeFrom;\r\n                actualType.scopeTo = typeGuard.scopeTo;\r\n                actualType.identifier = typeGuard.identifier;\r\n\r\n                error = \"\";\r\n                if (!actualType.type.hasAncestorOrIs(typeGuard.type)) {\r\n                    error += \"Die Klasse \" + actualType.type.identifier + \" ist keine Unterklasse von \" + typeGuard.type.identifier + \" und pass damit nicht zum Typparamter \" + typeGuard.identifier + \" der Klasse \" + ci.isGenericVariantFrom.identifier + \". \";\r\n                }\r\n\r\n                let ifList: string[] = [];\r\n                for (let tgInterface of typeGuard.type.implements) {\r\n                    if (!actualType.type.implementsInterface(tgInterface)) {\r\n                        ifList.push(tgInterface.identifier);\r\n                    }\r\n                }\r\n\r\n                if (ifList.length > 0) {\r\n                    error += \"Die Klasse \" + actualType.identifier + \" implementiert nicht die Interfaces \" + ifList.join(\", \");\r\n                }\r\n\r\n                if (error != \"\") {\r\n                    tn.module.errors[2].push({\r\n                        position: genericParameterType.position,\r\n                        text: \"Der angegebene Wert des Typparameters passt nicht zur Definition: \" + error,\r\n                        level: \"error\"\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n            this.adjustMethodsAndAttributesToTypeParameters(ci, TypeResolver.WATCHDOG);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    adjustMethodsAndAttributesToTypeParameters(classOrInterface: Klass | Interface, watchdog: number) {\r\n\r\n        if(watchdog <= 0) return;\r\n\r\n        if (classOrInterface != null && classOrInterface.isGenericVariantFrom != null && classOrInterface.typeVariables.length != 0) {\r\n\r\n            let methodListAltered: boolean = false;\r\n            let newMethodList: Method[] = [];\r\n            for (let m of classOrInterface.methods) {\r\n                let newMethod = this.getAdjustedMethod(m, classOrInterface.typeVariables, watchdog - 1);\r\n                methodListAltered = methodListAltered || newMethod.altered;\r\n                newMethodList.push(newMethod.newMethod);\r\n            }\r\n\r\n            if (methodListAltered) classOrInterface.methods = newMethodList;\r\n\r\n            if (classOrInterface instanceof Klass) {\r\n\r\n                let newAttributes: Attribute[] = [];\r\n                let newAttributeMap: Map<string, Attribute> = new Map();\r\n                let attributesAltered: boolean = false;\r\n\r\n                for (let attribute of classOrInterface.attributes) {\r\n                    let newAttribute = this.getAdjustedAttribute(attribute, classOrInterface.typeVariables, watchdog - 1);\r\n                    attributesAltered = attributesAltered || newAttribute.altered;\r\n                    newAttributes.push(newAttribute.newAttribute);\r\n                    newAttributeMap.set(attribute.identifier, newAttribute.newAttribute);\r\n                }\r\n\r\n                if (attributesAltered) {\r\n                    classOrInterface.attributes = newAttributes;\r\n                    classOrInterface.attributeMap = newAttributeMap;\r\n                }\r\n\r\n                this.adjustMethodsAndAttributesToTypeParameters(classOrInterface.baseClass, watchdog - 1);\r\n\r\n                // for (let impl of classOrInterface.implements) {\r\n                //     this.adjustMethodsAndAttributesToTypeParameters(impl);\r\n                // }\r\n            } else {\r\n                for (let ext of classOrInterface.extends) {\r\n                    this.adjustMethodsAndAttributesToTypeParameters(ext, watchdog - 1);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    getAdjustedAttribute(attribute: Attribute, typeVariables: TypeVariable[], watchdog: number): { altered: boolean, newAttribute: Attribute } {\r\n\r\n        let nt = this.getAdjustedType(attribute.type, typeVariables, true, watchdog - 1);\r\n        if (nt.altered) {\r\n            let a: Attribute = Object.create(attribute);\r\n            a.type = nt.newType;\r\n            return { altered: true, newAttribute: a }\r\n        } else {\r\n            return { altered: false, newAttribute: attribute }\r\n        }\r\n\r\n    }\r\n\r\n    getAdjustedMethod(method: Method, typeVariables: TypeVariable[], watchdog: number): { altered: boolean, newMethod: Method } {\r\n\r\n        let nrt = this.getAdjustedType(method.returnType, typeVariables, true, watchdog - 1);\r\n\r\n        let parameterAltered: boolean = false;\r\n        let newParameters: Variable[] = [];\r\n        for (let p of method.parameterlist.parameters) {\r\n            let nt = this.getAdjustedType(p.type, typeVariables, false, watchdog - 1);\r\n            if (nt.altered) {\r\n                parameterAltered = true;\r\n                let pNew: Variable = Object.create(p);\r\n                pNew.type = nt.newType;\r\n                newParameters.push(pNew);\r\n            } else {\r\n                newParameters.push(p);\r\n            }\r\n        }\r\n\r\n        if (nrt.altered || parameterAltered) {\r\n            let newMethod: Method = Object.create(method);\r\n            if (nrt.altered) newMethod.returnType = nrt.newType;\r\n            if (parameterAltered) {\r\n                newMethod.parameterlist = new Parameterlist(newParameters);\r\n            }\r\n            return { altered: true, newMethod: newMethod }\r\n        } else {\r\n            return { altered: false, newMethod: method };\r\n        }\r\n\r\n    }\r\n\r\n    getAdjustedType(type: Type, typeVariables: TypeVariable[], adjustMethodsAndAttributesRecursive: boolean, watchdog: number): { altered: boolean, newType: Type } {\r\n\r\n        if (type == null) return { altered: false, newType: type };\r\n\r\n        if (type[\"isTypeVariable\"] == true) {\r\n            for (let tv of typeVariables) {\r\n                if (tv.identifier == type.identifier) {\r\n                    return { altered: true, newType: tv.type };\r\n                }\r\n            }\r\n            return { altered: false, newType: type };\r\n        }\r\n\r\n        if ((type instanceof Klass || type instanceof Interface) && type.typeVariables.length > 0) {\r\n            let newTypeVariables: TypeVariable[] = [];\r\n            let altered: boolean = false;\r\n            for (let tv of type.typeVariables) {\r\n                let nt = this.getAdjustedType(tv.type, typeVariables, false, watchdog - 1);\r\n                if (nt.altered) {\r\n                    newTypeVariables.push({\r\n                        identifier: tv.identifier,\r\n                        scopeFrom: tv.scopeFrom,\r\n                        scopeTo: tv.scopeTo,\r\n                        type: <Klass>nt.newType\r\n                    })\r\n                    altered = true;\r\n                } else {\r\n                    newTypeVariables.push(tv);\r\n                }\r\n            }\r\n            if (altered) {\r\n                let newClassInterface = type.clone();\r\n                newClassInterface.typeVariables = newTypeVariables;\r\n                if (adjustMethodsAndAttributesRecursive) this.adjustMethodsAndAttributesToTypeParameters(newClassInterface, watchdog - 1);\r\n                return { altered: true, newType: newClassInterface }\r\n            } else {\r\n                return { altered: false, newType: type }\r\n            }\r\n        }\r\n\r\n        if(type instanceof ArrayType){\r\n            let nt = this.getAdjustedType(type.arrayOfType, typeVariables, adjustMethodsAndAttributesRecursive, watchdog - 1);\r\n            return {\r\n                altered: nt.altered,\r\n                newType: nt.altered ? new ArrayType(nt.newType) : type\r\n            }\r\n        }\r\n\r\n        return { altered: false, newType: type };\r\n    }\r\n\r\n    resolveGenericTypes(genericTypes: GenericTypeList): GenericTypeList {\r\n        let done: boolean = false;\r\n        let todoList: GenericTypeList = genericTypes.slice(0);\r\n        while (!done) {\r\n            done = true;\r\n            for (let i = 0; i < todoList.length; i++) {\r\n                let tn = todoList[i];\r\n\r\n                if (this.resolveGenericType(tn)) {\r\n                    done = false;\r\n                }\r\n                if (tn.typeNode.genericParameterTypes == null || tn.typeNode.genericParameterTypesResolved != null) {\r\n                    todoList.splice(todoList.indexOf(tn), 1);\r\n                    i--;\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        return todoList;\r\n    }\r\n\r\n    // returns true if something new could be resolved\r\n    resolveGenericType(tn: { typeNode: TypeNode, module: Module }): boolean {\r\n\r\n        if (tn.typeNode.genericParameterTypesResolved != null) return false;\r\n        if (tn.typeNode.genericParameterTypes == null) return true;\r\n\r\n        /**\r\n         * e.g. Map<Integer, String> test = new Map<>();\r\n         * Subsequent Code processes the type Map<Integer, String>\r\n         */\r\n\r\n        let ci: Klass | Interface = <any>tn.typeNode.resolvedType; // in example: Map\r\n        if (ci == null || !(ci instanceof Interface || ci instanceof Klass)) { // There had been an error... (in example: Map has not been resolved)\r\n            tn.typeNode.genericParameterTypes = null;\r\n            return false; // => exit gracefully\r\n        }\r\n\r\n        if (!ci.typeVariablesReady) return false;\r\n\r\n        let parameterTypes: (Klass | Interface)[] = [];\r\n        for (let i = 0; i < tn.typeNode.genericParameterTypes.length; i++) {\r\n            let genericParameterType = tn.typeNode.genericParameterTypes[i];\r\n            let resolvedType = genericParameterType.resolvedType;\r\n\r\n            if (resolvedType == null) {\r\n                return false;\r\n            }\r\n\r\n            if (genericParameterType.genericParameterTypes != null && genericParameterType.genericParameterTypesResolved == null) {\r\n                return false; // first resolve this type!\r\n            }\r\n\r\n            if (!(resolvedType instanceof Interface || resolvedType instanceof Klass)) {\r\n                tn.module.errors[2].push({\r\n                    position: genericParameterType.position,\r\n                    text: \"Hier wird ein Interface- oder Klassentyp erwartet. Der Typ \" + genericParameterType.identifier + \" ist aber keiner.\",\r\n                    level: \"error\"\r\n                });\r\n                tn.typeNode.genericParameterTypes = null;\r\n                return true; // => exit gracefully\r\n            }\r\n\r\n            parameterTypes.push(<any>genericParameterType.resolvedType);\r\n\r\n        }\r\n\r\n        let typeVariablesOldToNewMap: Map<Klass, Klass> = new Map();\r\n\r\n        if (ci.typeVariables.length != parameterTypes.length) {\r\n            tn.module.errors[2].push({\r\n                position: tn.typeNode.position,\r\n                text: (ci instanceof Klass ? \"Die Klasse \" : \"Das Interface \") + ci.identifier + \" hat \" + ci.typeVariables.length + \" Typparameter, hier sind aber \" + parameterTypes.length + \" angegeben.\",\r\n                level: \"error\"\r\n            });\r\n            tn.typeNode.genericParameterTypes = null;\r\n            return true; // => exit gracefully\r\n        }\r\n\r\n        let i = 0;\r\n        for (let type of parameterTypes) {\r\n\r\n            let oldTypeVariable = ci.typeVariables[i];\r\n\r\n            if (type instanceof Interface) {\r\n                let type1 = objectType.clone();\r\n                type1.implements.push(type);\r\n                type = type1;\r\n            }\r\n\r\n            let newTypeVariable = {\r\n                identifier: oldTypeVariable.identifier,\r\n                scopeFrom: oldTypeVariable.scopeFrom,\r\n                scopeTo: oldTypeVariable.scopeTo,\r\n                type: type\r\n            };\r\n\r\n            typeVariablesOldToNewMap.set(ci.typeVariables[i].type, newTypeVariable.type)\r\n            i++;\r\n        }\r\n\r\n        let newCi =\r\n            this.propagateTypeParameterToBaseClassesAndImplementedInterfaces(ci, typeVariablesOldToNewMap);\r\n\r\n        tn.typeNode.resolvedType = newCi;\r\n        tn.typeNode.genericParameterTypesResolved = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    propagateTypeParameterToBaseClassesAndImplementedInterfaces(classOrInterface: Klass | Interface,\r\n        typeVariablesOldToNewMap: Map<Klass, Klass>): Klass | Interface {\r\n\r\n        if (classOrInterface instanceof Klass) {\r\n            let newClass: Klass = classOrInterface.clone();\r\n\r\n            newClass.typeVariables = [];\r\n            for (let tv of classOrInterface.typeVariables) {\r\n                let newType = typeVariablesOldToNewMap.get(tv.type);\r\n                let tv1 = tv;\r\n                if (newType != null) {\r\n                    tv1 = {\r\n                        identifier: tv.identifier,\r\n                        scopeFrom: tv.scopeFrom,\r\n                        scopeTo: tv.scopeTo,\r\n                        type: newType\r\n                    }\r\n                }\r\n                newClass.typeVariables.push(tv1);\r\n            }\r\n\r\n            let baseKlass = classOrInterface.baseClass;\r\n            if (baseKlass != null && baseKlass.isGenericVariantFrom != null) {\r\n\r\n                newClass.setBaseClass(<Klass>this.propagateTypeParameterToBaseClassesAndImplementedInterfaces(baseKlass, typeVariablesOldToNewMap));\r\n\r\n            }\r\n\r\n            newClass.implements = [];\r\n            for (let impl of classOrInterface.implements) {\r\n                if (impl.isGenericVariantFrom == null) {\r\n                    newClass.implements.push(impl);\r\n                } else {\r\n                    newClass.implements.push(<Interface>this.propagateTypeParameterToBaseClassesAndImplementedInterfaces(impl, typeVariablesOldToNewMap));\r\n                }\r\n            }\r\n\r\n            return newClass;\r\n\r\n        } else {\r\n            let newInterface: Interface = classOrInterface.clone();\r\n\r\n            newInterface.typeVariables = [];\r\n            for (let tv of classOrInterface.typeVariables) {\r\n                let newType = typeVariablesOldToNewMap.get(tv.type);\r\n                let tv1 = tv;\r\n                if (newType != null) {\r\n                    tv1 = {\r\n                        identifier: tv.identifier,\r\n                        scopeFrom: tv.scopeFrom,\r\n                        scopeTo: tv.scopeTo,\r\n                        type: newType\r\n                    }\r\n                }\r\n                newInterface.typeVariables.push(tv1);\r\n            }\r\n\r\n            newInterface.extends = [];\r\n            for (let impl of classOrInterface.extends) {\r\n                if (impl.isGenericVariantFrom == null) {\r\n                    newInterface.extends.push(impl);\r\n                } else {\r\n                    newInterface.extends.push(<Interface>this.propagateTypeParameterToBaseClassesAndImplementedInterfaces(impl, typeVariablesOldToNewMap));\r\n                }\r\n            }\r\n\r\n            return newInterface;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    checkDoubleIdentifierDefinition() {\r\n        let identifierModuleMap: Map<string, Module> = new Map();\r\n\r\n        for (let module of this.moduleStore.getModules(false)) {\r\n            for (let type of module.typeStore.typeList) {\r\n                let otherModule = identifierModuleMap.get(type.identifier);\r\n                if (otherModule != null) {\r\n                    module.errors[1].push({\r\n                        text: \"Der Typbezeichner \" + type.identifier + \" wurde mehrfach definiert, nämlich in den Modulen \" +\r\n                            module.file.name + \" und \" + otherModule.file.name + \".\",\r\n                        position: type.declaration.position,\r\n                        level: \"error\"\r\n                    });\r\n                    let otherType = otherModule.typeStore.getType(type.identifier);\r\n                    if (otherType != null) {\r\n                        otherModule.errors[1].push({\r\n                            text: \"Der Typbezeichner \" + type.identifier + \" wurde mehrfach definiert, nämlich in den Modulen \" +\r\n                                otherModule.file.name + \" und \" + module.file.name + \".\",\r\n                            position: otherType.declaration.position,\r\n                            level: \"error\"\r\n                        });\r\n                    }\r\n                } else {\r\n                    identifierModuleMap.set(type.identifier, module);\r\n                }\r\n            }\r\n        }\r\n\r\n        let baseModule = this.moduleStore.getBaseModule();\r\n\r\n        for (let tp of this.typeParameterList) {\r\n            let module = tp.ci.module;\r\n            let otherModule = identifierModuleMap.get(tp.tpn.identifier);\r\n            if (otherModule == null) {\r\n                let systemType = baseModule.typeStore.getType(tp.tpn.identifier);\r\n                if (systemType != null) otherModule = baseModule;\r\n            }\r\n            if (otherModule != null) {\r\n                module.errors[1].push({\r\n                    text: \"Der Typbezeichner \" + tp.tpn.identifier + \" wurde mehrfach definiert, nämlich in den Modulen \" +\r\n                        module.file.name + \" und \" + otherModule.file.name + \".\",\r\n                    position: tp.tpn.position,\r\n                    level: \"error\"\r\n                });\r\n                let otherType = otherModule.typeStore.getType(tp.tpn.identifier);\r\n                if (otherType != null && otherModule != baseModule) {\r\n                    otherModule.errors[1].push({\r\n                        text: \"Der Typbezeichner \" + tp.tpn.identifier + \" wurde mehrfach definiert, nämlich in den Modulen \" +\r\n                            otherModule.file.name + \" und \" + module.file.name + \".\",\r\n                        position: otherType.declaration.position,\r\n                        level: \"error\"\r\n                    });\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    resolveUnresolvedTypes(lastPass: boolean) {\r\n        for (let module of this.moduleStore.getModules(false)) {\r\n            module.dependsOnModules = new Map();\r\n        }\r\n\r\n        for (let module of this.moduleStore.getModules(false)) {\r\n            let ut = this.unresolvedTypes.get(module);\r\n            let utNew: TypeNode[] = [];\r\n            for (let type of ut) {\r\n                if (!this.resolveType(type, module, lastPass)) {\r\n                    utNew.push(type);\r\n                }\r\n            }\r\n            this.unresolvedTypes.set(module, utNew);\r\n        }\r\n    }\r\n\r\n    addFromJsonMethod(klass: Klass) {\r\n        let interpreter = this.main.getInterpreter();\r\n        klass.addMethod(new Method(\"fromJson\", new Parameterlist([\r\n            { identifier: \"jsonString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), klass,\r\n            (parameters) => {\r\n                let json: string = parameters[1].value;\r\n                return new JsonTool().fromJson(json, klass, this.moduleStore, interpreter);\r\n            }, false, true, `Konvertiert eine Json-Zeichenkette in ein ${klass.identifier}-Objekt (\"deserialisieren\"). Vor dem Deserialisieren eines Objekts werden die Attributinitialisierer angewandt und - falls vorhanden - ein parameterloser Konstruktor ausgeführt. Der Algorithmus kommt auch mit zyklischen Objektreferenzen zurecht.`, false));\r\n\r\n    }\r\n\r\n    addToJsonMethod(klass: Klass) {\r\n        klass.addMethod(new Method(\"toJson\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return new JsonTool().toJson(parameters[0]);\r\n            }, false, false, `Konvertiert ein Objekt (rekursiv mitsamt referenzierter Objekte) in eine Json-Zeichenkette. Nicht konvertiert werden Systemklassen (außer: ArrayList) sowie mit dem Schlüsselwort transient ausgezeichnete Attribute.`));\r\n\r\n    }\r\n\r\n\r\n    setupMethodsAndAttributes() {\r\n\r\n        let classesOrEnums: (ClassDeclarationNode | EnumDeclarationNode)[] = [];\r\n        classesOrEnums = classesOrEnums.concat(this.classes);\r\n        classesOrEnums = classesOrEnums.concat(this.enums);\r\n\r\n        for (let cn of classesOrEnums) {\r\n            for (let mn of cn.methods) {\r\n                let m: Method = this.setupMethod(mn, cn.resolvedType.module, cn.resolvedType);\r\n                if (m != null) {\r\n                    if(mn.commentBefore != null) m.documentation = \"\" + mn.commentBefore.value;\r\n                    cn.resolvedType.addMethod(m);\r\n                }\r\n            }\r\n\r\n            this.addFromJsonMethod(cn.resolvedType);\r\n            this.addToJsonMethod(cn.resolvedType);\r\n\r\n            for (let att of cn.attributes) {\r\n\r\n                this.resolveType(att.attributeType, cn.resolvedType.module, true);\r\n                let type = att.attributeType.resolvedType;\r\n                if (type == null) {\r\n                    continue;\r\n                }\r\n\r\n                let attribute: Attribute = new Attribute(att.identifier, type, null, att.isStatic, att.visibility, att.isFinal);\r\n                att.resolvedType = attribute;\r\n                if(att.commentBefore != null) attribute.documentation = \"\" + att.commentBefore.value;\r\n                attribute.annotation = att.annotation;\r\n                attribute.isTransient = att.isTransient;\r\n                if (cn.resolvedType.attributeMap.get(attribute.identifier) != null) {\r\n                    cn.resolvedType.module.errors[2].push({\r\n                        text: \"Es darf nicht mehrere Attribute mit demselben Bezeichner '\" + attribute.identifier + \"' in derselben Klassse geben.\",\r\n                        position: att.position, level: \"error\"\r\n                    });\r\n                }\r\n                cn.resolvedType.addAttribute(attribute);\r\n\r\n                this.pushUsagePosition(cn.resolvedType.module, att.position, attribute);\r\n                attribute.declaration = { module: cn.resolvedType.module, position: att.position };\r\n\r\n            }\r\n        }\r\n\r\n        for (let ic of this.interfaces) {\r\n            for (let mn of ic.methods) {\r\n                let m1: Method = this.setupMethod(mn, ic.resolvedType.module, ic.resolvedType);\r\n                if (m1 != null) {\r\n                    ic.resolvedType.addMethod(m1);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    setupMethod(mn: MethodDeclarationNode, m: Module, c: Klass | Interface): Method {\r\n\r\n        let typesOK = true;\r\n\r\n        typesOK = typesOK && this.resolveType(mn.returnType, m, true);\r\n\r\n        let parameters: Variable[] = [];\r\n        for (let par of mn.parameters) {\r\n            typesOK = typesOK && this.resolveType(par.parameterType, m, true);\r\n            if (typesOK) {\r\n                let parameter = {\r\n                    definition: par.position,\r\n                    identifier: par.identifier,\r\n                    usagePositions: new Map(),\r\n                    type: par.parameterType.resolvedType,\r\n                    declaration: { module: m, position: par.position },\r\n                    isFinal: par.isFinal,\r\n                    isEllipsis: par.isEllipsis\r\n                };\r\n                parameters.push(parameter);\r\n                this.pushUsagePosition(m, par.position, parameter);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        let pl: Parameterlist = new Parameterlist(parameters);\r\n\r\n        if (typesOK) {\r\n            let method = new Method(mn.identifier, pl, mn.returnType.resolvedType, null, mn.isAbstract, mn.isStatic);\r\n            method.isConstructor = mn.identifier == c.identifier;\r\n            method.visibility = mn.visibility;\r\n            method.isConstructor = mn.isConstructor;\r\n            mn.resolvedType = method;\r\n            method.annotation = mn.annotation;\r\n\r\n            this.pushUsagePosition(m, mn.position, method);\r\n            method.declaration = {\r\n                module: m,\r\n                position: mn.position\r\n            }\r\n\r\n            return method;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    pushUsagePosition(m: Module, position: TextPosition, element: Type | Method | Attribute | Variable) {\r\n\r\n        m.addIdentifierPosition(position, element);\r\n\r\n        if (element instanceof PrimitiveType) {\r\n            return;\r\n        }\r\n\r\n        let positionList: TextPosition[] = element.usagePositions.get(m);\r\n        if (positionList == null) {\r\n            positionList = [];\r\n            element.usagePositions.set(m, positionList);\r\n        }\r\n\r\n        positionList.push(position);\r\n\r\n    }\r\n\r\n    resolveType(tn: TypeNode, m: Module, lastPass: boolean): boolean {\r\n        if (tn.resolvedType == null) {\r\n            let typeModule = this.moduleStore.getType(tn.identifier);\r\n            if (typeModule != null) {\r\n                let type = typeModule.type;\r\n                m.dependsOnModules.set(typeModule.module, true);\r\n                this.pushUsagePosition(m, tn.position, type);\r\n                type = getArrayType(type, tn.arrayDimension);\r\n                this.registerGenericType(tn, m, false);\r\n                tn.resolvedType = type;\r\n                return true;\r\n            }\r\n\r\n            let typeParameterList = this.moduleToTypeParameterListMap.get(m);\r\n            if (typeParameterList != null) {\r\n                for (let tg of typeParameterList) {\r\n                    if (tg.identifier == tn.identifier) {\r\n                        let position = tn.position;\r\n                        if (position.line > tg.scopeFrom.line || position.line == tg.scopeFrom.line && position.column >= tg.scopeFrom.column) {\r\n                            if (position.line < tg.scopeTo.line || position.line == tg.scopeTo.line && position.column <= tg.scopeTo.column) {\r\n                                this.pushUsagePosition(m, tn.position, tg.type);\r\n                                tn.resolvedType = tg.type;\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (lastPass) {\r\n\r\n                let typKlasse = (tn.identifier.length > 0 && tn.identifier[0].toUpperCase() == tn.identifier[0]) ? \"Die Klasse\" : \"Der Typ\";\r\n\r\n                m.errors[2].push({\r\n                    position: tn.position,\r\n                    text: typKlasse + \" \" + tn.identifier + \" konnte nicht gefunden werden.\" +\r\n                        (tn.identifier == \"string\" ? \" Meinten Sie String (großgeschrieben)?\" : \"\"),\r\n                    level: \"error\",\r\n                    quickFix: (tn.identifier == \"string\") ? {\r\n                        title: \"String groß schreiben\",\r\n                        editsProvider: (uri) => {\r\n                            return [\r\n                                {\r\n                                    resource: uri,\r\n                                    edit: {\r\n                                        range: { startLineNumber: tn.position.line, startColumn: tn.position.column - 1, endLineNumber: tn.position.line, endColumn: tn.position.column + 6 },\r\n                                        text: \"String\"\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n\r\n                    } : null\r\n                });\r\n            }\r\n            tn.resolvedType = null;\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    resolveExtendsImplements() {\r\n        for (let cn of this.classes) {\r\n\r\n            let c = cn.resolvedType;\r\n            for (let iNode of cn.implements) {\r\n                this.resolveType(iNode, c.module, true);\r\n                let iType = iNode.resolvedType;\r\n                if (iType == null) {\r\n                    continue;\r\n                }\r\n                if (!(iType instanceof Interface)) {\r\n                    c.module.errors[2].push({\r\n                        position: iNode.position,\r\n                        text: \"Der Typ \" + iNode.identifier + \" ist kein interface, darf also nicht bei implements... stehen.\",\r\n                        level: \"error\"\r\n                    });\r\n                    continue;\r\n                }\r\n                c.implements.push(<Interface>iType);\r\n                iNode.resolvedType = iType;\r\n            }\r\n\r\n            if (cn.extends != null) {\r\n                this.resolveType(cn.extends, c.module, true);\r\n                let eType = cn.extends.resolvedType;\r\n                if (eType == null || !(eType instanceof Klass)) {\r\n                    c.module.errors[2].push({\r\n                        position: cn.extends.position,\r\n                        text: \"Der Typ \" + cn.extends.identifier + \" ist keine Klasse, darf also nicht hinter extends stehen.\",\r\n                        level: \"error\"\r\n                    });\r\n                    continue;\r\n                }\r\n\r\n                c.setBaseClass(<Klass>eType);\r\n                cn.extends.resolvedType = eType;\r\n            } else {\r\n                c.setBaseClass(<Klass>this.moduleStore.getType(\"Object\").type)\r\n            }\r\n\r\n        }\r\n        for (let interf of this.interfaces) {\r\n\r\n            let c = interf.resolvedType;\r\n            for (let iNode of interf.extends) {\r\n                this.resolveType(iNode, c.module, true);\r\n                let iType = iNode.resolvedType;\r\n                if (iType == null) {\r\n                    continue;\r\n                }\r\n                if (!(iType instanceof Interface)) {\r\n                    c.module.errors[2].push({\r\n                        position: iNode.position,\r\n                        text: \"Der Typ \" + iNode.identifier + \" ist kein interface, darf also nicht bei extends... stehen.\",\r\n                        level: \"error\"\r\n                    });\r\n                    continue;\r\n                }\r\n                c.extends.push(<Interface>iType);\r\n                iNode.resolvedType = iType;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    setupClassesAndInterfaces() {\r\n        for (let m of this.moduleStore.getModules(false)) {\r\n            if (m.classDefinitionsAST != null) {\r\n                for (let cdn of m.classDefinitionsAST) {\r\n                    switch (cdn.type) {\r\n                        case TokenType.keywordClass:\r\n                            this.classes.push(cdn);\r\n                            let c = new Klass(cdn.identifier, m);\r\n                            if(cdn.commentBefore != null) c.documentation = \"\" + cdn.commentBefore.value;\r\n                            cdn.resolvedType = c;\r\n                            c.visibility = cdn.visibility;\r\n                            c.isAbstract = cdn.isAbstract;\r\n                            m.typeStore.addType(c);\r\n                            this.pushUsagePosition(m, cdn.position, c);\r\n                            c.declaration = { module: m, position: cdn.position };\r\n                            this.registerTypeVariables(cdn, c);\r\n                            if (cdn.extends != null) this.registerGenericType(cdn.extends, m, true);\r\n                            if (cdn.implements != null) {\r\n                                for (let im of cdn.implements) this.registerGenericType(im, m, true);\r\n                            }\r\n                            break;\r\n                        case TokenType.keywordEnum:\r\n                            this.enums.push(cdn);\r\n                            let e = new Enum(cdn.identifier, m, cdn.values);\r\n                            if(cdn.commentBefore != null) e.documentation = \"\" + cdn.commentBefore.value;\r\n                            cdn.resolvedType = e;\r\n                            e.visibility = cdn.visibility;\r\n                            m.typeStore.addType(e);\r\n                            this.pushUsagePosition(m, cdn.position, e);\r\n                            e.declaration = { module: m, position: cdn.position };\r\n                            break;\r\n                        case TokenType.keywordInterface:\r\n                            this.interfaces.push(cdn);\r\n                            let i = new Interface(cdn.identifier, m);\r\n                            if(cdn.commentBefore != null) i.documentation = \"\" + cdn.commentBefore.value;\r\n                            cdn.resolvedType = i;\r\n                            m.typeStore.addType(i);\r\n                            this.pushUsagePosition(m, cdn.position, i);\r\n                            i.declaration = { module: m, position: cdn.position };\r\n                            this.registerTypeVariables(cdn, i);\r\n                            if (cdn.extends != null) {\r\n                                for (let im of cdn.extends) this.registerGenericType(im, m, true);\r\n                            }\r\n                            break;\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    resolveTypeVariables(): GenericTypeList {\r\n\r\n        let todoList = this.typeParameterList.slice(0);\r\n        let done = false;\r\n\r\n        let unresolvedGenericTypes: GenericTypeList = this.genericTypesInClassDefinitions.slice(0);\r\n\r\n        while (!done) {\r\n            this.resolveUnresolvedTypes(false);\r\n            unresolvedGenericTypes = this.resolveGenericTypes(unresolvedGenericTypes);\r\n\r\n            done = true;\r\n            for (let i = 0; i < todoList.length; i++) {\r\n                let tv = todoList[i];\r\n                let ready: boolean = true;\r\n                let ext: TypeNode[] = tv.tpn.extends == null ? [] : [tv.tpn.extends];\r\n                if (tv.tpn.implements != null) ext = ext.concat(tv.tpn.implements);\r\n                for (let extType of ext) {\r\n                    if (extType.genericParameterTypes != null && !(extType.genericParameterTypesResolved == true)) {\r\n                        ready = false;\r\n                    }\r\n                }\r\n\r\n                if (ready) {\r\n                    this.resolveTypeVariable(tv);\r\n                    todoList.splice(todoList.indexOf(tv), 1);\r\n                    i--;\r\n                    done = false;\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        return unresolvedGenericTypes;\r\n    }\r\n\r\n\r\n    resolveTypeVariable(tp: TypeParameterInfo) {\r\n\r\n\r\n        let typeParameterKlass: Klass;\r\n        if (tp.tpn.extends != null && tp.tpn.extends.resolvedType != null) {\r\n            typeParameterKlass = (<Klass>tp.tpn.extends.resolvedType).clone();\r\n        } else {\r\n            typeParameterKlass = objectType.clone();\r\n        }\r\n\r\n        typeParameterKlass.identifier = tp.tpn.identifier;\r\n        typeParameterKlass.isTypeVariable = true;\r\n\r\n        typeParameterKlass.declaration = {\r\n            module: tp.ci.module,\r\n            position: tp.tpn.position\r\n        };\r\n\r\n\r\n        if (tp.tpn.implements != null) {\r\n            for (let impl of tp.tpn.implements) {\r\n                if (typeParameterKlass.implements.indexOf(<Interface>impl.resolvedType) < 0) {\r\n                    typeParameterKlass.implements.push(<Interface>impl.resolvedType);\r\n                }\r\n            }\r\n        }\r\n\r\n        let tp1: TypeVariable = {\r\n            identifier: tp.tpn.identifier,\r\n            type: typeParameterKlass,\r\n            scopeFrom: tp.cdn.position,\r\n            scopeTo: tp.cdn.scopeTo\r\n        };\r\n\r\n        tp.ci.typeVariables[tp.index] = tp1;\r\n        tp.ci.typeVariablesReady = true;\r\n        for (let tv of tp.ci.typeVariables) if (tv == null) tp.ci.typeVariablesReady = false;\r\n\r\n        let typeParameterList = this.moduleToTypeParameterListMap.get(tp.ci.module);\r\n        if (typeParameterList == null) {\r\n            typeParameterList = [];\r\n            this.moduleToTypeParameterListMap.set(tp.ci.module, typeParameterList);\r\n        }\r\n\r\n        typeParameterList.push(tp1);\r\n\r\n        this.pushUsagePosition(tp.ci.module, tp.tpn.position, typeParameterKlass);\r\n\r\n    }\r\n\r\n    registerTypeVariables(cdn: ClassDeclarationNode | InterfaceDeclarationNode, classOrInterface: Klass | Interface) {\r\n        let index = 0;\r\n        for (let typeParameter of cdn.typeParameters) {\r\n            if (typeParameter.extends != null) this.registerGenericType(typeParameter.extends, classOrInterface.module, true);\r\n            if (typeParameter.implements != null) {\r\n                for (let im of typeParameter.implements) {\r\n                    this.registerGenericType(im, classOrInterface.module, true);\r\n                }\r\n            }\r\n\r\n            classOrInterface.typeVariablesReady = false;\r\n            classOrInterface.typeVariables.push(null); // leave room\r\n\r\n            this.typeParameterList.push({\r\n                tpn: typeParameter, tp: {\r\n                    identifier: typeParameter.identifier,\r\n                    type: null,\r\n                    scopeFrom: cdn.position,\r\n                    scopeTo: cdn.scopeTo\r\n                }, ci: classOrInterface, cdn: cdn,\r\n                index: index++\r\n            });\r\n        }\r\n    }\r\n\r\n    resolveTypesInModules() {\r\n        for (let m of this.moduleStore.getModules(false)) {\r\n            let ut: TypeNode[] = [];\r\n            this.unresolvedTypes.set(m, ut);\r\n            for (let tn of m.typeNodes) {\r\n                if (tn.resolvedType == null) {\r\n                    let typeModule = this.moduleStore.getType(tn.identifier);\r\n                    if (typeModule != null) {\r\n                        let type = typeModule.type;\r\n                        this.pushUsagePosition(m, tn.position, type);\r\n                        tn.resolvedType = getArrayType(type, tn.arrayDimension);\r\n                        this.registerGenericType(tn, m, false);\r\n                    } else {\r\n                        ut.push(tn);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    registerGenericType(typeNode: TypeNode, module: Module, isInClassDefinition: boolean) {\r\n        if (typeNode.genericParameterTypes != null) {\r\n            if (isInClassDefinition) {\r\n                this.genericTypesInClassDefinitions.push({ typeNode: typeNode, module: module });\r\n            } else {\r\n                this.genericTypes.push({ typeNode: typeNode, module: module });\r\n            }\r\n        } else {\r\n            // new ArrayList<>() (without type Parameters!) should be castable to ANY other type with same name regarldess of it's type variable types (Java 7-style!)\r\n            let type = typeNode.resolvedType;\r\n            if (type != null && type instanceof Klass && type.typeVariables.length > 0) {\r\n                let type1 = <Klass>type.clone();\r\n                type1.typeVariables = []; // now this type can cast to ANY other type with same name regardless of it's type variable types!\r\n                typeNode.resolvedType = type1;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function getArrayType(type: Type, arrayDimension: number) {\r\n    while (arrayDimension > 0) {\r\n        type = new ArrayType(type);\r\n        arrayDimension--;\r\n    }\r\n    return type;\r\n}","export function hash(s: string){\r\n    let hash: number = 0;\r\n    let chr: number;\r\n    for (let i = 0; i < s.length; i++) {\r\n      chr   = s.charCodeAt(i);\r\n      hash  = ((hash << 5) - hash) + chr;\r\n      hash |= 0; // Convert to 32bit integer\r\n    }\r\n    return hash;\r\n}\r\n\r\nexport function escapeHtml(unsafe: string): string {\r\n  return unsafe\r\n      .replace(/['\"]+/g, '')\r\n       .replace(/&/g, \"&amp;\")\r\n       .replace(/</g, \"&lt;\")\r\n       .replace(/>/g, \"&gt;\")\r\n       .replace(/\"/g, \"&quot;\")\r\n       .replace(/'/g, \"&#039;\");\r\n}\r\n\r\nexport function dateToString(date: Date): string{\r\n  return `${twoDez(date.getDate())}.${twoDez(date.getMonth() + 1)}.${date.getFullYear()}, ${twoDez(date.getHours())}:${twoDez(date.getMinutes())}`;\r\n}\r\n\r\nexport function dateToStringWithoutTime(date: Date): string{\r\n  return `${twoDez(date.getDate())}.${twoDez(date.getMonth() + 1)}.${date.getFullYear()}`;\r\n}\r\n\r\nfunction twoDez(z: number):string {\r\n  if(z < 10) return \"0\" + z;\r\n  return \"\" + z;\r\n}\r\n\r\nexport function stringToDate(text: string): Date {\r\n\r\n  let match = text.match(/^(\\d{2})\\.(\\d{2})\\.(\\d{4}), (\\d{2}):(\\d{2})$/);\r\n\r\n  let date: Date = new Date(Number.parseInt(match[3]), Number.parseInt(match[2]) - 1, Number.parseInt(match[1]), Number.parseInt(match[4]), Number.parseInt(match[5]) );\r\n\r\n  return date;\r\n}\r\n\r\nexport function stringWrap(s: string, length: number ): string{\r\n  return s.replace(\r\n    new RegExp(`(?![^\\\\n]{1,${length}}$)([^\\\\n]{1,${length}})\\\\s`, 'g'), '$1\\n'\r\n  );\r\n} \r\n\r\nexport function formatAsJavadocComment(s: string, indent: number|string = \"\"): string {\r\n  let indentString = \"\";\r\n\r\n  if(typeof indent == \"string\"){\r\n    indentString = indent;\r\n  } else {\r\n    for(let i = 0; i < indent; i++){\r\n      indentString += \" \";\r\n    }\r\n  }\r\n\r\n  s = stringWrap(s, 60);\r\n  if(s.length > 0) s = \"\\n\" + s;\r\n  s = indentString + \"/**\" + s.replace(/\\n/g, \"\\n\" + indentString + \" * \") + \"\\n\" + indentString + \" */\";\r\n  return s;\r\n}","import { escapeHtml } from \"./StringTools.js\";\r\n\r\nexport function makeEditable(elementWithText: JQuery<HTMLElement>,\r\n    elementToReplace: JQuery<HTMLElement>,\r\n    renameDoneCallback: (newContent: string) => void, selectionRange: { start: number, end: number } = null) {\r\n\r\n    let mousePointer = window.PointerEvent ? \"pointer\" : \"mouse\";\r\n\r\n    if (elementToReplace == null) {\r\n        elementToReplace = elementWithText;\r\n    }\r\n\r\n    let $input = jQuery('<input type=\"text\" class=\"jo_inplaceeditor\" spellcheck=\"false\">');\r\n    $input.css({\r\n        width: elementToReplace.css('width'),\r\n        height: elementToReplace.css('height'),\r\n        color: elementToReplace.css('color'),\r\n        position: elementToReplace.css('position'),\r\n        \"background-color\": elementToReplace.css('background-color'),\r\n        \"font-size\": elementToReplace.css('font-size'),\r\n        \"font-weight\": elementToReplace.css('font-weight'),\r\n        \"box-sizing\": \"border-box\"\r\n    });\r\n    $input.val(elementWithText.text());\r\n    $input.on(mousePointer + \"down\", (e) => { e.stopPropagation(); })\r\n\r\n    if (selectionRange != null) {\r\n        (<HTMLInputElement>$input[0]).setSelectionRange(selectionRange.start, selectionRange.end);\r\n    }\r\n\r\n    elementToReplace.after($input);\r\n    elementToReplace.hide();\r\n    setTimeout(() => {\r\n        $input.focus();\r\n    }, 300);\r\n\r\n    $input.on(\"keydown.me\", (ev) => {\r\n        if (ev.key == \"Enter\" || ev.key == \"Escape\") {\r\n            $input.off(\"keydown.me\");\r\n            $input.off(\"focusout.me\");\r\n            $input.remove();\r\n            elementToReplace.show();\r\n            let newValue = escapeHtml(<string>$input.val());\r\n            renameDoneCallback(newValue);\r\n            return;\r\n        }\r\n    });\r\n\r\n    $input.on(\"focusout.me\", (ev) => {\r\n        $input.off(\"keydown.me\");\r\n        $input.off(\"focusout.me\");\r\n        $input.remove();\r\n        elementToReplace.show();\r\n        let newValue = escapeHtml(<string>$input.val());\r\n        renameDoneCallback(newValue);\r\n        return;\r\n    });\r\n\r\n}\r\n\r\nexport type ContextMenuItem = {\r\n    caption: string;\r\n    color?: string;\r\n    callback: () => void;\r\n    link?: string;\r\n    subMenu?: ContextMenuItem[]\r\n};\r\n\r\nexport function openContextMenu(items: ContextMenuItem[], x: number, y: number): JQuery<HTMLElement> {\r\n\r\n    let mousePointer = window.PointerEvent ? \"pointer\" : \"mouse\";\r\n\r\n    let $contextMenu = jQuery('<div class=\"jo_contextmenu\"></div>');\r\n\r\n    let $openSubMenu: JQuery<HTMLElement> = null;\r\n    let parentMenuItem: ContextMenuItem = null;\r\n\r\n    for (let mi of items) {\r\n        let caption: string = mi.caption;\r\n        if (mi.link != null) {\r\n            caption = `<a href=\"${mi.link}\" target=\"_blank\" class=\"jo_menulink\">${mi.caption}</a>`;\r\n        }\r\n        let $item = jQuery('<div>' + caption + (mi.subMenu != null ? '<span style=\"float: right\"> &nbsp; &nbsp; &gt;</span>' : \"\") + '</div>');\r\n        if (mi.color != null) {\r\n            $item.css('color', mi.color);\r\n        }\r\n        if (mi.link == null) {\r\n            $item.on(mousePointer + 'up.contextmenu', (ev) => {\r\n                ev.stopPropagation();\r\n                jQuery('.jo_contextmenu').remove();\r\n                jQuery(document).off(mousePointer + \"up.contextmenu\");\r\n                jQuery(document).off(mousePointer + \"down.contextmenu\");\r\n                jQuery(document).off(\"keydown.contextmenu\");\r\n                mi.callback();\r\n            });\r\n            $item.on(mousePointer + 'down.contextmenu', (ev) => {\r\n                ev.stopPropagation();\r\n            });\r\n        } else {\r\n            let $link = $item.find('a');\r\n            $link.on(mousePointer + \"up\", (event) => {\r\n                event.stopPropagation();\r\n                setTimeout(() => {\r\n                    $item.hide();\r\n                }, 500);\r\n            })\r\n            $link.on(mousePointer + \"down\", (event) => {\r\n                event.stopPropagation();\r\n            })\r\n\r\n        }\r\n\r\n        $item.on(mousePointer + 'move.contextmenu', () => {\r\n            if (mi != parentMenuItem && $openSubMenu != null) {\r\n                $openSubMenu.remove();\r\n                parentMenuItem = null;\r\n                $openSubMenu = null;\r\n            }\r\n            if (mi.subMenu != null) {\r\n                $openSubMenu = openContextMenu(mi.subMenu, $item.offset().left + $item.width(), $item.offset().top);\r\n            }\r\n        });\r\n\r\n        $contextMenu.append($item);\r\n    }\r\n\r\n    jQuery(document).on(mousePointer + \"down.contextmenu\", (e) => {\r\n        jQuery(document).off(mousePointer + \"down.contextmenu\");\r\n        jQuery(document).off(\"keydown.contextmenu\");\r\n        jQuery('.jo_contextmenu').remove();\r\n    })\r\n\r\n    jQuery(document).on(\"keydown.contextmenu\", (ev) => {\r\n        if (ev.key == \"Escape\") {\r\n            jQuery(document).off(mousePointer + \"up.contextmenu\");\r\n            jQuery(document).off(\"keydown.contextmenu\");\r\n            jQuery('.jo_contextmenu').remove();\r\n        }\r\n    });\r\n\r\n    let leftRight = x > window.innerWidth * 0.8 ? \"right\" : \"left\";\r\n    let xp = x > window.innerWidth * 0.8 ? window.innerWidth - x : x;\r\n    let topBottom = y > window.innerHeight * 0.8 ? \"bottom\" : \"top\";\r\n    let yp = y > window.innerHeight * 0.8 ? window.innerHeight - y : y;\r\n\r\n    let css = {};\r\n    css[leftRight] = xp + \"px\";\r\n    css[topBottom] = yp + \"px\";\r\n\r\n    $contextMenu.css(css);\r\n\r\n\r\n    jQuery(\"body\").append($contextMenu);\r\n    $contextMenu.show();\r\n\r\n    return $contextMenu;\r\n}\r\n\r\nexport function makeTabs(tabDiv: JQuery<HTMLElement>) {\r\n    let headings = tabDiv.find('.jo_tabheadings>div').not('.jo_noHeading');\r\n    let tabs = tabDiv.find('.jo_tabs>div');\r\n\r\n    let mousePointer = window.PointerEvent ? \"pointer\" : \"mouse\";\r\n\r\n    headings.on(mousePointer + \"down\", (ev) => {\r\n        let target = jQuery(ev.target);\r\n        headings.removeClass('jo_active');\r\n        target.addClass('jo_active');\r\n        let tab = tabDiv.find('.' + target.data('target'));\r\n        tabs.removeClass('jo_active');\r\n        tabs.trigger('myhide');\r\n        tab.addClass('jo_active');\r\n        tab.trigger('myshow');\r\n    });\r\n\r\n}\r\n\r\nexport function convertPxToNumber(pxString: string): number {\r\n    pxString = pxString.replace('px', '').trim();\r\n    return Number.parseInt(pxString);\r\n}\r\n\r\nexport function makeDiv(id: string, klass: string = \"\", text: string = \"\", css?: { [id: string]: any }): JQuery<HTMLDivElement> {\r\n\r\n    let s = \"\";\r\n    if (id != null && id != \"\") s += ` id=\"${id}\"`;\r\n\r\n    if (klass != null && klass != \"\") s += ` class=\"${klass}\"`;\r\n\r\n    let div = jQuery(`<div${s}></div>`);\r\n\r\n    if (css != null) {\r\n        div.css(css);\r\n    }\r\n\r\n    if (text != null && text != \"\") {\r\n        div.text(text);\r\n    }\r\n\r\n    return <any>div;\r\n\r\n}\r\n\r\nexport type SelectItem = {\r\n    value: string | number,\r\n    object: any,\r\n    caption: string\r\n}\r\n\r\nexport function setSelectItems($selectElement: JQuery<HTMLSelectElement>, items: SelectItem[], activeItemValue?: string | number) {\r\n    $selectElement.empty();\r\n    items.forEach(item => {\r\n        let selected: string = (item.value == activeItemValue) ? ' selected=\"selected\"' : \"\";\r\n        let element = jQuery(`<option value=${item.value}${selected}>${item.caption}</option>`);\r\n        $selectElement.append(element);\r\n        element.data('object', item.object);\r\n    }\r\n    );\r\n\r\n    $selectElement.data('items', items);\r\n\r\n\r\n}\r\n\r\nexport function getSelectedObject($selectDiv: JQuery<HTMLSelectElement>) {\r\n\r\n    let items: SelectItem[] = $selectDiv.data('items');\r\n\r\n    let selectedValue = $selectDiv.val();\r\n\r\n    return items.find(item => item.value == selectedValue)?.object;\r\n\r\n}\r\n\r\nexport var jo_mouseDetected: boolean = false;\r\nexport function checkIfMousePresent() {\r\n    if (matchMedia('(pointer:fine)').matches) {\r\n        jo_mouseDetected = true;\r\n    }\r\n}\r\n\r\nexport function animateToTransparent($element: JQuery<HTMLElement>, cssProperty: string, startColorRgb: number[], duration: number) {\r\n    let colorPraefix = 'rgba(' + startColorRgb[0] + \", \" + startColorRgb[1] + \", \" + startColorRgb[2] + \", \";\r\n    let value = 1.0;\r\n    let delta = value / (duration / 20);\r\n\r\n    let animate = () => {\r\n        $element.css(cssProperty, colorPraefix + value + \")\");\r\n        value -= delta;\r\n        if (value < 0) {\r\n            $element.css(cssProperty, \"\");\r\n        } else {\r\n            setTimeout(animate, 20);\r\n        }\r\n    }\r\n\r\n    animate();\r\n}\r\n\r\nexport function downloadFile(obj: any, filename: string, isBlob: boolean = false) {\r\n    var blob = isBlob? obj : new Blob([JSON.stringify(obj)], { type: 'text/plain' });\r\n    //@ts-ignore\r\n    if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n        //@ts-ignore\r\n        window.navigator.msSaveOrOpenBlob(blob, filename);\r\n    } else {\r\n        var e = document.createEvent('MouseEvents'),\r\n            a = document.createElement('a');\r\n        a.download = filename;\r\n        a.href = window.URL.createObjectURL(blob);\r\n        a.dataset.downloadurl = ['text/plain', a.download, a.href].join(':');\r\n        //@ts-ignore\r\n        e.initEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\r\n        a.dispatchEvent(e);\r\n        a.remove();\r\n    }\r\n}\r\n\r\n\r\nfunction fallbackCopyTextToClipboard(text) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n\r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n\r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n\r\n    try {\r\n        var successful = document.execCommand('copy');\r\n    } catch (err) {\r\n        console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n\r\n    document.body.removeChild(textArea);\r\n}\r\n\r\nexport function copyTextToClipboard(text) {\r\n    if (!navigator.clipboard) {\r\n        fallbackCopyTextToClipboard(text);\r\n        return;\r\n    }\r\n    navigator.clipboard.writeText(text).then(function () {\r\n    }, function (err) {\r\n        console.error('Async: Could not copy text: ', err);\r\n    });\r\n}\r\n","export type SoundType = {\r\n    url: string,\r\n    name: string,\r\n    //@ts-ignore\r\n    player?: Howl,\r\n    description: string\r\n}\r\n\r\nexport class SoundTools {\r\n\r\n    static sounds: SoundType[] = [\r\n        {\r\n            url: \"assets/mp3/nearby_explosion_with_debris.mp3\",\r\n            name: \"nearby_explosion_with_debris\",\r\n            description: \"nahe Explosion mit herabfallenden Trümmern\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/nearby_explosion.mp3\",\r\n            name: \"nearby_explosion\",\r\n            description: \"nahe Explosion\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/far_bomb.mp3\",\r\n            name: \"far_bomb\",\r\n            description: \"fernes Geräusch einer Bombe\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/cannon_boom.mp3\",\r\n            name: \"cannon_boom\",\r\n            description: \"einzelner Kanonendonner\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/far_explosion.mp3\",\r\n            name: \"far_explosion\",\r\n            description: \"ferne Explosion\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/laser_shoot.mp3\",\r\n            name: \"laser_shoot\",\r\n            description: \"Laserschuss (oder was man dafür hält...)\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/short_bell.mp3\",\r\n            name: \"short_bell\",\r\n            description: \"kurzes Klingeln (wie bei alter Landenkasse)\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/flamethrower.mp3\",\r\n            name: \"flamethrower\",\r\n            description: \"Flammenwerfer\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/digging.mp3\",\r\n            name: \"digging\",\r\n            description: \"Geräusch beim Sandschaufeln\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/short_digging.mp3\",\r\n            name: \"short_digging\",\r\n            description: \"kurzes Geräusch beim Sandschaufeln\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/shoot.mp3\",\r\n            name: \"shoot\",\r\n            description: \"Schussgeräusch\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/short_shoot.mp3\",\r\n            name: \"short_shoot\",\r\n            description: \"ein kurzer Schuss\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/step.mp3\",\r\n            name: \"step\",\r\n            description: \"ein Schritt\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/boulder.mp3\",\r\n            name: \"boulder\",\r\n            description: \"Geräusch eines Steins, der auf einen zweiten fällt\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/pong_d5.wav\",\r\n            name: \"pong_d\",\r\n            description: \"Tiefer Pong-Ton\"\r\n        },\r\n        {\r\n            url: \"assets/mp3/pong_f5.wav\",\r\n            name: \"pong_f\",\r\n            description: \"Hoher Pong-Ton\"\r\n        },\r\n    ]\r\n\r\n    static soundMap: Map<string, SoundType> = new Map();\r\n\r\n    private static isInitialized: boolean = false;\r\n\r\n    public static init(){\r\n        let praefix: string = \"\";\r\n        //@ts-ignore\r\n        if(window.javaOnlineDir != null){\r\n            //@ts-ignore\r\n            praefix = window.javaOnlineDir;\r\n        }\r\n        if(!SoundTools.isInitialized){\r\n            SoundTools.isInitialized = true;\r\n            for(let sound of SoundTools.sounds){\r\n                //@ts-ignore\r\n                sound.player = new Howl({src: [praefix + sound.url], preload: true})\r\n                SoundTools.soundMap.set(sound.name, sound);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public static play(name: string){\r\n        let st: SoundType = SoundTools.soundMap.get(name);\r\n        if(st != null){\r\n            st.player.play();\r\n        }\r\n    }\r\n\r\n}","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nexport function defineMyJava() {\r\n    monaco.languages.register({ id: 'myJava', \r\n    extensions: ['.learnJava'],\r\n    //  mimetypes: [\"text/x-java-source\", \"text/x-java\"]  \r\n    });\r\n\r\n    let conf: monaco.languages.LanguageConfiguration = {\r\n        indentationRules: {\r\n            // ^(.*\\*/)?\\s*\\}.*$\r\n            decreaseIndentPattern: /^(.*\\*\\/)?\\s*\\}.*$/,\r\n            // ^.*\\{[^}\"']*$\r\n            increaseIndentPattern: /^.*\\{[^}\"']*$/\r\n        },\r\n        onEnterRules: [\r\n            {\r\n                // e.g. /** | */\r\n                beforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\r\n                afterText: /^\\s*\\*\\/$/,\r\n                action: { indentAction: monaco.languages.IndentAction.IndentOutdent, appendText: ' * ' }\r\n            },\r\n            {\r\n                // e.g. /** ...|\r\n                beforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, appendText: ' * ' }\r\n            },\r\n            {\r\n                // e.g.  * ...|\r\n                // beforeText: /^(\\t|(\\ \\ ))*\\ \\*(\\ ([^\\*]|\\*(?!\\/))*)?$/,\r\n                beforeText: /^(\\t|(\\ ))*\\ \\*(\\ ([^\\*]|\\*(?!\\/))*)?$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, appendText: '* ' }\r\n            },\r\n            {\r\n                // e.g.  */|\r\n                beforeText: /^(\\t|(\\ \\ ))*\\ \\*\\/\\s*$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, removeText: 1 }\r\n            },\r\n            {\r\n                // e.g.  *-----*/|\r\n                beforeText: /^(\\t|(\\ \\ ))*\\ \\*[^/]*\\*\\/\\s*$/,\r\n                action: { indentAction: monaco.languages.IndentAction.None, removeText: 1 }\r\n            }\r\n        ],\r\n        // the default separators except `@$`\r\n        wordPattern: /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\#\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g,\r\n        comments: {\r\n            lineComment: '//',\r\n            blockComment: ['/*', '*/'],\r\n        },\r\n        brackets: [\r\n            ['{', '}'],\r\n            ['[', ']'],\r\n            ['(', ')'],\r\n        ],\r\n        autoClosingPairs: [\r\n            { open: '{', close: '}' },\r\n            { open: '[', close: ']' },\r\n            { open: '(', close: ')' },\r\n            // { open: '\"', close: '\"' },\r\n            { open: '\\'', close: '\\'' },\r\n        ],\r\n        surroundingPairs: [\r\n            { open: '{', close: '}' },\r\n            { open: '[', close: ']' },\r\n            { open: '(', close: ')' },\r\n            { open: '\"', close: '\"' },\r\n            { open: '\\'', close: '\\'' },\r\n            { open: '<', close: '>' },\r\n        ],\r\n        folding: {\r\n            markers: {\r\n                start: new RegExp(\"^\\\\s*//\\\\s*(?:(?:#?region\\\\b)|(?:<editor-fold\\\\b))\"),\r\n                end: new RegExp(\"^\\\\s*//\\\\s*(?:(?:#?endregion\\\\b)|(?:</editor-fold>))\")\r\n            }\r\n        },\r\n\r\n    };\r\n    let language = {\r\n        defaultToken: '',\r\n        tokenPostfix: '.java',\r\n        keywords: [\r\n            'abstract', 'continue', 'new', 'switch', 'assert', 'default',\r\n            'goto', 'package', 'synchronized', 'private',\r\n            'this', 'implements', 'protected', 'throw',\r\n            'import', 'public', 'throws', 'case', 'instanceof', 'return',\r\n            'transient', 'catch', 'extends', 'try', 'final',\r\n            'static', 'finally', 'strictfp',\r\n            'volatile', 'const', 'native', 'super', 'true', 'false', 'null'\r\n        ],\r\n        print: ['print', 'println'],\r\n        statements: ['for', 'while', 'if', 'then', 'else', 'do', 'break', 'continue'],\r\n        types: ['int', 'boolean', 'char', 'float', 'double', 'long', 'void', 'byte', 'short',\r\n        'class', 'enum', 'interface', 'var'],\r\n        operators: [\r\n            '=', '>', '<', '!', '~', '?', ':',\r\n            '==', '<=', '>=', '!=', '&&', '||', '++', '--',\r\n            '+', '-', '*', '/', '&', '|', '^', '%', '<<',\r\n            '>>', '>>>', '+=', '-=', '*=', '/=', '&=', '|=',\r\n            '^=', '%=', '<<=', '>>=', '>>>='\r\n        ],\r\n        // we include these common regular expressions\r\n        symbols: /[=><!~?:&|+\\-*\\/\\^%]+/,\r\n        escapes: /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\r\n        digits: /\\d+(_+\\d+)*/,\r\n        octaldigits: /[0-7]+(_+[0-7]+)*/,\r\n        binarydigits: /[0-1]+(_+[0-1]+)*/,\r\n        hexdigits: /[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,\r\n        // The main tokenizer for our languages\r\n        tokenizer: {\r\n            root: [\r\n                // identifiers and keywords\r\n                // [/[a-zA-Z_$][\\w$]*/, {\r\n                [/\\.[A-Z$ÄÖÜ][\\w$äöüßÄÖÜ]*(?=\\()/, {\r\n                    cases: {\r\n                        '@default': 'method'\r\n                    }\r\n                }],\r\n                [/[a-z_$äöü][\\w$äöüßÄÖÜ]*(?=\\()/, {\r\n                    cases: {\r\n                        '@keywords': { token: 'keyword.$0' },\r\n                        '@statements': { token: 'statement.$0' },\r\n                        '@types': { token: 'type.$0' },\r\n                        '@print': { token: 'print.$0' },\r\n                        '@default': 'method'\r\n                    }\r\n                }],\r\n                [/[a-z_$äöüß][\\w$äöüßÄÖÜ]*/, {\r\n                    cases: {\r\n                        '@keywords': { token: 'keyword.$0' },\r\n                        '@statements': { token: 'statement.$0' },\r\n                        '@types': { token: 'type.$0' },\r\n                        '@default': 'identifier'\r\n                    }\r\n                }],\r\n                [/[A-Z$ÄÖÜ][\\w$äöüßÄÖÜ]*/, 'class'],\r\n                // whitespace\r\n                { include: '@whitespace' },\r\n                // delimiters and operators\r\n                [/[{}()\\[\\]]/, '@brackets'],\r\n                [/[<>](?!@symbols)/, '@brackets'],\r\n                [/@symbols/, {\r\n                    cases: {\r\n                        '@operators': 'delimiter',\r\n                        '@default': ''\r\n                    }\r\n                }],\r\n                // @ annotations.\r\n                [/@\\s*[a-zA-Z_\\$][\\w\\$]*/, 'annotation'],\r\n                // numbers\r\n                [/(@digits)[eE]([\\-+]?(@digits))?[fFdD]?/, 'number.float'],\r\n                [/(@digits)\\.(@digits)([eE][\\-+]?(@digits))?[fFdD]?/, 'number.float'],\r\n                [/0[xX](@hexdigits)[Ll]?/, 'number.hex'],\r\n                [/0(@octaldigits)[Ll]?/, 'number.octal'],\r\n                [/0[bB](@binarydigits)[Ll]?/, 'number.binary'],\r\n                [/(@digits)[fFdD]/, 'number.float'],\r\n                [/(@digits)[lL]?/, 'number'],\r\n                // delimiter: after number because of .\\d floats\r\n                [/[;,.]/, 'delimiter'],\r\n                // strings\r\n                [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid'],\r\n                [/\"\"\"/, 'string', '@string'],\r\n                [/\"/, 'string', '@string'],\r\n                // characters\r\n                [/'[^\\\\']'/, 'string'],\r\n                [/(')(@escapes)(')/, ['string', 'string.escape', 'string']],\r\n                [/'/, 'string.invalid']\r\n            ],\r\n            whitespace: [\r\n                [/[ \\t\\r\\n]+/, ''],\r\n                [/\\/\\*\\*(?!\\/)/, 'comment.doc', '@javadoc'],\r\n                [/\\/\\*/, 'comment', '@comment'],\r\n                [/\\/\\/.*$/, 'comment'],\r\n            ],\r\n            comment: [\r\n                [/[^\\/*]+/, 'comment'],\r\n                // [/\\/\\*/, 'comment', '@push' ],    // nested comment not allowed :-(\r\n                // [/\\/\\*/,    'comment.invalid' ],    // this breaks block comments in the shape of /* //*/\r\n                [/\\*\\//, 'comment', '@pop'],\r\n                [/[\\/*]/, 'comment']\r\n            ],\r\n            //Identical copy of comment above, except for the addition of .doc\r\n            javadoc: [\r\n                [/[^\\/*]+/, 'comment.doc'],\r\n                // [/\\/\\*/, 'comment.doc', '@push' ],    // nested comment not allowed :-(\r\n                [/\\/\\*/, 'comment.doc.invalid'],\r\n                [/\\*\\//, 'comment.doc', '@pop'],\r\n                [/[\\/*]/, 'comment.doc']\r\n            ],\r\n            string: [\r\n                [/[^\\\\\"]+/, 'string'],\r\n                [/@escapes/, 'string.escape'],\r\n                [/\\\\./, 'string.escape.invalid'],\r\n                [/\"\"\"/, 'string', '@pop'],\r\n                [/\"/, 'string', '@pop']\r\n            ],\r\n            \r\n        },\r\n    };\r\n\r\n    //@ts-ignore\r\n    monaco.languages.setLanguageConfiguration('myJava', conf);\r\n    //@ts-ignore\r\n    monaco.languages.setMonarchTokensProvider('myJava', language);\r\n\r\n    // monaco.languages.registerCompletionItemProvider(\"myJava\", {    // Or any other language...\r\n    //     provideCompletionItems: (model, position) => {\r\n    //         // Retrieve the text until the current cursor's position, anything\r\n    //         // after that doesn't really matter.\r\n    //         var textToMatch = model.getValueInRange({\r\n    //             startLineNumber: 1,\r\n    //             startColumn: 1,\r\n    //             endLineNumber: position.lineNumber,\r\n    //             endColumn: position.column\r\n    //         });\r\n\r\n    //         // Return JSON array containing all completion suggestions.\r\n    //         return {\r\n    //             suggestions: [\r\n    //                 // Example: io.write ()\r\n    //                 {\r\n    //                     label: \"io.write (string)\",\r\n    //                     kind: monaco.languages.CompletionItemKind.Function,\r\n    //                     documentation: \"Writes a string to stdout.\",\r\n    //                     insertText: \"io.write (\\\"\\\")\",  // Escape JSON as needed.\r\n    //                     range: {\r\n    //                         startLineNumber: position.lineNumber,\r\n    //                         endLineNumber: position.lineNumber,\r\n    //                         startColumn: position.column,\r\n    //                         endColumn: position.column\r\n    //                     }\r\n    //                 },  // Other items.\r\n    //             ]\r\n    //         };\r\n    //     }\r\n    // });\r\n\r\n\r\n}","import { Klass, Interface, Visibility } from \"./Class.js\";\r\nimport { Method, Attribute, Type, PrimitiveType, Variable } from \"./Types.js\";\r\nimport { objectType } from \"./PrimitiveTypes.js\";\r\nimport { ArrayType } from \"./Array.js\";\r\nimport { formatAsJavadocComment } from \"../../tools/StringTools.js\";\r\n\r\nexport function getDeclarationAsString(element: Klass | Interface | Method | Attribute | Variable,\r\n    indent: string = \"\", short: boolean = false): string {\r\n\r\n    if (element instanceof Klass) {\r\n\r\n        if (element.isTypeVariable) {\r\n            return getTypeVariableDeclaration(element);\r\n        }\r\n\r\n        let s = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\") {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                s += (indent + element.documentation).replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                // s += indent + \"/**  \\n\" + element.documentation + \"  \\n**/  \\n\" + indent;\r\n                s += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        if (element.visibility != null) s += Visibility[element.visibility] + \" \";\r\n        if (element.isAbstract) s += \"abstract \";\r\n        s += \"class \" + element.identifier + \" \";\r\n\r\n        if (element.typeVariables.length > 0) {\r\n            s += getGenericParameterDefinition(element);\r\n        }\r\n\r\n\r\n        if (element.baseClass != null && element.baseClass.identifier != \"Object\") {\r\n            s += \"extends \" + element.baseClass.identifier + \" \";\r\n            if (element.baseClass.typeVariables.length > 0) {\r\n                s += getGenericParameterDefinition(element.baseClass);\r\n            }\r\n        }\r\n\r\n        if (element.implements != null && element.implements.length > 0) {\r\n            s += \"implements \";\r\n            for (let i = 0; i < element.implements.length; i++) {\r\n                s += element.implements[i].identifier;\r\n                if (element.implements[i].typeVariables.length > 0) {\r\n                    s += getGenericParameterDefinition(element.implements[i]);\r\n                }\r\n                if (i < element.implements.length - 1) {\r\n                    s += \", \";\r\n                }\r\n            }\r\n        }\r\n\r\n        if (short) return s;\r\n\r\n        s += indent + \"{\\n  \";\r\n\r\n        for (let a of element.getAttributes(Visibility.protected)) {\r\n            s += indent + \"\\n\" + getDeclarationAsString(a, \"  \") + \";\\n\";\r\n        }\r\n\r\n        if (element.staticClass != null) {\r\n            for (let a of element.staticClass.getAttributes(Visibility.protected)) {\r\n                s += indent + \"\\n\" + getDeclarationAsString(a, \"  \") + \";\\n\";\r\n            }\r\n        }\r\n\r\n        for (let m of element.getMethods(Visibility.protected)) {\r\n            s += indent + \"\\n\" + getDeclarationAsString(m, \"  \") + \";\\n\";\r\n        }\r\n\r\n        if (element.staticClass != null) {\r\n            for (let m of element.staticClass.getMethods(Visibility.protected)) {\r\n                s += indent + \"\\n\" + getDeclarationAsString(m, \"  \") + \";\\n\";\r\n            }\r\n        }\r\n\r\n\r\n        s += \"\\n}\";\r\n\r\n        return s;\r\n\r\n    }\r\n\r\n    if (element instanceof Interface) {\r\n\r\n        let decl = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\" && !short) {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                decl += (indent + element.documentation).replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                decl += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        decl += indent + \"interface \" + element.identifier;\r\n\r\n        if (element.typeVariables.length > 0) {\r\n            decl += getGenericParameterDefinition(element);\r\n        }\r\n\r\n        if (element.extends != null && element.extends.length > 0) {\r\n            decl += \"extends \";\r\n            for (let i = 0; i < element.extends.length; i++) {\r\n                decl += element.extends[i].identifier;\r\n                if (element.extends[i].typeVariables.length > 0) {\r\n                    decl += getGenericParameterDefinition(element.extends[i]);\r\n                }\r\n                if (i < element.extends.length - 1) {\r\n                    decl += \", \";\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!short) {\r\n\r\n            decl += \"{\\n\";\r\n\r\n            for (let m of element.methods) {\r\n                decl += indent + \"\\n\" + getDeclarationAsString(m, \"  \") + \";\\n\";\r\n            }\r\n\r\n            decl += \"\\n}\";\r\n        }\r\n\r\n        return decl;\r\n\r\n    }\r\n\r\n    if (element instanceof Attribute) {\r\n        let s = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\" && !short) {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                s += indent + element.documentation.replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                s += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        s += indent;\r\n\r\n        if (element.visibility != null) s += Visibility[element.visibility] + \" \";\r\n\r\n        if (element.isStatic) s += \"static \";\r\n\r\n        s += getTypeIdentifier(element.type) + \" \" + element.identifier;\r\n\r\n        return s;\r\n    }\r\n\r\n    if (element instanceof Method) {\r\n\r\n        let s = \"\";\r\n\r\n        if (element.documentation != null && element.documentation != \"\" && !short) {\r\n            if(element.documentation.startsWith(\"/*\")){\r\n                s += indent + element.documentation.replace(/\\n/g, \"\\n\" + indent) + \"\\n\";\r\n            } else {\r\n                s += formatAsJavadocComment(element.documentation, indent) + \"\\n\";\r\n            }\r\n        }\r\n\r\n        s += indent;\r\n\r\n        if (element.visibility != null) s += Visibility[element.visibility] + \" \";\r\n\r\n        if (element.isStatic) s += \"static \";\r\n\r\n        if (element.getReturnType() != null) {\r\n            s += getTypeIdentifier(element.getReturnType()) + \" \";\r\n        } else {\r\n            s += element.isConstructor ? \"\" : \"void \";\r\n        }\r\n\r\n        s += element.identifier + \"(\";\r\n\r\n        let parameters = element.getParameterList().parameters;\r\n        for (let i = 0; i < parameters.length; i++) {\r\n\r\n            let p = parameters[i];\r\n            let type: Type = element.getParameterType(i);\r\n\r\n            if (p.isEllipsis) {\r\n                type = (<ArrayType>type).arrayOfType;\r\n            }\r\n\r\n            s += getTypeIdentifier(type) + (p.isEllipsis ? \"...\" : \"\") + \" \" + p.identifier;\r\n\r\n            if (i < parameters.length - 1) {\r\n                s += \", \";\r\n            }\r\n\r\n        }\r\n\r\n        s += \")\";\r\n\r\n        return s;\r\n\r\n\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\nfunction getTypeVariableDeclaration(element: Klass) {\r\n    let s: string = element.identifier;\r\n\r\n    if (element.isGenericVariantFrom != objectType) s += \" extends \" + getTypeIdentifier(element.isGenericVariantFrom);\r\n    if (element.implements.length > 0) {\r\n        let implList = element.implements.filter(impl => element.isGenericVariantFrom.implements.indexOf(impl) < 0)\r\n            .map(impl => getTypeIdentifier(impl)).join(\", \");\r\n        if (implList != \"\") {\r\n            s += \" implements \" + implList;\r\n        }\r\n    }\r\n\r\n    return s;\r\n}\r\n\r\nexport function getTypeIdentifier(type: Type): string {\r\n    if (type instanceof Klass || type instanceof Interface) {\r\n        if (type.typeVariables.length > 0) {\r\n            let s: string = (type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type.isGenericVariantFrom?.identifier) : type.identifier)\r\n                + \"<\";\r\n            s += type.typeVariables.map(tv => getTypeIdentifier(tv.type)).join(\", \");\r\n            return s + \">\";\r\n        }\r\n    }\r\n\r\n    return type[\"isTypeVariable\"] ? (type.identifier + \" extends \" + type[\"isGenericVariantFrom\"]?.identifier) : type.identifier;\r\n}\r\n\r\nexport function getGenericParameterDefinition(element: Klass | Interface): string {\r\n\r\n    let s: string = \"\";\r\n\r\n    if (element.typeVariables.length > 0) {\r\n        s = \"<\";\r\n\r\n        let typeList: string[] = [];\r\n        for (let tv of element.typeVariables) {\r\n            let t: string = tv.type.identifier;\r\n            let k: Klass = tv.type;\r\n            if (k.isGenericVariantFrom != null && k.isGenericVariantFrom.identifier != \"Object\") {\r\n                t += \" extends \" + k.isGenericVariantFrom.identifier;\r\n            }\r\n            if (k.implements != null) {\r\n\r\n                let implList = k.implements;\r\n                if (k.isGenericVariantFrom != null) {\r\n                    implList = implList.filter(impl => k.isGenericVariantFrom.implements.indexOf(impl) < 0);\r\n                }\r\n\r\n                for (let im of implList) {\r\n                    t += \" & \" + im.identifier;\r\n                }\r\n            }\r\n            typeList.push(t);\r\n        }\r\n\r\n        s += typeList.join(\", \");\r\n        s += \"> \";\r\n    }\r\n\r\n    return s;\r\n}","import { Editor } from \"./Editor.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Interface } from \"../../compiler/types/Class.js\";\r\nimport { Method, Attribute, PrimitiveType } from \"../../compiler/types/Types.js\";\r\nimport { getDeclarationAsString, getGenericParameterDefinition } from \"../../compiler/types/DeclarationHelper.js\";\r\nimport { InterpreterState } from \"../../interpreter/Interpreter.js\";\r\n\r\n\r\n\r\nexport class MyHoverProvider {\r\n\r\n    private static keywordDescriptions: { [keyword: string]: string } = {\r\n        \"print\": \"Die Anweisung ```print``` gibt eine Zeichenkette aus.\",\r\n        \"new\": \"Das Schlüsselwort ```new``` bewirkt die Instanzierung (\\\"Erschaffung\\\") eines neuen Objektes einer Klasse.\",\r\n        \"println\": \"Die Anweisung ```println``` gibt eine Zeichenkette gefolgt von einem Zeilenumbruch aus.\",\r\n        \"while\": \"```\\nwhile (Bedingung) {Anweisungen}\\n```  \\nbewirkt die Wiederholung der Anweisungen solange ```Bedingung == true``` ist.\",\r\n        \"for\": \"```\\nfor(Startanweisung;Solange-Bedingung;Nach_jeder_Wiederholung){Anweisungen}\\n```  \\n\"\r\n            + \"führt zunächst die Startanweisung aus und wiederholt dann die Anweisungen solange ```Bedingung == true``` ist. Am Ende jeder wiederholung wird Nach_jeder_Wiederholung ausgeführt.\",\r\n        \"if\": \"```\\nif(Bedingung){Anweisungen_1} else {Anweisungen_2}\\n```  \\nwertet die Bedingung aus und führt Anweisungen_1 nur dann aus, wenn die Bedingung ```true``` ergibt, Anweisungen_2 nur dann, wenn die Bedingung ```false``` ergibt.  \\nDer ```else```-Teil kann auch weggelassen werden.\",\r\n        \"else\": \"```\\nif(Bedingung){Anweisungen_1} else {Anweisungen_2}\\n```  \\nwertet die Bedingung aus und führt Anweisungen_1 nur dann aus, wenn die Bedingung ```true``` ergibt, Anweisungen_2 nur dann, wenn die Bedingung ```false``` ergibt.\",\r\n        \"switch\": \"```\\nswitch(Selektor){ case Wert_1: Anweisungen_1; break; case Wert_2: Anweisungen_2; break; default: Default-Anweisungen } \\n```  \\nwertet den Selektor-Term aus und führt abhängig vom Termwert Anweisungen_1, Anweisungen_2, ... aus. Entspricht der Termwert keinem der Werte Wert_1, Wert_2, ..., so werden die Default-Anweisungen ausgeführt.\",\r\n        \"%\": \"```\\na % b\\n```  \\n (sprich: 'a modulo b') berechnet den **Rest** der ganzzahligen Division a/b.\",\r\n        \"|\": \"```\\na | b\\n```  \\n (sprich: 'a or b') berechnet die **bitweise oder-Verknüpfung** der Werte a und b.\",\r\n        \"&\": \"```\\na & b\\n```  \\n (sprich: 'a und b') berechnet die **bitweise und-Verknüpfung** der Werte a und b.\",\r\n        \"^\": \"```\\na ^ b\\n```  \\n (sprich: 'a xor b') berechnet die **bitweise exklusiv-oder-Verknüpfung** der Werte a und b.\",\r\n        \">>\": \"```\\na >> b\\n```  \\n (sprich: 'a right shift b') berechnet den Wert, der entsteht, wenn man den Wert von a **bitweise um b Stellen nach rechts verschiebt**. Dieser Wert ist identisch mit dem nach unten abgerundeten Wert von a/(2 hoch b).\",\r\n        \"<<\": \"```\\na >> b\\n```  \\n (sprich: 'a left shift b') berechnet den Wert, der entsteht, wenn man den Wert von a **bitweise um b Stellen nach links verschiebt**. Dieser Wert ist identisch mit dem nach unten abgerundeten Wert von a*(2 hoch b).\",\r\n        \"~\": \"```\\n~a\\n```  \\n (sprich: 'nicht a') berechnet den Wert, der entsteht, wenn man **alle Bits von a umkehrt**.\",\r\n        \"==\": \"```\\na == b\\n```  \\nergibt genau dann ```true```, wenn ```a``` und ```b``` gleich sind.  \\nSind a und b **Objekte**, so ergibt ```a == b``` nur dann ```true```, wenn ```a``` und ```b``` auf das **identische** Objekt zeigen.  \\n```==``` nennt man **Vergleichsoperator**.\",\r\n        \"<=\": \"```\\na <= b\\n```  \\nergibt genau dann ```true```, wenn der Wert von ```a``` kleiner oder gleich dem Wert von ```b``` ist.\",\r\n        \">=\": \"```\\na <= b\\n```  \\nergibt genau dann ```true```, wenn der Wert von ```a``` größer oder gleich dem Wert von ```b``` ist.\",\r\n        \"!=\": \"```\\na != b\\n```  \\nergibt genau dann ```true```, wenn ```a``` und ```b``` **un**gleich sind.  \\nSind ```a``` und ```b``` **Objekte**, so ergibt ```a != b``` dann ```true```, wenn ```a``` und ```b``` **nicht** auf das **identische** Objekt zeigen.  \\n```!=``` nennt man **Ungleich-Operator**.\",\r\n        \"+=\": \"```\\na += b\\n(Kurzschreibweise für a = a + b)\\n```  \\nbewirkt, dass der Wert von ```a``` um den Wert von ```b``` **erhöht** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"-=\": \"```\\na -= b\\n(Kurzschreibweise für a = a - b)\\n```  \\nbewirkt, dass der Wert von ```a``` um den Wert von ```b``` **erniedrigt** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"*=\": \"```\\na *= b\\n(Kurzschreibweise für a = a * b)\\n```  \\nbewirkt, dass der Wert von ```a``` mit dem Wert von ```b``` **multipliziert** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"/=\": \"```\\na /= b\\n(Kurzschreibweise für a = a / b)\\n```  \\nbewirkt, dass der Wert von ```a``` durch den Wert von ```b``` **dividiert** wird. Das Ergebnis wird in die Variable ```a``` geschrieben.\",\r\n        \"++\": \"```\\na++\\n(Kurzschreibweise für a = a + 1)\\n```  \\nbewirkt, dass der Wert von ```a``` um eins erhöht wird.\",\r\n        \"--\": \"```\\na--\\n(Kurzschreibweise für a = a - 1)\\n```  \\nbewirkt, dass der Wert von ```a``` um eins eniedrigt wird.\",\r\n        \"=\": \"```\\na = Term\\n```  \\nberechnet den Wert des Terms und weist ihn der Variablen ```a``` zu.  \\n**Vorsicht:**  \\nVerwechsle ```=```(**Zuweisungsoperator**) nicht mit ```==```(**Vergleichsoperator**)!\",\r\n        \"!\": \"```\\n!a\\n```  \\nergibt genau dann ```true```, wenn ```a``` ```false``` ergibt.  \\n```!``` spricht man '**nicht**'.\",\r\n        \"public\": \"```\\npublic\\n```  \\nAttribute und Methoden, die als ```public``` deklariert werden, sind überall (auch außerhalb der Klasse) sichtbar.\",\r\n        \"private\": \"```\\nprivate\\n```  \\nAttribute und Methoden, die als ```private``` deklariert werden, sind nur innerhalb von Methoden derselben Klasse sichtbar.\",\r\n        \"protected\": \"```\\nprotected\\n```  \\nAttribute und Methoden, die als ```protected``` deklariert werden, sind nur innerhalb von Methoden derselben Klasse oder innerhalb von Methoden von Kindklassen sichtbar.\",\r\n        \"return\": \"```\\nreturn Term\\n```  \\nbewirkt, dass die Methode verlassen wird und der Wert des Terms an die aufrufende Stelle zurückgegeben wird.\",\r\n        \"break\": \"```\\nbreak;\\n```  \\ninnerhalb einer Schleife bewirkt, dass die Schleife sofort verlassen und mit den Anweisungen nach der Schleife fortgefahren wird.  \\n\"+\r\n        \"```break``` innerhalb einer ```switch```-Anweisung bewirkt, dass der Block der ```switch```-Anweisung verlassen wird.\",\r\n        \"class\": \"```\\nclass\\n```  \\nMit dem Schlüsselwort ```class``` werden Klassen definiert.\",\r\n        \"extends\": \"```\\nextends\\n```  \\n```class A extends B { ... }``` bedeutet, dass die Klasse A Unterklasse der Klasse B ist.\",\r\n        \"implements\": \"```\\nimplements\\n```  \\n```class A implements B { ... }``` bedeutet, dass die Klasse A das Interface B implementiert, d.h., dass sie alle Methoden besitzen muss, die in B definiert sind.\",\r\n        \"this\": \"```\\nthis\\n```  \\nInnerhalb einer Methodendefinition bezeichnet das Schlüsselwort ```this``` immer dasjenige Objekt, für das die Methode gerade ausgeführt wird.\",\r\n        \"var\": \"```\\nvar\\n```  \\nWird einer Variable beim Deklarieren sofort ein Startwert zugewiesen (z.B. Circle c = new Circle(100, 100, 10)), so kann statt des Datentyps das Schlüsselwort ```var``` verwendet werden (also var c = new Circle(100, 100, 10)).\",\r\n    }\r\n\r\n    constructor(private editor: Editor) {\r\n\r\n    }\r\n\r\n    provideHover(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken):\r\n        monaco.languages.ProviderResult<monaco.languages.Hover> {\r\n\r\n        let selection: monaco.Selection = this.editor.editor.getSelection();\r\n        \r\n        // if cursor is inside current selection then don't show hover, because editor.onDidChangeCursorPosition evaluates selected Text \r\n        // (see class Editor).\r\n        if(selection != null){\r\n            if(selection.startLineNumber != selection.endLineNumber || selection.startColumn != selection.endColumn){\r\n                if(\r\n                    (selection.startLineNumber < position.lineNumber || selection.startLineNumber == position.lineNumber && selection.startColumn <= position.column) && \r\n                    (selection.endLineNumber > position.lineNumber || selection.endLineNumber == position.lineNumber && selection.endColumn >= position.column) \r\n                ){\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        let module: Module = this.editor.main.getCurrentWorkspace()?.getModuleByMonacoModel(model);\r\n\r\n        if (module == null) {\r\n            return null;\r\n        }\r\n\r\n        for(let errorList of module.errors){\r\n            for(let error of errorList){\r\n                if(error.position.line == position.lineNumber && \r\n                    error.position.column <= position.column && \r\n                    error.position.column + error.position.length >= position.column){\r\n                        return null; // Show error-tooltip and don't show hover-tooltip\r\n                    }\r\n            }\r\n        }\r\n\r\n        let element = module.getElementAtPosition(position.lineNumber, position.column);\r\n\r\n        let declarationAsString = \"\";\r\n\r\n        if (element != null && element.identifier != \"var\") {\r\n            if (element instanceof Klass || element instanceof Method || element instanceof Interface\r\n                || element instanceof Attribute) {\r\n                declarationAsString = getDeclarationAsString(element);\r\n            } else if (element instanceof PrimitiveType) {\r\n                declarationAsString = \"```\\n\" + element.identifier + \"\\n```  \\nprimitiver Datentyp: \" + element.description + \"\";\r\n                return {\r\n                    range: null,\r\n                    contents: [{ value: declarationAsString }],\r\n                }\r\n            } else {\r\n                // Variable\r\n                let typeIdentifier: string = element?.type?.identifier;\r\n                if(element?.type instanceof Klass || element?.type instanceof Interface){\r\n                    typeIdentifier += \" \" + getGenericParameterDefinition(element.type);\r\n                }\r\n\r\n                if (typeIdentifier == null) {\r\n                    typeIdentifier = \"\";\r\n                } else {\r\n                    typeIdentifier += \" \";\r\n                }\r\n\r\n                declarationAsString = typeIdentifier + element?.identifier;\r\n            }\r\n        } else {\r\n            let word = this.getWordUnderCursor(model, position);\r\n            let desc = MyHoverProvider.keywordDescriptions[word];\r\n            if (desc != null) {\r\n                return {\r\n                    range: null,\r\n                    contents: [{ value: desc }],\r\n                }\r\n            }\r\n        }\r\n\r\n        let state = this.editor.main.getInterpreter().state;\r\n\r\n        let value: string = null;\r\n\r\n        if (state == InterpreterState.paused) {\r\n            let evaluator = this.editor.main.getCurrentWorkspace().evaluator;\r\n\r\n            let identifier: string = this.widenDeclaration(model, position, element?.identifier);\r\n\r\n            if(identifier == null){\r\n                return null;\r\n            }\r\n\r\n            let result = evaluator.evaluate(identifier);\r\n            if (result.error == null && result.value != null) {\r\n                value = result.value.type.debugOutput(result.value);\r\n                declarationAsString = identifier;\r\n            }\r\n\r\n        }\r\n\r\n        let contents = [];\r\n\r\n        if (value == null && declarationAsString.length == 0) {\r\n            return null;\r\n        }\r\n\r\n        if (value != null) {\r\n            if (value.length + declarationAsString.length > 40) {\r\n                contents.push({ value: '```\\n' + declarationAsString + ' ==\\n```' });\r\n                contents.push({ value: '```\\n' + value.replace(/&nbsp;/g, \" \") + '\\n```' });\r\n            } else {\r\n                contents.push({ value: '```\\n' + declarationAsString + \" == \" + value.replace(/&nbsp;/g, \" \") + '\\n```' });\r\n            }\r\n        } else {\r\n            contents.push({ value: '```\\n' + declarationAsString + '\\n```' });\r\n        }\r\n\r\n        let range = null;\r\n\r\n        return {\r\n            range: range,\r\n            contents: contents,\r\n        }\r\n\r\n    }\r\n\r\n    getWordUnderCursor(model: monaco.editor.ITextModel, position: monaco.Position)\r\n         : string {\r\n        \r\n        let pos = model.getValueLengthInRange({\r\n            startColumn: 0,\r\n            startLineNumber: 0,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column\r\n        });\r\n\r\n        let text = model.getValue();\r\n\r\n        let word = \"\";\r\n\r\n        let end = pos;\r\n        while (end < text.length && this.isInsideIdentifierOrArrayDescriptor(text.charAt(end))) {\r\n            end++;\r\n        }\r\n\r\n        let begin = pos;\r\n        while (begin > 0 && this.isInsideIdentifierOrArrayDescriptor(text.charAt(begin - 1))) {\r\n            begin--;\r\n        }\r\n\r\n        if (end - begin > 1) {\r\n            word = text.substring(begin, end);\r\n        } else {\r\n            end = pos;\r\n            while (end < text.length && this.isInsideOperator(text.charAt(end))) {\r\n                end++;\r\n            }\r\n    \r\n            begin = pos;\r\n            while (begin > 0 && this.isInsideOperator(text.charAt(begin - 1))) {\r\n                begin--;\r\n            }\r\n    \r\n            if (end - begin > 0) {\r\n                word = text.substring(begin, end);\r\n            }\r\n        }\r\n\r\n        return word;\r\n\r\n    }\r\n\r\n    widenDeclaration(model: monaco.editor.ITextModel, position: monaco.Position,\r\n        identifier: string): string {\r\n\r\n        let pos = model.getValueLengthInRange({\r\n            startColumn: 0,\r\n            startLineNumber: 0,\r\n            endLineNumber: position.lineNumber,\r\n            endColumn: position.column\r\n        });\r\n\r\n        let text = model.getValue();\r\n\r\n        let end = pos;\r\n        while (end < text.length && this.isInsideIdentifierOrArrayDescriptor(text.charAt(end))) {\r\n            end++;\r\n        }\r\n\r\n        let begin = pos;\r\n        while (begin > 0 && this.isInsideIdentifierChain(text.charAt(begin - 1))) {\r\n            begin--;\r\n        }\r\n\r\n        let lenght: number = identifier?.length == null ? 1 : identifier.length;\r\n\r\n        if (end - begin > length) {\r\n            return text.substring(begin, end);\r\n        }\r\n\r\n        return identifier;\r\n    }\r\n\r\n    isInsideIdentifierChain(t: string) {\r\n\r\n        return t.toLocaleLowerCase().match(/[a-z0-9äöüß_\\[\\]\\.]/i);\r\n\r\n    }\r\n\r\n    isInsideOperator(t: string) {\r\n\r\n        return t.toLocaleLowerCase().match(/[!%<>=\\+\\-\\*\\/]/i);\r\n\r\n    }\r\n\r\n    isInsideIdentifierOrArrayDescriptor(t: string) {\r\n\r\n        return t.toLocaleLowerCase().match(/[a-z0-9äöüß\\[\\]]/i);\r\n\r\n    }\r\n\r\n\r\n}","import { convertPxToNumber } from \"../../../tools/HtmlTools.js\";\r\n\r\nexport class ZoomControl {\r\n    \r\n    public static preventFading:boolean = false;\r\n\r\n    position: number = 0;\r\n    yMax: number;\r\n    $grip: JQuery<HTMLElement>;\r\n    $zoomcontrolDisplay: JQuery<HTMLElement>;\r\n\r\n    gripHeight: number = 10;\r\n    overallHeight: number = 150;\r\n\r\n    zoomMin: number = 0.2;\r\n    zoomMax: number = 2;\r\n\r\n\r\n    constructor($parentElement: JQuery<HTMLElement>, private callback?: (zoomfactor: number) => void){\r\n        let $zoomcontrolOuter = jQuery('<div class=\"jo_zoomcontrol-outer\" title=\"Zoom\" draggable=\"false\"></div>');\r\n        $parentElement.append($zoomcontrolOuter);\r\n        let $zoomcontrolBar = jQuery('<div class=\"jo_zoomcontrol-bar\" draggable=\"false\"></div>');\r\n        $zoomcontrolOuter.append($zoomcontrolBar);\r\n        this.$grip = jQuery('<div class=\"jo_zoomcontrol-grip\" draggable=\"false\"></div>');\r\n        $zoomcontrolOuter.append(this.$grip);\r\n        this.$zoomcontrolDisplay = jQuery('<div class=\"jo_zoomcontrol-display\"></div>');\r\n        this.$grip.append(this.$zoomcontrolDisplay);\r\n\r\n        let mousedownY: number;\r\n        let oldPosition: number;\r\n        let that = this;\r\n        that.overallHeight = convertPxToNumber($zoomcontrolOuter.css('height'));\r\n        that.gripHeight = convertPxToNumber(that.$grip.css('height'));\r\n        that.yMax = that.overallHeight - that.gripHeight;\r\n\r\n        let mousePointer = window.PointerEvent ? \"pointer\" : \"mouse\";\r\n\r\n        $zoomcontrolBar.on(mousePointer + 'down', (e) => {\r\n\r\n            let y = e.pageY - $zoomcontrolOuter.offset().top - 4;\r\n            that.setZoom(y);\r\n            that.$grip.css('top', y + 'px');\r\n            //@ts-ignore\r\n            that.$grip.trigger(mousePointer + 'down', [e.clientY]);\r\n\r\n        });\r\n        \r\n        \r\n        this.$grip.on(mousePointer + 'down', (e, y) => {\r\n            if(y == null) y = e.clientY;\r\n            mousedownY = y;\r\n            oldPosition = that.position;\r\n            this.$zoomcontrolDisplay.show();\r\n\r\n            jQuery(document).on(mousePointer + 'move.zoomcontrol', (e)=>{\r\n                let deltaY = e.clientY - mousedownY;\r\n                that.setZoom(oldPosition + deltaY);\r\n            });\r\n\r\n            jQuery(document).on(mousePointer + 'up.zoomcontrol', () => {\r\n                jQuery(document).off(mousePointer + 'up.zoomcontrol');\r\n                jQuery(document).off(mousePointer + 'move.zoomcontrol');\r\n                this.$zoomcontrolDisplay.hide();\r\n            });\r\n\r\n            e.stopPropagation();\r\n\r\n        });\r\n\r\n        $parentElement.on(mousePointer + \"enter\", (e) => {\r\n            if(!ZoomControl.preventFading)\r\n            $zoomcontrolOuter.fadeIn();\r\n        });\r\n        \r\n        $parentElement.on(mousePointer + \"leave\", (e) => {\r\n            if(!ZoomControl.preventFading)\r\n            $zoomcontrolOuter.fadeOut();\r\n        });\r\n\r\n        let factor = (1.0 - this.zoomMin)/(this.zoomMax - this.zoomMin);\r\n        this.position = factor*(this.overallHeight - this.gripHeight);\r\n        this.$grip.css('top', this.position + \"px\");\r\n    }\r\n\r\n    setZoom(newPosition: number){\r\n\r\n        if(newPosition < 0){\r\n            newPosition = 0;\r\n        }\r\n\r\n        if(newPosition > this.yMax){\r\n            newPosition = this.yMax;\r\n        }\r\n\r\n        this.position = newPosition;\r\n\r\n        this.$grip.css('top', newPosition + \"px\");\r\n\r\n        let zoomfactor = newPosition/(this.overallHeight - this.gripHeight);\r\n        zoomfactor = this.zoomMin + zoomfactor*(this.zoomMax - this.zoomMin);\r\n\r\n        let zfs = Math.round(zoomfactor * 100) + \" %\";\r\n        this.$zoomcontrolDisplay.html(zfs);\r\n\r\n        if(this.callback != null){\r\n            this.callback(zoomfactor);\r\n        }\r\n\r\n    }\r\n\r\n}","import { ZoomControl } from \"./ZoomControl.js\";\r\nimport { ClassBox } from \"./classdiagram/ClassBox.js\";\r\nimport { Rectangle, Point } from \"./classdiagram/Router.js\";\r\nimport { DiagramElement } from \"./DiagramElement.js\";\r\nimport { Main } from \"../../Main.js\";\r\nimport { MainBase } from \"../../MainBase.js\";\r\n\r\nexport var DiagramUnitCm = 0.2; // in cm\r\n\r\nexport class Diagram {\r\n\r\n    zoomControl: ZoomControl;\r\n    zoomfactor: number = 1.0;\r\n\r\n    $canvas: JQuery<HTMLElement>;\r\n    svgElement: Element;\r\n\r\n    $menuButton: JQuery<HTMLElement>;\r\n\r\n    defs: Element;\r\n    style: Element;\r\n\r\n    inlineStyles: { [selector: string]: { [key: string]: string } } = {};\r\n    marginCm = 1.6;\r\n    minDistance = 2.0;\r\n    minWidthHeightCm = 10;\r\n    widthCm = this.minWidthHeightCm;\r\n    heightCm = this.minWidthHeightCm;\r\n\r\n    $centerRectangle: JQuery<SVGElement>;\r\n\r\n    constructor($htmlElement: JQuery<HTMLElement>, public main: MainBase){\r\n\r\n        this.$menuButton = jQuery('<div class=\"jo_classDiagram_Menubutton jo_button jo_active img_menu-three-bars\"></div>');\r\n        $htmlElement.append(this.$menuButton);\r\n\r\n        let $scrollpane = jQuery('<div></div>');\r\n        $htmlElement.append($scrollpane);\r\n        $scrollpane.addClass('jo_scrollable');\r\n        $scrollpane.css({overflow: \"auto\", position: \"relative\", width: \"100%\", height: \"100%\"});\r\n\r\n        this.$canvas = jQuery('<div class=\"jo_diagram-canvas\"></div>');\r\n        $scrollpane.append(this.$canvas);\r\n        this.zoomControl = new ZoomControl($htmlElement, (factor: number) => {\r\n            this.$canvas.css({\r\n                transform: \"scale(\" + factor + \")\"\r\n            });\r\n            this.zoomfactor = factor;\r\n        });\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        this.svgElement = document.createElementNS(ns, 'svg');\r\n        // jQuery(this.svgElement).css('pointer-events', 'none');\r\n        jQuery(this.svgElement).addClass(\"jo_diagram-svg svg_all_pointer_events\");\r\n\r\n        // this.insertStyleElement({\".svp_draggable\": {cursor: \"pointer\"}});\r\n\r\n        this.$canvas[0].appendChild(this.svgElement);\r\n\r\n        this.$centerRectangle = <any>jQuery(this.createElement(\"rect\", this.svgElement));\r\n\r\n        this.$centerRectangle.css({fill: \"#ffffff\", \"stroke\": \"none\"});\r\n\r\n        this.adjustCenterRectangle();\r\n\r\n        let $svgElement =  jQuery(this.svgElement);\r\n\r\n        let x: number;\r\n        let y: number;\r\n\r\n        $svgElement.on('mousedown', (ev1) => {\r\n            x = ev1.screenX;\r\n            y = ev1.screenY;\r\n            \r\n            jQuery(document).on('mousemove.diagram', (ev) => {\r\n                let dx = ev.screenX - x;\r\n                let dy = ev.screenY - y;\r\n                x = ev.screenX;\r\n                y = ev.screenY;\r\n                $scrollpane.scrollLeft($scrollpane.scrollLeft() - dx);\r\n                $scrollpane.scrollTop($scrollpane.scrollTop() - dy);\r\n            })\r\n\r\n            jQuery(document).on('mouseup.diagram', () => {\r\n                jQuery(document).off('mousemove.diagram');\r\n                jQuery(document).off('mouseup.diagram');\r\n            });\r\n\r\n\r\n        });\r\n\r\n\r\n    }    \r\n\r\n    adjustCenterRectangle(){\r\n        this.$centerRectangle.attr({\r\n            x: this.marginCm + \"cm\",\r\n            y: this.marginCm + \"cm\",\r\n            width: (this.widthCm - 2*this.marginCm) + \"cm\",    \r\n            height: (this.heightCm - 2*this.marginCm) + \"cm\"\r\n        });\r\n    }\r\n\r\n    setSize(widthCm: number, heightCm: number){\r\n        if(widthCm < this.minWidthHeightCm) widthCm = this.minWidthHeightCm;\r\n        if(heightCm < this.minWidthHeightCm) heightCm = this.minWidthHeightCm;\r\n\r\n        this.$canvas.css({\r\n            width: widthCm + \"cm\",\r\n            height: heightCm + \"cm\"\r\n        })\r\n\r\n        this.widthCm = widthCm;\r\n        this.heightCm = heightCm;\r\n\r\n        this.adjustCenterRectangle();\r\n    }\r\n\r\n    adjustSizeAndElements(diagramElements: DiagramElement[]): {isAdjusted: boolean}{\r\n\r\n        let xMin = 100000;\r\n        let yMin = 100000;\r\n        let xMax = -100000;\r\n        let yMax = -100000;\r\n\r\n        for(let rr of diagramElements){\r\n            if(xMin > rr.leftCm) xMin = rr.leftCm;\r\n            if(xMax < rr.leftCm + rr.widthCm) xMax = rr.leftCm + rr.widthCm;\r\n            if(yMin > rr.topCm) yMin = rr.topCm;\r\n            if(yMax < rr.topCm + rr.heightCm) yMax = rr.topCm + rr.heightCm;\r\n        }\r\n\r\n        xMin -= this.marginCm;\r\n        xMax += this.marginCm;\r\n        yMin -= this.marginCm;\r\n        yMax += this.marginCm;\r\n\r\n        let isAdjusted: boolean = false;\r\n        let newWidthCm = this.widthCm;\r\n        let newHeightCm = this.heightCm;\r\n\r\n        if(xMin < 0 || xMax > this.widthCm || (xMax - xMin <= this.widthCm && this.widthCm > this.minWidthHeightCm)){\r\n            let delta = 0;\r\n            newWidthCm = Math.max(this.minWidthHeightCm, xMax - xMin);\r\n\r\n            if(xMin < 0){\r\n                delta = -xMin;\r\n            }\r\n\r\n            if(xMin > 0 && xMax > newWidthCm){\r\n                delta = newWidthCm - xMax;\r\n            }\r\n            isAdjusted = delta != 0;\r\n\r\n            if(isAdjusted)\r\n            for(let rr of diagramElements){\r\n                rr.move(delta, 0, true, true);\r\n            }\r\n\r\n        }\r\n\r\n        if(yMin < 0 || yMax > this.heightCm || (yMax - yMin <= this.heightCm && this.heightCm > this.minWidthHeightCm)){\r\n            let delta = 0;\r\n            newHeightCm = Math.max(this.minWidthHeightCm, yMax - yMin);\r\n\r\n            if(yMin < 0){\r\n                delta = -yMin;\r\n            }\r\n\r\n            if(yMin > 0 && yMax > newHeightCm){\r\n                delta = newHeightCm - yMax;\r\n            }\r\n            isAdjusted = delta != 0;\r\n\r\n            if(isAdjusted)\r\n            for(let rr of diagramElements){\r\n                rr.move(0, delta, true, true);\r\n            }\r\n\r\n        }\r\n\r\n\r\n        this.setSize(newWidthCm, newHeightCm);\r\n        \r\n\r\n        return {isAdjusted: isAdjusted};\r\n\r\n    }\r\n\r\n    public insertStyleElement(styles: { [selector: string]: { [key: string]: string } } = null) {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n\r\n        if (this.style == null) {\r\n            this.defs = document.createElementNS(ns, 'defs');\r\n            this.style = document.createElementNS(ns, 'style');\r\n            this.defs.appendChild(this.style);\r\n            this.svgElement.appendChild(this.defs);\r\n        }\r\n\r\n        if (styles != null) {\r\n            this.inlineStyles = styles;\r\n            this.refreshInlineStyles();\r\n        }\r\n\r\n    }\r\n\r\n    public createElement(name: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        let $element = jQuery(document.createElementNS(ns, name));\r\n\r\n        if(attributes != null) $element.attr(attributes);\r\n\r\n        if(parent != null) parent.appendChild($element[0]);\r\n\r\n        return $element;\r\n\r\n    }\r\n\r\n    private refreshInlineStyles() {\r\n\r\n        let s: string = \"\";\r\n\r\n        for (let selector in this.inlineStyles) {\r\n            let stylesForSelector = this.inlineStyles[selector];\r\n            if (stylesForSelector != null) {\r\n                s += selector + \"{\\n\";\r\n                for (let key in stylesForSelector) {\r\n                    s += \"   \" + key + \":\" + stylesForSelector[key] + \";\\n\";\r\n                }\r\n                s += \"}\\n\";\r\n            } else {\r\n                s += selector + \"\\n\";\r\n            }\r\n        }\r\n\r\n        this.style.textContent = s;\r\n\r\n    }\r\n\r\n    findFreeSpace(elements: DiagramElement[], width: number, height: number, minDistance: number): Point {\r\n\r\n        let radius = 0;\r\n        let fertig: boolean = false;\r\n        let xCm = 0;\r\n        let yCm = 0;\r\n        while(!fertig){\r\n\r\n            let y = radius;\r\n            let x = 0;\r\n            for(x = 0; x <= radius; x++){\r\n                xCm = this.marginCm + x * DiagramUnitCm;\r\n                yCm = this.marginCm + y * DiagramUnitCm;\r\n                if(this.isFree(elements, width, height, xCm, yCm, minDistance)){\r\n                    fertig = true;\r\n                    break;\r\n                }\r\n            }\r\n            if(fertig) break;\r\n            x--;\r\n            for(y = 0; y <= radius - 1; y++){\r\n                xCm = this.marginCm + x * DiagramUnitCm;\r\n                yCm = this.marginCm + y * DiagramUnitCm;\r\n                if(this.isFree(elements, width, height, xCm, yCm, minDistance)){\r\n                    fertig = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            radius += 2;\r\n\r\n        }\r\n\r\n        return {x: xCm, y: yCm};\r\n\r\n    }\r\n\r\n    isFree(elements: DiagramElement[], widthCm: number, heightCm: number, leftCm: number, topCm: number, minDistance: number):boolean {\r\n\r\n        for(let element of elements){\r\n\r\n            let insideX = Math.abs(element.leftCm + element.widthCm/2 - leftCm - widthCm/2) \r\n                       <= (element.widthCm + widthCm)/2 + minDistance;\r\n\r\n            let insideY = Math.abs(element.topCm + element.heightCm/2 - topCm - heightCm/2) <= (element.heightCm + heightCm)/2 + minDistance;\r\n\r\n            if(insideX && insideY) return false;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n\r\n}","import { DiagramUnitCm, Diagram } from \"./Diagram.js\"; \r\nimport { Rectangle } from \"./classdiagram/Router.js\";\r\n\r\nexport enum Alignment {\r\n    left, center, right\r\n}\r\n\r\nexport type TextLine = {\r\n    type: \"text\",\r\n    text: string,\r\n    tooltip?: string,\r\n    alignment?: Alignment,\r\n    bold?: boolean,\r\n    italics?: boolean,\r\n    textHeightCm?: number,\r\n    textWidthCm?: number,\r\n    yCm?: number\r\n    $element?: JQuery<SVGTextElement>,\r\n    onClick?: () => void\r\n}\r\n\r\nexport type HorizontalLine = {\r\n    type: \"line\",\r\n    $element?: JQuery<SVGLineElement>,\r\n    thicknessCm: number,\r\n    yCm?: number\r\n}\r\n\r\nexport abstract class DiagramElement {\r\n\r\n    public static cmPerPx: number = 2.54/96;\r\n\r\n    public $element: JQuery<Element>;\r\n\r\n    public leftCm: number = 0; // x-Koordinate in cm\r\n    public topCm: number = 0; // y-Koordinate in cm\r\n \r\n    public widthCm: number;\r\n    public heightCm: number; \r\n\r\n    protected lines: (TextLine | HorizontalLine)[] = [];\r\n\r\n    public backgroundColor: string = \"#ffffff\";\r\n\r\n    constructor(protected parent: Element) {\r\n\r\n    }\r\n\r\n    getRoutingRectangle(): Rectangle{\r\n        return {\r\n            left: Math.round(this.leftCm/DiagramUnitCm),\r\n            top: Math.round(this.topCm/DiagramUnitCm),\r\n            width: Math.round(this.widthCm/DiagramUnitCm),\r\n            height: Math.round(this.heightCm/DiagramUnitCm) \r\n        };\r\n    }\r\n\r\n    public show(){\r\n        if(this.$element == null) return;\r\n        this.$element.show();\r\n    }\r\n\r\n    public hide(){\r\n        if(this.$element == null) return;\r\n        this.$element.hide();\r\n    }\r\n\r\n    detach() {\r\n        if(this.$element == null) return;\r\n        this.$element.detach();        \r\n    }\r\n\r\n    remove() {\r\n        if(this.$element == null) return;\r\n        this.$element.remove();\r\n        this.$element = null;        \r\n    }\r\n\r\n    appendTo($element: JQuery<Element>){\r\n        $element.append(this.$element);\r\n    }\r\n\r\n    public clear(){\r\n        if(this.$element == null) return;\r\n        this.$element.empty();\r\n        this.lines = [];\r\n    }\r\n\r\n    public move(xCm: number, yCm: number, withRaster: boolean, adjustToRaster: boolean = false) {\r\n        this.leftCm += xCm;\r\n        this.topCm += yCm;\r\n\r\n        let x = this.leftCm;\r\n        let y = this.topCm;\r\n\r\n        if(withRaster){\r\n            x = Math.round(x/DiagramUnitCm)*DiagramUnitCm;\r\n            y = Math.round(y/DiagramUnitCm)*DiagramUnitCm;\r\n        }\r\n\r\n        if(adjustToRaster){\r\n            this.leftCm = x;\r\n            this.topCm = y;\r\n        }\r\n\r\n        jQuery(this.$element).css(\"transform\", \"translate(\" + x + \"cm,\" + y + \"cm)\");\r\n    }\r\n\r\n    public moveTo(xCm: number, yCm: number, withRaster: boolean) {\r\n        this.move(xCm - this.leftCm, yCm - this.topCm, withRaster);\r\n    }\r\n\r\n    public createElement(name: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        let $element = jQuery(document.createElementNS(ns, name));\r\n\r\n        if(attributes != null) $element.attr(attributes);\r\n\r\n        if(parent != null) parent.appendChild($element[0]);\r\n\r\n        return $element;\r\n\r\n    }\r\n\r\n    public createTextElement(text: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n            let $element: JQuery<Element> = this.createElement(\"text\", parent, {\r\n                font: \"16px Roboto\",\r\n                \"font-family\": \"sans-serif\",\r\n                fill: \"#000\",\r\n                \"alignment-baseline\":\"hanging\",\r\n                \"dominant-baseline\":\"hanging\"\r\n            });\r\n\r\n            if(attributes != null) $element.attr(attributes);\r\n\r\n            $element.text(text);\r\n\r\n            return $element;\r\n    }\r\n\r\n    public getTextMetrics(textElement: JQuery<SVGTextElement>):{height: number, width: number}{\r\n        let bbox:DOMRect = textElement[0].getBBox();\r\n        \r\n        return {\r\n            height: bbox.height * DiagramElement.cmPerPx,\r\n            width: bbox.width * DiagramElement.cmPerPx\r\n        }\r\n\r\n    }\r\n\r\n    public addTextLine(line: TextLine | HorizontalLine){\r\n\r\n        this.lines.push(line);\r\n\r\n        if(line.type == \"text\"){\r\n            if(line.alignment == null) line.alignment = Alignment.left;\r\n            if(line.bold == null) line.bold = false;\r\n            if(line.italics == null) line.italics = false;\r\n        }\r\n\r\n    }\r\n\r\n    public render(){\r\n\r\n        let $group = this.$element;\r\n        if($group == null){\r\n            $group = this.createElement(\"g\", this.parent);\r\n            $group.addClass(\"svg_draggable\");\r\n            $group.addClass(\"svg_all_pointer_events\");\r\n            this.$element = $group;\r\n            jQuery(this.$element).css(\"transform\", \"translate(\" + this.leftCm + \"cm,\" + this.topCm + \"cm)\");\r\n        }\r\n\r\n        let $rect = this.createElement(\"rect\", $group[0]);\r\n\r\n        let textPosYCm: number = 0.1;\r\n        let maxWidthCm: number = 0;\r\n\r\n        let first: boolean = true;\r\n        for(let line of this.lines){\r\n            if(line.type == \"text\"){\r\n                if(first) textPosYCm += 0.1;\r\n                first = false;\r\n                line.yCm = textPosYCm;\r\n                line.$element = <JQuery<SVGTextElement>>this.createTextElement(line.text, $group[0], {\r\n                    \"font-weight\" : line.bold?\"bold\":\"normal\",\r\n                    \"font-size\": \"12pt\",\r\n                    \"font-style\": line.italics?\"italic\":\"normal\",\r\n                    \"text-anchor\": line.alignment == Alignment.left ? \"start\" : line.alignment == Alignment.center ? \"middle\" : \"end\",\r\n                    \"cursor\": line.onClick == null ? \"\" : \"pointer\"\r\n                } );\r\n\r\n                line.$element.css(\"transform\", \"translate(0cm,0cm)\");\r\n                // line.$element.css(\"transform\", \"translate(0cm,\" + textPosYCm + \"cm)\");\r\n                // if(line.onClick != null){\r\n                //     line.$element.addClass(\"clickable\");\r\n                //     line.$element.on(\"mousedown\", (event) => {\r\n                //         //@ts-ignore\r\n                //         line.onClick();\r\n                //         event.stopPropagation();\r\n                //     })\r\n                // }\r\n                let metrics = this.getTextMetrics(line.$element);\r\n                line.textHeightCm = metrics.height;\r\n                line.textWidthCm = metrics.width;\r\n                maxWidthCm = Math.max(maxWidthCm, line.textWidthCm);\r\n                textPosYCm += line.textHeightCm;\r\n                if(line.tooltip != null){\r\n                    let $tooltip = this.createElement(\"title\", line.$element[0]);\r\n                    $tooltip.text(line.tooltip);\r\n                }\r\n            } else {\r\n                line.yCm = textPosYCm + line.thicknessCm/2;\r\n                textPosYCm += line.thicknessCm + 0.1;\r\n                first = true;\r\n            }\r\n        }\r\n\r\n        let width = 2 * 0.05 + 2*0.2 + maxWidthCm;\r\n        this.widthCm = (Math.trunc(width/DiagramUnitCm) + 1)*DiagramUnitCm;\r\n        this.heightCm = (Math.trunc(textPosYCm/DiagramUnitCm) + 1)*DiagramUnitCm;\r\n\r\n        let textLeft = 0.05 + 0.2;\r\n        let textCenter = width/2;\r\n        let textRight = width - textLeft;\r\n\r\n        $rect.css({\r\n            width: this.widthCm + \"cm\",\r\n            height: this.heightCm + \"cm\",\r\n            fill: this.backgroundColor,\r\n            stroke: \"#000\",\r\n            \"stroke-width\": \"0.05cm\"\r\n        });\r\n\r\n\r\n        for(let line of this.lines){\r\n            if(line.type == \"text\"){\r\n\r\n                let x: number;\r\n                switch(line.alignment){\r\n                    case Alignment.center: x = textCenter; break;\r\n                    case Alignment.left: x = textLeft; break;\r\n                    case Alignment.right: x = textRight; break;\r\n                }\r\n\r\n                // Unfortunately we have to wrap Text-Elements in <g> due to a bug in safari,\r\n                // see \r\n                //@ts-ignore\r\n                let $g = this.createElement(\"g\", $group[0]);\r\n                $g.append(line.$element);\r\n                //@ts-ignore\r\n                line.$element = $g;\r\n\r\n                line.$element.css(\"transform\", \"translate(\" + x + \"cm,\"+line.yCm + \"cm)\");\r\n\r\n                if(line.onClick != null){\r\n                    line.$element.addClass(\"clickable\");\r\n                    line.$element.on(\"mousedown\", (event) => {\r\n                        //@ts-ignore\r\n                        line.onClick();\r\n                        event.stopPropagation();\r\n                    })\r\n                }\r\n\r\n\r\n            } else {\r\n                line.$element = <JQuery<SVGLineElement>>this.createElement(\"line\", $group[0], {\r\n                    x1: \"0\",\r\n                    y1: line.yCm + \"cm\",\r\n                    x2: this.widthCm + \"cm\",\r\n                    y2: line.yCm + \"cm\"\r\n                });\r\n\r\n                line.$element.css({\r\n                    stroke: \"#000\",\r\n                    \"stroke-width\": line.thicknessCm + \"cm\"        \r\n                });\r\n\r\n            }\r\n        }\r\n\r\n\r\n        \r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Point } from \"./Router.js\";\r\nimport { DiagramArrow } from \"./DiagramArrow.js\";\r\nimport { DiagramUnitCm } from \"../Diagram.js\";\r\n\r\ntype Step = {r: number, f: number};\r\ntype Arrow = {\r\n    steps: Step[],\r\n    stroke: string,\r\n    fill: string,\r\n    \"stroke-dasharray\": string\r\n}\r\n\r\nexport class ArrowHead {\r\n\r\n    static rauteAlpha = 60;\r\n    static arrows: {[type: string]: Arrow} = {\r\n        \"inheritance\": {\r\n            steps: [{r: 150, f: 0.4}, {r: 120, f: 0.4}, {r: 120, f: 0.4}],\r\n            stroke: \"#000000\",\r\n            fill: \"#ffffff\",\r\n            \"stroke-dasharray\": undefined //\"4\"\r\n        },\r\n        \"realization\": {\r\n            steps: [{r: 150, f: 0.4}, {r: 120, f: 0.4}, {r: 120, f: 0.4}],\r\n            stroke: \"#000000\",\r\n            fill: \"#8080ff\",\r\n            \"stroke-dasharray\": \"4\"\r\n        },\r\n        \"composition\": {\r\n            steps: [{r: 90 + ArrowHead.rauteAlpha, f: 0.3}, {r: 180 - 2*ArrowHead.rauteAlpha, f: 0.3},\r\n                 {r: 2*ArrowHead.rauteAlpha, f: 0.3}, {r: 180 - 2*ArrowHead.rauteAlpha, f: 0.3}],\r\n            stroke: \"#000000\",\r\n            fill: \"#ffffff\",\r\n            \"stroke-dasharray\": undefined\r\n        },\r\n    }\r\n\r\n    static makeHead(position1Cm: Point, position2Cm: Point, type: string): {\r\n        path: string,\r\n        stroke: string,\r\n        fill: string,\r\n    } {\r\n\r\n        let dx = position2Cm.x - position1Cm.x;\r\n        let dy = position2Cm.y - position1Cm.y;\r\n\r\n        let d = Math.sqrt(dx*dx+dy*dy);\r\n        \r\n        if(d < 0.00001) return {path: \"\", stroke: \"none\", fill: \"none\"};\r\n\r\n        let ex = dx/d;\r\n        let ey = dy/d;\r\n\r\n        let path: string = \"M \" + position2Cm.x * DiagramUnitCm / DiagramArrow.cmPerPx \r\n            + \" \" + position2Cm.y * DiagramUnitCm / DiagramArrow.cmPerPx;\r\n\r\n        let arrow = this.arrows[type];\r\n\r\n        for(let step of arrow.steps){\r\n            let angle = step.r / 180 * Math.PI;\r\n            let ex1 = ex * Math.cos(angle) - ey * Math.sin(angle);\r\n            let ey1 = ex * Math.sin(angle) + ey * Math.cos(angle);\r\n            path += \" l \" + ex1 * step.f / DiagramArrow.cmPerPx + \" \" + ey1 * step.f / DiagramArrow.cmPerPx;\r\n            ex = ex1;\r\n            ey = ey1;\r\n        }\r\n\r\n        return {\r\n            path: path,\r\n            fill: arrow.fill,\r\n            stroke: arrow.stroke\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n}","import { DiagramUnitCm, Diagram } from \"../Diagram.js\";\r\nimport { RoutingArrow, Point } from \"./Router.js\";\r\nimport { ArrowHead } from \"./ArrowHead.js\";\r\n\r\nexport class DiagramArrow {\r\n\r\n    public static cmPerPx: number = 2.54 / 96;\r\n\r\n    public $element: JQuery<Element>;\r\n\r\n    constructor(protected parent: Element, private routingArrow: RoutingArrow, private color: string) {\r\n\r\n    }\r\n\r\n    public show() {\r\n        if (this.$element == null) return;\r\n        this.$element.show();\r\n    }\r\n\r\n    public hide() {\r\n        if (this.$element == null) return;\r\n        this.$element.hide();\r\n    }\r\n\r\n    detach() {\r\n        if (this.$element == null) return;\r\n        this.$element.detach();\r\n    }\r\n\r\n    remove() {\r\n        if (this.$element == null) return;\r\n        this.$element.remove();\r\n    }\r\n\r\n    appendTo($element: JQuery<Element>) {\r\n        $element.append(this.$element);\r\n    }\r\n\r\n    public clear() {\r\n        if (this.$element == null) return;\r\n        this.$element.empty();\r\n    }\r\n\r\n    public createElement(name: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let ns = 'http://www.w3.org/2000/svg';\r\n        let $element = jQuery(document.createElementNS(ns, name));\r\n\r\n        if (attributes != null) $element.attr(attributes);\r\n\r\n        if (parent != null) parent.appendChild($element[0]);\r\n\r\n        return $element;\r\n\r\n    }\r\n\r\n\r\n    public createTextElement(text: string, parent: Element = null, attributes?:\r\n        { [key: string]: string }): JQuery<Element> {\r\n\r\n        let $element: JQuery<Element> = this.createElement(\"text\", parent, {\r\n            font: \"16px Roboto\",\r\n            \"font-family\": \"sans-serif\",\r\n            fill: \"#000\",\r\n            \"alignment-baseline\": \"hanging\"\r\n        });\r\n\r\n        if (attributes != null) $element.attr(attributes);\r\n\r\n        $element.text(text);\r\n\r\n        return $element;\r\n    }\r\n\r\n    public getTextMetrics(textElement: JQuery<SVGTextElement>): { height: number, width: number } {\r\n        let bbox: DOMRect = textElement[0].getBBox();\r\n\r\n        return {\r\n            height: bbox.height * DiagramArrow.cmPerPx,\r\n            width: bbox.width * DiagramArrow.cmPerPx\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public render() {\r\n\r\n        let $group = this.$element;\r\n        if ($group == null) {\r\n            $group = this.createElement(\"g\", this.parent);\r\n            this.$element = $group;\r\n            $group.css(\"stroke\", this.color);\r\n        } else {\r\n            $group.empty();\r\n        }\r\n\r\n        let points = this.routingArrow.minimalPoints;\r\n        if (points == null || points.length < 2) {\r\n            return;\r\n        }\r\n\r\n        let path = \"M \" + this.getPathCoordinates(points[0]);\r\n\r\n        for (let i = 1; i < points.length; i++) {\r\n            path += \" L \" + this.getPathCoordinates(points[i]);\r\n        }\r\n\r\n        let arrowData = ArrowHead.arrows[this.routingArrow.arrowType];\r\n        let $path = this.createElement(\"path\", $group[0], { d: path });\r\n        $path.css({\r\n            // stroke: \"#000000\",\r\n            \"stroke-width\": \"0.2 cm\",\r\n            \"fill\": \"none\",\r\n            \"stroke-dasharray\": arrowData[\"stroke-dasharray\"]\r\n        });\r\n\r\n        while (points.length > 1 && points[points.length - 1].x == points[points.length - 2].x &&\r\n            points[points.length - 1].y == points[points.length - 2].y) {\r\n            points.pop();\r\n        }\r\n\r\n        if (points.length > 1 && this.routingArrow.endsOnArrowWithIdentifier == null) {\r\n            let head = ArrowHead.makeHead(points[points.length - 2], points[points.length - 1],\r\n                this.routingArrow.arrowType);\r\n\r\n            let $head = this.createElement(\"path\", $group[0], { d: head.path });\r\n            $head.css({\r\n                stroke: this.color,\r\n                \"stroke-width\": \"0.2 cm\",\r\n                \"fill\": head.fill\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    getPathCoordinates(point: Point): string {\r\n        let x = point.x * DiagramUnitCm / DiagramArrow.cmPerPx;\r\n        let y = point.y * DiagramUnitCm / DiagramArrow.cmPerPx;\r\n        return \"\" + x + \" \" + y;\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Compiler, CompilerStatus } from \"../compiler/Compiler.js\";\r\nimport { Module, File, ExportedWorkspace } from \"../compiler/parser/Module.js\";\r\nimport { Debugger } from \"../interpreter/Debugger.js\";\r\nimport { Interpreter, InterpreterState } from \"../interpreter/Interpreter.js\";\r\nimport { ActionManager } from \"../main/gui/ActionManager.js\";\r\nimport { BottomDiv } from \"../main/gui/BottomDiv.js\";\r\nimport { Editor } from \"../main/gui/Editor.js\";\r\nimport { ProgramControlButtons } from \"../main/gui/ProgramControlButtons.js\";\r\nimport { RightDiv } from \"../main/gui/RightDiv.js\";\r\nimport { MainBase } from \"../main/MainBase.js\";\r\nimport { Workspace } from \"../workspace/Workspace.js\";\r\nimport { JOScript } from \"./EmbeddedStarter.js\";\r\nimport { downloadFile, makeDiv, makeTabs, openContextMenu } from \"../tools/HtmlTools.js\";\r\nimport { EmbeddedSlider } from \"./EmbeddedSlider.js\";\r\nimport { EmbeddedFileExplorer } from \"./EmbeddedFileExplorer.js\";\r\nimport { TextPosition } from \"../compiler/lexer/Token.js\";\r\nimport { EmbeddedIndexedDB } from \"./EmbeddedIndexedDB.js\";\r\nimport { SemicolonAngel } from \"../compiler/parser/SemicolonAngel.js\";\r\nimport { TextPositionWithModule } from \"../compiler/types/Types.js\";\r\nimport { HitPolygonStore } from \"../runtimelibrary/graphics/PolygonStore.js\";\r\n\r\ntype JavaOnlineConfig = {\r\n    withFileList?: boolean,\r\n    withPCode?: boolean,\r\n    withConsole?: boolean,\r\n    withErrorList?: boolean,\r\n    withBottomPanel?: boolean,\r\n    speed?: number | \"max\",\r\n    id?: string,\r\n    hideStartPanel?: boolean,\r\n    hideEditor?: boolean,\r\n    libraries?: string[],\r\n    jsonFilename?: string\r\n}\r\n\r\nexport class MainEmbedded implements MainBase {\r\n\r\n    pixiApp: PIXI.Application;\r\n\r\n    isEmbedded(): boolean { return true; }\r\n\r\n    jumpToDeclaration(module: Module, declaration: TextPositionWithModule) { };\r\n\r\n    getCompiler(): Compiler {\r\n        return this.compiler;\r\n    }\r\n    getInterpreter(): Interpreter {\r\n        return this.interpreter;\r\n    }\r\n    getCurrentWorkspace(): Workspace {\r\n        return this.currentWorkspace;\r\n    }\r\n    getDebugger(): Debugger {\r\n        return this.debugger;\r\n    }\r\n    getMonacoEditor(): monaco.editor.IStandaloneCodeEditor {\r\n        return this.editor.editor;\r\n    }\r\n\r\n    getRightDiv(): RightDiv {\r\n        return this.rightDiv;\r\n    }\r\n\r\n    getBottomDiv(): BottomDiv {\r\n        return this.bottomDiv;\r\n    }\r\n\r\n    getActionManager(): ActionManager {\r\n        return this.actionManager;\r\n    }\r\n\r\n    getCurrentlyEditedModule(): Module {\r\n        if (this.config.withFileList) {\r\n            return this.fileExplorer.currentFile?.module;\r\n        } else {\r\n            return this.currentWorkspace.moduleStore.getFirstModule();\r\n        }\r\n    }\r\n\r\n    config: JavaOnlineConfig;\r\n\r\n    editor: Editor;\r\n    programPointerDecoration: string[] = [];\r\n    programPointerModule: Module;\r\n\r\n    currentWorkspace: Workspace;\r\n    actionManager: ActionManager;\r\n\r\n    compiler: Compiler;\r\n\r\n    interpreter: Interpreter;\r\n    $runDiv: JQuery<HTMLElement>;\r\n\r\n    debugger: Debugger;\r\n    $debuggerDiv: JQuery<HTMLElement>;\r\n\r\n    bottomDiv: BottomDiv;\r\n    $filesListDiv: JQuery<HTMLElement>;\r\n\r\n    $hintDiv: JQuery<HTMLElement>;\r\n    $monacoDiv: JQuery<HTMLElement>;\r\n    $resetButton: JQuery<HTMLElement>;\r\n\r\n    programIsExecutable = false;\r\n    version: number = 0;\r\n\r\n    timerHandle: any;\r\n\r\n    rightDiv: RightDiv;\r\n    $rightDivInner: JQuery<HTMLElement>;\r\n\r\n    fileExplorer: EmbeddedFileExplorer;\r\n\r\n    debounceDiagramDrawing: any;\r\n\r\n    indexedDB: EmbeddedIndexedDB;\r\n\r\n    compileRunsAfterCodeReset: number = 0;\r\n\r\n    semicolonAngel: SemicolonAngel;\r\n\r\n    constructor($div: JQuery<HTMLElement>, private scriptList: JOScript[]) {\r\n\r\n        this.readConfig($div);\r\n\r\n        this.initGUI($div);\r\n\r\n        this.initScripts();\r\n\r\n        if (!this.config.hideStartPanel) {\r\n            this.indexedDB = new EmbeddedIndexedDB();\r\n            this.indexedDB.open(() => {\r\n\r\n                if (this.config.id != null) {\r\n                    this.readScripts();\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        this.semicolonAngel = new SemicolonAngel(this);\r\n\r\n    }\r\n\r\n    initScripts() {\r\n\r\n        this.fileExplorer?.removeAllFiles();\r\n\r\n        this.initWorkspace(this.scriptList);\r\n\r\n        if (this.config.withFileList) {\r\n            this.fileExplorer = new EmbeddedFileExplorer(this.currentWorkspace.moduleStore, this.$filesListDiv, this);\r\n            this.fileExplorer.setFirstFileActive();\r\n            this.scriptList.filter((script) => script.type == \"hint\").forEach((script) => this.fileExplorer.addHint(script));\r\n        } else {\r\n            this.setModuleActive(this.currentWorkspace.moduleStore.getFirstModule());\r\n        }\r\n\r\n    }\r\n\r\n\r\n    readConfig($div: JQuery<HTMLElement>) {\r\n        let configJson: string | object = $div.data(\"java-online\");\r\n        if (configJson != null && typeof configJson == \"string\") {\r\n            this.config = JSON.parse(configJson.split(\"'\").join('\"'));\r\n        } else {\r\n            this.config = {}\r\n        }\r\n\r\n        if (this.config.hideEditor == null) this.config.hideEditor = false;\r\n        if (this.config.hideStartPanel == null) this.config.hideStartPanel = false;\r\n\r\n        if (this.config.withBottomPanel == null) {\r\n            this.config.withBottomPanel = this.config.withConsole || this.config.withPCode || this.config.withFileList || this.config.withErrorList;\r\n        }\r\n\r\n        if (this.config.hideEditor) {\r\n            this.config.withBottomPanel = false;\r\n            this.config.withFileList = false;\r\n            this.config.withConsole = false;\r\n            this.config.withPCode = false;\r\n            this.config.withErrorList = false;\r\n        }\r\n\r\n        if (this.config.withBottomPanel) {\r\n            if (this.config.withFileList == null) this.config.withFileList = true;\r\n            if (this.config.withPCode == null) this.config.withPCode = true;\r\n            if (this.config.withConsole == null) this.config.withConsole = true;\r\n            if (this.config.withErrorList == null) this.config.withErrorList = true;\r\n        }\r\n\r\n        if (this.config.speed == null) this.config.speed = 9;\r\n        if (this.config.libraries == null) this.config.libraries = [];\r\n        if(this.config.jsonFilename == null) this.config.jsonFilename = \"workspace.json\";\r\n\r\n    }\r\n\r\n    setModuleActive(module: Module) {\r\n\r\n        if(module == null) return;\r\n\r\n        if (this.config.withFileList && this.fileExplorer.currentFile != null) {\r\n            this.fileExplorer.currentFile.module.editorState = this.getMonacoEditor().saveViewState();\r\n        }\r\n\r\n        if (this.config.withFileList) {\r\n            this.fileExplorer.markFile(module);\r\n        }\r\n\r\n        /**\r\n         * WICHTIG: Die Reihenfolge der beiden Operationen ist extrem wichtig.\r\n         * Falls das Model im readonly-Zustand gesetzt wird, funktioniert <Strg + .> \r\n         * nicht und die Lightbulbs werden nicht angezeigt, selbst dann, wenn\r\n         * später readonly = false gesetzt wird.\r\n         */\r\n        this.getMonacoEditor().updateOptions({\r\n            readOnly: false,\r\n            lineNumbersMinChars: 4\r\n        });\r\n        this.editor.editor.setModel(module.model);\r\n\r\n\r\n        if (module.editorState != null) {\r\n            this.getMonacoEditor().restoreViewState(module.editorState);\r\n        }\r\n\r\n        module.renderBreakpointDecorators();\r\n\r\n    }\r\n\r\n    eraseDokuwikiSearchMarkup(text: string): string {\r\n        return text.replace(/<span class=\"search\\whit\">(.*?)<\\/span>/g, \"$1\");\r\n    }\r\n\r\n    readScripts() {\r\n\r\n        let modules = this.currentWorkspace.moduleStore.getModules(false);\r\n\r\n        let that = this;\r\n\r\n        this.indexedDB.getScript(this.config.id, (scriptListJSon) => {\r\n            if (scriptListJSon == null) {\r\n                setInterval(() => {\r\n                    that.saveScripts();\r\n                }, 1000);\r\n            } else {\r\n\r\n                let scriptList: string[] = JSON.parse(scriptListJSon);\r\n                let countDown = scriptList.length;\r\n\r\n                for (let module of modules) {\r\n                    that.fileExplorer?.removeModule(module);\r\n                    that.removeModule(module);\r\n                }\r\n\r\n                for (let name of scriptList) {\r\n\r\n                    let scriptId = this.config.id + name;\r\n                    this.indexedDB.getScript(scriptId, (script) => {\r\n                        if (script != null) {\r\n\r\n                            script = this.eraseDokuwikiSearchMarkup(script);\r\n\r\n                            let module = that.addModule({\r\n                                title: name,\r\n                                text: script,\r\n                                type: \"java\"\r\n                            });\r\n\r\n                            that.fileExplorer?.addModule(module);\r\n                            that.$resetButton.fadeIn(1000);\r\n\r\n                            // console.log(\"Retrieving script \" + scriptId);\r\n                        }\r\n                        countDown--;\r\n                        if (countDown == 0) {\r\n                            setInterval(() => {\r\n                                that.saveScripts();\r\n                            }, 1000);\r\n                            that.fileExplorer?.setFirstFileActive();\r\n                            if (that.fileExplorer == null) {\r\n                                let modules = that.currentWorkspace.moduleStore.getModules(false);\r\n                                if (modules.length > 0) that.setModuleActive(modules[0]);\r\n                            }\r\n                        }\r\n                    })\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    saveScripts() {\r\n\r\n        let modules = this.currentWorkspace.moduleStore.getModules(false);\r\n\r\n        let scriptList: string[] = [];\r\n        let oneNotSaved: boolean = false;\r\n\r\n        modules.forEach(m => oneNotSaved = oneNotSaved || !m.file.saved);\r\n\r\n        if (oneNotSaved) {\r\n\r\n            for (let module of modules) {\r\n                scriptList.push(module.file.name);\r\n                let scriptId = this.config.id + module.file.name;\r\n                this.indexedDB.writeScript(scriptId, module.getProgramTextFromMonacoModel());\r\n                module.file.saved = true;\r\n                // console.log(\"Saving script \" + scriptId);\r\n            }\r\n\r\n            this.indexedDB.writeScript(this.config.id, JSON.stringify(scriptList));\r\n        }\r\n\r\n    }\r\n\r\n    deleteScriptsInDB() {\r\n        this.indexedDB.getScript(this.config.id, (scriptListJSon) => {\r\n            if (scriptListJSon == null) {\r\n                return;\r\n            } else {\r\n\r\n                let scriptList: string[] = JSON.parse(scriptListJSon);\r\n\r\n                for (let name of scriptList) {\r\n\r\n                    let scriptId = this.config.id + name;\r\n                    this.indexedDB.removeScript(scriptId);\r\n                }\r\n\r\n                this.indexedDB.removeScript(this.config.id);\r\n\r\n            }\r\n\r\n\r\n        });\r\n\r\n    }\r\n\r\n    initWorkspace(scriptList: JOScript[]) {\r\n        this.currentWorkspace = new Workspace(\"Embedded-Workspace\", this, 0);\r\n        this.currentWorkspace.settings.libraries = this.config.libraries;\r\n        this.currentWorkspace.alterAdditionalLibraries();\r\n\r\n        let i = 0;\r\n        for (let script of scriptList) {\r\n            if (script.type == \"java\") {\r\n                this.addModule(script);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    addModule(script: JOScript): Module {\r\n        let module: Module = Module.restoreFromData({\r\n            id: this.currentWorkspace.moduleStore.getModules(true).length,\r\n            name: script.title,\r\n            text: script.text,\r\n            text_before_revision: null,\r\n            submitted_date: null,\r\n            student_edited_after_revision: false,\r\n            version: 1,\r\n            workspace_id: 0,\r\n            forceUpdate: false,\r\n            identical_to_repository_version: false,\r\n            file_type: 0\r\n        }, this);\r\n\r\n        this.currentWorkspace.moduleStore.putModule(module);\r\n\r\n        let that = this;\r\n\r\n        module.model.onDidChangeContent(() => {\r\n            that.considerShowingCodeResetButton();\r\n        });\r\n\r\n        return module;\r\n    }\r\n\r\n    removeModule(module: Module) {\r\n        this.currentWorkspace.moduleStore.removeModule(module);\r\n    }\r\n\r\n\r\n    initGUI($div: JQuery<HTMLElement>) {\r\n\r\n        // let $leftDiv = jQuery('<div class=\"joe_leftDiv\"></div>');\r\n\r\n        $div.css({\r\n            \"background-image\": \"none\",\r\n            \"background-size\": \"100%\"\r\n        })\r\n\r\n        let $centerDiv = jQuery('<div class=\"joe_centerDiv\"></div>');\r\n        let $resetModalWindow = this.makeCodeResetModalWindow($div);\r\n\r\n        let $rightDiv = this.makeRightDiv();\r\n\r\n        let $editorDiv = jQuery('<div class=\"joe_editorDiv\"></div>');\r\n        this.$monacoDiv = jQuery('<div class=\"joe_monacoDiv\"></div>');\r\n        this.$hintDiv = jQuery('<div class=\"joe_hintDiv jo_scrollable\"></div>');\r\n        this.$resetButton = jQuery('<div class=\"joe_resetButton jo_button jo_active\" title=\"Code auf Ausgangszustand zurücksetzen\">Code Reset</div>');\r\n\r\n        $editorDiv.append(this.$monacoDiv, this.$hintDiv, this.$resetButton);\r\n\r\n        let $bracketErrorDiv = this.makeBracketErrorDiv();\r\n        $editorDiv.append($bracketErrorDiv);\r\n\r\n        this.$resetButton.hide();\r\n\r\n        this.$resetButton.on(\"click\", () => { $resetModalWindow.show(); })\r\n\r\n        this.$hintDiv.hide();\r\n\r\n        let $controlsDiv = jQuery('<div class=\"joe_controlsDiv\"></div>');\r\n        let $bottomDivInner = jQuery('<div class=\"joe_bottomDivInner\"></div>');\r\n\r\n        let $buttonOpen = jQuery('<label type=\"file\" class=\"img_open-file jo_button jo_active\"' +\r\n            'style=\"margin-right: 8px;\" title=\"Workspace aus Datei laden\"><input type=\"file\" style=\"display:none\"></label>');\r\n\r\n        let that = this;\r\n\r\n        $buttonOpen.find('input').on('change', (event) => {\r\n            //@ts-ignore\r\n            var files: FileList = event.originalEvent.target.files;\r\n            that.loadWorkspaceFromFile(files[0]);\r\n        })\r\n\r\n        let $buttonSave = jQuery('<div class=\"img_save-dark jo_button jo_active\"' +\r\n            'style=\"margin-right: 8px;\" title=\"Workspace in Datei speichern\"></div>');\r\n\r\n\r\n        $buttonSave.on('click', () => { that.saveWorkspaceToFile() });\r\n\r\n        $controlsDiv.append($buttonOpen, $buttonSave);\r\n\r\n\r\n\r\n        if (this.config.withBottomPanel) {\r\n            let $bottomDiv = jQuery('<div class=\"joe_bottomDiv\"></div>');\r\n            this.makeBottomDiv($bottomDivInner, $controlsDiv);\r\n            $bottomDiv.append($bottomDivInner);\r\n            if (this.config.withFileList) {\r\n                let $filesDiv = this.makeFilesDiv();\r\n                $bottomDiv.prepend($filesDiv);\r\n                new EmbeddedSlider($filesDiv, false, false, () => { });\r\n            }\r\n            makeTabs($bottomDivInner);\r\n\r\n\r\n            $centerDiv.append($editorDiv, $bottomDiv);\r\n            new EmbeddedSlider($bottomDiv, true, true, () => { this.editor.editor.layout(); });\r\n        } else {\r\n            $centerDiv.prepend($editorDiv);\r\n        }\r\n\r\n\r\n\r\n\r\n        if (!this.config.withBottomPanel) {\r\n            if (this.config.hideEditor) {\r\n                $rightDiv.prepend($controlsDiv);\r\n            } else {\r\n                $centerDiv.prepend($controlsDiv);\r\n                $controlsDiv.addClass('joe_controlPanel_top');\r\n                $editorDiv.css({\r\n                    'position': 'relative',\r\n                    'height': '1px'\r\n                });\r\n            }\r\n        }\r\n\r\n        $div.addClass('joe_javaOnlineDiv');\r\n        $div.append($centerDiv, $rightDiv);\r\n\r\n        if (!this.config.hideEditor) {\r\n            new EmbeddedSlider($rightDiv, true, false, () => {\r\n                jQuery('.jo_graphics').trigger('sizeChanged');\r\n                this.editor.editor.layout();\r\n            });\r\n        }\r\n\r\n        this.editor = new Editor(this, false, true);\r\n        this.editor.initGUI(this.$monacoDiv);\r\n        this.$monacoDiv.find('.monaco-editor').css('z-index', '10');\r\n\r\n        if ($div.attr('tabindex') == null) $div.attr('tabindex', \"0\");\r\n        this.actionManager = new ActionManager($div, this);\r\n        this.actionManager.init();\r\n\r\n        this.bottomDiv = new BottomDiv(this, $bottomDivInner, $div);\r\n        this.bottomDiv.initGUI();\r\n\r\n        this.rightDiv = new RightDiv(this, this.$rightDivInner);\r\n        this.rightDiv.initGUI();\r\n\r\n        let $rightSideContainer = jQuery('<div class=\"jo_rightdiv-rightside-container\">');\r\n        let $coordinates = jQuery('<div class=\"jo_coordinates\">(0/0)</div>');\r\n        this.$rightDivInner.append($rightSideContainer);\r\n        $rightSideContainer.append($coordinates);\r\n\r\n        this.debugger = new Debugger(this, this.$debuggerDiv, null);\r\n\r\n        this.interpreter = new Interpreter(this, this.debugger,\r\n            new ProgramControlButtons($controlsDiv, $editorDiv),\r\n            this.$runDiv);\r\n\r\n        let $infoButton = jQuery('<div class=\"jo_button jo_active img_ellipsis-dark\" style=\"margin-left: 16px\"></div>');\r\n        $controlsDiv.append($infoButton);\r\n\r\n        $infoButton.on('mousedown', (ev) => {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            openContextMenu([{\r\n                caption: \"Über die Online-IDE ...\",\r\n                link: \"https://www.online-ide.de\",\r\n                callback: () => {\r\n                    // nothing to do.\r\n                }\r\n            }], ev.pageX + 2, ev.pageY + 2);\r\n        });\r\n\r\n        setTimeout(() => {\r\n            this.interpreter.initGUI();\r\n            this.editor.editor.layout();\r\n            this.compiler = new Compiler(this);\r\n            this.interpreter.controlButtons.speedControl.setSpeedInStepsPerSecond(this.config.speed);\r\n            this.startTimer();\r\n        }, 200);\r\n\r\n        if (this.config.hideEditor) {\r\n            $centerDiv.hide();\r\n            $rightDiv.css(\"flex\", \"1\");\r\n            if (!this.config.hideStartPanel) {\r\n                $div.find(\".joe_rightDivInner\").css('height', 'calc(100% - 24px)');\r\n                $div.find(\".joe_controlsDiv\").css('padding', '2px');\r\n                $div.find(\".jo_speedcontrol-outer\").css('z-index', '10');\r\n            } else {\r\n                $div.find(\".joe_controlsDiv\").hide();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    makeBracketErrorDiv(): JQuery<HTMLElement> {\r\n        return jQuery(`\r\n        <div class=\"jo_parenthesis_warning\" title=\"Klammerwarnung!\" style=\"bottom: 55px\">\r\n        <div class=\"jo_warning_light\"></div>\r\n        <div class=\"jo_pw_heading\">{ }</div>\r\n        <div title=\"Letzten Schritt rückgängig\" \r\n            class=\"jo_pw_undo img_undo jo_button jo_active\"></div>\r\n        </div>\r\n        `);\r\n    }\r\n\r\n    makeCodeResetModalWindow($parent: JQuery<HTMLElement>): JQuery<HTMLElement> {\r\n        let $window = jQuery(\r\n            `\r\n            <div class=\"joe_codeResetModal\">\r\n            <div style=\"flex: 1\"></div>\r\n            <div style=\"display: flex\">\r\n                <div style=\"flex: 1\"></div>\r\n                <div style=\"padding-left: 30px;\">\r\n                <div style=\"color: red; margin-bottom: 10px; font-weight: bold\">Warnung:</div>\r\n                <div>Soll der Code wirklich auf den Ausgangszustand zurückgesetzt werden?</div>\r\n                <div>Alle von Dir gemachten Änderungen werden damit verworfen.</div>\r\n                </div>\r\n                <div style=\"flex: 1\"></div>\r\n            </div>\r\n            <div class=\"joe_codeResetModalButtons\">\r\n            <div class=\"joe_codeResetModalCancel jo_button jo_active\">Abbrechen</div>\r\n            <div class=\"joe_codeResetModalOK jo_button jo_active\">OK</div>\r\n            </div>\r\n            <div style=\"flex: 2\"></div>\r\n            </div>\r\n        `\r\n        );\r\n\r\n        $window.hide();\r\n\r\n        $parent.append($window);\r\n\r\n        jQuery(\".joe_codeResetModalCancel\").on(\"click\", () => {\r\n            $window.hide();\r\n        });\r\n\r\n        jQuery(\".joe_codeResetModalOK\").on(\"click\", () => {\r\n\r\n            this.initScripts();\r\n            this.deleteScriptsInDB();\r\n\r\n            $window.hide();\r\n            this.$resetButton.hide();\r\n            this.compileRunsAfterCodeReset = 1;\r\n\r\n        });\r\n\r\n        return $window;\r\n    }\r\n\r\n    showProgramPointerPosition(file: File, position: TextPosition) {\r\n\r\n        if (file == null) {\r\n            return;\r\n        }\r\n\r\n        if (this.config.withFileList) {\r\n            let fileData = this.fileExplorer.files.find((fileData) => fileData.module.file == file);\r\n            if (fileData == null) {\r\n                return;\r\n            }\r\n\r\n            if (fileData.module != this.getCurrentlyEditedModule()) {\r\n                this.setModuleActive(fileData.module);\r\n            }\r\n\r\n            this.programPointerModule = fileData.module;\r\n        } else {\r\n            this.programPointerModule = this.currentWorkspace.moduleStore.getFirstModule();\r\n        }\r\n\r\n        let range = {\r\n            startColumn: position.column, startLineNumber: position.line,\r\n            endColumn: position.column + position.length, endLineNumber: position.line\r\n        };\r\n\r\n        this.getMonacoEditor().revealRangeInCenterIfOutsideViewport(range);\r\n        this.programPointerDecoration = this.getMonacoEditor().deltaDecorations(this.programPointerDecoration, [\r\n            {\r\n                range: range,\r\n                options: { className: 'jo_revealProgramPointer', isWholeLine: true }\r\n            },\r\n            {\r\n                range: range,\r\n                options: { beforeContentClassName: 'jo_revealProgramPointerBefore' }\r\n            }\r\n        ]);\r\n\r\n\r\n\r\n    }\r\n\r\n    hideProgramPointerPosition() {\r\n        if (this.getCurrentlyEditedModule() == this.programPointerModule) {\r\n            this.getMonacoEditor().deltaDecorations(this.programPointerDecoration, []);\r\n        }\r\n        this.programPointerModule = null;\r\n        this.programPointerDecoration = [];\r\n    }\r\n\r\n    makeFilesDiv(): JQuery<HTMLElement> {\r\n\r\n\r\n        let $filesDiv = jQuery('<div class=\"joe_bottomDivFiles jo_scrollable\"></div>');\r\n\r\n        let $filesHeader = jQuery('<div class=\"joe_filesHeader jo_tabheading jo_active\"  style=\"line-height: 24px\">Programmdateien</div>');\r\n\r\n        this.$filesListDiv = jQuery('<div class=\"joe_filesList jo_scrollable\"></div>');\r\n        // for (let index = 0; index < 20; index++) {            \r\n        //     let $file = jQuery('<div class=\"jo_file jo_java\"><div class=\"jo_fileimage\"></div><div class=\"jo_filename\"></div></div></div>');\r\n        //     $filesList.append($file);\r\n        // }\r\n\r\n        $filesDiv.append($filesHeader, this.$filesListDiv);\r\n\r\n        return $filesDiv;\r\n    }\r\n\r\n    startTimer() {\r\n        if (this.timerHandle != null) {\r\n            clearInterval(this.timerHandle);\r\n        }\r\n\r\n        let that = this;\r\n        this.timerHandle = setInterval(() => {\r\n\r\n            that.compileIfDirty();\r\n\r\n        }, 500);\r\n\r\n\r\n    }\r\n\r\n    compileIfDirty() {\r\n\r\n        if (this.currentWorkspace == null) return;\r\n\r\n        if (this.currentWorkspace.moduleStore.isDirty() &&\r\n            this.compiler.compilerStatus != CompilerStatus.compiling\r\n            && this.interpreter.state != InterpreterState.running\r\n            && this.interpreter.state != InterpreterState.paused) {\r\n            try {\r\n\r\n                this.compiler.compile(this.currentWorkspace.moduleStore);\r\n\r\n                let errors = this.\r\n                    bottomDiv?.errorManager?.showErrors(this.currentWorkspace);\r\n\r\n                this.editor.onDidChangeCursorPosition(null); // mark occurrencies of symbol under cursor\r\n\r\n                this.printProgram();\r\n\r\n                this.version++;\r\n\r\n                let startable = this.interpreter.getStartableModule(this.currentWorkspace.moduleStore) != null;\r\n\r\n                if (startable &&\r\n                    this.interpreter.state == InterpreterState.not_initialized) {\r\n                    this.copyExecutableModuleStoreToInterpreter();\r\n                    this.interpreter.setState(InterpreterState.done);\r\n                    if (this.config.hideStartPanel) {\r\n                        this.actionManager.trigger('interpreter.start');\r\n                    }\r\n                    // this.interpreter.init();\r\n                }\r\n\r\n                if (!startable &&\r\n                    (this.interpreter.state == InterpreterState.done || this.interpreter.state == InterpreterState.error)) {\r\n                    this.interpreter.setState(InterpreterState.not_initialized);\r\n                }\r\n\r\n                // this.drawClassDiagrams(!this.rightDiv.isClassDiagramEnabled());\r\n\r\n            } catch (e) {\r\n                console.error(e);\r\n                this.compiler.compilerStatus = CompilerStatus.error;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    considerShowingCodeResetButton() {\r\n        this.compileRunsAfterCodeReset++;\r\n        if (this.compileRunsAfterCodeReset == 3) {\r\n            this.$resetButton.fadeIn(1000);\r\n        }\r\n    }\r\n    printProgram() {\r\n\r\n        this.bottomDiv.printModuleToBottomDiv(this.currentWorkspace, this.getCurrentlyEditedModule());\r\n\r\n    }\r\n\r\n    drawClassDiagrams(onlyUpdateIdentifiers: boolean) {\r\n        // clearTimeout(this.debounceDiagramDrawing);\r\n        // this.debounceDiagramDrawing = setTimeout(() => {\r\n        //     this.rightDiv?.classDiagram?.drawDiagram(this.currentWorkspace, onlyUpdateIdentifiers);\r\n        // }, 500);\r\n    }\r\n\r\n    copyExecutableModuleStoreToInterpreter() {\r\n        let ms = this.currentWorkspace.moduleStore.copy();\r\n        this.interpreter.moduleStore = ms;\r\n        this.interpreter.moduleStoreVersion = this.version;\r\n\r\n        if (this.interpreter.state == InterpreterState.not_initialized && this.programIsExecutable) {\r\n            this.interpreter.setState(InterpreterState.done);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    saveWorkspaceToFile() {\r\n        let filename: string = prompt(\"Bitte geben Sie den Dateinamen ein\", this.config.jsonFilename);\r\n        if (filename == null) {\r\n            alert(\"Der Dateiname ist leer, daher wird nichts gespeichert.\");\r\n            return;\r\n        }\r\n        if (!filename.endsWith(\".json\")) filename = filename + \".json\";\r\n        let ws = this.currentWorkspace;\r\n        let name: string = ws.name.replace(/\\//g, \"_\");\r\n        downloadFile(ws.toExportedWorkspace(), filename)\r\n    }\r\n\r\n\r\n    makeBottomDiv($bottomDiv: JQuery<HTMLElement>, $buttonDiv: JQuery<HTMLElement>) {\r\n\r\n        let $tabheadings = jQuery('<div class=\"jo_tabheadings\"></div>');\r\n        $tabheadings.css('position', 'relative');\r\n        let $thRightSide = jQuery('<div class=\"joe_tabheading-right jo_noHeading\"></div>');\r\n\r\n        $thRightSide.append($buttonDiv);\r\n\r\n        if (this.config.withConsole) {\r\n            let $thConsoleClear = jQuery('<div class=\"img_clear-dark jo_button jo_active jo_console-clear\"' +\r\n                'style=\"display: none; margin-left: 8px;\" title=\"Console leeren\"></div>');\r\n            $thRightSide.append($thConsoleClear);\r\n        }\r\n\r\n        if (this.config.withErrorList) {\r\n            let $thErrors = jQuery('<div class=\"jo_tabheading jo_active\" data-target=\"jo_errorsTab\" style=\"line-height: 24px\">Fehler</div>');\r\n            $tabheadings.append($thErrors);\r\n        }\r\n\r\n\r\n        if (this.config.withConsole) {\r\n            let $thConsole = jQuery('<div class=\"jo_tabheading jo_console-tab\" data-target=\"jo_consoleTab\" style=\"line-height: 24px\">Console</div>');\r\n            $tabheadings.append($thConsole);\r\n        }\r\n\r\n        if (this.config.withPCode) {\r\n            let $thPCode = jQuery('<div class=\"jo_tabheading\" data-target=\"jo_pcodeTab\" style=\"line-height: 24px\">PCode</div>');\r\n            $tabheadings.append($thPCode);\r\n        }\r\n\r\n        $tabheadings.append($thRightSide);\r\n\r\n        $bottomDiv.append($tabheadings);\r\n\r\n        let $tabs = jQuery('<div class=\"jo_tabs jo_scrollable\"></div>');\r\n\r\n        if (this.config.withErrorList) {\r\n            let $tabError = jQuery('<div class=\"jo_active jo_scrollable jo_errorsTab\"></div>');\r\n            $tabs.append($tabError);\r\n        }\r\n\r\n        if (this.config.withConsole) {\r\n            let $tabConsole = jQuery(\r\n                `\r\n        <div class=\"jo_editorFontSize jo_consoleTab\">\r\n        <div class=\"jo_console-inner\">\r\n            <div class=\"jo_scrollable jo_console-top\"></div>\r\n            <div class=\"jo_commandline\"></div>\r\n        </div>\r\n        </div>\r\n    `);\r\n\r\n            $tabs.append($tabConsole);\r\n        }\r\n\r\n        if (this.config.withPCode) {\r\n            let $tabPCode = jQuery('<div class=\"jo_scrollable jo_pcodeTab\">PCode</div>');\r\n            $tabs.append($tabPCode);\r\n        }\r\n\r\n        $bottomDiv.append($tabs);\r\n\r\n    }\r\n    loadWorkspaceFromFile(file: globalThis.File) {\r\n        let that = this;\r\n        if (file == null) return;\r\n        var reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            let text: string = <string>event.target.result;\r\n            if (!text.startsWith(\"{\")) {\r\n                alert(`<div>Das Format der Datei ${file.name} passt nicht.</div>`);\r\n                return;\r\n            }\r\n\r\n            let ew: ExportedWorkspace = JSON.parse(text);\r\n\r\n            if (ew.modules == null || ew.name == null || ew.settings == null) {\r\n                alert(`<div>Das Format der Datei ${file.name} passt nicht.</div>`);\r\n                return;\r\n            }\r\n\r\n            let ws: Workspace = new Workspace(ew.name, this, 0);\r\n            ws.settings = ew.settings;\r\n            ws.alterAdditionalLibraries();\r\n\r\n            for (let mo of ew.modules) {\r\n                let f: File = {\r\n                    name: mo.name,\r\n                    dirty: false,\r\n                    saved: true,\r\n                    text: mo.text,\r\n                    text_before_revision: null,\r\n                    submitted_date: null,\r\n                    student_edited_after_revision: false,\r\n                    version: 1,\r\n                    is_copy_of_id: null,\r\n                    repository_file_version: null,\r\n                    identical_to_repository_version: null\r\n                };\r\n\r\n                let m = new Module(f, this);\r\n                ws.moduleStore.putModule(m);\r\n            }\r\n            that.currentWorkspace = ws;\r\n\r\n            if(that.fileExplorer != null){\r\n                that.fileExplorer.removeAllFiles();\r\n                ws.moduleStore.getModules(false).forEach(module => that.fileExplorer.addModule(module));\r\n                that.fileExplorer.setFirstFileActive();\r\n            } else {\r\n                this.setModuleActive(this.currentWorkspace.moduleStore.getFirstModule());\r\n            }\r\n\r\n            that.saveScripts();\r\n\r\n        };\r\n        reader.readAsText(file);\r\n\r\n    }\r\n\r\n    makeRightDiv(): JQuery<HTMLElement> {\r\n\r\n        let $rightDiv = jQuery('<div class=\"joe_rightDiv\"></div>');\r\n        this.$rightDivInner = jQuery('<div class=\"joe_rightDivInner\"></div>');\r\n        $rightDiv.append(this.$rightDivInner);\r\n\r\n        this.$debuggerDiv = jQuery('<div class=\"joe_debuggerDiv\"></div>');\r\n        this.$runDiv = jQuery(\r\n            `\r\n            <div class=\"jo_tab jo_active jo_run\">\r\n            <div class=\"jo_run-programend\">Programm beendet</div>\r\n            <div class=\"jo_run-input\">\r\n            <div>\r\n            <div>\r\n        <div class=\"jo_run-input-message\" class=\"jo_rix\">Bitte geben Sie eine Zahl ein!</div>\r\n        <input class=\"jo_run-input-input\" type=\"text\" class=\"jo_rix\">\r\n        <div class=\"jo_run-input-button-outer\" class=\"jo_rix\">\r\n        <div class=\"jo_run-input-button\" class=\"jo_rix\">OK</div>\r\n        </div>\r\n        \r\n        <div class=\"jo_run-input-error\" class=\"jo_rix\"></div>\r\n    </div>\r\n    </div>\r\n    </div> \r\n    <div class=\"jo_run-inner\">\r\n    <div class=\"jo_graphics\"></div>\r\n    <div class=\"jo_output jo_scrollable\"></div>\r\n    </div>\r\n    \r\n    </div>\r\n    \r\n    `);\r\n\r\n\r\n        if (!this.config.hideEditor) {\r\n            let $tabheadings = jQuery('<div class=\"jo_tabheadings\"></div>');\r\n            $tabheadings.css('position', 'relative');\r\n            let $thRun = jQuery('<div class=\"jo_tabheading jo_active\" data-target=\"jo_run\" style=\"line-height: 24px\">Ausgabe</div>');\r\n            let $thVariables = jQuery('<div class=\"jo_tabheading jo_console-tab\" data-target=\"jo_variablesTab\" style=\"line-height: 24px\">Variablen</div>');\r\n            $tabheadings.append($thRun, $thVariables);\r\n            this.$rightDivInner.append($tabheadings);\r\n            let $vd = jQuery('<div class=\"jo_scrollable jo_editorFontSize jo_variablesTab\"></div>');\r\n\r\n            let $alternativeText = jQuery(`\r\n            <div class=\"jo_alternativeText jo_scrollable\">\r\n            <div style=\"font-weight: bold\">Tipp:</div>\r\n            Die Variablen sind nur dann sichtbar, wenn das Programm\r\n            <ul>\r\n            <li>im Einzelschrittmodus ausgeführt wird(Klick auf <span class=\"img_step-over-dark jo_inline-image\"></span>),</li>\r\n            <li>an einem Breakpoint hält (Setzen eines Breakpoints mit Mausklick links neben den Zeilennummern und anschließendes Starten des Programms mit \r\n                <span class=\"img_start-dark jo_inline-image\"></span>) oder </li>\r\n                <li>in sehr niedriger Geschwindigkeit ausgeführt wird (weniger als 10 Schritte/s).\r\n                </ul>\r\n                </div>\r\n                `);\r\n\r\n            $vd.append(this.$debuggerDiv, $alternativeText);\r\n            let $tabs = jQuery('<div class=\"jo_tabs jo_scrollable\"></div>');\r\n            $tabs.append(this.$runDiv, $vd);\r\n            this.$rightDivInner.append($tabs);\r\n            makeTabs($rightDiv);\r\n        } else {\r\n            this.$rightDivInner.append(this.$runDiv);\r\n        }\r\n\r\n        return $rightDiv;\r\n    }\r\n\r\n    getSemicolonAngel(): SemicolonAngel {\r\n        return this.semicolonAngel;\r\n    }\r\n\r\n}\r\n\r\n\r\n","import { Error, Lexer } from \"./lexer/Lexer.js\";\r\nimport { CodeGenerator } from \"./parser/CodeGenerator.js\";\r\nimport { File, Module, ModuleStore } from \"./parser/Module.js\";\r\nimport { Parser } from \"./parser/Parser.js\";\r\nimport { TypeResolver } from \"./parser/TypeResolver.js\";\r\nimport { Main } from \"../main/Main.js\";\r\nimport { MainBase } from \"../main/MainBase.js\";\r\nimport { MainEmbedded } from \"../embedded/MainEmbedded.js\";\r\nimport { Klass, Interface } from \"./types/Class.js\";\r\nimport { SemicolonAngel } from \"./parser/SemicolonAngel.js\";\r\n\r\nexport enum CompilerStatus {\r\n    compiling, error, compiledButNothingToRun, readyToRun\r\n}\r\n\r\nexport class Compiler {\r\n\r\n    compilerStatus: CompilerStatus = CompilerStatus.compiledButNothingToRun;\r\n\r\n    atLeastOneModuleIsStartable: boolean;\r\n\r\n    constructor(private main: MainBase) {\r\n    }\r\n\r\n    compile(moduleStore: ModuleStore): Error[] {\r\n\r\n        this.compilerStatus = CompilerStatus.compiling;\r\n\r\n        let t0 = performance.now();\r\n\r\n        moduleStore.clearUsagePositions();\r\n\r\n        let lexer = new Lexer();\r\n\r\n        // 1st pass: lexing\r\n        for (let m of moduleStore.getModules(false)) {\r\n            m.file.dirty = false;\r\n            m.clear();\r\n\r\n            let lexed = lexer.lex(m.getProgramTextFromMonacoModel());\r\n\r\n            m.errors[0] = lexed.errors;\r\n            m.tokenList = lexed.tokens;\r\n            m.bracketError = lexed.bracketError;\r\n            m.colorInformation = lexed.colorInformation;\r\n            \r\n            if(m.file.name == this.main.getCurrentlyEditedModule()?.file?.name){\r\n                if(this.main.getBottomDiv() != null) this.main.getBottomDiv().errorManager.showParenthesisWarning(lexed.bracketError);\r\n            }\r\n        }\r\n\r\n        // 2nd pass: parse tokenlist and generate AST\r\n\r\n        this.main.getSemicolonAngel().startRegistering();\r\n\r\n        let parser: Parser = new Parser(false);\r\n\r\n        for (let m of moduleStore.getModules(false)) {\r\n            parser.parse(m);\r\n        }\r\n\r\n        // 3rd pass: resolve types and populate typeStores; checks intermodular dependencies\r\n\r\n        let typeResolver: TypeResolver = new TypeResolver(this.main);\r\n\r\n        // Klass.count = 0;\r\n        // Interface.count = 0;\r\n        typeResolver.start(moduleStore);\r\n        // console.log(\"Klass-Klone: \" + Klass.count + \", Interface-Klone: \" + Interface.count);\r\n\r\n        // 4th pass: code generation\r\n\r\n        let codeGenerator = new CodeGenerator();\r\n\r\n        for (let m of moduleStore.getModules(false)) {\r\n            codeGenerator.start(m, moduleStore);\r\n        }\r\n\r\n        let errorfree = true;\r\n        for (let m of moduleStore.getModules(false)) {\r\n            m.dependsOnModulesWithErrors = m.hasErrors();\r\n            if(m.dependsOnModulesWithErrors) errorfree = false;\r\n        }\r\n\r\n        let done = false;\r\n        while(!done){\r\n            done = true;\r\n            for (let m of moduleStore.getModules(false)) {\r\n                if(!m.dependsOnModulesWithErrors)\r\n                for (let m1 of moduleStore.getModules(false)) {\r\n                    if(m.dependsOnModules.get(m1) && m1.dependsOnModulesWithErrors){\r\n                        m.dependsOnModulesWithErrors = true;\r\n                        done = false;\r\n                        break;\r\n                    }\r\n                }                            \r\n            }            \r\n        }\r\n        \r\n        this.atLeastOneModuleIsStartable = false;        \r\n        for (let m of moduleStore.getModules(false)) {\r\n            m.isStartable = m.hasMainProgram() && !m.dependsOnModulesWithErrors;\r\n            if(m.isStartable){\r\n                this.atLeastOneModuleIsStartable = true;\r\n            }\r\n            if(!(this.main instanceof MainEmbedded) || this.main.config.withFileList){\r\n                m.renderStartButton();\r\n            } \r\n        }\r\n\r\n        if (this.atLeastOneModuleIsStartable) {\r\n\r\n            this.compilerStatus = CompilerStatus.readyToRun;\r\n\r\n        } else {\r\n\r\n            this.compilerStatus = errorfree ? CompilerStatus.error : CompilerStatus.compiledButNothingToRun;\r\n\r\n        }\r\n\r\n        let dt = performance.now() - t0;\r\n        dt = Math.round(dt * 100) / 100;\r\n\r\n        let message = \"Compiled in \" + dt + \" ms.\";\r\n\r\n        this.main.getCurrentWorkspace().compilerMessage = message;\r\n\r\n        this.main.getSemicolonAngel().healSemicolons();\r\n\r\n        return null;\r\n    }\r\n\r\n}","import { Lexer } from \"../../compiler/lexer/Lexer.js\";\r\nimport { Token, TokenList, TokenType, tokenListToString } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class Formatter implements monaco.languages.DocumentFormattingEditProvider,\r\n    monaco.languages.OnTypeFormattingEditProvider {\r\n\r\n    autoFormatTriggerCharacters: string[] = ['\\n'];\r\n\r\n    displayName?: string = \"Java-Autoformat\";\r\n\r\n\r\n    constructor(\r\n        // private main: Main\r\n    ) {\r\n\r\n    }\r\n\r\n    init() {\r\n        monaco.languages.registerDocumentFormattingEditProvider('myJava', this);\r\n        monaco.languages.registerOnTypeFormattingEditProvider('myJava', this);\r\n    }\r\n\r\n    provideOnTypeFormattingEdits(model: monaco.editor.ITextModel, position: monaco.Position, ch: string, options: monaco.languages.FormattingOptions, token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\r\n\r\n        let edits: monaco.languages.TextEdit[] = this.format(model);\r\n\r\n        return Promise.resolve(\r\n            edits\r\n        );\r\n\r\n    }\r\n    deleteOverlappingRanges(edits: monaco.languages.TextEdit[]) {\r\n        for (let i = 0; i < edits.length - 1; i++) {\r\n            let e = edits[i];\r\n            let e1 = edits[i + 1];\r\n            if (e.range.endLineNumber < e1.range.startLineNumber) continue;\r\n            if (e.range.endLineNumber == e1.range.startLineNumber) {\r\n                if (e.range.endColumn >= e1.range.startColumn) {\r\n                    edits.splice(i + 1, 1);\r\n                } else {\r\n                    if (e.range.endColumn == 0 && e.text.length > 0 && e1.range.startColumn == 1 && e1.range.endColumn > e1.range.startColumn && e1.text == \"\") {\r\n                        let delta = e.text.length - (e1.range.endColumn - e1.range.startColumn);\r\n                        if (delta > 0) { \r\n                            e.text = e.text.substr(0, delta);\r\n                            edits.splice(i+1, 1);\r\n                        }\r\n                        else if (delta < 0)\r\n                        { \r\n                            //@ts-ignore\r\n                            e1.range.endColumn = e1.range.startColumn - delta;\r\n                            edits.splice(i, 1);\r\n                            i--;\r\n\r\n                         }\r\n                        else {\r\n                            edits.splice(i, 2);\r\n                            i--;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    provideDocumentFormattingEdits(model: monaco.editor.ITextModel,\r\n        options: monaco.languages.FormattingOptions,\r\n        token: monaco.CancellationToken): monaco.languages.ProviderResult<monaco.languages.TextEdit[]> {\r\n\r\n        let edits: monaco.languages.TextEdit[] = this.format(model);\r\n\r\n        return Promise.resolve(\r\n            edits\r\n        );\r\n\r\n    }\r\n\r\n    format(model: monaco.editor.ITextModel): monaco.languages.TextEdit[] {\r\n\r\n        let edits: monaco.languages.TextEdit[] = [];\r\n\r\n        // if (this.main.currentWorkspace == null || this.main.currentWorkspace.currentlyOpenModule == null) {\r\n        //     return [];\r\n        // }\r\n\r\n        // let text = this.main.monaco_editor.getValue({ preserveBOM: false, lineEnding: \"\\n\" });\r\n\r\n        let text = model.getValue(monaco.editor.EndOfLinePreference.LF);\r\n\r\n        let tokenlist = new Lexer().lex(text).tokens;\r\n\r\n        // let tokenlist = this.main.currentWorkspace.currentlyOpenModule.tokenList;\r\n\r\n        if (tokenlist == null) return [];\r\n\r\n        // TODO:\r\n        // { at the end of line, with one space before; followed only by spaces and \\n\r\n        // indent lines according to { and }\r\n        // Beware: int i[] = { ... }\r\n        // exactly one space before/after binary operators\r\n        // no space after ( and no space before )\r\n        // (   ) -> ()\r\n        // (  ()) -> (())\r\n        // (()  ) -> (())\r\n\r\n        let lastNonSpaceToken: Token = null;\r\n        let indentLevel = 0;\r\n        let tabSize = 3;\r\n        let curlyBracesOpenAtLines: number[] = [];\r\n        let indentLevelAtSwitchStatements: number[] = [];\r\n        let switchHappend: boolean = false;\r\n        let lastTokenWasNewLine: number = 0;\r\n        let roundBracketsOpen: number = 0;\r\n\r\n        for (let i = 0; i < tokenlist.length; i++) {\r\n\r\n            let t = tokenlist[i];\r\n            lastTokenWasNewLine--;\r\n\r\n            switch (t.tt) {\r\n\r\n                case TokenType.keywordSwitch:\r\n                    switchHappend = true;\r\n                    break;\r\n                case TokenType.keywordCase:\r\n                case TokenType.keywordDefault:\r\n                    // outdent: line with case:\r\n                    if (t.position.column > 3) {\r\n                        this.deleteSpaces(edits, t.position.line, 1, 3);\r\n                    }\r\n                    break;\r\n                case TokenType.leftCurlyBracket:\r\n                    if (switchHappend) {\r\n                        switchHappend = false;\r\n                        indentLevelAtSwitchStatements.push(indentLevel + 2);\r\n                        indentLevel++;\r\n                    }\r\n                    indentLevel++;\r\n                    curlyBracesOpenAtLines.push(t.position.line);\r\n                    if (lastNonSpaceToken != null) {\r\n                        let tt = lastNonSpaceToken.tt;\r\n                        if (tt == TokenType.rightBracket || tt == TokenType.identifier || tt == TokenType.leftRightSquareBracket) {\r\n                            if(lastNonSpaceToken.position.line == t.position.line){\r\n                                this.replaceBetween(lastNonSpaceToken, t, edits, \" \");\r\n                            }\r\n                        }\r\n                    }\r\n                    if (i < tokenlist.length - 1) {\r\n                        let token1 = tokenlist[i + 1];\r\n                        if (token1.tt != TokenType.newline && token1.tt != TokenType.space) {\r\n                            this.insertSpaces(edits, token1.position.line, token1.position.column, 1);\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.rightCurlyBracket:\r\n                    if (indentLevelAtSwitchStatements[indentLevelAtSwitchStatements.length - 1] == indentLevel) {\r\n                        indentLevelAtSwitchStatements.pop();\r\n                        indentLevel--;\r\n                        // if(t.position.column >= 3){\r\n                        this.deleteSpaces(edits, t.position.line, 1, 3);\r\n                        // }    \r\n                    }\r\n                    indentLevel--;\r\n                    let openedAtLine = curlyBracesOpenAtLines.pop();\r\n                    if (openedAtLine != null && openedAtLine != t.position.line) {\r\n                        if (lastNonSpaceToken != null && lastNonSpaceToken.position.line == t.position.line) {\r\n                            this.replace(edits, t.position, t.position, \"\\n\" + \" \".repeat(indentLevel * tabSize));\r\n                        }\r\n                    } else {\r\n                        if (i > 0) {\r\n                            let token1 = tokenlist[i - 1];\r\n                            if (token1.tt != TokenType.space && token1.tt != TokenType.newline) {\r\n                                this.insertSpaces(edits, t.position.line, t.position.column, 1);\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.leftBracket:\r\n                    roundBracketsOpen++;\r\n                    if (i < tokenlist.length - 2) {\r\n                        let nextToken1 = tokenlist[i + 1];\r\n                        let nextToken2 = tokenlist[i + 2];\r\n                        if (nextToken1.tt == TokenType.space && nextToken2.tt != TokenType.newline) {\r\n                            this.deleteSpaces(edits, nextToken1.position.line, nextToken1.position.column, nextToken1.position.length);\r\n                            i++;\r\n                            if (nextToken2.tt == TokenType.rightBracket) {\r\n                                i++;\r\n                                roundBracketsOpen--;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (i > 1) {\r\n                        let lastToken1 = tokenlist[i - 1];\r\n                        let lastToken2 = tokenlist[i - 2];\r\n                        if (lastToken1.tt == TokenType.space && [TokenType.newline, TokenType.keywordFor].indexOf(lastToken2.tt) < 0 && !this.isBinaryOperator(lastToken2.tt)) {\r\n                            if (lastToken1.position.length == 1) {\r\n                                this.deleteSpaces(edits, lastToken1.position.line, lastToken1.position.column, 1);\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.rightBracket:\r\n                    roundBracketsOpen--;\r\n                    if (i > 1) {\r\n                        let nextToken1 = tokenlist[i - 1];\r\n                        let nextToken2 = tokenlist[i - 2];\r\n                        if (nextToken1.tt == TokenType.space && nextToken2.tt != TokenType.newline) {\r\n                            this.deleteSpaces(edits, nextToken1.position.line, nextToken1.position.column, nextToken1.position.length);\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.newline:\r\n                    lastTokenWasNewLine = 2;\r\n                    if (i < tokenlist.length - 2) {\r\n\r\n                        let nextNonSpaceToken = this.getNextNonSpaceToken(i, tokenlist);\r\n\r\n                        // no additional indent after \"case 12 :\"\r\n                        let lastTokenIsOperator = this.isBinaryOperator(lastNonSpaceToken?.tt) && lastNonSpaceToken?.tt != TokenType.colon;\r\n                        let nextTokenIsOperator = this.isBinaryOperator(nextNonSpaceToken.tt);\r\n\r\n                        let beginNextLine = tokenlist[i + 1];\r\n                        let token2 = tokenlist[i + 2];\r\n                        let currentIndentation = 0;\r\n\r\n                        if (beginNextLine.tt == TokenType.newline || nextNonSpaceToken.tt == TokenType.comment) {\r\n                            break;\r\n                        }\r\n\r\n                        let delta: number = 0;\r\n                        if (beginNextLine.tt == TokenType.space) {\r\n                            if (token2.tt == TokenType.newline) {\r\n                                break;\r\n                            }\r\n                            currentIndentation = beginNextLine.position.length;\r\n                            i++;\r\n                            if (token2.tt == TokenType.rightCurlyBracket) {\r\n                                delta = -1;\r\n                            }\r\n                        }\r\n\r\n                        if (beginNextLine.tt == TokenType.rightCurlyBracket) {\r\n                            delta = -1;\r\n                            // indentLevel--;\r\n                            // curlyBracesOpenAtLines.pop();\r\n                            // lastNonSpaceToken = beginNextLine;\r\n                            // i++;\r\n                        }\r\n\r\n                        if(nextTokenIsOperator || lastTokenIsOperator) delta = 1;\r\n\r\n                        let il = indentLevel + delta;\r\n                        if(roundBracketsOpen > 0){\r\n                            il++;\r\n                        }\r\n                        if (il < 0) il = 0;\r\n\r\n                        let correctIndentation = il * tabSize;\r\n\r\n                        if (correctIndentation > currentIndentation) {\r\n                            this.insertSpaces(edits, t.position.line + 1, 0, correctIndentation - currentIndentation);\r\n                        } else if (correctIndentation < currentIndentation) {\r\n                            this.deleteSpaces(edits, t.position.line + 1, 0, currentIndentation - correctIndentation);\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.space:\r\n                    if (i < tokenlist.length - 1) {\r\n                        let nextToken = tokenlist[i + 1];\r\n                        if (nextToken.tt != TokenType.comment) {\r\n                            if (i > 0) {\r\n                                let lastToken = tokenlist[i - 1];\r\n                                if (lastToken.tt != TokenType.newline) {\r\n                                    if (t.position.length > 1) {\r\n                                        this.deleteSpaces(edits, t.position.line, t.position.column, t.position.length - 1);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.keywordFor:\r\n                case TokenType.keywordWhile:\r\n                    if (i < tokenlist.length - 1) {\r\n                        let nextToken = tokenlist[i + 1];\r\n                        if (nextToken.tt == TokenType.leftBracket) {\r\n                            this.insertSpaces(edits, nextToken.position.line, nextToken.position.column, 1);\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.comma:\r\n                case TokenType.semicolon:\r\n                    if (i > 1) {\r\n                        let lastToken1 = tokenlist[i - 1];\r\n                        let lastToken2 = tokenlist[i - 2];\r\n                        if (lastToken1.tt != TokenType.newline && lastToken2.tt != TokenType.newline && !this.isBinaryOperator(lastToken2.tt)) {\r\n                            if (lastToken1.tt == TokenType.space && lastToken1.position.length == 1) {\r\n                                this.deleteSpaces(edits, lastToken1.position.line,\r\n                                    lastToken1.position.column, 1);\r\n                            }\r\n                        }\r\n                    }\r\n                    if (i < tokenlist.length - 1) {\r\n                        let nextToken = tokenlist[i + 1];\r\n                        if (nextToken.tt != TokenType.comment && nextToken.tt != TokenType.space && nextToken.tt != TokenType.newline) {\r\n                            this.insertSpaces(edits, nextToken.position.line, nextToken.position.column, 1);\r\n                        }\r\n                    }\r\n                    break;\r\n                case TokenType.rightSquareBracket:\r\n                    if (lastNonSpaceToken != null && lastNonSpaceToken.tt == TokenType.leftSquareBracket) {\r\n                        this.replaceBetween(lastNonSpaceToken, t, edits, \"\");\r\n\r\n                    }\r\n                    break;\r\n\r\n            }\r\n\r\n            // binary operator?\r\n            if (this.isBinaryOperator(t.tt)) {\r\n\r\n                let lowerGeneric = t.tt == TokenType.lower && this.lowerBelongsToGenericExpression(i, tokenlist);\r\n                let greaterGeneric = t.tt == TokenType.greater && this.greaterBelongsToGenericExpression(i, tokenlist);\r\n\r\n                if (lastTokenWasNewLine <= 0 && lastNonSpaceToken != null && [TokenType.leftBracket, TokenType.assignment, TokenType.comma].indexOf(lastNonSpaceToken.tt) < 0) {\r\n\r\n                    if (i > 0) {\r\n                        let tokenBefore = tokenlist[i - 1];\r\n                        let spaces = (lowerGeneric || greaterGeneric) ? 0 : 1;\r\n                        if (tokenBefore.tt == TokenType.space) {\r\n                            if (tokenBefore.position.length != spaces) {\r\n                                this.insertSpaces(edits, tokenBefore.position.line,\r\n                                    tokenBefore.position.column, spaces - tokenBefore.position.length);\r\n                            }\r\n                        } else {\r\n                            if (spaces == 1)\r\n                                this.insertSpaces(edits, t.position.line, t.position.column, 1);\r\n                        }\r\n                    }\r\n\r\n                    if (i < tokenlist.length - 1) {\r\n                        let nextToken = tokenlist[i + 1];\r\n                        let spaces = (lowerGeneric) ? 0 : 1;\r\n                        if (nextToken.tt == TokenType.space) {\r\n                            if (greaterGeneric && i < tokenlist.length - 2 && tokenlist[i + 2].tt == TokenType.leftBracket) {\r\n                                spaces = 0;\r\n                            }\r\n                            if (nextToken.position.length != spaces) {\r\n                                this.insertSpaces(edits, nextToken.position.line,\r\n                                    nextToken.position.column, spaces - nextToken.position.length);\r\n                            }\r\n                        } else {\r\n                            if (greaterGeneric && nextToken.tt == TokenType.leftBracket) {\r\n                                spaces = 0;\r\n                            }\r\n                            if (spaces == 1) this.insertSpaces(edits, nextToken.position.line, nextToken.position.column, 1);\r\n                        }\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            if (t.tt != TokenType.space && t.tt != TokenType.newline) {\r\n                lastNonSpaceToken = t;\r\n            }\r\n\r\n        }\r\n\r\n        this.deleteOverlappingRanges(edits);\r\n\r\n        return edits;\r\n\r\n    }\r\n    getNextNonSpaceToken(currentIndex: number, tokenlist: TokenList):  Token {\r\n\r\n        if(currentIndex == tokenlist.length - 1) return tokenlist[currentIndex];\r\n\r\n        let j = currentIndex + 1;\r\n        while(j < tokenlist.length - 1 && (tokenlist[j].tt == TokenType.space || tokenlist[j].tt == TokenType.return)){\r\n            j++;\r\n        }\r\n        return tokenlist[j];\r\n\r\n    }\r\n\r\n    lowerBelongsToGenericExpression(position: number, tokenlist: TokenList) {\r\n        let i = position + 1;\r\n        while (i < tokenlist.length) {\r\n            let tt = tokenlist[i].tt;\r\n            if (tt == TokenType.greater) {\r\n                return true;\r\n            }\r\n            if ([TokenType.space, TokenType.comma, TokenType.identifier].indexOf(tt) < 0) {\r\n                return false;\r\n            }\r\n            i++;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    greaterBelongsToGenericExpression(position: number, tokenlist: TokenList) {\r\n        let i = position - 1;\r\n        while (i >= 0) {\r\n            let tt = tokenlist[i].tt;\r\n            if (tt == TokenType.lower) {\r\n                return true;\r\n            }\r\n            if ([TokenType.space, TokenType.comma, TokenType.identifier].indexOf(tt) < 0) {\r\n                return false;\r\n            }\r\n            i--;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isBinaryOperator(token: TokenType) {\r\n        return token != null && token >= TokenType.modulo && token <= TokenType.colon;\r\n    }\r\n\r\n    private replaceBetween(lastNonSpaceToken: Token, t: Token, edits: monaco.languages.TextEdit[], text: string) {\r\n        let positionFrom = {\r\n            line: lastNonSpaceToken.position.line,\r\n            column: lastNonSpaceToken.position.column + lastNonSpaceToken.position.length\r\n        };\r\n        let positionTo = {\r\n            line: t.position.line,\r\n            column: t.position.column\r\n        };\r\n        if (positionFrom.line != positionTo.line ||\r\n            positionTo.column - positionFrom.column != text.length) {\r\n            this.replace(edits, positionFrom, positionTo, text);\r\n        }\r\n    }\r\n\r\n    deleteSpaces(edits: monaco.languages.TextEdit[], line: number, column: number, numberOfSpaces: number) {\r\n        edits.push({\r\n            range: {\r\n                startColumn: column,\r\n                startLineNumber: line,\r\n                endColumn: column + numberOfSpaces + (column == 0 ? 1 : 0),\r\n                endLineNumber: line\r\n            },\r\n            text: \"\"\r\n        });\r\n    }\r\n\r\n    insertSpaces(edits: monaco.languages.TextEdit[], line: number, column: number, numberOfSpaces: number) {\r\n\r\n        if (numberOfSpaces < 0) {\r\n            this.deleteSpaces(edits, line, column, -numberOfSpaces);\r\n            return;\r\n        }\r\n\r\n        edits.push({\r\n            range: {\r\n                startColumn: column,\r\n                startLineNumber: line,\r\n                endColumn: column,\r\n                endLineNumber: line\r\n            },\r\n            text: \" \".repeat(numberOfSpaces)\r\n        });\r\n    }\r\n\r\n    replace(edits: monaco.languages.TextEdit[], positionFrom: { line: number; column: number; }, positionTo: { line: number; column: number; }, text: string) {\r\n\r\n        edits.push({\r\n            range: {\r\n                startColumn: positionFrom.column,\r\n                startLineNumber: positionFrom.line,\r\n                endColumn: positionTo.column,\r\n                endLineNumber: positionTo.line\r\n            },\r\n            text: text\r\n        });\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n}","import { Main } from \"../main/Main.js\";\r\n\r\nexport class GamepadTool {\r\n\r\n    gamepads: Gamepad[] = [];\r\n\r\n    constructor(){\r\n        let that = this;\r\n        window.addEventListener(\"gamepadconnected\", function(e: GamepadEvent) {\r\n            console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\r\n              e.gamepad.index, e.gamepad.id,\r\n              e.gamepad.buttons.length, e.gamepad.axes.length);\r\n              if(that.gamepads.indexOf(e.gamepad) < 0){\r\n                  that.gamepads.push(e.gamepad);\r\n              }\r\n          });\r\n\r\n          window.addEventListener(\"gamepaddisconnected\", function(e: GamepadEvent) {\r\n            console.log(\"Gamepad disconnected from index %d: %s\",\r\n              e.gamepad.index, e.gamepad.id);\r\n              let i = that.gamepads.indexOf(e.gamepad);\r\n              if(i >= 0){\r\n                that.gamepads.splice(i, 1);\r\n            }\r\n        });\r\n    }\r\n\r\n    isGamepadButtonPressed(gamepadIndex: number, buttonIndex: number): boolean{\r\n        let gp: Gamepad = navigator.getGamepads()[gamepadIndex];\r\n        if(gp == null) return false;\r\n        let button = gp.buttons[buttonIndex];\r\n        if(button){\r\n            // return typeof(button) == \"object\" ? button.pressed : (button == 1.0);\r\n            return button.pressed;\r\n        } else {return false;}\r\n    }\r\n\r\n    getGamepadAxisValue(gamepadIndex: number, axisIndex: number): number {\r\n        let gp: Gamepad = navigator.getGamepads()[gamepadIndex];\r\n        if(gp == null) return 0;\r\n        return gp.axes[axisIndex];\r\n    }\r\n\r\n    isGamepadConnected(gamepadIndex: number){\r\n        return navigator.getGamepads()[gamepadIndex] != null;\r\n    }\r\n\r\n}","import { TextPosition, TokenType } from \"../compiler/lexer/Token.js\";\r\nimport { Module, ModuleStore } from \"../compiler/parser/Module.js\";\r\nimport { Program, Statement, ReturnStatement } from \"../compiler/parser/Program.js\";\r\nimport { ArrayType } from \"../compiler/types/Array.js\";\r\nimport { Klass, Interface } from \"../compiler/types/Class.js\";\r\nimport { Enum, EnumRuntimeObject } from \"../compiler/types/Enum.js\";\r\nimport { PrimitiveType, Type, Value, Heap, Method } from \"../compiler/types/Types.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { Main } from \"../main/Main.js\";\r\nimport { Debugger } from \"./Debugger.js\";\r\nimport { RuntimeObject } from \"./RuntimeObject.js\";\r\nimport { intPrimitiveType, stringPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { InputManager } from \"./InputManager.js\";\r\nimport { WorldHelper } from \"../runtimelibrary/graphics/World.js\";\r\nimport { Helper } from \"../main/gui/Helper.js\";\r\nimport { TimerClass } from \"../runtimelibrary/Timer.js\";\r\nimport { KeyboardTool } from \"../tools/KeyboardTool.js\";\r\nimport { ProgramControlButtons } from \"../main/gui/ProgramControlButtons.js\";\r\nimport { MainBase } from \"../main/MainBase.js\";\r\nimport { ListHelper } from \"../runtimelibrary/collections/ArrayList.js\";\r\nimport { GroupHelper } from \"../runtimelibrary/graphics/Group.js\";\r\nimport { WebSocketRequestKeepAlive } from \"../communication/Data.js\";\r\nimport { MainEmbedded } from \"../embedded/MainEmbedded.js\";\r\nimport { ProcessingHelper } from \"../runtimelibrary/graphics/Processing.js\";\r\nimport { GNGEreignisbehandlungHelper } from \"../runtimelibrary/gng/GNGEreignisbehandlung.js\";\r\nimport { GamepadTool } from \"../tools/GamepadTool.js\";\r\n\r\nexport enum InterpreterState {\r\n    not_initialized, running, paused, error, done, waitingForInput, waitingForTimersToEnd\r\n}\r\n\r\nexport type ProgramStackElement = {\r\n    program: Program,\r\n    programPosition: number,  // next position to execute after return\r\n    textPosition: TextPosition, // textposition of method call\r\n    method: Method | string,\r\n    callbackAfterReturn: (interpreter: Interpreter) => void,\r\n    isCalledFromOutside: string,\r\n    stackElementsToPushBeforeFirstExecuting?: Value[]\r\n};\r\n\r\nexport class Interpreter {\r\n\r\n    debugger: Debugger;\r\n\r\n    mainModule: Module;\r\n    moduleStore: ModuleStore;\r\n    moduleStoreVersion: number = -100;\r\n\r\n    printManager: PrintManager;\r\n    inputManager: InputManager;\r\n\r\n    stepsPerSecond = 2;\r\n    maxStepsPerSecond = 1000000;\r\n    timerDelayMs = 10;\r\n\r\n    timerId: any;\r\n    state: InterpreterState;\r\n\r\n    currentProgram: Program;\r\n    currentProgramPosition: number;\r\n    currentMethod: Method | string;\r\n    currentCallbackAfterReturn: (interpreter: Interpreter) => void;\r\n    currentIsCalledFromOutside: string\r\n\r\n    programStack: ProgramStackElement[] = [];\r\n\r\n    stack: Value[] = [];\r\n    stackframes: number[] = [];\r\n    currentStackframe: number;\r\n\r\n    heap: Heap = {};\r\n\r\n    timerStopped: boolean = true;\r\n    timerExtern: boolean = false;\r\n\r\n    steps: number = 0;\r\n    timeNetto: number = 0;\r\n    timeWhenProgramStarted: number = 0;\r\n\r\n    stepOverNestingLevel: number = 0;\r\n    leaveLine: number = -1;\r\n    additionalStepFinishedFlag: boolean = false;\r\n\r\n    isFirstStatement: boolean = true;\r\n\r\n    showProgrampointerUptoStepsPerSecond = 15;\r\n\r\n    worldHelper: WorldHelper;\r\n    gngEreignisbehandlungHelper: GNGEreignisbehandlungHelper;\r\n    processingHelper: ProcessingHelper;\r\n\r\n    keyboardTool: KeyboardTool;\r\n    gamepadTool: GamepadTool;\r\n\r\n    webSocketsToCloseAfterProgramHalt: WebSocket[] = [];\r\n\r\n    pauseUntil?: number;\r\n\r\n    actions: string[] = [\"start\", \"pause\", \"stop\", \"stepOver\",\r\n        \"stepInto\", \"stepOut\", \"restart\"];\r\n\r\n    // buttonActiveMatrix[button][i] tells if button is active at \r\n    // InterpreterState i\r\n    buttonActiveMatrix: { [buttonName: string]: boolean[] } = {\r\n        \"start\": [false, false, true, true, true, false],\r\n        \"pause\": [false, true, false, false, false, false],\r\n        \"stop\": [false, true, true, false, false, true],\r\n        \"stepOver\": [false, false, true, true, true, false],\r\n        \"stepInto\": [false, false, true, true, true, false],\r\n        \"stepOut\": [false, false, true, false, false, false],\r\n        \"restart\": [false, true, true, true, true, true]\r\n    }\r\n\r\n    callbackAfterExecution: () => void;\r\n\r\n    constructor(public main: MainBase, public debugger_: Debugger, public controlButtons: ProgramControlButtons,\r\n        $runDiv: JQuery<HTMLElement>) {\r\n        this.printManager = new PrintManager($runDiv, this.main);\r\n        this.inputManager = new InputManager($runDiv, this.main);\r\n        if (main.isEmbedded()) {\r\n            this.keyboardTool = new KeyboardTool(jQuery('html'), main);\r\n        } else {\r\n            this.keyboardTool = new KeyboardTool(jQuery(window), main);\r\n        }\r\n\r\n        this.gamepadTool = new GamepadTool();\r\n\r\n        this.debugger = debugger_;\r\n\r\n        controlButtons.setInterpreter(this);\r\n\r\n        this.timeWhenProgramStarted = performance.now();\r\n        this.steps = 0;\r\n        this.timeNetto = 0;\r\n        this.timerEvents = 0;\r\n\r\n        this.timerDelayMs = 7;\r\n\r\n        let that = this;\r\n\r\n        let periodicFunction = () => {\r\n\r\n            if (!that.timerExtern) {\r\n                that.timerFunction(that.timerDelayMs, false, 0.7);\r\n            }\r\n\r\n        }\r\n\r\n        this.timerId = setInterval(periodicFunction, this.timerDelayMs);\r\n\r\n        let keepAliveRequest: WebSocketRequestKeepAlive = { command: 5 };\r\n        let req = JSON.stringify(keepAliveRequest);\r\n        setInterval(() => {\r\n            that.webSocketsToCloseAfterProgramHalt.forEach(ws => ws.send(req));\r\n        }, 30000);\r\n\r\n    }\r\n\r\n    initGUI() {\r\n\r\n        let that = this;\r\n\r\n        let am = this.main.getActionManager();\r\n\r\n        let startFunction = () => {\r\n            that.stepOverNestingLevel = 1000000;\r\n            that.start();\r\n        };\r\n\r\n        let pauseFunction = () => {\r\n            that.pause();\r\n        };\r\n\r\n        am.registerAction(\"interpreter.start\", ['F4'],\r\n            () => {\r\n                if (am.isActive(\"interpreter.start\")) {\r\n                    startFunction();\r\n                } else {\r\n                    pauseFunction();\r\n                }\r\n\r\n            }, \"Programm starten\", this.controlButtons.$buttonStart);\r\n\r\n        am.registerAction(\"interpreter.pause\", ['F4'],\r\n            () => {\r\n                if (am.isActive(\"interpreter.start\")) {\r\n                    startFunction();\r\n                } else {\r\n                    pauseFunction();\r\n                }\r\n\r\n            }, \"Pause\", this.controlButtons.$buttonPause);\r\n\r\n        am.registerAction(\"interpreter.stop\", [],\r\n            () => {\r\n                that.stop(false);\r\n                that.steps = 0;\r\n            }, \"Programm anhalten\", this.controlButtons.$buttonStop);\r\n\r\n        // this.controlButtons.$buttonEdit.on('click', (e) => {\r\n        //     e.stopPropagation();\r\n        //     am.trigger('interpreter.stop');\r\n        // });\r\n\r\n        am.registerAction(\"interpreter.stepOver\", ['F6'],\r\n            () => {\r\n                this.oneStep(false);\r\n            }, \"Einzelschritt (Step over)\", this.controlButtons.$buttonStepOver);\r\n\r\n        am.registerAction(\"interpreter.stepInto\", ['F7'],\r\n            () => {\r\n                this.oneStep(true);\r\n            }, \"Einzelschritt (Step into)\", this.controlButtons.$buttonStepInto);\r\n\r\n        am.registerAction(\"interpreter.stepOut\", [],\r\n            () => {\r\n                this.stepOut();\r\n            }, \"Step out\", this.controlButtons.$buttonStepOut);\r\n\r\n        am.registerAction(\"interpreter.restart\", [],\r\n            () => {\r\n                that.stop(true);\r\n            }, \"Neu starten\", this.controlButtons.$buttonRestart);\r\n\r\n        this.setState(InterpreterState.not_initialized);\r\n\r\n    }\r\n\r\n    getStartableModule(moduleStore: ModuleStore): Module {\r\n\r\n        let cem: Module;\r\n        cem = this.main.getCurrentlyEditedModule();\r\n\r\n        let currentlyEditedModuleIsClassOnly = false;\r\n\r\n        // decide which module to start\r\n\r\n        // first attempt: is currently edited Module startable?\r\n        if (cem != null) {\r\n            let currentlyEditedModule = moduleStore.findModuleByFile(cem.file);\r\n            if (currentlyEditedModule != null) {\r\n                currentlyEditedModuleIsClassOnly = !cem.hasErrors()\r\n                    && !currentlyEditedModule.isStartable;\r\n                if (currentlyEditedModule.isStartable) {\r\n                    return currentlyEditedModule;\r\n                }\r\n            }\r\n        }\r\n\r\n        // second attempt: which module has been started last time?\r\n        if (this.mainModule != null && currentlyEditedModuleIsClassOnly) {\r\n            let lastMainModule = moduleStore.findModuleByFile(this.mainModule.file);\r\n            if (lastMainModule != null && lastMainModule.isStartable) {\r\n                return lastMainModule;\r\n            }\r\n        }\r\n\r\n        // third attempt: pick first startable module of current workspace\r\n        if (currentlyEditedModuleIsClassOnly) {\r\n            for (let m of moduleStore.getModules(false)) {\r\n                if (m.isStartable) {\r\n                    return m;\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /*\r\n        After user clicks start button (or stepover/stepInto-Button when no program is running) this\r\n        method ist called.\r\n    */\r\n    init() {\r\n\r\n        this.timerStopped = true;\r\n\r\n        let cem = this.main.getCurrentlyEditedModule();\r\n\r\n        cem.getBreakpointPositionsFromEditor();\r\n\r\n        this.main.getBottomDiv()?.console?.clearExceptions();\r\n\r\n        /*\r\n            As long as there is no startable new Version of current workspace we keep current compiled modules so\r\n            that variables and objects defined/instantiated via console can be kept, too. \r\n        */\r\n        if (this.moduleStoreVersion != this.main.version && this.main.getCompiler().atLeastOneModuleIsStartable) {\r\n            this.main.copyExecutableModuleStoreToInterpreter();\r\n            this.heap = {}; // clear variables/objects defined via console\r\n            this.main.getBottomDiv()?.console?.detachValues();  // detach values from console entries\r\n        }\r\n\r\n        let newMainModule = this.getStartableModule(this.moduleStore);\r\n\r\n        if (newMainModule == null) {\r\n            this.setState(InterpreterState.not_initialized);\r\n            return;\r\n        }\r\n\r\n        this.mainModule = newMainModule;\r\n\r\n        this.currentProgramPosition = 0;\r\n\r\n        this.programStack = [];\r\n        this.stack = [];\r\n        this.stackframes = [];\r\n        this.currentStackframe = 0;\r\n\r\n        this.setState(InterpreterState.done);\r\n\r\n        this.isFirstStatement = true;\r\n\r\n        this.stepOverNestingLevel = 1000000;\r\n\r\n\r\n        // Instantiate enum value-objects; initialize static attributes; call static constructors\r\n\r\n        this.programStack.push({\r\n            program: this.mainModule.mainProgram,\r\n            programPosition: 0,\r\n            textPosition: { line: 1, column: 1, length: 0 },\r\n            method: \"Hauptprogramm\",\r\n            callbackAfterReturn: null,\r\n            isCalledFromOutside: \"Hauptprogramm\"\r\n\r\n        })\r\n\r\n        for (let m of this.moduleStore.getModules(false)) {\r\n            this.initializeEnums(m);\r\n            this.initializeClasses(m);\r\n        }\r\n\r\n        this.popProgram();\r\n\r\n    }\r\n\r\n    popProgram() {\r\n        let p = this.programStack.pop();\r\n        this.currentProgram = p.program;\r\n        this.currentProgramPosition = p.programPosition;\r\n        this.currentMethod = p.method;\r\n        this.currentCallbackAfterReturn = p.callbackAfterReturn;\r\n        this.currentIsCalledFromOutside = p.isCalledFromOutside;\r\n        if (p.stackElementsToPushBeforeFirstExecuting != null) {\r\n\r\n            this.stackframes.push(this.currentStackframe == null ? 0 : this.currentStackframe);\r\n            this.currentStackframe = this.stack.length;\r\n\r\n            for (let se of p.stackElementsToPushBeforeFirstExecuting) this.stack.push(se);\r\n            p.stackElementsToPushBeforeFirstExecuting = null;\r\n        }\r\n    }\r\n\r\n    initializeClasses(m: Module) {\r\n\r\n        for (let klass of m.typeStore.typeList) {\r\n            if (klass instanceof Klass) {\r\n                klass.staticClass.classObject = new RuntimeObject(klass.staticClass);\r\n                klass.pushStaticInitializationPrograms(this.programStack);\r\n            }\r\n\r\n            if (klass instanceof Enum) {\r\n                // let staticValueMap = klass.staticClass.classObject.attributeValues.get(klass.identifier);\r\n                let staticValueList = klass.staticClass.classObject.attributes;\r\n                for (let enumInfo of klass.enumInfoList) {\r\n                    // staticValueMap.get(enumInfo.identifier).value = enumInfo.object;\r\n                    staticValueList[enumInfo.ordinal].value = enumInfo.object;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    initializeEnums(m: Module) {\r\n\r\n        for (let enumClass of m.typeStore.typeList) {\r\n            if (enumClass instanceof Enum) {\r\n\r\n                enumClass.pushStaticInitializationPrograms(this.programStack);\r\n\r\n                let valueList: Value[] = [];\r\n\r\n                let valueInitializationProgram: Program = {\r\n                    module: enumClass.module,\r\n                    labelManager: null,\r\n                    statements: []\r\n                };\r\n\r\n                let hasAttributeInitializationProgram = enumClass.attributeInitializationProgram.statements.length > 0;\r\n\r\n                if (hasAttributeInitializationProgram) {\r\n                    this.programStack.push({\r\n                        program: valueInitializationProgram,\r\n                        programPosition: 0,\r\n                        textPosition: { line: 1, column: 1, length: 0 },\r\n                        method: \"Attribut-Initialisierung der Klasse \" + enumClass.identifier,\r\n                        callbackAfterReturn: null,\r\n                        isCalledFromOutside: \"Initialisierung eines Enums\"\r\n                    });\r\n\r\n                }\r\n\r\n\r\n                for (let enumInfo of enumClass.enumInfoList) {\r\n                    enumInfo.object = new EnumRuntimeObject(enumClass, enumInfo);\r\n\r\n                    valueList.push({\r\n                        type: enumClass,\r\n                        value: enumInfo.object\r\n                    });\r\n\r\n                    if (enumInfo.constructorCallProgram != null) {\r\n                        this.programStack.push({\r\n                            program: enumInfo.constructorCallProgram,\r\n                            programPosition: 0,\r\n                            textPosition: { line: 1, column: 1, length: 0 },\r\n                            method: \"Konstruktor von \" + enumClass.identifier,\r\n                            callbackAfterReturn: null,\r\n                            isCalledFromOutside: \"Initialisierung eines Enums\"\r\n                        });\r\n\r\n                    }\r\n\r\n                    if (hasAttributeInitializationProgram) {\r\n                        valueInitializationProgram.statements.push({\r\n                            type: TokenType.initializeEnumValue,\r\n                            position: enumInfo.position,\r\n                            enumClass: enumClass,\r\n                            valueIdentifier: enumInfo.identifier\r\n                        })\r\n                    }\r\n\r\n                }\r\n\r\n                if (hasAttributeInitializationProgram) {\r\n                    valueInitializationProgram.statements.push({\r\n                        type: TokenType.programEnd,\r\n                        position: { line: 0, column: 0, length: 1 }\r\n                    })\r\n                }\r\n\r\n                enumClass.valueList = {\r\n                    type: new ArrayType(enumClass),\r\n                    value: valueList\r\n                };\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    timerEvents: number = 0;\r\n    start(callback?: () => void) {\r\n\r\n        this.main.getBottomDiv()?.console?.clearErrors();\r\n\r\n        this.callbackAfterExecution = callback;\r\n\r\n        this.isFirstStatement = true;\r\n\r\n        this.pauseUntil = null;\r\n\r\n        if (this.state == InterpreterState.error || this.state == InterpreterState.done) {\r\n            this.init();\r\n            this.resetRuntime();\r\n        }\r\n\r\n        this.setState(InterpreterState.running);\r\n\r\n        this.hideProgrampointerPosition();\r\n\r\n        this.timeWhenProgramStarted = performance.now();\r\n        this.timerStopped = false;\r\n\r\n        this.getTimerClass().startTimer();\r\n\r\n    }\r\n\r\n    getTimerClass(): TimerClass {\r\n        let baseModule = this.main.getCurrentWorkspace().moduleStore.getModule(\"Base Module\");\r\n        return <TimerClass>baseModule.typeStore.getType(\"Timer\");\r\n    }\r\n\r\n    lastStepTime: number = 0;\r\n    lastTimeBetweenEvents: number = 0;\r\n\r\n    timerFunction(timerDelayMs: number, forceRun: boolean, maxWorkloadFactor: number) {\r\n\r\n        let t0 = performance.now();\r\n\r\n        if (!forceRun) {\r\n            let timeBetweenSteps = 1000 / this.stepsPerSecond;\r\n            if (this.timerStopped || t0 - this.lastStepTime < timeBetweenSteps) return;\r\n            this.lastStepTime = t0;\r\n        }\r\n\r\n        this.lastTimeBetweenEvents = t0 - this.lastStepTime;\r\n\r\n        let n_stepsPerTimerGoal = forceRun ? Number.MAX_SAFE_INTEGER : this.stepsPerSecond * this.timerDelayMs / 1000;\r\n\r\n        this.timerEvents++;\r\n\r\n        let exception: string;\r\n        let i = 0;\r\n\r\n        while (i < n_stepsPerTimerGoal && !this.timerStopped && exception == null &&\r\n            (performance.now() - t0) / timerDelayMs < maxWorkloadFactor\r\n        ) {\r\n            exception = this.nextStep();\r\n            if (exception != null) {\r\n                break;\r\n            }\r\n\r\n            if (this.stepsPerSecond <= this.showProgrampointerUptoStepsPerSecond && !forceRun) {\r\n                this.showProgramPointerAndVariables();\r\n            }\r\n\r\n            if (this.state == InterpreterState.error ||\r\n                this.state == InterpreterState.done) {\r\n                this.timerStopped = true;\r\n            }\r\n\r\n\r\n            if (this.stepOverNestingLevel < 0 && !this.timerStopped) {\r\n                let node = this.currentProgram.statements[this.currentProgramPosition];\r\n                let position = node.position;\r\n                if (position == null || position.line != this.leaveLine) {\r\n                    this.timerStopped = true;\r\n                    this.setState(InterpreterState.paused);\r\n\r\n                    if (this.comesStatement(TokenType.closeStackframe)) {\r\n                        exception = this.nextStep();\r\n                        if (exception == null && this.comesStatement(TokenType.programEnd)) {\r\n                            exception = this.nextStep();\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            i++;\r\n        }\r\n\r\n        if (exception != null) {\r\n            this.throwException(exception);\r\n        }\r\n\r\n        if (this.timerStopped) {\r\n            if (this.state == InterpreterState.paused || this.state == InterpreterState.waitingForInput) {\r\n                this.showProgramPointerAndVariables();\r\n            }\r\n            if (this.callbackAfterExecution != null) {\r\n                this.callbackAfterExecution();\r\n                this.callbackAfterExecution = null;\r\n            }\r\n        }\r\n\r\n        let dt = performance.now() - t0;\r\n        this.timeNetto += dt;\r\n\r\n        // if (\r\n        //     this.timerEvents % 300 == 0) {\r\n        //     console.log(\"Last time between Events: \" + this.lastTimeBetweenEvents);\r\n        // }\r\n\r\n\r\n    }\r\n\r\n    throwException(exception: string) {\r\n        this.timerStopped = true;\r\n        this.setState(InterpreterState.error);\r\n\r\n        let $errorDiv = jQuery('<div class=\"jo_exception\"></div>');\r\n\r\n        let consolePresent: boolean = true;\r\n        if (this.main.isEmbedded()) {\r\n            let mainEmbedded: MainEmbedded = <MainEmbedded>this.main;\r\n            let config = mainEmbedded.config;\r\n            if (config.withBottomPanel != true && config.withConsole != true) {\r\n                consolePresent = false;\r\n                let positionString = \"\";\r\n                let currentStatement = this.currentProgram.statements[this.currentProgramPosition];\r\n                if (currentStatement != null) {\r\n                    let textPosition = currentStatement?.position;\r\n                    positionString = \" in Zeile \" + textPosition.line + \", Spalte \" + textPosition.column;\r\n\r\n                    this.main.getBottomDiv()?.console?.showError(this.currentProgram.module, textPosition);\r\n                }\r\n\r\n                alert(\"Fehler\" + positionString + \": \" + exception);\r\n\r\n            }\r\n        }\r\n\r\n        if (consolePresent) {\r\n            $errorDiv.append(jQuery(\"<span class='jo_error-caption'>Fehler:</span>&nbsp;\" + exception + \"<br>\"));\r\n            this.pushCurrentProgram();\r\n\r\n            let first = true;\r\n            for (let i = this.programStack.length - 1; i >= 0; i--) {\r\n\r\n                let p = this.programStack[i];\r\n                let m = (p.method instanceof Method) ? p.method.identifier : p.method;\r\n                let s: string = \"<span class='jo_error-caption'>\" + (first ? \"Ort\" : \"aufgerufen von\") + \": </span>\" + m;\r\n                if (p.textPosition != null) s += \" <span class='jo_runtimeErrorPosition'>(Z \" + p.textPosition.line + \", S \" + p.textPosition.column + \")</span>\";\r\n                s += \"<br>\";\r\n                let errorLine = jQuery(s);\r\n                if (p.textPosition != null) {\r\n                    let that = this;\r\n                    jQuery(errorLine[2]).on('mousedown', () => {\r\n                        that.main.getBottomDiv()?.console?.showError(p.program.module, p.textPosition);\r\n                    });\r\n                }\r\n                $errorDiv.append(errorLine);\r\n\r\n                first = false;\r\n                if (p.isCalledFromOutside != null) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            let console = this.main.getBottomDiv()?.console;\r\n\r\n            if (console != null) {\r\n                console.writeConsoleEntry($errorDiv, null, 'rgba(255, 0, 0, 0.4');\r\n                console.showTab();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    hideProgrampointerPosition() {\r\n\r\n        if (this.state == InterpreterState.running) {\r\n\r\n            if (this.stepsPerSecond > this.showProgrampointerUptoStepsPerSecond) {\r\n                this.main.hideProgramPointerPosition();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    comesStatement(statement: TokenType) {\r\n        if (this.currentProgram == null) return false;\r\n        if (this.currentProgramPosition > this.currentProgram.statements.length - 1) return false;\r\n        return this.currentProgram.statements[this.currentProgramPosition].type == statement;\r\n    }\r\n\r\n    resetRuntime() {\r\n        this.printManager.clear();\r\n        this.worldHelper?.destroyWorld();\r\n        this.processingHelper?.destroyWorld();\r\n        this.gngEreignisbehandlungHelper?.detachEvents();\r\n        this.gngEreignisbehandlungHelper = null;\r\n\r\n    }\r\n\r\n    stop(restart: boolean = false) {\r\n        this.inputManager.hide();\r\n        this.setState(InterpreterState.paused);\r\n        this.timerStopped = true;\r\n\r\n        if (this.worldHelper != null) {\r\n            this.worldHelper.spriteAnimations = [];\r\n        }\r\n        this.gngEreignisbehandlungHelper?.detachEvents();\r\n        this.gngEreignisbehandlungHelper = null;\r\n\r\n        this.main.hideProgramPointerPosition();\r\n\r\n        this.getTimerClass().stopTimer();\r\n        if (this.worldHelper != null) {\r\n            this.worldHelper.cacheAsBitmap();\r\n        }\r\n\r\n        this.heap = {};\r\n        this.programStack = [];\r\n        this.stack = [];\r\n        this.stackframes = [];\r\n\r\n\r\n        setTimeout(() => {\r\n            this.setState(InterpreterState.done);\r\n            this.main.hideProgramPointerPosition();\r\n            if (restart) {\r\n                this.start();\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    pause() {\r\n        this.setState(InterpreterState.paused);\r\n        this.showProgramPointerAndVariables();\r\n        this.timerStopped = true;\r\n    }\r\n\r\n    lastPrintedModule: Module = null;\r\n    showProgramPointerAndVariables() {\r\n        if (this.currentProgram == null) return;\r\n        let node = this.currentProgram.statements[this.currentProgramPosition];\r\n        if (node == null) return;\r\n        let position = node.position;\r\n        if (position != null) {\r\n            this.main.showProgramPointerPosition(this.currentProgram.module.file, position);\r\n            this.debugger.showData(this.currentProgram, position, this.stack, this.currentStackframe, this.heap);\r\n            let bottomDiv = this.main.getBottomDiv();\r\n            if (bottomDiv.programPrinter != null) {\r\n                if (this.currentProgram.module != this.lastPrintedModule) {\r\n                    this.main.getBottomDiv().printModuleToBottomDiv(null, this.currentProgram.module);\r\n                    this.lastPrintedModule = this.currentProgram.module;\r\n                }\r\n                this.main.getBottomDiv().programPrinter.showNode(node);\r\n            }\r\n        }\r\n    }\r\n\r\n    stepOut() {\r\n        this.stepOverNestingLevel = 0;\r\n        this.start();\r\n    }\r\n\r\n    oneStep(stepInto: boolean) {\r\n        this.main.getBottomDiv()?.console?.clearErrors();\r\n        this.isFirstStatement = true;\r\n        if (this.state != InterpreterState.paused) {\r\n            this.init();\r\n            if (this.state == InterpreterState.not_initialized) {\r\n                return;\r\n            }\r\n            this.resetRuntime();\r\n            this.showProgramPointerAndVariables();\r\n            this.setState(InterpreterState.paused);\r\n            // Are there static Variables to initialize?\r\n            if (this.currentMethod == \"Hauptprogramm\") {\r\n                // No static variable initializers\r\n                this.return;\r\n            }\r\n        }\r\n        this.stepOverNestingLevel = 10000;\r\n        let oldStepOverNestingLevel = this.stepOverNestingLevel;\r\n        let node = this.currentProgram.statements[this.currentProgramPosition];\r\n        let position = node.position;\r\n        let exception = this.nextStep();\r\n        if (exception != null) {\r\n            this.throwException(exception);\r\n            return;\r\n        }\r\n\r\n        if (!stepInto && this.stepOverNestingLevel > oldStepOverNestingLevel) {\r\n            this.stepOverNestingLevel = 0;\r\n            if (position != null) {\r\n                this.leaveLine = position.line;\r\n            } else {\r\n                this.leaveLine = -1;\r\n            }\r\n            this.start();\r\n        } else\r\n            //@ts-ignore\r\n            if (this.state == InterpreterState.done) {\r\n                this.main.hideProgramPointerPosition();\r\n            } else {\r\n                this.showProgramPointerAndVariables();\r\n                //@ts-ignore\r\n                if (this.state != InterpreterState.waitingForInput) {\r\n                    this.setState(InterpreterState.paused);\r\n                }\r\n            }\r\n\r\n    }\r\n\r\n    stepFinished: boolean = false;\r\n\r\n    nextStep(): string {\r\n\r\n        this.stepFinished = false;\r\n\r\n        let node: Statement;\r\n\r\n        let exception: string;\r\n\r\n        while (!this.stepFinished && !this.additionalStepFinishedFlag && exception == null) {\r\n\r\n\r\n            if (typeof this.currentProgram == \"undefined\") {\r\n                debugger;\r\n            }\r\n\r\n            if (this.currentProgramPosition > this.currentProgram.statements.length - 1) {\r\n                this.setState(InterpreterState.done);\r\n                break;\r\n            }\r\n\r\n            node = this.currentProgram.statements[this.currentProgramPosition];\r\n\r\n            if (node.stepFinished != null) {\r\n                this.stepFinished = node.stepFinished;\r\n            }\r\n\r\n            exception = this.executeNode(node);\r\n\r\n        }\r\n\r\n        this.additionalStepFinishedFlag = false;\r\n\r\n        this.steps++;\r\n\r\n        return exception;\r\n    }\r\n\r\n    executeNode(node: Statement): string {\r\n\r\n        if (node.breakpoint != null && !this.isFirstStatement) {\r\n            this.additionalStepFinishedFlag = true;\r\n            this.pause();\r\n            return;\r\n        }\r\n\r\n        this.isFirstStatement = false;\r\n        let stackTop = this.stack.length - 1;\r\n        let stackframeBegin = this.currentStackframe;\r\n        let stack = this.stack;\r\n        let value: Value;\r\n\r\n        switch (node.type) {\r\n            case TokenType.castValue:\r\n                let relPos = node.stackPosRelative == null ? 0 : node.stackPosRelative;\r\n                value = stack[stackTop + relPos];\r\n                stack[stackTop + relPos] = value.type.castTo(value, node.newType);\r\n                break;\r\n            case TokenType.checkCast:\r\n                value = stack[stackTop];\r\n                if (value.value == null) break;\r\n                let rto = <RuntimeObject>value.value;\r\n                if (node.newType instanceof Klass) {\r\n                    if (typeof rto == \"object\") {\r\n                        if (!rto.class.hasAncestorOrIs(node.newType)) {\r\n                            return (\"Das Objekt der Klasse \" + rto.class.identifier + \" kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        }\r\n                    } else {\r\n                        if (typeof rto == \"number\" && [\"Integer\", \"Double\", \"Float\"].indexOf(node.newType.identifier) < 0) {\r\n                            return (\"Eine Zahl kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        } else if (typeof rto == \"string\" && [\"String\", \"Character\"].indexOf(node.newType.identifier) < 0) {\r\n                            return (\"Eine Zeichenkette kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        } else if (typeof rto == \"boolean\" && node.newType.identifier != \"Boolean\") {\r\n                            return (\"Ein boolescher Wert kann nicht nach \" + node.newType.identifier + \" gecastet werden.\");\r\n                        }\r\n                    }\r\n                } else if (node.newType instanceof Interface) {\r\n                    if (!(<Klass>rto.class).implementsInterface(node.newType)) {\r\n                        return (\"Das Objekt der Klasse \" + rto.class.identifier + \" implementiert nicht das Interface \" + node.newType.identifier + \".\");\r\n                    }\r\n                }\r\n                break;\r\n            case TokenType.localVariableDeclaration:\r\n                let variable = node.variable;\r\n                let type = variable.type;\r\n                value = {\r\n                    type: type,\r\n                    value: null\r\n                };\r\n                if (type instanceof PrimitiveType) {\r\n                    value.value = type.initialValue;\r\n                }\r\n                stack[variable.stackPos + stackframeBegin] = value;\r\n                if (node.pushOnTopOfStackForInitialization) {\r\n                    stack.push(value);\r\n                }\r\n                break;\r\n            case TokenType.pushLocalVariableToStack:\r\n                stack.push(stack[node.stackposOfVariable + stackframeBegin]);\r\n                break;\r\n            case TokenType.popAndStoreIntoVariable:\r\n                stack[node.stackposOfVariable + stackframeBegin] = stack.pop();\r\n                break;\r\n            case TokenType.pushAttribute:\r\n                let object1 = node.useThisObject ? stack[stackframeBegin].value : stack.pop().value;\r\n                if (object1 == null) return \"Zugriff auf ein Attribut (\" + node.attributeIdentifier + \") des null-Objekts\";\r\n                let value1 = (<RuntimeObject>object1).getValue(node.attributeIndex);\r\n                if (value1?.updateValue != null) {\r\n                    value1.updateValue(value1);\r\n                }\r\n                stack.push(value1);\r\n                break;\r\n            case TokenType.pushArrayLength:\r\n                let a = stack.pop().value;\r\n                if (a == null) return \"Zugriff auf das length-Attribut des null-Objekts\";\r\n                stack.push({ type: intPrimitiveType, value: (<any[]>a).length });\r\n                break;\r\n            case TokenType.assignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value = value.value;\r\n                if (!(stack[stackTop - 1].type instanceof PrimitiveType)) {\r\n                    stack[stackTop - 1].type = value.type;\r\n                }\r\n                if (!node.leaveValueOnStack) {\r\n                    stack.pop();\r\n                }\r\n                break;\r\n            case TokenType.plusAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value += value.value;\r\n                break;\r\n            case TokenType.minusAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value -= value.value;\r\n                break;\r\n            case TokenType.multiplicationAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value *= value.value;\r\n                break;\r\n            case TokenType.divisionAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value /= value.value;\r\n                break;\r\n            case TokenType.moduloAssignment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value %= value.value;\r\n                break;\r\n            case TokenType.ANDAssigment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value &= value.value;\r\n                break;\r\n            case TokenType.ORAssigment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value |= value.value;\r\n                break;\r\n            case TokenType.XORAssigment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value ^= value.value;\r\n                break;\r\n            case TokenType.shiftLeftAssigment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value <<= value.value;\r\n                break;\r\n            case TokenType.shiftRightAssigment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value >>= value.value;\r\n                break;\r\n            case TokenType.shiftRightUnsignedAssigment:\r\n                value = stack.pop();\r\n                stack[stackTop - 1].value >>>= value.value;\r\n                break;\r\n            case TokenType.binaryOp:\r\n                let secondOperand = stack.pop();\r\n                let resultValue =\r\n                    node.leftType.compute(node.operator, stack[stackTop - 1], secondOperand);\r\n                let resultType = node.leftType.getResultType(node.operator, secondOperand.type);\r\n                stack[stackTop - 1] = {\r\n                    type: resultType,\r\n                    value: resultValue\r\n                };\r\n                break;\r\n            case TokenType.unaryOp:\r\n                let oldValue = stack.pop();\r\n                if (node.operator == TokenType.minus) {\r\n                    stack.push({\r\n                        type: oldValue.type,\r\n                        value: -oldValue.value\r\n                    })\r\n                } else {\r\n                    stack.push({\r\n                        type: oldValue.type,\r\n                        value: !oldValue.value\r\n                    })\r\n                }\r\n                break;\r\n            case TokenType.pushConstant:\r\n                stack.push({\r\n                    value: node.value,\r\n                    type: node.dataType\r\n                });\r\n                break;\r\n            case TokenType.pushStaticClassObject:\r\n                if (node.klass instanceof Klass) {\r\n                    stack.push({\r\n                        type: node.klass.staticClass,\r\n                        value: node.klass.staticClass.classObject\r\n                    });\r\n                } else {\r\n                    // This is to enable instanceof operator with interfaces\r\n                    stack.push({\r\n                        type: node.klass,\r\n                        value: node.klass\r\n                    });\r\n                }\r\n                break;\r\n            case TokenType.pushStaticAttribute:\r\n                value = node.klass.classObject.getValue(node.attributeIndex);\r\n                if (value.updateValue != null) {\r\n                    value.updateValue(value);\r\n                }\r\n                stack.push(value);\r\n                break;\r\n            // case TokenType.pushStaticAttributeIntrinsic:\r\n            //     value = node.\r\n            //     stack.push({ type: node.attribute.type, value: node.attribute.updateValue(null) });\r\n            //     break;\r\n            case TokenType.selectArrayElement:\r\n                let index = stack.pop();\r\n                let array = stack.pop();\r\n\r\n                if (array.value == null) return \"Zugriff auf ein Element eines null-Feldes\";\r\n\r\n                if (index.value >= array.value.length || index.value < 0) {\r\n                    return \"Zugriff auf das Element mit Index \" + index.value + \" eines Feldes der Länge \" + array.value.length;\r\n                }\r\n                stack.push(array.value[index.value]);\r\n                break;\r\n\r\n            case TokenType.callMainMethod:\r\n                this.stack.push({ value: node.staticClass.classObject, type: node.staticClass });\r\n\r\n                let parameter: Value = {\r\n                    value: [{ value: \"Test\", type: stringPrimitiveType }],\r\n                    type: new ArrayType(stringPrimitiveType)\r\n                };\r\n                let parameterBegin2 = stackTop + 2; // 1 parameter\r\n\r\n                this.stack.push(parameter);\r\n\r\n                this.stackframes.push(this.currentStackframe);\r\n                this.programStack.push({\r\n                    program: this.currentProgram,\r\n                    programPosition: this.currentProgramPosition + 1,\r\n                    textPosition: node.position,\r\n                    method: this.currentMethod,\r\n                    callbackAfterReturn: this.currentCallbackAfterReturn,\r\n                    isCalledFromOutside: null\r\n                });\r\n\r\n                this.currentCallbackAfterReturn = null;\r\n                this.currentStackframe = parameterBegin2;\r\n\r\n                this.currentProgram = node.method.program;\r\n                this.currentMethod = node.method;\r\n                this.currentProgramPosition = -1; // gets increased after switch statement...\r\n\r\n                for (let i = 0; i < node.method.reserveStackForLocalVariables; i++) {\r\n                    stack.push(null);\r\n                }\r\n\r\n                // this.stepOverNestingLevel++;\r\n\r\n                break;\r\n            case TokenType.makeEllipsisArray:\r\n                let ellipsisArray: Value[] = stack.splice(stack.length - node.parameterCount, node.parameterCount);\r\n\r\n                stack.push({\r\n                    value: ellipsisArray,\r\n                    type: node.arrayType\r\n                })\r\n\r\n                break;\r\n            case TokenType.callMethod:\r\n\r\n                // node.stackframebegin = -(parameters.parameterTypes.length + 1)\r\n                let method = node.method;\r\n\r\n                let parameterBegin = stackTop + 1 + node.stackframeBegin;\r\n                let parameters1 = method.parameterlist.parameters;\r\n                for (let i = parameterBegin + 1; i <= stackTop; i++) {\r\n                    if (this.stack[i] != null && this.stack[i].type instanceof PrimitiveType) {\r\n                        stack[i] = {\r\n                            type: parameters1[i - parameterBegin - 1].type,  // cast to parameter type...\r\n                            value: stack[i].value\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (stack[parameterBegin].value == null && !method.isStatic) {\r\n                    return \"Aufruf der Methode \" + method.identifier + \" des null-Objekts\";\r\n                }\r\n\r\n                if (method.isAbstract || method.isVirtual && !node.isSuperCall) {\r\n                    let object = stack[parameterBegin];\r\n                    if (object.value instanceof RuntimeObject) {\r\n                        method = (<Klass>(<RuntimeObject>object.value).class).getMethodBySignature(method.signature);\r\n                    } else {\r\n                        method = (<Klass>object.type).getMethodBySignature(method.signature);\r\n                    }\r\n                }\r\n\r\n                if (method == null) {\r\n                    // TODO: raise runtime error\r\n                    break;\r\n                }\r\n\r\n                if (method.invoke != null) {\r\n                    let rt = method.getReturnType();\r\n                    let parameters = stack.splice(parameterBegin);\r\n                    let returnValue = method.invoke(parameters);\r\n                    if (rt != null && rt.identifier != 'void') {\r\n                        stack.push({\r\n                            value: returnValue,\r\n                            type: rt\r\n                        });\r\n                    }\r\n                } else {\r\n                    this.stackframes.push(this.currentStackframe);\r\n                    this.programStack.push({\r\n                        program: this.currentProgram,\r\n                        programPosition: this.currentProgramPosition + 1,\r\n                        textPosition: node.position,\r\n                        method: this.currentMethod,\r\n                        callbackAfterReturn: this.currentCallbackAfterReturn,\r\n                        isCalledFromOutside: null\r\n                    });\r\n\r\n                    this.currentCallbackAfterReturn = null;\r\n                    this.currentStackframe = parameterBegin;\r\n\r\n                    this.currentProgram = method.program;\r\n                    this.currentMethod = method;\r\n                    this.currentProgramPosition = -1; // gets increased after switch statement...\r\n\r\n                    for (let i = 0; i < method.reserveStackForLocalVariables; i++) {\r\n                        stack.push(null);\r\n                    }\r\n\r\n                    this.stepOverNestingLevel++;\r\n                    this.additionalStepFinishedFlag = true;\r\n                }\r\n                break;\r\n            case TokenType.callInputMethod:\r\n\r\n                // node.stackframebegin = -(parameters.parameterTypes.length + 1)\r\n                let method1 = node.method;\r\n\r\n                let parameterBegin1 = stackTop + 1 + node.stackframeBegin;\r\n\r\n                let parameters = stack.splice(parameterBegin1);\r\n\r\n                this.timerStopped = true;\r\n                let oldState = this.state;\r\n                this.setState(InterpreterState.waitingForInput);\r\n                // this.main.showProgramPointerPosition(this.currentProgram.module.file, node.position);\r\n                this.showProgramPointerAndVariables();\r\n\r\n                let that = this;\r\n                this.inputManager.readInput(method1, parameters, (value: Value) => {\r\n                    stack.push(value);\r\n                    this.main.hideProgramPointerPosition();\r\n                    that.setState(InterpreterState.paused);\r\n                    if (oldState == InterpreterState.running) {\r\n                        that.start();\r\n                    } else {\r\n                        that.showProgramPointerAndVariables();\r\n                        // that.oneStep(false);\r\n                    }\r\n                });\r\n                break;\r\n\r\n            case TokenType.return:\r\n                this.return(node, stack);\r\n                break;\r\n            case TokenType.decreaseStackpointer:\r\n                stack.splice(stackTop + 1 - node.popCount);\r\n                break;\r\n            case TokenType.initStackframe:\r\n                this.stackframes.push(this.currentStackframe);\r\n                this.currentStackframe = stackTop + 1;\r\n                for (let i = 0; i < node.reserveForLocalVariables; i++) {\r\n                    stack.push(null);\r\n                }\r\n                break;\r\n            case TokenType.closeStackframe:\r\n                stack.splice(stackframeBegin);\r\n                this.currentStackframe = this.stackframes.pop();\r\n                break;\r\n            case TokenType.newObject:\r\n                let object = new RuntimeObject(node.class);\r\n\r\n                value = {\r\n                    value: object,\r\n                    type: node.class\r\n                };\r\n\r\n                stack.push(value);\r\n                if (node.subsequentConstructorCall) {\r\n                    stack.push(value);\r\n                    stackTop++;\r\n                }\r\n\r\n                let klass: Klass = node.class;\r\n\r\n                while (klass != null) {\r\n                    let aip = klass.attributeInitializationProgram;\r\n                    if (aip.statements.length > 0) {\r\n\r\n                        this.stackframes.push(this.currentStackframe);\r\n                        this.programStack.push({\r\n                            program: this.currentProgram,\r\n                            programPosition: this.currentProgramPosition + 1,\r\n                            textPosition: node.position,\r\n                            method: this.currentMethod,\r\n                            callbackAfterReturn: this.currentCallbackAfterReturn,\r\n                            isCalledFromOutside: null\r\n                        });\r\n\r\n                        this.currentCallbackAfterReturn = null;\r\n                        this.currentStackframe = stackTop + 1;\r\n\r\n                        this.currentProgram = aip;\r\n                        this.currentProgramPosition = -1;\r\n                        this.currentMethod = \"Konstruktor von \" + klass.identifier;\r\n                        this.stepOverNestingLevel++;\r\n\r\n                        this.additionalStepFinishedFlag = true;\r\n\r\n                    }\r\n                    klass = klass.baseClass;\r\n                }\r\n\r\n                // N.B.: constructor call is next statement\r\n\r\n                break;\r\n            case TokenType.processPostConstructorCallbacks:\r\n                value = stack[stackTop];\r\n                let classType = <Klass>value.type;\r\n                for (let pcc of classType.getPostConstructorCallbacks()) {\r\n                    pcc(value.value);\r\n                }\r\n                break;\r\n            case TokenType.extendedForLoopInit:\r\n                stack[node.stackPosOfCounter + stackframeBegin] = {\r\n                    type: intPrimitiveType,\r\n                    value: 0\r\n                }\r\n                break;\r\n            case TokenType.extendedForLoopCheckCounterAndGetElement:\r\n                let counter: number = stack[node.stackPosOfCounter + stackframeBegin].value++;\r\n                let collection = stack[node.stackPosOfCollection + stackframeBegin].value;\r\n\r\n                switch (node.kind) {\r\n                    case \"array\":\r\n                        if (counter < (<any[]>collection).length) {\r\n                            stack[node.stackPosOfElement + stackframeBegin].value = (<any[]>collection)[counter].value;\r\n                            stack[node.stackPosOfElement + stackframeBegin].type = (<any[]>collection)[counter].type;\r\n                        } else {\r\n                            this.currentProgramPosition = node.destination - 1;\r\n                        }\r\n                        break;\r\n                    case \"internalList\":\r\n                        let list: any[] = (<ListHelper>(<RuntimeObject>collection).intrinsicData[\"ListHelper\"]).valueArray;\r\n                        if (counter < list.length) {\r\n                            stack[node.stackPosOfElement + stackframeBegin].value = list[counter].value;\r\n                            stack[node.stackPosOfElement + stackframeBegin].type = list[counter].type;\r\n                        } else {\r\n                            this.currentProgramPosition = node.destination - 1;\r\n                        }\r\n                        break;\r\n                    case \"group\":\r\n                        let list1: any[] = (<GroupHelper>(<RuntimeObject>collection).intrinsicData[\"Actor\"]).shapes;\r\n                        if (counter < list1.length) {\r\n                            stack[node.stackPosOfElement + stackframeBegin].value = list1[counter];\r\n                            stack[node.stackPosOfElement + stackframeBegin].type = list1[counter].klass;\r\n                        } else {\r\n                            this.currentProgramPosition = node.destination - 1;\r\n                        }\r\n                        break;\r\n                }\r\n                break;\r\n            case TokenType.incrementDecrementBefore:\r\n                value = stack[stackTop];\r\n                value.value += node.incrementDecrementBy;\r\n                break;\r\n            case TokenType.incrementDecrementAfter:\r\n                value = stack[stackTop];\r\n                // replace value by copy:\r\n                stack[stackTop] = {\r\n                    value: value.value,\r\n                    type: value.type\r\n                };\r\n                // increment value which is not involved in subsequent \r\n                value.value += node.incrementDecrementBy;\r\n                break;\r\n            case TokenType.jumpAlways:\r\n                this.currentProgramPosition = node.destination - 1;\r\n                break;\r\n            case TokenType.jumpIfTrue:\r\n                value = stack.pop();\r\n                if (<boolean>value.value) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.jumpIfFalse:\r\n                value = stack.pop();\r\n                if (!(<boolean>value.value)) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.jumpIfTrueAndLeaveOnStack:\r\n                value = stack[stackTop];\r\n                if (<boolean>value.value) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.jumpIfFalseAndLeaveOnStack:\r\n                value = stack[stackTop];\r\n                if (!(<boolean>value.value)) {\r\n                    this.currentProgramPosition = node.destination - 1;\r\n                }\r\n                break;\r\n            case TokenType.noOp:\r\n                break;\r\n            case TokenType.programEnd:\r\n\r\n                if (this.programStack.length > 0) {\r\n                    this.popProgram();\r\n                    this.currentProgramPosition--; // gets increased later on after switch ends\r\n                    this.additionalStepFinishedFlag = true;\r\n                    this.leaveLine = -1;\r\n\r\n                    if (node.pauseAfterProgramEnd) {\r\n                        this.stepOverNestingLevel = -1;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n                if ((this.worldHelper != null && this.worldHelper.hasActors()) || this.processingHelper != null\r\n                    || (this.gngEreignisbehandlungHelper != null && this.gngEreignisbehandlungHelper.hasAktionsEmpfaenger())) {\r\n                    this.currentProgramPosition--;\r\n                    break\r\n                }\r\n\r\n                let baseModule = this.main.getCurrentWorkspace().moduleStore.getModule(\"Base Module\");\r\n                let timerClass: TimerClass = <TimerClass>baseModule.typeStore.getType(\"Timer\");\r\n                if (timerClass.timerEntries.length > 0) {\r\n                    this.currentProgramPosition--;\r\n                    break\r\n                }\r\n\r\n                // this.setState(InterpreterState.done);\r\n                this.currentProgram = null;\r\n                this.currentProgramPosition = -1;\r\n                this.additionalStepFinishedFlag = true;\r\n\r\n                Helper.showHelper(\"speedControlHelper\", this.main);\r\n\r\n                this.printManager.showProgramEnd();\r\n\r\n                if (this.steps > 0) {\r\n                    let dt = performance.now() - this.timeWhenProgramStarted;\r\n                    let message = 'Executed ' + this.steps + ' steps in ' + this.round(dt)\r\n                        + ' ms (' + this.round(this.steps / dt * 1000) + ' steps/s)';\r\n                    this.main.getBottomDiv()?.console?.writeConsoleEntry(message, null);\r\n                    // console.log(this.timerEvents + \" TimeEvents in \" + dt + \" ms ergibt ein Event alle \" + dt/this.timerEvents + \" ms.\");\r\n                    // console.log(\"Vorgegebene Timerfrequenz: Alle \" + this.timerDelayMs + \" ms\");\r\n                    this.steps = -1;\r\n                }\r\n\r\n                // if (this.worldHelper != null) {\r\n                //     this.worldHelper.spriteAnimations = [];\r\n                // }\r\n                // this.gngEreignisbehandlungHelper?.detachEvents();\r\n                // this.gngEreignisbehandlungHelper = null;\r\n\r\n                // this.main.hideProgramPointerPosition();\r\n\r\n                // if(this.worldHelper != null){\r\n                //     this.worldHelper.cacheAsBitmap();\r\n                // }\r\n\r\n                this.currentProgramPosition--;\r\n                this.stop();\r\n                break;\r\n            case TokenType.print:\r\n            case TokenType.println:\r\n                let text = null;\r\n                let color = null;\r\n                if (node.withColor) color = <string | number>stack.pop().value;\r\n                if (!node.empty) text = <string>stack.pop().value;\r\n                if (node.type == TokenType.println) {\r\n                    this.printManager.println(text, color);\r\n                } else {\r\n                    this.printManager.print(text, color);\r\n                }\r\n                break;\r\n            case TokenType.pushEmptyArray:\r\n                let counts: number[] = [];\r\n                for (let i = 0; i < node.dimension; i++) {\r\n                    counts.push(<number>stack.pop().value);\r\n                }\r\n                stack.push(this.makeEmptyArray(counts, node.arrayType));\r\n                break;\r\n            case TokenType.beginArray:\r\n                stack.push({\r\n                    type: node.arrayType,\r\n                    value: []\r\n                });\r\n                break;\r\n            case TokenType.addToArray:\r\n                stackTop -= node.numberOfElementsToAdd;\r\n                // let values: Value[] = stack.splice(stackTop + 1, node.numberOfElementsToAdd);\r\n                let values: Value[] = stack.splice(stackTop + 1, node.numberOfElementsToAdd).map(tvo => ({ type: tvo.type, value: tvo.value }));\r\n                stack[stackTop].value = (<any[]>stack[stackTop].value).concat(values);\r\n                break;\r\n            case TokenType.pushEnumValue:\r\n                let enumInfo = node.enumClass.identifierToInfoMap[node.valueIdentifier];\r\n                stack.push(node.enumClass.valueList.value[enumInfo.ordinal]);\r\n                break;\r\n            case TokenType.keywordSwitch:\r\n                let switchValue = stack.pop().value;\r\n                let destination = node.destinationMap[switchValue];\r\n                if (destination != null) {\r\n                    this.currentProgramPosition = destination - 1; // it will be increased after this switch-statement!\r\n                } else {\r\n                    if (node.defaultDestination != null) {\r\n                        this.currentProgramPosition = node.defaultDestination - 1;\r\n                    }\r\n                    // there's a jumpnode after this node which jumps right after last switch case,\r\n                    // so there's nothing more to do here.\r\n                }\r\n                break;\r\n            case TokenType.heapVariableDeclaration:\r\n\r\n                let v = node.variable;\r\n                this.heap[v.identifier] = v;\r\n                v.value = {\r\n                    type: v.type,\r\n                    value: (v.type instanceof PrimitiveType) ? v.type.initialValue : null\r\n                }\r\n                if (node.pushOnTopOfStackForInitialization) {\r\n                    this.stack.push(v.value);\r\n                }\r\n\r\n                break;\r\n            case TokenType.pushFromHeapToStack:\r\n                let v1 = this.heap[node.identifier];\r\n                if (v1 != null) {\r\n                    this.stack.push(v1.value);\r\n                } else {\r\n                    return \"Die Variable \" + node.identifier + \" ist nicht bekannt.\";\r\n                }\r\n                break;\r\n            case TokenType.returnIfDestroyed:\r\n                let shapeRuntimeObject: RuntimeObject = this.stack[stackframeBegin].value;\r\n                if (shapeRuntimeObject != null) {\r\n                    let shape = shapeRuntimeObject.intrinsicData[\"Actor\"];\r\n                    if (shape[\"isDestroyed\"] == true) {\r\n                        this.return(null, stack);\r\n                    }\r\n                }\r\n                break;\r\n            case TokenType.setPauseDuration:\r\n                let duration = this.stack.pop().value;\r\n                if (this.pauseUntil == null) {\r\n                    this.pauseUntil = performance.now() + duration;\r\n                }\r\n                break;\r\n            case TokenType.pause:\r\n                node.stepFinished = true;\r\n                if (this.pauseUntil != null && performance.now() < this.pauseUntil) {\r\n                    this.currentProgramPosition--;\r\n                } else {\r\n                    this.pauseUntil = null;\r\n                }\r\n                break;\r\n\r\n        }\r\n\r\n\r\n        this.currentProgramPosition++;\r\n\r\n    }\r\n    return(node: ReturnStatement | null, stack: Value[]) {\r\n\r\n        let currentCallbackAfterReturn = this.currentCallbackAfterReturn;\r\n\r\n        if (node != null && node.copyReturnValueToStackframePos0) {\r\n            let returnValue: Value = stack.pop();\r\n            stack[this.currentStackframe] = returnValue;\r\n            stack.splice(this.currentStackframe + 1);\r\n        } else {\r\n            stack.splice(this.currentStackframe + ((node != null && node.leaveThisObjectOnStack) ? 1 : 0));\r\n        }\r\n\r\n        this.currentStackframe = this.stackframes.pop();\r\n\r\n        this.popProgram();\r\n        if (node != null && node.methodWasInjected == true) this.currentProgramPosition++;\r\n        this.currentProgramPosition--;  // position gets increased by one at the end of this switch-statement, so ... - 1\r\n        this.stepOverNestingLevel--;\r\n\r\n        if (currentCallbackAfterReturn != null) {\r\n            currentCallbackAfterReturn(this);\r\n        }\r\n\r\n        if (this.stepOverNestingLevel < 0 && this.currentProgram.statements[this.currentProgramPosition + 1].type == TokenType.jumpAlways) {\r\n            this.stepFinished = false;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    makeEmptyArray(counts: number[], type: Type): Value {\r\n        let type1 = (<ArrayType>type).arrayOfType;\r\n        if (counts.length == 1) {\r\n            let array: Value[] = [];\r\n            for (let i = 0; i < counts[0]; i++) {\r\n                let v = {\r\n                    type: type1,\r\n                    value: null\r\n                };\r\n\r\n                if (type1 instanceof PrimitiveType) {\r\n                    v.value = type1.initialValue;\r\n                }\r\n\r\n                array.push(v);\r\n\r\n            }\r\n            return {\r\n                type: type,\r\n                value: array\r\n            };\r\n        } else {\r\n            let array: Value[] = [];\r\n            let n = counts.pop();\r\n            for (let i = 0; i < n; i++) {\r\n                array.push(this.makeEmptyArray(counts, type1));\r\n            }\r\n            return {\r\n                type: type,\r\n                value: array\r\n            };\r\n        }\r\n    }\r\n\r\n\r\n    round(n: number): string {\r\n        return \"\" + Math.round(n * 10000) / 10000;\r\n    }\r\n\r\n    runningStates: InterpreterState[] = [InterpreterState.paused, InterpreterState.running, InterpreterState.waitingForInput];\r\n\r\n    setState(state: InterpreterState) {\r\n\r\n        // console.log(\"Set state \" + InterpreterState[state]);\r\n\r\n        let oldState = this.state;\r\n        this.state = state;\r\n\r\n        if (state == InterpreterState.error || state == InterpreterState.done) {\r\n            this.closeAllWebsockets();\r\n        }\r\n\r\n        let am = this.main.getActionManager();\r\n\r\n        for (let actionId of this.actions) {\r\n            am.setActive(\"interpreter.\" + actionId, this.buttonActiveMatrix[actionId][state]);\r\n        }\r\n\r\n        let buttonStartActive = this.buttonActiveMatrix['start'][state];\r\n\r\n        if (buttonStartActive) {\r\n            this.controlButtons.$buttonStart.show();\r\n            this.controlButtons.$buttonPause.hide();\r\n        } else {\r\n            this.controlButtons.$buttonStart.hide();\r\n            this.controlButtons.$buttonPause.show();\r\n        }\r\n\r\n        let buttonStopActive = this.buttonActiveMatrix['stop'][state];\r\n        if (buttonStopActive) {\r\n            // this.controlButtons.$buttonEdit.show();\r\n        } else {\r\n            // this.controlButtons.$buttonEdit.hide();\r\n            if (this.worldHelper != null) {\r\n                this.worldHelper.clearActorLists();\r\n            }\r\n            this.gngEreignisbehandlungHelper?.detachEvents();\r\n            this.gngEreignisbehandlungHelper = null;\r\n        }\r\n\r\n        if (this.runningStates.indexOf(oldState) >= 0 && this.runningStates.indexOf(state) < 0) {\r\n            this.debugger.disable();\r\n            // this.main.getMonacoEditor().updateOptions({ readOnly: false });\r\n            this.keyboardTool.unsubscribeAllListeners();\r\n        }\r\n\r\n        if (this.runningStates.indexOf(oldState) < 0 && this.runningStates.indexOf(state) >= 0) {\r\n            this.debugger.enable();\r\n            // this.main.getMonacoEditor().updateOptions({ readOnly: true });\r\n        }\r\n\r\n    }\r\n\r\n    closeAllWebsockets() {\r\n        this.webSocketsToCloseAfterProgramHalt.forEach(socket => socket.close());\r\n        this.webSocketsToCloseAfterProgramHalt = [];\r\n    }\r\n\r\n\r\n    pushCurrentProgram() {\r\n\r\n        if (this.currentProgram == null) return;\r\n\r\n        let textPosition: TextPosition;\r\n        let currentStatement = this.currentProgram.statements[this.currentProgramPosition];\r\n        if (currentStatement != null) {\r\n            textPosition = currentStatement.position;\r\n        }\r\n\r\n        this.programStack.push({\r\n            program: this.currentProgram,\r\n            programPosition: this.currentProgramPosition,\r\n            textPosition: textPosition,\r\n            method: this.currentMethod,\r\n            callbackAfterReturn: this.currentCallbackAfterReturn,\r\n            isCalledFromOutside: this.currentIsCalledFromOutside\r\n        })\r\n\r\n        this.currentCallbackAfterReturn = null;\r\n        this.currentIsCalledFromOutside = null;\r\n\r\n    }\r\n\r\n    // runTimer(method: Method, stackElements: Value[],\r\n    //     callbackAfterReturn: (interpreter: Interpreter) => void) {\r\n\r\n    //     if(this.state != InterpreterState.running){\r\n    //         return;\r\n    //     }\r\n\r\n    //     this.pushCurrentProgram();\r\n\r\n    //     this.currentProgram = method.program;\r\n    //     this.currentMethod = method;\r\n    //     this.currentProgramPosition = 0;\r\n    //     this.currentCallbackAfterReturn = callbackAfterReturn;\r\n    //     this.currentIsCalledFromOutside = \"Timer\";\r\n\r\n    //     this.stackframes.push(this.currentStackframe);\r\n    //     this.currentStackframe = this.stack.length;\r\n    //     for (let se of stackElements) this.stack.push(se);\r\n    //     let statements = method.program.statements;\r\n\r\n    //     // if program ends with return then this return-statement decreases stepOverNestingLevel. So we increase it\r\n    //     // beforehand to compensate this effect.\r\n    //     if(statements[statements.length - 1].type == TokenType.return) this.stepOverNestingLevel++;\r\n\r\n    // }\r\n\r\n    runTimer(method: Method, stackElements: Value[],\r\n        callbackAfterReturn: (interpreter: Interpreter) => void, isActor: boolean) {\r\n\r\n        if (this.state != InterpreterState.running) {\r\n            return;\r\n        }\r\n\r\n        let statements = method.program.statements;\r\n\r\n        if (isActor || this.programStack.length == 0) {\r\n            // Main Program is running => Timer has higher precedence\r\n            this.pushCurrentProgram();\r\n\r\n            this.currentProgram = method.program;\r\n            this.currentMethod = method;\r\n            this.currentProgramPosition = 0;\r\n            this.currentCallbackAfterReturn = callbackAfterReturn;\r\n            this.currentIsCalledFromOutside = \"Timer\";\r\n\r\n            this.stackframes.push(this.currentStackframe);\r\n            this.currentStackframe = this.stack.length;\r\n            this.stack = this.stack.concat(stackElements);\r\n            // for (let se of stackElements) this.stack.push(se);\r\n\r\n            // if program ends with return then this return-statement decreases stepOverNestingLevel. So we increase it\r\n            // beforehand to compensate this effect.\r\n            if (statements[statements.length - 1].type == TokenType.return) this.stepOverNestingLevel++;\r\n        } else {\r\n            // another Timer is running => queue up\r\n            // position 0 in program stack is main program\r\n            // => insert timer in position 1\r\n\r\n            this.programStack.splice(1, 0, {\r\n                program: method.program,\r\n                programPosition: 0,\r\n                textPosition: { line: 0, column: 0, length: 0 },\r\n                method: method,\r\n                callbackAfterReturn: callbackAfterReturn,\r\n                isCalledFromOutside: \"Timer\",\r\n                stackElementsToPushBeforeFirstExecuting: stackElements\r\n            });\r\n\r\n            if (statements[statements.length - 1].type == TokenType.return) this.stepOverNestingLevel++;\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    evaluate(program: Program): { error: string, value: Value } {\r\n\r\n        this.pushCurrentProgram();\r\n\r\n        this.currentProgram = program;\r\n        this.currentProgramPosition = 0;\r\n\r\n        let stacksizeBefore = this.stack.length;\r\n\r\n        let oldInterpreterState = this.state;\r\n        let stepOverNestingLevel = this.stepOverNestingLevel;\r\n        let additionalStepFinishedFlag = this.additionalStepFinishedFlag;\r\n\r\n        let oldStackframe = this.currentStackframe;\r\n\r\n        let error: string;\r\n        let stepCount = 0;\r\n\r\n        try {\r\n            while (error == null &&\r\n                (this.currentProgram != program || this.currentProgramPosition <\r\n                    this.currentProgram.statements.length)\r\n                && stepCount < 100000\r\n                // && this.currentProgram == program\r\n            ) {\r\n                error = this.nextStep();\r\n                stepCount++;\r\n            }\r\n        } catch (e) {\r\n            error = \"Fehler bei der Auswertung\";\r\n        }\r\n\r\n        if (this.currentProgram == program && this.programStack.length > 0) {\r\n            this.popProgram();\r\n        }\r\n\r\n        let stackTop: Value;\r\n        if (this.stack.length > stacksizeBefore) {\r\n            stackTop = this.stack.pop();\r\n\r\n            while (this.stack.length > stacksizeBefore) {\r\n                this.stack.pop();\r\n            }\r\n\r\n        }\r\n\r\n        this.stepOverNestingLevel = stepOverNestingLevel;\r\n        this.additionalStepFinishedFlag = additionalStepFinishedFlag;\r\n        this.setState(oldInterpreterState);\r\n\r\n        return {\r\n            error: error,\r\n            value: stackTop\r\n        }\r\n\r\n    }\r\n\r\n    executeImmediatelyInNewStackframe(program: Program, valuesToPushBeforeExecuting: Value[]): { error: string, value: Value } {\r\n\r\n        this.pushCurrentProgram();\r\n\r\n        this.currentProgram = program;\r\n        let oldProgramPosition = this.currentProgramPosition;\r\n        this.currentProgramPosition = 0;\r\n\r\n        let numberOfStackframesBefore = this.stackframes.length;\r\n        this.stackframes.push(this.currentStackframe);\r\n        let stacksizeBefore = this.stack.length;\r\n        this.currentStackframe = stacksizeBefore;\r\n\r\n        for (let v of valuesToPushBeforeExecuting) this.stack.push(v);\r\n\r\n        let oldInterpreterState = this.state;\r\n        let stepOverNestingLevel = this.stepOverNestingLevel;\r\n        let additionalStepFinishedFlag = this.additionalStepFinishedFlag;\r\n\r\n\r\n        let stepCount = 0;\r\n        let error = null;\r\n\r\n        try {\r\n            while (this.stackframes.length > numberOfStackframesBefore\r\n                && stepCount < 100000 && error == null\r\n            ) {\r\n                let node = this.currentProgram.statements[this.currentProgramPosition];\r\n\r\n                error = this.executeNode(node);\r\n                stepCount++;\r\n            }\r\n        } catch (e) {\r\n            error = \"Fehler bei der Auswertung\";\r\n        }\r\n\r\n        if (stepCount == 100000) this.throwException(\"Die Ausführung des Konstruktors dauerte zu lange.\");\r\n\r\n        let stackTop: Value;\r\n        if (this.stack.length > stacksizeBefore) {\r\n            stackTop = this.stack.pop();\r\n\r\n            while (this.stack.length > stacksizeBefore) {\r\n                this.stack.pop();\r\n            }\r\n\r\n        }\r\n\r\n        this.stepOverNestingLevel = stepOverNestingLevel;\r\n        this.additionalStepFinishedFlag = additionalStepFinishedFlag;\r\n        // this.currentProgramPosition++;\r\n\r\n        this.currentProgramPosition = oldProgramPosition;\r\n        this.setState(oldInterpreterState);\r\n\r\n        return {\r\n            error: error,\r\n            value: stackTop\r\n        }\r\n\r\n    }\r\n\r\n    instantiateObjectImmediately(klass: Klass): RuntimeObject {\r\n        let object = new RuntimeObject(klass);\r\n\r\n        let value = {\r\n            value: object,\r\n            type: klass\r\n        };\r\n\r\n        let klass1 = klass;\r\n\r\n        while (klass1 != null) {\r\n            let aip = klass1.attributeInitializationProgram;\r\n            if (aip.statements.length > 0) {\r\n\r\n                this.executeImmediatelyInNewStackframe(aip, [value]);\r\n\r\n            }\r\n            klass1 = klass1.baseClass;\r\n        }\r\n\r\n        let constructor = klass.getMethodBySignature(klass.identifier + \"()\");\r\n        if (constructor != null && constructor.program != null) {\r\n            // let programWithoutReturnStatement: Program = {\r\n            //     labelManager: null,\r\n            //     module: constructor.program.module,\r\n            //     statements: constructor.program.statements.slice(0, constructor.program.statements.length - 1)\r\n            // };\r\n            this.executeImmediatelyInNewStackframe(constructor.program, [value]);\r\n        }\r\n\r\n        return object;\r\n\r\n    }\r\n\r\n}","import { ColorHelper } from \"./ColorHelper.js\";\r\n\r\nexport class FilledShapeDefaults {\r\n    static defaultFillColor: number = 0x8080ff;\r\n    static defaultFillAlpha: number = 1.0;\r\n\r\n    static defaultBorderColor: number = null;\r\n    static defaultBorderAlpha: number = 1.0;\r\n    static defaultBorderWidth: number = 10;\r\n\r\n    static defaultVisibility: boolean = true;\r\n\r\n    static initDefaultValues(){\r\n        FilledShapeDefaults.defaultFillColor = 0x8080ff;\r\n        FilledShapeDefaults.defaultFillAlpha = 1.0;\r\n    \r\n        FilledShapeDefaults.defaultBorderColor = null;\r\n        FilledShapeDefaults.defaultBorderAlpha = 1.0;\r\n        FilledShapeDefaults.defaultBorderWidth = 10;\r\n\r\n        FilledShapeDefaults.defaultVisibility = true;\r\n    }\r\n\r\n    static setDefaultVisibility(visibility: boolean) {\r\n        FilledShapeDefaults.defaultVisibility = visibility;\r\n    }\r\n\r\n    static setDefaultBorder(width: number, color: string | number, alpha?: number) {\r\n\r\n        FilledShapeDefaults.defaultBorderWidth = width;\r\n\r\n        if (typeof color == \"string\") {\r\n            let c = ColorHelper.parseColorToOpenGL(color);\r\n            FilledShapeDefaults.defaultBorderColor = c.color;\r\n            FilledShapeDefaults.defaultBorderAlpha = alpha == null ? c.alpha : alpha;\r\n        } else {\r\n            FilledShapeDefaults.defaultBorderColor = color;\r\n            if (alpha != null) FilledShapeDefaults.defaultBorderAlpha = alpha;\r\n        }\r\n\r\n    }\r\n\r\n    static setDefaultFillColor(color: string | number, alpha?: number) {\r\n\r\n        if (typeof color == \"string\") {\r\n            let c = ColorHelper.parseColorToOpenGL(color);\r\n            FilledShapeDefaults.defaultFillColor = c.color;\r\n            FilledShapeDefaults.defaultFillAlpha = alpha == null ? c.alpha : alpha;\r\n        } else {\r\n            FilledShapeDefaults.defaultFillColor = color;\r\n            if (alpha != null) FilledShapeDefaults.defaultFillAlpha = alpha;\r\n        }\r\n\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter, InterpreterState } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ActorHelper } from \"./Actor.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { FilledShapeDefaults } from \"./FilledShapeDefaults.js\";\r\nimport { GroupClass, GroupHelper } from \"./Group.js\";\r\nimport { MouseListenerInterface } from \"./MouseListener.js\";\r\nimport { ShapeClass, ShapeHelper } from \"./Shape.js\";\r\nimport { SpriteHelper } from \"./Sprite.js\";\r\n\r\nexport class WorldClass extends Klass {\r\n\r\n    constructor(public module: Module) {\r\n\r\n        super(\"World\", module, \"Grafische Zeichenfläche mit Koordinatensystem\")\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        let groupType = <GroupClass>module.typeStore.getType(\"Group\");\r\n        let shapeType = <ShapeClass>module.typeStore.getType(\"Shape\");\r\n        let mouseListenerType = <MouseListenerInterface>module.typeStore.getType(\"MouseListener\");\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"World\", new Parameterlist([\r\n            { identifier: \"breite\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"höhe\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let breite: number = parameters[1].value;\r\n                let höhe: number = parameters[2].value;\r\n                let gh: WorldHelper = this.getWorldHelper(o, breite, höhe);  //new WorldHelper(breite, höhe, this.module, o);\r\n                o.intrinsicData[\"World\"] = gh;\r\n\r\n            }, false, false, \"Legt einen neuen Grafikbereich (='Welt') an\", true));\r\n\r\n        this.addMethod(new Method(\"World\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gh: WorldHelper = this.getWorldHelper(o); // new WorldHelper(800, 600, this.module, o);\r\n                o.intrinsicData[\"World\"] = gh;\r\n\r\n            }, false, false, \"Legt einen neuen Grafikbereich (='Welt') an. Das Koordinatensystem geht von 0 bis 800 in x-Richtung und von 0 - 600 in y-Richtung.\", true));\r\n\r\n        this.addMethod(new Method(\"setBackgroundColor\", new Parameterlist([\r\n            { identifier: \"colorAsRGBInt\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.setBackgroundColor(color);\r\n\r\n            }, false, false, 'Setzt die Hintergrundfarbe. Die Farbe wird als integer-Zahl erwartet. Am besten schreibt man sie als Hexadezimalzahl, also z.B. setBackgroundColor(0xff8080).\"', false));\r\n\r\n        this.addMethod(new Method(\"setBackgroundColor\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.setBackgroundColor(color);\r\n\r\n            }, false, false, 'Setzt die Hintergrundfarbe. Die Farbe ist entweder eine vordefinierte Farbe (\"schwarz\", \"rot\", ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"move\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                let matrix = new PIXI.Matrix().copyFrom(wh.stage.projectionTransform);\r\n                wh.stage.projectionTransform.identity();\r\n                wh.stage.projectionTransform.translate(x, y);\r\n                wh.stage.projectionTransform.prepend(matrix);\r\n\r\n                wh.computeCurrentWorldBounds();\r\n                wh.shapesNotAffectedByWorldTransforms.forEach((shape) => shape.move(-x, -y));\r\n\r\n            }, false, false, 'Verschiebt alle Objekte der Welt um x nach rechts und y nach unten.', false));\r\n\r\n        this.addMethod(new Method(\"follow\", new Parameterlist([\r\n            { identifier: \"shape\", type: shapeType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"margin\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"xMin\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"xMax\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"yMin\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"yMax\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n                let frameWidth: number = parameters[2].value;\r\n                let xMin: number = parameters[3].value;\r\n                let xMax: number = parameters[4].value;\r\n                let yMin: number = parameters[5].value;\r\n                let yMax: number = parameters[6].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                let shapeHelper: ShapeHelper = shape.intrinsicData[\"Actor\"];\r\n\r\n                let moveX: number = 0;\r\n                let moveY: number = 0;\r\n\r\n                let shapeX: number = shapeHelper.getCenterX();\r\n                let shapeY: number = shapeHelper.getCenterY();\r\n\r\n                let outsideRight = shapeX - (wh.currentLeft + wh.currentWidth - frameWidth);\r\n                if (outsideRight > 0 && wh.currentLeft + wh.currentWidth < xMax) {\r\n                    moveX = -outsideRight;\r\n                }\r\n\r\n                let outsideLeft = (wh.currentLeft + frameWidth) - shapeX;\r\n                if (outsideLeft > 0 && wh.currentLeft > xMin) {\r\n                    moveX = outsideLeft;\r\n                }\r\n\r\n                let outsideBottom = shapeY - (wh.currentTop + wh.currentHeight - frameWidth);\r\n                if (outsideBottom > 0 && wh.currentTop + wh.currentHeight <= yMax) {\r\n                    moveY = -outsideBottom;\r\n                }\r\n\r\n                let outsideTop = (wh.currentTop + frameWidth) - shapeY;\r\n                if (outsideTop > 0 && wh.currentTop >= yMin) {\r\n                    moveY = outsideTop;\r\n                }\r\n\r\n                if (moveX != 0 || moveY != 0) {\r\n                    let matrix = new PIXI.Matrix().copyFrom(wh.stage.projectionTransform);\r\n                    wh.stage.projectionTransform.identity();\r\n                    wh.stage.projectionTransform.translate(moveX, moveY);\r\n                    wh.stage.projectionTransform.prepend(matrix);\r\n\r\n                    wh.computeCurrentWorldBounds();\r\n                    wh.shapesNotAffectedByWorldTransforms.forEach((shape) => shape.move(-moveX, -moveY));\r\n                }\r\n\r\n\r\n            }, false, false, 'Verschiebt die Welt so, dass das übergebene graphische Objekt (shape) sichtbar wird. Verschoben wird nur, wenn das Objekt weniger als frameWidth vom Rand entfernt ist und die Welt nicht über die gegebenen Koordinaten xMin, xMax, yMin und yMax hinausragt.', false));\r\n\r\n        this.addMethod(new Method(\"rotate\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let x: number = parameters[2].value;\r\n                let y: number = parameters[3].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n\r\n\r\n                let angleRad = -angle / 180 * Math.PI;\r\n                let matrix = new PIXI.Matrix().copyFrom(wh.stage.projectionTransform);\r\n                wh.stage.projectionTransform.identity();\r\n                wh.stage.projectionTransform.translate(-x, -y);\r\n                wh.stage.projectionTransform.rotate(angleRad);\r\n                wh.stage.projectionTransform.translate(x, y);\r\n                wh.stage.projectionTransform.prepend(matrix);\r\n\r\n                wh.computeCurrentWorldBounds();\r\n                wh.shapesNotAffectedByWorldTransforms.forEach(\r\n                    (shape) => {\r\n                        shape.rotate(-angle, x, y);\r\n                    });\r\n\r\n            }, false, false, 'Rotiert die Welt um den angegebenen Winkel im Urzeigersinn. Drehpunkt ist der Punkt (x/y).', false));\r\n\r\n        this.addMethod(new Method(\"scale\", new Parameterlist([\r\n            { identifier: \"factor\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let factor: number = parameters[1].value;\r\n                let x: number = parameters[2].value;\r\n                let y: number = parameters[3].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n\r\n                let matrix = new PIXI.Matrix().copyFrom(wh.stage.projectionTransform);\r\n                wh.stage.projectionTransform.identity();\r\n                wh.stage.projectionTransform.translate(-x, -y);\r\n                wh.stage.projectionTransform.scale(factor, factor);\r\n                wh.stage.projectionTransform.translate(x, y);\r\n                wh.stage.projectionTransform.prepend(matrix);\r\n                wh.computeCurrentWorldBounds();\r\n                wh.shapesNotAffectedByWorldTransforms.forEach((shape) => shape.scale(1 / factor, x, y));\r\n\r\n            }, false, false, 'Streckt die Welt um den angegebenen Faktor. Zentrum der Streckung ist (x/y).', false));\r\n\r\n        this.addMethod(new Method(\"setCoordinateSystem\", new Parameterlist([\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let left: number = parameters[1].value;\r\n                let top: number = parameters[2].value;\r\n                let width: number = parameters[3].value;\r\n                let height: number = parameters[4].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n\r\n                wh.stage.projectionTransform.identity();     // coordinate system (0/0) to (initialWidth/initialHeight)\r\n                wh.stage.projectionTransform.translate(-left, -top);\r\n                wh.stage.projectionTransform.scale(wh.initialWidth / width, wh.initialHeight / height);\r\n                wh.computeCurrentWorldBounds();\r\n                wh.shapesNotAffectedByWorldTransforms.forEach((shape) => {\r\n                    shape.scale(width / wh.initialWidth, left, top);\r\n                    shape.move(left, top);\r\n                });\r\n\r\n            }, false, false, 'Streckt die Welt um den angegebenen Faktor. Zentrum der Streckung ist (x/y).', false));\r\n\r\n\r\n        this.addMethod(new Method(\"setDefaultGroup\", new Parameterlist([\r\n            { identifier: \"group\", type: groupType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let group: RuntimeObject = parameters[1].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.defaultGroup = group == null ? null : group.intrinsicData[\"Actor\"];\r\n\r\n            }, false, false, 'Legt eine Gruppe fest, zu der ab jetzt alle neuen Objekte automatisch hinzugefügt werden. Falls null angegeben wird, werden neue Objekte zu keiner Gruppe automatisch hinzugefügt.', false));\r\n\r\n        this.addMethod(new Method(\"addMouseListener\", new Parameterlist([\r\n            { identifier: \"listener\", type: mouseListenerType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let listener: RuntimeObject = parameters[1].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                wh.addMouseListener(listener);\r\n\r\n            }, false, false, 'Fügt einen neuen MouseListener hinzu, dessen Methoden bei Mausereignissen aufgerufen werden.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                return Math.round(wh.currentWidth);\r\n\r\n            }, false, false, 'Gibt die \"Breite\" des Grafikbereichs zurück, genauer: die x-Koordinate am rechten Rand.', false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                return Math.round(wh.currentHeight);\r\n\r\n            }, false, false, 'Gibt die \"Höhe\" des Grafikbereichs zurück, genauer: die y-Koordinate am unteren Rand.', false));\r\n\r\n        this.addMethod(new Method(\"getTop\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                return Math.round(wh.currentTop);\r\n\r\n            }, false, false, 'Gibt die y-Koordinate der linken oberen Ecke zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getLeft\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n\r\n                return Math.round(wh.currentLeft);\r\n\r\n            }, false, false, 'Gibt die x-Koordinate der linken oberen Ecke zurück.', false));\r\n\r\n        this.addMethod(new Method(\"setCursor\", new Parameterlist([\r\n            { identifier: \"cursor\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WorldHelper = o.intrinsicData[\"World\"];\r\n                let cursor: string = parameters[1].value;\r\n\r\n                wh.setCursor(cursor);\r\n\r\n            }, false, false, 'Ändert die Form des Mauscursors im gesamten Grafikbereich. Mögiche Werte: siehe https://developer.mozilla.org/de/docs/Web/CSS/cursor.', false));\r\n\r\n\r\n    }\r\n\r\n    getWorldHelper(worldObject: RuntimeObject, breite: number = 800, höhe: number = 600): WorldHelper {\r\n\r\n        let wh = this.module?.main?.getInterpreter()?.worldHelper;\r\n\r\n\r\n        if (wh != null) {\r\n            if (wh.width != breite || wh.height != höhe) {\r\n\r\n                let ratio: number = Math.round(höhe / breite * 100);\r\n                wh.$containerOuter.css('padding-bottom', ratio + \"%\");\r\n\r\n                wh.stage.projectionTransform.scale(wh.width / breite, wh.width / höhe);\r\n\r\n                this.module.main.getRightDiv()?.adjustWidthToWorld();\r\n\r\n            }\r\n\r\n            return wh;\r\n\r\n        } else {\r\n\r\n            return new WorldHelper(breite, höhe, this.module, worldObject);\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport type MouseListenerShapeData = {\r\n    shapeHelper: ShapeHelper,\r\n    types: { [type: string]: boolean },\r\n    methods: { [type: string]: Method }\r\n}\r\n\r\nexport type MouseListenerData = {\r\n    listener: RuntimeObject,\r\n    types: { [type: string]: boolean },\r\n    methods: { [type: string]: Method }\r\n}\r\n\r\nexport type ActorData = {\r\n    actorHelper: ActorHelper,\r\n    method: Method\r\n}\r\n\r\n/**\r\n * @see https://javascript.plainenglish.io/inside-pixijs-projection-system-897872a3dc17\r\n */\r\nclass WorldContainer extends PIXI.Container {\r\n\r\n    projectionTransform: PIXI.Matrix;\r\n\r\n    constructor(public sourceFrame: PIXI.Rectangle, public destinationFrame: PIXI.Rectangle) {\r\n        super();\r\n        this.projectionTransform = new PIXI.Matrix();\r\n    }\r\n\r\n    render(renderer: PIXI.Renderer) {\r\n\r\n        renderer.projection.projectionMatrix.identity();\r\n        renderer.projection.transform = this.projectionTransform;\r\n        renderer.renderTexture.bind(\r\n            renderer.renderTexture.current,\r\n            this.sourceFrame,\r\n            this.destinationFrame,\r\n        );\r\n        super.render(renderer);\r\n        renderer.batch.flush();\r\n\r\n        renderer.batch.flush();\r\n        renderer.projection.projectionMatrix.identity();\r\n        renderer.projection.transform = null;\r\n        renderer.renderTexture.bind(null);\r\n    }\r\n}\r\n\r\n\r\nexport class WorldHelper {\r\n\r\n    $containerOuter: JQuery<HTMLElement>;\r\n    $containerInner: JQuery<HTMLElement>;\r\n    app: PIXI.Application;\r\n    stage: WorldContainer;\r\n\r\n    actActors: ActorData[] = [];\r\n    keyPressedActors: ActorData[] = [];\r\n    keyUpActors: ActorData[] = [];\r\n    keyDownActors: ActorData[] = [];\r\n    actorHelpersToDestroy: ActorHelper[] = [];\r\n\r\n    mouseListenerShapes: MouseListenerShapeData[] = [];\r\n    mouseListeners: MouseListenerData[] = [];\r\n\r\n    interpreter: Interpreter;\r\n    actorsFinished: boolean = true;\r\n    summedDelta: number = 0;\r\n\r\n    defaultGroup: GroupHelper;\r\n\r\n    initialWidth: number;\r\n    initialHeight: number;\r\n\r\n    $coordinateDiv: JQuery<HTMLElement>;\r\n\r\n    public scaledTextures: { [name: string]: PIXI.Texture } = {};\r\n\r\n\r\n    shapes: ShapeHelper[] = [];     // all shapes incl. groups that aren't part of a group\r\n\r\n    currentLeft: number;\r\n    currentTop: number;\r\n    currentWidth: number;\r\n    currentHeight: number;\r\n\r\n    shapesNotAffectedByWorldTransforms: ShapeHelper[] = [];\r\n\r\n    globalScale: number;\r\n\r\n    robotWorldHelper: any;\r\n\r\n    tickerFunction: (t: number) => void;\r\n\r\n    clearActorLists() {\r\n        this.actActors = [];\r\n        this.keyPressedActors = [];\r\n        this.keyUpActors = [];\r\n        this.keyDownActors = [];\r\n    }\r\n\r\n    constructor(public width: number, public height: number, private module: Module, public world: RuntimeObject) {\r\n\r\n        PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;\r\n        PIXI.settings.TARGET_FPMS = 30.0 / 1000.0;\r\n\r\n        this.globalScale = 1;\r\n\r\n        while (height > 1000 || width > 2000) {\r\n            this.globalScale *= 2;\r\n            height /= 2;\r\n            width /= 2;\r\n        }\r\n\r\n        this.initialHeight = this.height;\r\n        this.initialWidth = this.width;\r\n\r\n        this.currentLeft = 0;\r\n        this.currentTop = 0;\r\n        this.currentWidth = this.width;\r\n        this.currentHeight = this.height;\r\n\r\n        this.interpreter = this.module?.main?.getInterpreter();\r\n\r\n        if (this.interpreter.processingHelper != null) {\r\n            this.interpreter.throwException(\"Die herkömmliche Grafikausgabe kann nicht zusammen mit Processing genutzt werden.\");\r\n        }\r\n\r\n        if (this.interpreter.worldHelper != null) {\r\n            this.interpreter.throwException(\"Es darf nur ein World-Objekt instanziert werden.\");\r\n        }\r\n\r\n        this.interpreter.worldHelper = this;\r\n\r\n        let $graphicsDiv = this.module.main.getInterpreter().printManager.getGraphicsDiv();\r\n        this.$coordinateDiv = this.module.main.getRightDiv().$rightDiv.find(\".jo_coordinates\");\r\n\r\n        let f = () => {\r\n            let $jo_tabs = $graphicsDiv.parents(\".jo_tabs\");\r\n            if ($jo_tabs.length == 0) {\r\n                $jo_tabs = $graphicsDiv.parents(\".joe_rightDivInner\");\r\n            }\r\n            let maxWidth: number = $jo_tabs.width();\r\n            let maxHeight: number = $jo_tabs.height();\r\n\r\n            if (height / width > maxHeight / maxWidth) {\r\n                $graphicsDiv.css({\r\n                    'width': width / height * maxHeight + \"px\",\r\n                    'height': maxHeight + \"px\",\r\n                })\r\n            } else {\r\n                $graphicsDiv.css({\r\n                    'height': height / width * maxWidth + \"px\",\r\n                    'width': maxWidth + \"px\",\r\n                })\r\n            }\r\n        };\r\n\r\n        $graphicsDiv.off('sizeChanged');\r\n        $graphicsDiv.on('sizeChanged', f);\r\n\r\n        f();\r\n\r\n        this.$containerOuter = jQuery('<div></div>');\r\n        this.$containerInner = jQuery('<div></div>');\r\n        this.$containerOuter.append(this.$containerInner);\r\n\r\n        $graphicsDiv.append(this.$containerOuter);\r\n\r\n        $graphicsDiv.show();\r\n\r\n        $graphicsDiv[0].oncontextmenu = function (e) {\r\n            e.preventDefault();\r\n        };\r\n\r\n        if (this.module.main.pixiApp) {\r\n            this.app = this.module.main.pixiApp;\r\n            this.app.renderer.resize(width, height);\r\n            this.app.renderer.backgroundColor = 0x0;\r\n        } else {\r\n            this.app = new PIXI.Application({\r\n                antialias: true,\r\n                width: width, height: height,\r\n                //resizeTo: $containerInner[0]\r\n            });\r\n            this.module.main.pixiApp = this.app;\r\n        }\r\n\r\n        let that = this;\r\n\r\n        this.tickerFunction = (delta) => {\r\n            that.tick(PIXI.Ticker.shared.elapsedMS);\r\n        };\r\n\r\n        this.app.ticker.add(this.tickerFunction);\r\n        this.app.ticker.maxFPS = 30;\r\n\r\n        this.interpreter.timerExtern = true;\r\n\r\n        let sourceFrame = new PIXI.Rectangle(0, 0, this.width, this.height);\r\n        let destinationFrame = new PIXI.Rectangle(0, 0, width, height);\r\n        this.stage = new WorldContainer(sourceFrame, destinationFrame);\r\n        this.stage.projectionTransform = new PIXI.Matrix();\r\n\r\n        this.app.stage.addChild(this.stage);\r\n\r\n        this.$containerInner.append(this.app.view);\r\n\r\n        this.interpreter.keyboardTool.keyPressedCallbacks.push((key) => {\r\n            for (let kpa of that.keyPressedActors) {\r\n\r\n                that.runActorWhenKeyEvent(kpa, key);\r\n\r\n            }\r\n        });\r\n\r\n        this.interpreter.keyboardTool.keyUpCallbacks.push((key) => {\r\n            for (let kpa of that.keyUpActors) {\r\n\r\n                that.runActorWhenKeyEvent(kpa, key);\r\n\r\n            }\r\n        });\r\n\r\n        this.interpreter.keyboardTool.keyDownCallbacks.push((key) => {\r\n            for (let kpa of that.keyDownActors) {\r\n\r\n                that.runActorWhenKeyEvent(kpa, key);\r\n\r\n            }\r\n        });\r\n\r\n\r\n        for (let listenerType of [\"mouseup\", \"mousedown\", \"mousemove\", \"mouseenter\", \"mouseleave\"]) {\r\n\r\n            let eventType = listenerType;\r\n            if (window.PointerEvent) {\r\n                eventType = eventType.replace('mouse', 'pointer');\r\n            }\r\n\r\n            this.$containerInner.on(eventType, (e) => {\r\n                let x = width * e.offsetX / this.$containerInner.width();\r\n                let y = height * e.offsetY / this.$containerInner.height();\r\n\r\n                let p = new PIXI.Point(x * this.globalScale, y * this.globalScale);\r\n                this.stage.projectionTransform.applyInverse(p, p);\r\n                x = p.x;\r\n                y = p.y;\r\n\r\n                that.onMouseEvent(listenerType, x, y, e.button);\r\n\r\n                for (let listener of this.mouseListeners) {\r\n                    if (listener.types[listenerType] != null) {\r\n                        this.invokeMouseListener(listener, listenerType, x, y, e.button);\r\n                    }\r\n                }\r\n\r\n                if (listenerType == \"mousedown\") {\r\n                    let gngEreignisbehandlung = this.interpreter.gngEreignisbehandlungHelper;\r\n                    if (gngEreignisbehandlung != null) {\r\n                        gngEreignisbehandlung.handleMouseClickedEvent(x, y);\r\n                    }\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        let $coordinateDiv = this.$coordinateDiv;\r\n\r\n        let mousePointer = window.PointerEvent ? \"pointer\" : \"mouse\";\r\n\r\n        this.$containerInner.on(mousePointer + \"move\", (e) => {\r\n            let x = width * e.offsetX / this.$containerInner.width();\r\n            let y = height * e.offsetY / this.$containerInner.height();\r\n\r\n            let p = new PIXI.Point(x * this.globalScale, y * this.globalScale);\r\n            this.stage.projectionTransform.applyInverse(p, p);\r\n            x = Math.round(p.x);\r\n            y = Math.round(p.y);\r\n            $coordinateDiv.text(`(${x}/${y})`);\r\n        });\r\n\r\n        this.$containerInner.on(mousePointer + \"enter\", (e) => {\r\n            $coordinateDiv.show();\r\n        });\r\n\r\n        this.$containerInner.on(mousePointer + \"leave\", (e) => {\r\n            $coordinateDiv.hide();\r\n        });\r\n\r\n        this.module.main.getRightDiv()?.adjustWidthToWorld();\r\n\r\n    }\r\n\r\n    computeCurrentWorldBounds() {\r\n\r\n        let p1: PIXI.Point = new PIXI.Point(0, 0);\r\n        this.stage.projectionTransform.applyInverse(p1, p1);\r\n\r\n        let p2: PIXI.Point = new PIXI.Point(this.initialWidth, this.initialHeight);\r\n        this.stage.projectionTransform.applyInverse(p2, p2);\r\n\r\n        this.currentLeft = p1.x;\r\n        this.currentTop = p1.y;\r\n        this.currentWidth = Math.abs(p2.x - p1.x);\r\n        this.currentHeight = Math.abs(p2.y - p1.y);\r\n    }\r\n\r\n\r\n    hasActors(): boolean {\r\n        return this.actActors.length > 0 || this.keyPressedActors.length > 0 || this.keyUpActors.length > 0\r\n            || this.keyDownActors.length > 0 || this.mouseListeners.length > 0 || this.mouseListenerShapes.length > 0;\r\n    }\r\n\r\n    setAllHitpolygonsDirty() {\r\n        for (let shape of this.shapes) {\r\n            shape.setHitPolygonDirty(true);\r\n        }\r\n    }\r\n\r\n    setCursor(cursor: string) {\r\n        this.$containerInner.css('cursor', cursor);\r\n    }\r\n\r\n\r\n    actorsNotFinished: number = 0;\r\n    ticks: number = 0;\r\n    deltaSum: number = 0;\r\n\r\n    spriteAnimations: SpriteHelper[] = [];\r\n\r\n    tick(delta: any) {\r\n\r\n        if (this.interpreter != null) {\r\n            switch (this.interpreter.state) {\r\n                case InterpreterState.running:\r\n                    this.summedDelta += delta;\r\n                    for (let spriteHelper of this.spriteAnimations) {\r\n                        spriteHelper.tick(delta);\r\n                    }\r\n\r\n                    if (!this.actorsFinished) {\r\n                        this.actorsNotFinished++;\r\n                        break;\r\n                    }\r\n\r\n                    if (this.interpreter.pauseUntil != null) {\r\n                        break;\r\n                    }\r\n\r\n                    let first: boolean = true;\r\n\r\n                    for (let actorData of this.actActors) {\r\n\r\n                        let actorHelper = actorData.actorHelper;\r\n                        if (actorHelper.timerPaused || actorHelper.isDestroyed) continue;\r\n\r\n                        let program = actorData.method?.program;\r\n                        this.runActor(first, actorData, this.summedDelta);\r\n                        if (program != null && !actorData.actorHelper.isDestroyed) {\r\n                            first = false;\r\n                            this.actorsFinished = false;\r\n                        }\r\n                    }\r\n                    break;\r\n                case InterpreterState.done:\r\n                case InterpreterState.error:\r\n                case InterpreterState.not_initialized:\r\n                    this.clearActorLists();\r\n                    break;\r\n            }\r\n\r\n\r\n            this.summedDelta = 0;\r\n\r\n            if (this.interpreter.state == InterpreterState.running) {\r\n                if (this.actActors.length > 0) {\r\n                    this.interpreter.timerFunction(33.33, true, 0.5);\r\n                    //@ts-ignore\r\n                    if (this.interpreter.state == InterpreterState.running) {\r\n                        this.interpreter.timerStopped = false;\r\n                        this.interpreter.timerFunction(33.33, false, 0.08);\r\n                    }\r\n                } else {\r\n                    this.interpreter.timerFunction(33.33, false, 0.7);\r\n                }\r\n            }\r\n        }\r\n\r\n        while (this.actorHelpersToDestroy.length > 0) {\r\n\r\n            let actorHelper = this.actorHelpersToDestroy.pop();\r\n\r\n            for (let actorList of [this.keyPressedActors, this.keyUpActors, this.keyDownActors]) {\r\n                for (let i = 0; i < actorList.length; i++) {\r\n                    if (actorList[i].actorHelper === actorHelper) {\r\n                        actorList.splice(i, 1);\r\n                        i--;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n            for (let i = 0; i < this.mouseListenerShapes.length; i++) {\r\n                if (this.mouseListenerShapes[i].shapeHelper === actorHelper) {\r\n                    this.mouseListenerShapes.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n\r\n            for (let i = 0; i < this.actActors.length; i++) {\r\n                if (this.actActors[i].actorHelper === actorHelper) {\r\n                    this.actActors.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n\r\n            let displayObject = (<ShapeHelper>actorHelper).displayObject;\r\n            if (displayObject != null) {\r\n                displayObject.destroy();\r\n                (<ShapeHelper>actorHelper).displayObject = null;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    setBackgroundColor(color: string | number) {\r\n\r\n        if (typeof color == \"string\") {\r\n            let c = ColorHelper.parseColorToOpenGL(color);\r\n            this.app.renderer.backgroundColor = c.color;\r\n        } else {\r\n            this.app.renderer.backgroundColor = color;\r\n        }\r\n\r\n    }\r\n\r\n    runActorWhenKeyEvent(actorData: ActorData, key: string) {\r\n\r\n        let program = actorData.method?.program;\r\n        let invoke = actorData.method?.invoke;\r\n\r\n        let rto = actorData.actorHelper.runtimeObject;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n            {\r\n                type: stringPrimitiveType,\r\n                value: key\r\n            }\r\n        ];\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(actorData.method, stackElements, null, false);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n    }\r\n\r\n\r\n    runActor(first: boolean, actorData: ActorData, delta: number) {\r\n\r\n        let program = actorData.method?.program;\r\n        let invoke = actorData.method?.invoke;\r\n\r\n        let rto = actorData.actorHelper.runtimeObject;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n        ];\r\n\r\n        if (actorData.method.getParameterCount() > 0) {\r\n            stackElements.push(\r\n                {\r\n                    type: doublePrimitiveType,\r\n                    value: delta\r\n                }\r\n\r\n            );\r\n        }\r\n\r\n        let that = this;\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(actorData.method, stackElements, first ? (interpreter) => {\r\n                that.actorsFinished = true;\r\n                interpreter.timerStopped = true;\r\n            } : null, true);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n    }\r\n\r\n    cacheAsBitmap() {\r\n\r\n        let hasRobot = this.robotWorldHelper != null;\r\n\r\n        this.mouseListenerShapes = [];\r\n\r\n        let scaleMin = 1.0;\r\n        if (this.currentWidth * this.currentHeight > 2500000) scaleMin = Math.sqrt(2500000 / (this.currentWidth * this.currentHeight));\r\n        if (this.currentWidth * this.currentHeight < 1024 * 1024) scaleMin = Math.sqrt(1024 * 1024 / (this.currentWidth * this.currentHeight));\r\n\r\n        const brt = new PIXI.BaseRenderTexture(\r\n            {\r\n                scaleMode: PIXI.SCALE_MODES.LINEAR,\r\n                width: Math.round(this.currentWidth * scaleMin),\r\n                height: Math.round(this.currentHeight * scaleMin)\r\n            }\r\n        );\r\n        let rt: PIXI.RenderTexture = new PIXI.RenderTexture(brt);\r\n\r\n        let transform = new PIXI.Matrix().scale(scaleMin, scaleMin);\r\n\r\n        setTimeout(() => {\r\n            if (!hasRobot) {\r\n                this.app.renderer.render(this.stage, {\r\n                    renderTexture: rt,\r\n                    transform: transform\r\n                });\r\n\r\n                setTimeout(() => {\r\n                    this.stage.children.forEach(c => c.destroy());\r\n                    this.stage.removeChildren();\r\n\r\n                    let sprite = new PIXI.Sprite(rt);\r\n                    sprite.localTransform.scale(this.globalScale, this.globalScale);\r\n                    // debugger;\r\n                    // sprite.localTransform.translate(0, rt.height);\r\n                    //@ts-ignore\r\n                    sprite.transform.onChange();\r\n                    // this.stage.projectionTransform = new PIXI.Matrix().scale(1, -1).translate(0, this.currentHeight);\r\n                    this.stage.projectionTransform = new PIXI.Matrix();\r\n                    this.stage.addChild(sprite);\r\n\r\n                }, 300);\r\n            }\r\n        }, 150);   // necessary to await Turtle's deferred rendering\r\n\r\n    }\r\n\r\n    destroyWorld() {\r\n        for (let listenerType of [\"mouseup\", \"mousedown\", \"mousemove\", \"mouseenter\", \"mouseleave\"]) {\r\n            this.$containerInner.off(listenerType);\r\n        }\r\n        this.spriteAnimations = [];\r\n        this.app.ticker.remove(this.tickerFunction);\r\n\r\n        this.app.stage.children.forEach(c => c.destroy());\r\n        this.app.stage.removeChildren();\r\n\r\n        if (this.robotWorldHelper != null) {\r\n            this.robotWorldHelper.destroy();\r\n            this.robotWorldHelper = null;\r\n        }\r\n\r\n        jQuery(this.app.view).detach();\r\n\r\n        this.$containerOuter.remove();\r\n        this.module.main.getInterpreter().printManager.getGraphicsDiv().hide();\r\n        this.interpreter.timerExtern = false;\r\n        this.interpreter.worldHelper = null;\r\n        this.$coordinateDiv.hide();\r\n\r\n        FilledShapeDefaults.initDefaultValues();\r\n    }\r\n\r\n    onMouseEvent(listenerType: string, x: number, y: number, button: number) {\r\n\r\n        switch (listenerType) {\r\n            case \"mousedown\":\r\n            case \"mouseup\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[listenerType] != null && (shapeHelper.containsPoint(x, y) || shapeHelper.trackMouseMove)) {\r\n                        this.invokeShapeMouseListener(listener, listenerType, x, y, button);\r\n                    }\r\n\r\n                }\r\n\r\n                break;\r\n            case \"mouseenter\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[listenerType] != null && shapeHelper.containsPoint(x, y) && !shapeHelper.mouseLastSeenInsideObject) {\r\n                        this.invokeShapeMouseListener(listener, listenerType, x, y, button, () => {\r\n                            shapeHelper.mouseLastSeenInsideObject = true;\r\n                        });\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"mouseleave\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[listenerType] != null && shapeHelper.mouseLastSeenInsideObject) {\r\n                        this.invokeShapeMouseListener(listener, listenerType, x, y, button, () => {\r\n                            shapeHelper.mouseLastSeenInsideObject = false;\r\n                        });\r\n                    }\r\n\r\n                }\r\n                break;\r\n            case \"mousemove\":\r\n                for (let listener of this.mouseListenerShapes) {\r\n                    let shapeHelper: ShapeHelper = listener.shapeHelper;\r\n\r\n                    if (listener.types[\"mousemove\"] != null ||\r\n                        (listener.types[\"mouseenter\"] != null && !shapeHelper.mouseLastSeenInsideObject) ||\r\n                        (listener.types[\"mouseleave\"] != null && shapeHelper.mouseLastSeenInsideObject)\r\n                    ) {\r\n                        let containsPoint = shapeHelper.containsPoint(x, y);\r\n                        if ((shapeHelper.trackMouseMove || containsPoint) && listener.types[\"mousemove\"] != null) {\r\n                            this.invokeShapeMouseListener(listener, \"mousemove\", x, y, button);\r\n                        }\r\n                        if (containsPoint && listener.types[\"mouseenter\"] != null && !shapeHelper.mouseLastSeenInsideObject) {\r\n                            this.invokeShapeMouseListener(listener, \"mouseenter\", x, y, button, () => {\r\n                                shapeHelper.mouseLastSeenInsideObject = true;\r\n                            });\r\n                        }\r\n                        if (!containsPoint && listener.types[\"mouseleave\"] != null && shapeHelper.mouseLastSeenInsideObject) {\r\n                            this.invokeShapeMouseListener(listener, \"mouseleave\", x, y, button, () => {\r\n                                shapeHelper.mouseLastSeenInsideObject = false;\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    invokeShapeMouseListener(listener: MouseListenerShapeData, listenerType: string,\r\n        x: number, y: number, button: number, callback?: () => void) {\r\n\r\n        if (!listener.shapeHelper.reactToMouseEventsWhenInvisible &&\r\n            !listener.shapeHelper.displayObject.visible) return;\r\n\r\n        let method = listener.methods[listenerType];\r\n        let program = method.program;\r\n        let invoke = method.invoke;\r\n\r\n        let rto = listener.shapeHelper.runtimeObject;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: x\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: y\r\n            }\r\n        ];\r\n\r\n        if (listenerType != \"mousemove\" && listenerType != \"mouseenter\" && listenerType != \"mouseleave\") {\r\n            stackElements.push(\r\n                {\r\n                    type: intPrimitiveType,\r\n                    value: button\r\n                });\r\n        }\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(method, stackElements, callback, false);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n\r\n    }\r\n\r\n    addMouseListener(listener: RuntimeObject) {\r\n\r\n        /*\r\n            If a shape is registered as MouseListener of the world-object, it gets all mouse-events twice. \r\n            => Deregister shape as mouseListenerShape and register it as mouse listener for the world object.\r\n        */\r\n        let index: number = this.mouseListenerShapes.findIndex((mls) => { return mls.shapeHelper.runtimeObject == listener });\r\n        if (index >= 0) {\r\n            this.mouseListenerShapes.splice(index, 1);\r\n        }\r\n\r\n        let listenerTypes = [\r\n            { identifier: \"MouseUp\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseDown\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseMove\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseEnter\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseLeave\", signature: \"(double, double)\" },\r\n        ];\r\n\r\n        let sd: MouseListenerData = null;\r\n\r\n        for (let lt of listenerTypes) {\r\n            let method: Method = (<Klass>listener.class).getMethodBySignature(\"on\" + lt.identifier + lt.signature);\r\n\r\n            if (method?.program != null && method.program.statements.length > 2 || method?.invoke != null) {\r\n\r\n                if (sd == null) {\r\n                    sd = {\r\n                        listener: listener,\r\n                        types: {},\r\n                        methods: {}\r\n                    };\r\n                    this.mouseListeners.push(sd);\r\n                }\r\n\r\n                sd.types[lt.identifier.toLowerCase()] = true;\r\n                sd.methods[lt.identifier.toLowerCase()] = method;\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    invokeMouseListener(listener: MouseListenerData, listenerType: string,\r\n        x: number, y: number, button: number, callback?: () => void) {\r\n\r\n        let method = listener.methods[listenerType];\r\n        let program = method.program;\r\n        let invoke = method.invoke;\r\n\r\n        let rto = listener.listener;\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: rto.class,\r\n                value: rto\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: x\r\n            },\r\n            {\r\n                type: doublePrimitiveType,\r\n                value: y\r\n            }\r\n        ];\r\n\r\n        if (listenerType != \"mousemove\" && listenerType != \"mouseenter\" && listenerType != \"mouseleave\") {\r\n            stackElements.push(\r\n                {\r\n                    type: intPrimitiveType,\r\n                    value: button\r\n                });\r\n        }\r\n\r\n        if (program != null) {\r\n            this.interpreter.runTimer(method, stackElements, callback, false);\r\n        } else if (invoke != null) {\r\n            invoke([]);\r\n        }\r\n\r\n    }\r\n\r\n}","import { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { voidPrimitiveType, stringPrimitiveType, booleanPrimitiveType, doublePrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { WorldHelper, WorldClass } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class Actor extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Actor\", module, \"Abstrakte Klasse mit überschreibbaren Methoden act (zur Implemntierung eines Timers) und onKeyTyped, onKeyUp usw. zur entgegennahme von Tastaturereignissen\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        this.isAbstract = true;\r\n\r\n        let methodSignatures: { signature: string, actorListIdentifier: string }[] = [\r\n            { signature: \"onKeyTyped(String)\", actorListIdentifier: \"keyPressedActors\" },\r\n            { signature: \"onKeyUp(String)\", actorListIdentifier: \"keyUpActors\" },\r\n            { signature: \"onKeyDown(String)\", actorListIdentifier: \"keyDownActors\" },\r\n            { signature: \"act()\", actorListIdentifier: \"actActors\" },\r\n            { signature: \"act(double)\", actorListIdentifier: \"actActors\" },\r\n        ];\r\n\r\n        this.postConstructorCallbacks = [\r\n            (r: RuntimeObject) => {\r\n\r\n                for (let ms of methodSignatures) {\r\n                    let method: Method = (<Klass>r.class).getMethodBySignature(ms.signature);\r\n\r\n                    if (method?.program != null \r\n                        // || method?.invoke != null\r\n                        ) {\r\n                        let ah: ActorHelper = <ActorHelper>r.intrinsicData['Actor'];\r\n                        ah.worldHelper[ms.actorListIdentifier].push({\r\n                            actorHelper: ah,\r\n                            method: method\r\n                        })\r\n                    }\r\n                }\r\n\r\n            }\r\n        ];\r\n\r\n        this.addMethod(new Method(\"Actor\", new Parameterlist([\r\n            // { identifier: \"deltaTimeInMs\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), this,\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let actorHelper = new ActorHelper(module.main.getInterpreter(), o);\r\n\r\n                o.intrinsicData[\"Actor\"] = actorHelper;\r\n\r\n                // return o;\r\n\r\n            },  // no implementation!\r\n            false, false, \"Der Konstruktor registriert den Actor beim Grafikfenster\", true));\r\n\r\n        this.addMethod(new Method(\"destroy\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n                sh.destroy();\r\n\r\n            }, false, false, \"Vernichtet das Grafikobjekt. Falls es in einem Group-Objekt enthalten ist, wird es vor dem Vernichten automatisch aus diesem entfernt.\", false));\r\n\r\n        this.addMethod(new Method(\"isKeyUp\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: string = parameters[1].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return !sh.isKeyDown(key);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Benutzer die gegebenen Taste gerade NICHT drückt. Als Taste kann auch bsw. [shift]+m angegeben werden. Die Angabe von Sondertasten (Enter, ArrowUp, ArrowLeft, ...) ist auch möglich.\", false));\r\n\r\n        this.addMethod(new Method(\"isKeyDown\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: string = parameters[1].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.isKeyDown(key);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Benutzer die gegebenen Taste gerade drückt. Als Taste kann auch bsw. [shift]+m angegeben werden. Die Angabe von Sondertasten (Enter, ArrowUp, ArrowLeft, ...) ist auch möglich.\", false));\r\n\r\n        this.addMethod(new Method(\"isGamepadButtonDown\", new Parameterlist([\r\n            { identifier: \"gamepadIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"buttonIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gamepadIndex: number = parameters[1].value;\r\n                let buttonIndex: number = parameters[2].value;\r\n\r\n                return module.main.getInterpreter().gamepadTool.isGamepadButtonPressed(gamepadIndex, buttonIndex);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Button buttonIndex des Gamepads GamepadIndex gedrückt ist.\", false));\r\n\r\n        this.addMethod(new Method(\"isGamepadConnected\", new Parameterlist([\r\n            { identifier: \"gamepadIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gamepadIndex: number = parameters[1].value;\r\n\r\n                return module.main.getInterpreter().gamepadTool.isGamepadConnected(gamepadIndex);\r\n\r\n            }, false, false, \"Gibt true zurück, falls das Gamepad mit dem übergebenen Index angeschlossen ist. VORSICHT: Das erste Gamepad hat Index 0.\", false));\r\n\r\n        this.addMethod(new Method(\"getGamepadAxisValue\", new Parameterlist([\r\n            { identifier: \"gamepadIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"axisIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gamepadIndex: number = parameters[1].value;\r\n                let axisIndex: number = parameters[2].value;\r\n\r\n                return module.main.getInterpreter().gamepadTool.getGamepadAxisValue(gamepadIndex, axisIndex);\r\n\r\n            }, false, false, \"Gibt den Wert des Gamepad-Steuerknüppels mit Index axisIndex zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"isDestroyed\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.isDestroyed;\r\n\r\n            }, false, false, \"Gibt true zurück, falls das Objekt bereits durch die Methode destroy() zerstört wurde.\", false));\r\n\r\n\r\n        this.addMethod(new Method(\"getWorld\", new Parameterlist([\r\n        ]), module.typeStore.getType(\"World\"),\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                let interpreter = module.main.getInterpreter();\r\n                let worldHelper = interpreter.worldHelper;\r\n                if (worldHelper == null) {\r\n                    let w: RuntimeObject = new RuntimeObject(<Klass>interpreter.moduleStore.getType(\"World\").type);\r\n                    worldHelper = new WorldHelper(800, 600, interpreter.moduleStore.getModule(\"Base Module\"), w);\r\n                }        \r\n                return worldHelper.world;\r\n\r\n            }, false, false, \"Gibt das Welt-Objekt zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"stopActing\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                // ah.timerPaused = true;\r\n                ah.setTimerPaused(true);\r\n\r\n                return;\r\n\r\n            }, false, false, \"Stoppt den 30-mal pro Sekunde erfolgenden Aufruf der Methode act für dieses Objekt.\", false));\r\n\r\n            this.addMethod(new Method(\"restartActing\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                // sh.timerPaused = false;\r\n                sh.setTimerPaused(false);\r\n\r\n            }, false, false, \"Startet den 30-mal pro Sekunde erfolgenden Aufruf der Methode act für dieses Objekt erneut.\", false));\r\n\r\n            this.addMethod(new Method(\"isActing\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ActorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return !sh.timerPaused;\r\n\r\n            }, false, false, \"Gibt true zurück, wenn der periodische Aufruf der Methode act weiterhin erfolgt.\", false));\r\n\r\n        this.addMethod(new Method(\"act\", new Parameterlist([\r\n            { identifier: \"deltaTime\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            null, // no statements!\r\n            false, false, \"Wird ca. 30-mal pro Sekunde aufgerufen\", false));\r\n\r\n        this.addMethod(new Method(\"act\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null,\r\n            false, false, \"Wird ca. 30-mal pro Sekunde aufgerufen\", false));\r\n\r\n        this.addMethod(new Method(\"onKeyTyped\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            () => {\r\n                \r\n            },\r\n            false, false, \"Wird aufgerufen, nachdem der Benutzer eine Taste gedrückt und wieder losgelassen hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onKeyDown\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            () => {\r\n                \r\n            },\r\n            false, false, \"Wird aufgerufen, nachdem der Benutzer eine Taste gedrückt hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onKeyUp\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            () => {\r\n                \r\n            },\r\n            false, false, \"Wird aufgerufen, nachdem der Benutzer eine Taste losgelassen hat.\", false));\r\n\r\n\r\n    }\r\n\r\n    registerWorldType() {\r\n        this.methods.filter(m => m.identifier == \"getWorld\")[0].returnType = this.module.typeStore.getType(\"World\");\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class ActorHelper {\r\n\r\n    worldHelper: WorldHelper;\r\n    isDestroyed: boolean = false;\r\n\r\n    timerPaused: boolean = false;\r\n\r\n    constructor(interpreter: Interpreter, public runtimeObject: RuntimeObject) {\r\n        let worldHelper = interpreter.worldHelper;\r\n        if (worldHelper == null) {\r\n            let w: RuntimeObject = new RuntimeObject(<Klass>interpreter.moduleStore.getType(\"World\").type);\r\n            worldHelper = new WorldHelper(800, 600, interpreter.moduleStore.getModule(\"Base Module\"), w);\r\n            // worldHelper = new WorldHelper(800, 600, interpreter.main.currentWorkspace.moduleStore.getModule(\"Base Module\"), w);\r\n            w.intrinsicData[\"World\"] = worldHelper;\r\n            if(runtimeObject.intrinsicData[\"isGNG\"]){\r\n                worldHelper.setBackgroundColor(\"#e6e6e6\");\r\n            }\r\n        }\r\n        this.worldHelper = worldHelper;\r\n    }\r\n\r\n    setTimerPaused(tp: boolean) {\r\n        this.timerPaused = tp;\r\n    }\r\n\r\n\r\n    isKeyDown(key: string): boolean {\r\n        return this.worldHelper.interpreter.keyboardTool.isPressed(key);\r\n    }\r\n\r\n    destroy() {\r\n        this.isDestroyed = true;\r\n        this.worldHelper.actorHelpersToDestroy.push(this);\r\n    }\r\n\r\n    testdestroyed(method: string) {\r\n        if (this.isDestroyed) {\r\n            this.worldHelper.interpreter.throwException(\"Es wurde die Methode \" + method + \" eines bereits mit destroy() zerstörten Grafikobjekts aufgerufen.\");\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n}\r\n\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class AlignmentClass extends Enum {\r\n\r\n    constructor(module: Module){\r\n        super(\"Alignment\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"left\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"center\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"right\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"top\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"bottom\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Mögliche Ausrichtungen\"\r\n    }\r\n\r\n}","\r\nexport type Punkt = {\r\n    x: number,\r\n    y: number\r\n}\r\n\r\nexport function gleich(a: number, b: number) {\r\n\r\n    return Math.abs(a - b) < 0.000000001;\r\n\r\n}\r\n\r\nexport function drehenUm(drehpunkt: Punkt, punkt: Punkt, winkelInGrad: number): Punkt {\r\n\r\n    let w = winkelInGrad / 180 * Math.PI;\r\n    let s = Math.sin(w);\r\n    let c = Math.cos(w);\r\n\r\n    let dx = punkt.x - drehpunkt.x;\r\n    let dy = punkt.y - drehpunkt.y;\r\n\r\n    let dxNeu = dx * c - dy * s;\r\n    let dyNeu = dx * s + dy * c;\r\n\r\n    return { x: drehpunkt.x + dxNeu, y: drehpunkt.y + dyNeu };\r\n\r\n}\r\n\r\n/**\r\n * Gibt true zurück, wenn die Strecke von (x0, y0) nach (x1, y1) die Strecke von\r\n * (x2, y2) nach (x3, y3) berührt.\r\n *\r\n * @param x0\r\n * @param y0\r\n * @param x1\r\n * @param y1\r\n * @param x2\r\n * @param y2\r\n * @param x3\r\n * @param y3\r\n * @return\r\n */\r\nexport function streckeSchneidetStrecke(p0: Punkt, p1: Punkt, p2: Punkt, p3: Punkt, schnittpunkt?:Punkt) {\r\n\r\n    let a1 = p1.x - p0.x;\r\n    let a2 = p1.y - p0.y;\r\n    let b1 = p2.x - p3.x;\r\n    let b2 = p2.y - p3.y;\r\n    let c1 = p2.x - p0.x;\r\n    let c2 = p2.y - p0.y;\r\n\r\n    let det = a1 * b2 - a2 * b1;\r\n\r\n    if (det * det < 0.000001) {\r\n        return false; // die Strecken sind so gut wie parallel\r\n    }\r\n\r\n    let det1 = c1 * b2 - c2 * b1;\r\n    let det2 = a1 * c2 - a2 * c1;\r\n\r\n    let s = det1 / det;\r\n    let t = det2 / det;\r\n\r\n    // liegt der Schnittpunkt innerhalb von beiden Strecken?\r\n    let schneidet = s >= 0 && s <= 1 && t >= 0 && t <= 1;\r\n\r\n    if(schneidet && schnittpunkt != null){\r\n        schnittpunkt.x = p0.x + s*(p1.x - p0.x);\r\n        schnittpunkt.y = p0.y + s*(p1.y - p0.y)\r\n        }\r\n\r\n    return schneidet;\r\n\r\n}\r\n\r\nexport function abstand(p1: Punkt, p2: Punkt) {\r\n\r\n    let dx = p2.x - p1.x;\r\n    let dy = p2.y - p1.y;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n\r\n}\r\n\r\nexport function winkelGradZwischenPunkten(p1: Punkt, p2: Punkt): number {\r\n    let d = {\r\n        x: p2.x - p1.x,\r\n        y: p2.y - p1.y\r\n    }\r\n\r\n    return Math.atan2(d.y, d.x)/Math.PI*180;\r\n}\r\n\r\nexport function polygonEnthältPunkt(punkte: Punkt[], punkt: Punkt) {\r\n\r\n    let inside = false;\r\n    let vertexCount = punkte.length;\r\n\r\n    for (let index = 0; index <= vertexCount - 1; index++) {\r\n\r\n        let i = index % vertexCount;\r\n        let j = (index - 1) % vertexCount;\r\n        if (j < 0) {\r\n            j += vertexCount;\r\n        }\r\n\r\n        if (((punkte[i].y > punkt.y) != (punkte[j].y > punkt.y)) &&\r\n            (punkt.x < (punkte[j].x - punkte[i].x) * (punkt.y - punkte[i].y) / (punkte[j].y - punkte[i].y) + punkte[i].x))\r\n            inside = !inside;\r\n    }\r\n\r\n    return inside;\r\n\r\n}\r\n\r\nexport function kreisSchneidetStrecke(m: Punkt, r: number, p1: Punkt, p2: Punkt): boolean {\r\n    /*\r\n * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)\r\n * Kreis: (x-mx)^2 + (y-my)^2 = r^2\r\n *\r\n * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...\r\n \r\n */\r\n\r\n    let x1 = p1.x;\r\n    let y1 = p1.y;\r\n    let x2 = p2.x;\r\n    let y2 = p2.y;\r\n\r\n\r\n    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\r\n    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);\r\n    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;\r\n\r\n    let determiante = b * b - 4 * a * c;\r\n\r\n    if (determiante < 0) {\r\n        return false; // Kreis schneidet die Gerade nicht\r\n    }\r\n\r\n    // Kreis schneidet die Gerade -> innerhalb der Strecke?\r\n\r\n    let sqrt = Math.sqrt(determiante);\r\n    let t1 = (-b + sqrt) / (2 * a);\r\n    let t2 = (-b - sqrt) / (2 * a);\r\n\r\n    if (t1 >= 0 && t1 <= 1) {\r\n        return true;\r\n    }\r\n\r\n    if (t2 >= 0 && t2 <= 1) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\nexport function schnittpunkteKreisStrecke(m: Punkt, r: number, p1: Punkt, p2: Punkt, schnittpunkte: Punkt[]): void {\r\n    /*\r\n * Gerade: (x, y) = (x1, x2) + t*(x2-x1, y2-y1)\r\n * Kreis: (x-mx)^2 + (y-my)^2 = r^2\r\n *\r\n * Schneiden der beiden liefert eine quadratische Gleichung in t, die wir lösen...\r\n \r\n */\r\n\r\n    let x1 = p1.x;\r\n    let y1 = p1.y;\r\n    let x2 = p2.x;\r\n    let y2 = p2.y;\r\n\r\n\r\n    let a = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\r\n    let b = 2 * (x1 - m.x) * (x2 - x1) + 2 * (y1 - m.y) * (y2 - y1);\r\n    let c = (x1 - m.x) * (x1 - m.x) + (y1 - m.y) * (y1 - m.y) - r * r;\r\n\r\n    let determiante = b * b - 4 * a * c;\r\n\r\n    if (determiante < 0) {\r\n        return; // Kreis schneidet die Gerade nicht\r\n    }\r\n\r\n    // Kreis schneidet die Gerade -> innerhalb der Strecke?\r\n\r\n    let sqrt = Math.sqrt(determiante);\r\n    let t1 = (-b + sqrt) / (2 * a);\r\n    let t2 = (-b - sqrt) / (2 * a);\r\n\r\n    if (t1 >= 0 && t1 <= 1) {\r\n        schnittpunkte.push({ x: x1 + t1 * (x2 - x1), y: y1 + t1 * (y2 - y1) });\r\n    }\r\n    if (t2 >= 0 && t2 <= 1) {\r\n        schnittpunkte.push({ x: x1 + t2 * (x2 - x1), y: y1 + t2 * (y2 - y1) });\r\n    }\r\n\r\n    return;\r\n\r\n}\r\n\r\nexport function KreisBerührtPolygon(m: Punkt, r: number, punkte: Punkt[]) {\r\n\r\n    for (let i = 0; i < punkte.length; i++) {\r\n\r\n        if (abstand(punkte[i], m) <= r) {\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\n    // Der Kreis enthält keinen Punkt des Vielecks. Enthält es den Mittelpunkt des Kreises?\r\n    if (polygonEnthältPunkt(punkte, m)) {\r\n        return true;\r\n    }\r\n\r\n    // schneidet die Kreislinie eine der Vielecksstrecken?\r\n    for (let i = 0; i < punkte.length; i++) {\r\n\r\n        let p2 = punkte[(i + 1) % punkte.length];\r\n        if (kreisSchneidetStrecke(m, r, punkte[i], p2)) {\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\nexport function polygonBerührtPolygon(punkte1: Punkt[], punkte2: Punkt[]) {\r\n\r\n    // Nicht-exakte Lösung: prüfe, ob eines der Vielecke einen Eckpunkt des anderen enthält.\r\n    // Jede Kollision beginnt damit, dass ein Eckpunkt eines Polygons eine Seite des anderen schneidet.\r\n    // Falls oft genug geprüft wird, bleiben Kollisionen also nicht unerkannt.\r\n    for (let i = 0; i < punkte1.length; i++) {\r\n        if (polygonEnthältPunkt(punkte2, punkte1[i])) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < punkte2.length; i++) {\r\n        if (polygonEnthältPunkt(punkte1, punkte2[i])) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\n\r\nexport function abstandPunktZuStrecke(a: Punkt, b: Punkt, p: Punkt){\r\n\r\n    let dx = b.x - a.x;\r\n    let dy = b.y - a.y;\r\n\r\n    let q = dx*dx+dy*dy;\r\n\r\n    let lambda = ((-a.x+p.x)*dx + (-a.y+p.y)*dy)/q;\r\n\r\n    if(lambda < 0){\r\n        return abstand(a, p);\r\n    }\r\n\r\n    if(lambda > 1){\r\n        return abstand(b, p);\r\n    }\r\n\r\n    let fx = a.x + lambda * (b.x - a.x);\r\n    let fy = a.y + lambda * (b.y - a.y);\r\n\r\n    let s1 = p.x - fx;\r\n    let s2 = p.y - fy;\r\n\r\n    return Math.sqrt(s1*s1 + s2*s2);\r\n    \r\n}\r\n\r\nexport function abstandPunktZuGerade(a: Punkt, b: Punkt, p: Punkt) {\r\n\r\n    let dx = b.x - a.x;\r\n    let dy = b.y - a.y;\r\n\r\n    let l = Math.sqrt(dy * dy + dx * dx);\r\n\r\n    if (l < 0.000000001) {\r\n        return abstand(a, p);\r\n    }\r\n\r\n    return Math.abs(dy * p.x - dx * p.y + b.x * a.y - b.y * a.x) / l;\r\n\r\n}\r\n\r\nexport function polygonBerührtPolygonExakt(punkte1: Punkt[], punkte2: Punkt[], istGeschlossen1: boolean = false,\r\n    istGeschlossen2: boolean = false, normaleDerBerührtenGerade1: Punkt = null) {\r\n\r\n    if(punkte1.length == 0 || punkte2.length == 0) return false;\r\n\r\n    let endIndex1 = punkte1.length + (istGeschlossen1 ? 0 : -1);\r\n    let endIndex2 = punkte2.length + (istGeschlossen2 ? 0 : -1);\r\n\r\n    if (istGeschlossen1 && polygonEnthältPunkt(punkte1, punkte2[0])) {\r\n\r\n        if (normaleDerBerührtenGerade1 != null) {\r\n\r\n            let minAbstand = 100000;\r\n            let minIndex = 0;\r\n\r\n            for (let i = 0; i < punkte1.length - 1; i++) {\r\n                let j = (i + 1) % punkte1.length;\r\n\r\n                let d = abstandPunktZuStrecke(punkte1[i], punkte1[j], punkte2[0]);\r\n                if (d < minAbstand) {\r\n                    minAbstand = d;\r\n                    minIndex = 0;\r\n                }\r\n\r\n            }\r\n            let i2 = (minIndex + 1) % punkte1.length;\r\n            normaleDerBerührtenGerade1.y = punkte1[i2].x - punkte1[minIndex].x;\r\n            normaleDerBerührtenGerade1.x = -(punkte1[i2].y - punkte1[minIndex].y);\r\n\r\n        }\r\n\r\n\r\n        return true;\r\n    }\r\n\r\n    if (istGeschlossen1 && polygonEnthältPunkt(punkte2, punkte1[0])) {\r\n        return true;\r\n    }\r\n\r\n    for (let i = 0; i < endIndex1; i++) {\r\n        let p1a = punkte1[i];\r\n        let p1b = punkte1[(i + 1) % punkte1.length];\r\n        for (let j = 0; j < endIndex2; j++) {\r\n            let p2a = punkte2[j];\r\n            let p2b = punkte2[(j + 1) % punkte2.length];\r\n\r\n            if (streckeSchneidetStrecke(p1a, p1b, p2a, p2b)) {\r\n                return true;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\nexport function länge(vektor: Punkt): number {\r\n    return Math.sqrt(vektor.x * vektor.x + vektor.y * vektor.y);\r\n}\r\n\r\nexport function einheitsVektor(vektor: Punkt): Punkt {\r\n    let l = länge(vektor);\r\n    return { x: vektor.x / l, y: vektor.y / l };\r\n}\r\n\r\n// export function normalenvektorBeiImpactEinesKreises(punkte: Punkt[], isMove: boolean[], k: Kreis): Punkt {\r\n\r\n//     let minAbstand = 100000;\r\n//     let minIndex = 0;\r\n//     let m = k.getMitte();\r\n\r\n//     for (let i = 0; i < punkte.length - 1; i++) {\r\n//         if (isMove != null && !isMove[i]) {\r\n//             let j = (i + 1) % punkte.length;\r\n\r\n//             let d = abstandPunktZuStrecke(punkte[i], punkte[j], m);\r\n//             if (d < minAbstand) {\r\n//                 minAbstand = d;\r\n//                 minIndex = i;\r\n//             }\r\n\r\n//             // console.log(\"\" + i + \": (\" + punkte[i].x + \",\" + punkte[i].y + \")->(\" + punkte[j].x + \",\" + punkte[j].y + \"): \" + d);\r\n//         }\r\n//     }\r\n//     let i2 = (minIndex + 1) % punkte.length;\r\n\r\n//     // let v = {x: punkte[i2].x - punkte[minIndex].x, y: punkte[i2].y - punkte[minIndex].y};\r\n//     let am = { x: m.x - punkte[minIndex].x, y: m.y - punkte[minIndex].y };\r\n\r\n//     let n = {\r\n//         y: punkte[i2].x - punkte[minIndex].x,\r\n//         x: -(punkte[i2].y - punkte[minIndex].y)\r\n//     };\r\n\r\n//     let sp = skalarprodukt(n, am);\r\n//     if (sp > 0) {\r\n//         return n;\r\n//     } else {\r\n//         return { x: -n.x, y: -n.y };\r\n//     }\r\n\r\n// }\r\n\r\n// export function normalenvektorBeiImpactAufKreis(punkte: Punkt[], k: Kreis): Punkt {\r\n\r\n//     let schnittpunkte = [];\r\n//     let m = k.getMitte();\r\n//     let r = k.getRadius();\r\n\r\n//     for (let i = 0; i < punkte.length; i++) {\r\n//         let j = (i + 1) % punkte.length;\r\n//         schnittpunkteKreisStrecke(m, r, punkte[i], punkte[j], schnittpunkte);\r\n//     }\r\n\r\n//     if (schnittpunkte.length == 0) {\r\n//         return {\r\n//             x: punkte[0].x - m.x, y: punkte[0].y - m.y\r\n//         }\r\n//     }\r\n\r\n//     let schwerpunkt = { x: 0, y: 0 };\r\n//     for (let p of schnittpunkte) {\r\n//         schwerpunkt.x += p.x;\r\n//         schwerpunkt.y += p.y;\r\n//     }\r\n//     schwerpunkt.x /= punkte.length;\r\n//     schwerpunkt.y /= punkte.length;\r\n\r\n//     return {\r\n//         x: schwerpunkt.x - m.x,\r\n//         y: schwerpunkt.y - m.y\r\n//     }\r\n\r\n// }\r\n\r\nexport function skalarprodukt(v1: Punkt, v2: Punkt) {\r\n    return v1.x * v2.x + v1.y * v2.y;\r\n}\r\n\r\n\r\nexport function zufall(von: number, bis: number){\r\n    return Math.random()*(bis - von) + von;\r\n}\r\n\r\nexport function intZufall(von: number, bis: number){\r\n    return Math.trunc(Math.random()*(bis - von + 1 - 0.00000001) + von);\r\n}\r\n\r\nexport function vektorVonPolarkoordinaten(winkelGrad: number, länge: number){\r\n    let winkel = winkelGrad/180*Math.PI;\r\n    return {\r\n        x: länge * Math.cos(winkel),\r\n        y: länge * Math.sin(winkel)\r\n    }\r\n}\r\n\r\nexport function farbeAusRGB(rot: number, grün: number, blau: number):number{\r\n    return blau + 256 * (rot + 256 * grün);\r\n}","import { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist, Attribute, Value, Type } from \"../../compiler/types/Types.js\";\r\nimport { intPrimitiveType, doublePrimitiveType, voidPrimitiveType, booleanPrimitiveType, DoublePrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { ActorHelper } from \"./Actor.js\";\r\nimport { WorldHelper, MouseListenerShapeData } from \"./World.js\";\r\nimport { Punkt, polygonEnthältPunkt, polygonBerührtPolygon, polygonBerührtPolygonExakt } from \"../../tools/MatheTools.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { GroupHelper, GroupClass } from \"./Group.js\";\r\nimport { CircleHelper } from \"./Circle.js\";\r\nimport { TurtleHelper } from \"./Turtle.js\";\r\nimport { Enum, EnumInfo } from \"src/client/compiler/types/Enum.js\";\r\nimport { FilledShapeDefaults } from \"./FilledShapeDefaults.js\";\r\n\r\nexport class ShapeClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Shape\", module, \"Basisklasse für alle graphischen Objekte die verschoben, skaliert und gedreht werden können\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Actor\"));\r\n        this.isAbstract = true;\r\n\r\n        // let matrixType = new ArrayType(doublePrimitiveType);\r\n        let shapeType = module.typeStore.getType(\"Shape\");\r\n        let directionType = <Enum>(<any>module.typeStore.getType(\"Direction\"));\r\n        let shapeArrayType = new ArrayType(shapeType);\r\n\r\n        let vector2Class = <Klass>module.typeStore.getType(\"Vector2\");\r\n\r\n        this.addAttribute(new Attribute(\"angle\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n\r\n                if (helper == null || helper.isDestroyed || helper.displayObject == null) {\r\n                    value.value = 0;\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.angle;\r\n\r\n            }, false, Visibility.protected, true, \"Richtung\"));\r\n\r\n        this.addAttribute(new Attribute(\"centerX\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n                if (helper == null || helper.isDestroyed || helper.displayObject == null) {\r\n                    value.value = 0;\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.getCenterX();\r\n\r\n            }, false, Visibility.protected, true, \"X-Koordinate des Diagonalenschnittpunkts der BoundingBox des Objekts\"));\r\n\r\n        this.addAttribute(new Attribute(\"centerY\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n                if (helper == null || helper.isDestroyed || helper.displayObject == null) {\r\n                    value.value = 0;\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.getCenterY();\r\n\r\n            }, false, Visibility.protected, true, \"Y-Koordinate des Diagonalenschnittpunkts der BoundingBox des Objekts\"));\r\n\r\n        this.setupAttributeIndicesRecursive();\r\n\r\n        // this.addAttribute(new Attribute(\"transformation\", matrixType,\r\n        //     (value) => {\r\n\r\n        //         let rto: RuntimeObject = value.object;\r\n        //         let helper: ShapeHelper = rto.intrinsicData[\"Actor\"];\r\n        //         if (helper == null || helper.isDestroyed || helper.displayObject.transform == null) {\r\n        //             value.value = null;\r\n        //             return;\r\n        //         }\r\n\r\n        //         let matrix = helper.displayObject.localTransform.toArray(false);\r\n\r\n        //         if (value.value == null) {\r\n        //             value.value = [];\r\n\r\n        //             for (let n of matrix) {\r\n        //                 value.value.push({\r\n        //                     type: doublePrimitiveType,\r\n        //                     value: n\r\n        //                 });\r\n        //             }\r\n        //         } else {\r\n        //             let i: number = 0;\r\n        //             for (let n of matrix) {\r\n        //                 value.value[i++].value = n;\r\n        //             }\r\n        //         }\r\n\r\n        //     }, false, Visibility.protected, true, \"Transformationsmatrix\"));\r\n\r\n        this.addMethod(new Method(\"move\", new Parameterlist([\r\n            { identifier: \"dx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"dy\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let dx: number = parameters[1].value;\r\n                let dy: number = parameters[2].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"move\")) return;\r\n\r\n                sh.move(dx, dy);\r\n\r\n            }, false, false, \"Verschiebt das Grafikobjekt um dx Pixel nach rechts und um dy Pixel nach unten.\", false));\r\n\r\n        this.addMethod(new Method(\"rotate\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerX\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerY\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angleInDeg: number = parameters[1].value;\r\n                let centerX: number = parameters[2].value;\r\n                let centerY: number = parameters[3].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"rotate\")) return;\r\n\r\n                sh.rotate(angleInDeg, centerX, centerY);\r\n\r\n            }, false, false, \"Dreht das Grafikobjekt um den angegebenen Winkel. Drehpunkt ist (centerX, centerY).\", false));\r\n\r\n        this.addMethod(new Method(\"rotate\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angleInDeg: number = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"rotate\")) return;\r\n\r\n                sh.rotate(angleInDeg);\r\n\r\n            }, false, false, \"Dreht das Grafikobjekt um den angegebenen Winkel. Drehpunkt ist der 'Mittelpunkt' des Objekts\", false));\r\n\r\n        this.addMethod(new Method(\"scale\", new Parameterlist([\r\n            { identifier: \"factor\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerX\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"centerY\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let factor: number = parameters[1].value;\r\n                let centerX: number = parameters[2].value;\r\n                let centerY: number = parameters[3].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"scale\")) return;\r\n\r\n                sh.scale(factor, centerX, centerY);\r\n\r\n            }, false, false, \"Streckt das Grafikobjekt um den angegebenen Faktor. Das Zentrum der Streckung ist der Punkt (centerX, centerY)\", false));\r\n\r\n        this.addMethod(new Method(\"scale\", new Parameterlist([\r\n            { identifier: \"factor\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let factor: number = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"scale\")) return;\r\n\r\n                sh.scale(factor);\r\n\r\n            }, false, false, \"Streckt das Grafikobjekt um den angegebenen Faktor. Das Zentrum der Streckung ist der 'Mittelpunkt' des Objekts.\", false));\r\n\r\n        this.addMethod(new Method(\"mirrorX\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"mirrorX\")) return;\r\n\r\n                sh.mirrorXY(-1, 1);\r\n\r\n            }, false, false, \"Spiegelt das Objekt in X-Richtung.\", false));\r\n\r\n        this.addMethod(new Method(\"mirrorY\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"mirrorX\")) return;\r\n\r\n                sh.mirrorXY(1, -1);\r\n\r\n            }, false, false, \"Spiegelt das Objekt in Y-Richtung.\", false));\r\n\r\n        this.addMethod(new Method(\"isOutsideView\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"isOutsideView\")) return;\r\n\r\n                return sh.isOutsideView();\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn sich die Bounding Box des Objekts außerhalb des sichtbaren Bereichs befindet. \", false));\r\n\r\n        this.addMethod(new Method(\"getCenterX\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCenterX\")) return;\r\n\r\n                return sh.getCenterX();\r\n\r\n            }, false, false, \"Gibt die x-Koordinate des 'Mittelpunkts' zurück. Der 'Mittelpunkt' des Grafikobjekts ist der Diagonalenschnittpunkt seiner achsenparallelen Bounding-Box.\", false));\r\n\r\n        this.addMethod(new Method(\"getCenterY\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCenterY\")) return;\r\n\r\n                return sh.getCenterY();\r\n\r\n            }, false, false, \"Gibt die y-Koordinate des 'Mittelpunkts' zurück. Der 'Mittelpunkt' des Grafikobjekts ist der Diagonalenschnittpunkt seiner achsenparallelen Bounding-Box.\", false));\r\n\r\n        this.addMethod(new Method(\"getAngle\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getAngle\")) return;\r\n\r\n                return sh.angle;\r\n\r\n            }, false, false, \"Gibt den Winkel des Grafikobjekts in Grad zurück. Winkel == 0 bedeutet: dieselbe Richtung wie zum Zeipunkt der Instanzierung des Objekts. Positive Winkelzunahme bedeutet Rechtsdrehung.\", false));\r\n\r\n        this.addMethod(new Method(\"containsPoint\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"containsPoint\")) return;\r\n\r\n                return sh.containsPoint(x, y);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn das Grafikobjekt den Punkt (x, y) enthält.\", false));\r\n\r\n        this.addMethod(new Method(\"collidesWith\", new Parameterlist([\r\n            { identifier: \"object\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n\r\n                if (shape == null) {\r\n                    module.main.getInterpreter().throwException(\"Der Parameter der Methode collidesWith darf nicht null sein.\");\r\n                }\r\n\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let sh1: ShapeHelper = shape.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"collidesWith\")) return;\r\n\r\n                if (sh1.isDestroyed) {\r\n                    sh.worldHelper.interpreter.throwException(\"Die der Methode collidesWith als Parameter übergebene Figur ist bereits zerstört.\");\r\n                    return;\r\n                }\r\n\r\n                return sh.collidesWith(sh1);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn das Grafikobjekt und das andere Grafikobjekt kollidieren.\", false));\r\n\r\n        this.addMethod(new Method(\"collidesWithAnyShape\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"collidesWithAnyShape\")) return;\r\n\r\n                return sh.collidesWithAnyShape();\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn das Grafikobjekt mit irgendeinem anderen Grafikobjekt kollidiert.\", false));\r\n\r\n        this.addMethod(new Method(\"moveBackFrom\", new Parameterlist([\r\n            { identifier: \"otherShape\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"keepColliding\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n                let keepColliding: boolean = parameters[2].value;\r\n\r\n                if (shape == null) {\r\n                    module.main.getInterpreter().throwException(\"Der erste Parameter der Methode moveBackFrom darf nicht null sein.\");\r\n                }\r\n\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let sh1: ShapeHelper = shape.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"moveBackFrom\")) return;\r\n\r\n                if (sh1.isDestroyed) {\r\n                    sh.worldHelper.interpreter.throwException(\"Die der Methode moveBackFrom als Parameter übergebene Figur ist bereits zerstört.\");\r\n                    return;\r\n                }\r\n\r\n                sh.moveBackFrom(sh1, keepColliding);\r\n\r\n            }, false, false, \"Rückt das Objekt entlang der letzten durch move vorgegebenen Richtung zurück, bis es das übergebene Objekt gerade noch (keepColliding == true) bzw. gerade nicht mehr (keepColliding == false) berührt.\", false));\r\n\r\n        this.addMethod(new Method(\"directionRelativeTo\", new Parameterlist([\r\n            { identifier: \"otherShape\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), directionType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n\r\n                if (shape == null) {\r\n                    module.main.getInterpreter().throwException(\"Der erste Parameter der Methode directionRelativeTo darf nicht null sein.\");\r\n                }\r\n\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let sh1: ShapeHelper = shape.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"directionRelativeTo\")) return;\r\n\r\n                if (sh1.isDestroyed) {\r\n                    sh.worldHelper.interpreter.throwException(\"Die der Methode directionRelativeTo als Parameter übergebene Figur ist bereits zerstört.\");\r\n                    return;\r\n                }\r\n\r\n                return sh.directionRelativeTo(sh1, directionType);\r\n\r\n            }, false, false, \"Gibt die Richtung (top, right, bottom oder left) zurück, in der das graphische Objekt relativ zum übergebenen graphischen Objekt steht.\", false));\r\n\r\n        this.addMethod(new Method(\"moveTo\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                if (sh.testdestroyed(\"moveTo\")) return;\r\n\r\n                sh.move(x - sh.getCenterX(), y - sh.getCenterY());\r\n\r\n            }, false, false, \"Verschiebt das Grafikobjekt so, dass sich sein 'Mittelpunkt' an den angegebenen Koordinaten befindet.\", false));\r\n\r\n        this.addMethod(new Method(\"defineCenter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                if (sh.testdestroyed(\"defineCenter\")) return;\r\n\r\n                sh.defineCenter(x, y);\r\n\r\n            }, false, false, \"Setzt fest, wo der 'Mittelpunkt' des Objekts liegen soll. Dieser Punkt wird als Drehpunkt der Methode rotate, als Zentrum der Methode Scale und als Referenzpunkt der Methode moveTo benutzt.\", false));\r\n\r\n        this.addMethod(new Method(\"defineCenterRelative\", new Parameterlist([\r\n            { identifier: \"xRel\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"yRel\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                if (sh.testdestroyed(\"defineCenterRelative\")) return;\r\n\r\n                sh.defineCenterRelative(x, y);\r\n\r\n            }, false, false, \"Setzt fest, wo der 'Mittelpunkt' des Objekts liegen soll. Dabei bedeutet (XRel/YRel) = (0/0) die linke obere Ecke der Bounding Box des Objekts, (XRel/YRel) = (1/1) die rechte untere Ecke. Defaultwert ist (XRel/YRel) = (0.5/0.5), also der Diagonalenschnittpunkt der Bounding Box. Dieser Punkt wird als Drehpunkt der Methode rotate, als Zentrum der Methode Scale und als Referenzpunkt der Methode moveTo benutzt.\\n\\nVORSICHT: Diese Methode arbeitet nicht mehr korrekt, wenn das Objekt schon gedreht wurde!\", false));\r\n\r\n        this.addMethod(new Method(\"setAngle\", new Parameterlist([\r\n            { identifier: \"angleDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let angleDeg: number = parameters[1].value;\r\n\r\n                if (sh.testdestroyed(\"setAngle\")) return;\r\n\r\n                sh.rotate(angleDeg - sh.angle);\r\n\r\n            }, false, false, \"Dreht das Objekt zur angegebenen Richtung.\", false));\r\n\r\n        this.addMethod(new Method(\"setDefaultVisibility\", new Parameterlist([\r\n            { identifier: \"visibility\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let visibility: boolean = parameters[1].value;\r\n\r\n                FilledShapeDefaults.setDefaultVisibility(visibility);\r\n\r\n            }, false, true, 'Setzt den Standardwert für das Attribut \"visible\". Dieser wird nachfolgend immer dann verwendet, wenn ein neues grafisches Objekt instanziert wird.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"setVisible\", new Parameterlist([\r\n            { identifier: \"visible\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let visible: boolean = parameters[1].value;\r\n\r\n                if (sh.testdestroyed(\"setVisible\")) return;\r\n\r\n                sh.setVisible(visible);\r\n\r\n            }, false, false, \"Macht das Grafikobjekt sichtbar (visible == true) bzw. unsichtbar (visible == false).\", false));\r\n\r\n        this.addMethod(new Method(\"setStatic\", new Parameterlist([\r\n            { identifier: \"isStatic\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n                let isStatic: boolean = parameters[1].value;\r\n\r\n                if (sh.testdestroyed(\"setStatic\")) return;\r\n\r\n                sh.setStatic(isStatic);\r\n\r\n            }, false, false, \"setStatic(true) hat zur Folge, dass die Ansicht des Objekts durch Transformationen des World-Objekts nicht verändert wird.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseEnter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType, () => { }, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil in das Objekt hineinbewegt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseLeave\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType, () => { }, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil in das Objekt hineinbewegt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseDown\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"key\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType, () => { }, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil über dem Objekt befindet und der Benutzer eine Maustaste nach unten drückt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseUp\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"key\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType, () => { }, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil über dem Objekt befindet und der Benutzer eine Maustaste loslässt.\", false));\r\n\r\n        this.addMethod(new Method(\"onMouseMove\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType, () => { }, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn sich der Mauspfeil über dem Objekt befindet und bewegt.\", false));\r\n\r\n        this.addMethod(new Method(\"tint\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"tint\")) return;\r\n\r\n                sh.tint(color);\r\n\r\n            }, false, false, 'Überzieht das Grafikobjekt mit einer halbdurchsichtigen Farbschicht.', false));\r\n\r\n        this.addMethod(new Method(\"tint\", new Parameterlist([\r\n            { identifier: \"colorAsInt\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"tint\")) return;\r\n\r\n                sh.tint(color);\r\n\r\n            }, false, false, 'Überzieht das Grafikobjekt mit einer halbdurchsichtigen Farbschicht. Die Farbe wird als int-Wert angegeben, praktischerweise hexadezimal, also z.B. tint(0x303030).', false));\r\n\r\n        this.addMethod(new Method(\"startTrackingEveryMouseMovement\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.trackMouseMove = true;\r\n\r\n            }, false, false, 'Sorgt dafür, dass ab jetzt JEDE Bewegung des Mauszeigers (auch wenn sich dieser außerhalb des Objekts befindet) ein MouseMove-Ereignis für dieses Objekt auslöst. -> Praktisch zur Umsetzung des \"Ziehens\" von Objekten mit der Maus!', false));\r\n\r\n        this.addMethod(new Method(\"stopTrackingEveryMouseMovement\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.trackMouseMove = false;\r\n\r\n            }, false, false, 'Sorgt dafür, dass ab jetzt nur noch dann Bewegungen des Mauszeigers ein MouseMove-Ereignis für dieses Objekt auslösen, wenn sich der Mauszeiger über dem Objekt befindet. -> Praktisch zur Umsetzung des \"Ziehens\" von Objekten mit der Maus!', false));\r\n\r\n        this.addMethod(new Method(\"reactToMouseEventsWhenInvisible\", new Parameterlist([\r\n            { identifier: \"react\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let react: boolean = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.reactToMouseEventsWhenInvisible = react;\r\n\r\n            }, false, false, 'Legt fest, ob das Objekt auf Mausevents (buttondown, mouse move, ...) reagiert, wenn es unsichtbar ist.', false));\r\n\r\n        this.addMethod(new Method(\"tint\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"tint\")) return;\r\n\r\n                sh.tint(color);\r\n\r\n            }, false, false, 'Überzieht das Grafikobjekt mit einer halbdurchsichtigen Farbschicht.', false));\r\n\r\n        this.addMethod(new Method(\"defineDirection\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let direction: number = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"defineDirection\")) return;\r\n\r\n                sh.directionRad = direction / 180 * Math.PI;\r\n\r\n            }, false, false, 'Setzt die Blickrichtung des graphischen Objekts. Dies ist die Richtung, in die es durch Aufruf der Methode forward bewegt wird. \\nBemerkung: die Methode rotate ändert auch die Blickrichtung!', false));\r\n\r\n        this.addMethod(new Method(\"forward\", new Parameterlist([\r\n            { identifier: \"distance\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let distance: number = parameters[1].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"forward\")) return;\r\n\r\n                sh.forward(distance);\r\n\r\n            }, false, false, 'Bewegt das Objekt um die angegebene Länge in Richtung seiner Blickrichtung.\\nBemerkung: Die Blickrichtung kann mit defineDirection gesetzt werden.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, true, false, 'Erstellt eine Kopie des Grafikobjekts und git sie zurück.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"bringToFront\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"bringToFront\")) return;\r\n\r\n                return sh.bringToFront();\r\n\r\n            }, false, false, 'Setzt das Grafikobjekt vor alle anderen.', false));\r\n\r\n        this.addMethod(new Method(\"sendToBack\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"sendToBack\")) return;\r\n\r\n                return sh.sendToBack();\r\n\r\n            }, false, false, 'Setzt das Grafikobjekt hinter alle anderen.', false));\r\n\r\n        this.addMethod(new Method(\"getHitPolygon\", new Parameterlist([\r\n        ]), new ArrayType(vector2Class),\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHitPolygon\")) return;\r\n\r\n                return sh.getHitPolygon(vector2Class);\r\n\r\n            }, false, false, \"Gibt ein Array zurück, das die vier Eckpunkte des Hit-Polygons in Form von Vector2-Ortsvektoren enthält. Bei den Klassen Rectangle, Triangle und Polygon sind dies die Eckpunkte.\", false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport abstract class ShapeHelper extends ActorHelper {\r\n\r\n    displayObject: PIXI.DisplayObject;\r\n\r\n    belongsToGroup: GroupHelper;\r\n\r\n    centerXInitial: number;\r\n    centerYInitial: number;\r\n\r\n    angle: number = 0;\r\n\r\n    hitPolygonInitial: Punkt[] = null;\r\n    hitPolygonTransformed: Punkt[] = null;\r\n    hitPolygonDirty = true;\r\n\r\n    reactToMouseEventsWhenInvisible: boolean = false;\r\n\r\n    mouseLastSeenInsideObject: boolean = false;\r\n\r\n    trackMouseMove: boolean = false;\r\n\r\n    scaleFactor: number = 1.0;\r\n\r\n    directionRad: number = 0;\r\n\r\n    lastMoveDx: number = 0;\r\n    lastMoveDy: number = 0;\r\n\r\n    copyFrom(shapeHelper: ShapeHelper) {\r\n\r\n        this.centerXInitial = shapeHelper.centerXInitial;\r\n        this.centerYInitial = shapeHelper.centerYInitial;\r\n\r\n        if (shapeHelper.hitPolygonInitial != null) {\r\n            this.hitPolygonInitial = [];\r\n            for (let p of shapeHelper.hitPolygonInitial) this.hitPolygonInitial.push(Object.assign({}, p));\r\n        }\r\n\r\n        this.setHitPolygonDirty(true);\r\n\r\n        this.hitPolygonDirty = shapeHelper.hitPolygonDirty;\r\n        this.reactToMouseEventsWhenInvisible = shapeHelper.reactToMouseEventsWhenInvisible;\r\n        this.mouseLastSeenInsideObject = shapeHelper.mouseLastSeenInsideObject;\r\n\r\n        this.displayObject.localTransform.copyFrom(shapeHelper.displayObject.transform.localTransform);\r\n        this.displayObject.updateTransform();\r\n\r\n    }\r\n\r\n    constructor(interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n\r\n        super(interpreter, runtimeObject);\r\n\r\n        let listenerTypes = [\r\n            { identifier: \"MouseUp\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseDown\", signature: \"(double, double, int)\" },\r\n            { identifier: \"MouseMove\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseEnter\", signature: \"(double, double)\" },\r\n            { identifier: \"MouseLeave\", signature: \"(double, double)\" },\r\n        ];\r\n\r\n        let sd: MouseListenerShapeData = null;\r\n\r\n        for (let lt of listenerTypes) {\r\n            let method: Method = (<Klass>runtimeObject.class).getMethodBySignature(\"on\" + lt.identifier + lt.signature);\r\n\r\n            if (method?.program != null || method?.invoke != null) {\r\n\r\n                if (sd == null) {\r\n                    sd = {\r\n                        shapeHelper: this,\r\n                        types: {},\r\n                        methods: {}\r\n                    };\r\n                    this.worldHelper.mouseListenerShapes.push(sd);\r\n                }\r\n\r\n                sd.types[lt.identifier.toLowerCase()] = true;\r\n                sd.methods[lt.identifier.toLowerCase()] = method;\r\n\r\n            }\r\n        }\r\n\r\n        if (this.worldHelper.defaultGroup == null) {\r\n            this.worldHelper.shapes.push(this);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    setHitPolygonDirty(dirty: boolean) {\r\n        this.hitPolygonDirty = dirty;\r\n    }\r\n\r\n    bringOnePlaneFurtherToFront() {\r\n        let container: PIXI.Container = <PIXI.Container>this.displayObject.parent;\r\n        let highestIndex = container.children.length - 1;\r\n        let index = container.getChildIndex(this.displayObject);\r\n        if (index < highestIndex) {\r\n            container.setChildIndex(this.displayObject, index + 1);\r\n        }\r\n    }\r\n\r\n    bringOnePlaneFurtherToBack() {\r\n        let container: PIXI.Container = <PIXI.Container>this.displayObject.parent;\r\n        let index = container.getChildIndex(this.displayObject);\r\n        if (index > 0) {\r\n            container.setChildIndex(this.displayObject, index - 1);\r\n        }\r\n    }\r\n\r\n    bringToFront() {\r\n        let container: PIXI.Container = <PIXI.Container>this.displayObject.parent;\r\n        let highestIndex = container.children.length - 1;\r\n        container.setChildIndex(this.displayObject, highestIndex);\r\n    }\r\n\r\n    sendToBack() {\r\n        let container: PIXI.Container = <PIXI.Container>this.displayObject.parent;\r\n        container.setChildIndex(this.displayObject, 0);\r\n    }\r\n\r\n    addToDefaultGroupAndSetDefaultVisibility() {\r\n\r\n        this.displayObject.visible = FilledShapeDefaults.defaultVisibility;\r\n\r\n        if (this.worldHelper.defaultGroup != null) {\r\n            this.runtimeObject.intrinsicData[\"Actor\"] = this;\r\n            let groupHelper = <GroupHelper>this.worldHelper.defaultGroup;\r\n            groupHelper.add(this.runtimeObject);\r\n        }\r\n    }\r\n\r\n    tint(color: string | number) {\r\n        let c: number;\r\n        if (typeof color == 'string') {\r\n            c = ColorHelper.parseColorToOpenGL(color).color;\r\n        } else {\r\n            c = color;\r\n        }\r\n        //@ts-ignore\r\n        if (this.displayObject.tint) {\r\n            //@ts-ignore\r\n            this.displayObject.tint = c;\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    setVisible(visible: boolean) {\r\n\r\n        this.displayObject.visible = visible;\r\n    }\r\n\r\n    collidesWithAnyShape(): boolean {\r\n        this.displayObject.updateTransform();\r\n        if (this.hitPolygonDirty) this.transformHitPolygon();\r\n\r\n        for (let shapeHelper of this.worldHelper.shapes) {\r\n            if (this == shapeHelper) continue;\r\n\r\n            if (shapeHelper[\"shapes\"] || shapeHelper[\"turtle\"]) {\r\n                if (shapeHelper.collidesWith(this)) {\r\n                    return true;\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            if (this[\"turtle\"]) {\r\n                if (this.collidesWith(shapeHelper)) {\r\n                    return true;\r\n                } else {\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            let bb = this.displayObject.getBounds();\r\n            let bb1 = shapeHelper.displayObject.getBounds();\r\n\r\n            if (bb.left > bb1.right || bb1.left > bb.right) continue;\r\n\r\n            if (bb.top > bb1.bottom || bb1.top > bb.bottom) continue;\r\n\r\n            // boundig boxes collide, so check further:\r\n            if (shapeHelper.hitPolygonDirty) shapeHelper.transformHitPolygon();\r\n\r\n            // return polygonBerührtPolygon(this.hitPolygonTransformed, shapeHelper.hitPolygonTransformed);\r\n            if (polygonBerührtPolygonExakt(this.hitPolygonTransformed, shapeHelper.hitPolygonTransformed, true, true)) {\r\n                return true;\r\n            }\r\n\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    collidesWith(shapeHelper: ShapeHelper) {\r\n\r\n        // if(!(this instanceof TurtleHelper) && (shapeHelper instanceof TurtleHelper)){\r\n        if (this[\"lineElements\"] == null && (shapeHelper[\"lineElements\"] != null)) {\r\n            return shapeHelper.collidesWith(this);\r\n        }\r\n\r\n        if (shapeHelper[\"shapes\"]) {\r\n            return shapeHelper.collidesWith(this);\r\n        }\r\n\r\n        if (this.displayObject == null || shapeHelper.displayObject == null) return;\r\n\r\n        this.displayObject.updateTransform();\r\n        shapeHelper.displayObject.updateTransform();\r\n\r\n        let bb = this.displayObject.getBounds();\r\n        let bb1 = shapeHelper.displayObject.getBounds();\r\n\r\n        if (bb.left > bb1.right || bb1.left > bb.right) return false;\r\n\r\n        if (bb.top > bb1.bottom || bb1.top > bb.bottom) return false;\r\n\r\n        if (this.hitPolygonInitial == null || shapeHelper.hitPolygonInitial == null) return true;\r\n\r\n        // boundig boxes collide, so check further:\r\n        if (this.hitPolygonDirty) this.transformHitPolygon();\r\n        if (shapeHelper.hitPolygonDirty) shapeHelper.transformHitPolygon();\r\n\r\n        // return polygonBerührtPolygon(this.hitPolygonTransformed, shapeHelper.hitPolygonTransformed);\r\n        return polygonBerührtPolygonExakt(this.hitPolygonTransformed, shapeHelper.hitPolygonTransformed, true, true);\r\n\r\n    }\r\n\r\n    directionRelativeTo(shapeHelper: ShapeHelper, directionType: Enum) {\r\n        this.displayObject.updateTransform();\r\n        shapeHelper.displayObject.updateTransform();\r\n\r\n        let bb = this.displayObject.getBounds();\r\n        let bb1 = shapeHelper.displayObject.getBounds();\r\n\r\n        let dx1 = bb1.left - bb.right;  // positive if left\r\n        let dx2 = bb.left - bb1.right;  // positive if right\r\n\r\n        let dy1 = bb1.top - bb.bottom;  // positive if top\r\n        let dy2 = bb.top - bb1.bottom;  // positive if bottom\r\n\r\n        let enuminfo = directionType.enumInfoList;\r\n        let pairs: { distance: number, ei: EnumInfo }[] = [];\r\n\r\n        if (this.lastMoveDx > 0) {\r\n            pairs.push({ distance: dx1, ei: enuminfo[3] });\r\n        } else if (this.lastMoveDx < 0) {\r\n            pairs.push({ distance: dx2, ei: enuminfo[1] });\r\n        }\r\n\r\n        if (this.lastMoveDy > 0) {\r\n            pairs.push({ distance: dy1, ei: enuminfo[0] });\r\n        } else if (this.lastMoveDy < 0) {\r\n            pairs.push({ distance: dy2, ei: enuminfo[2] });\r\n        }\r\n\r\n        if (pairs.length == 0) {\r\n            pairs = [\r\n                { distance: dx1, ei: enuminfo[3] },\r\n                { distance: dx2, ei: enuminfo[1] },\r\n                { distance: dy1, ei: enuminfo[0] },\r\n                { distance: dy2, ei: enuminfo[2] }\r\n            ]\r\n        }\r\n\r\n\r\n        let max = pairs[0].distance;\r\n        let ei = pairs[0].ei;\r\n        for (let i = 1; i < pairs.length; i++) {\r\n            if (pairs[i].distance > max) {\r\n                max = pairs[i].distance;\r\n                ei = pairs[i].ei;\r\n            }\r\n        }\r\n\r\n        return ei.object;\r\n    }\r\n\r\n\r\n    moveBackFrom(sh1: ShapeHelper, keepColliding: boolean) {\r\n\r\n        // subsequent calls to move destroy values in this.lastMoveDx and this.lastMoveDy, so:\r\n        let lmdx = this.lastMoveDx;\r\n        let lmdy = this.lastMoveDy;\r\n\r\n        let length = Math.sqrt(lmdx * lmdx + lmdy * lmdy);\r\n        if (length < 0.001) return;\r\n\r\n        if (!this.collidesWith(sh1)) return;\r\n\r\n        let parameterMax = 0;       // collision with this parameter\r\n        this.move(-lmdx, -lmdy);\r\n\r\n        let currentParameter = -1;  // move to parameterMin\r\n\r\n        while (this.collidesWith(sh1)) {\r\n            parameterMax = currentParameter;    // collision at this parameter\r\n            let newParameter = currentParameter * 2;\r\n            this.move(lmdx * (newParameter - currentParameter), lmdy * (newParameter - currentParameter));\r\n            currentParameter = newParameter;\r\n            if ((currentParameter + 1) * length < -100) {\r\n                this.move(lmdx * (-1 - currentParameter), lmdy * (-1 - currentParameter));\r\n                return;\r\n            }\r\n        }\r\n        let parameterMin = currentParameter;\r\n\r\n        let isColliding: boolean = false;\r\n        // Situation now: no collision at parameterMin == currentParameter, collision at parameterMax\r\n        while ((parameterMax - parameterMin) * length > 1) {\r\n            let np = (parameterMax + parameterMin) / 2;\r\n            this.move(lmdx * (np - currentParameter), lmdy * (np - currentParameter));\r\n            if (isColliding = this.collidesWith(sh1)) {\r\n                parameterMax = np;\r\n            } else {\r\n                parameterMin = np;\r\n            }\r\n            currentParameter = np;\r\n        }\r\n\r\n        if (keepColliding && !isColliding) {\r\n            this.move(lmdx * (parameterMax - currentParameter), lmdy * (parameterMax - currentParameter));\r\n        } else if (isColliding && !keepColliding) {\r\n            this.move(lmdx * (parameterMin - currentParameter), lmdy * (parameterMin - currentParameter));\r\n        }\r\n\r\n        this.lastMoveDx = lmdx;\r\n        this.lastMoveDy = lmdy;\r\n    }\r\n\r\n\r\n\r\n    containsPoint(x: number, y: number) {\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        if (this.hitPolygonInitial == null) return true;\r\n\r\n        if (this.hitPolygonDirty) this.transformHitPolygon();\r\n        return polygonEnthältPunkt(this.hitPolygonTransformed, { x: x, y: y });\r\n    }\r\n\r\n    transformHitPolygon() {\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        this.displayObject.updateTransform();\r\n        this.displayObject.transform.worldTransform.apply(p, p);\r\n\r\n        this.hitPolygonTransformed = [];\r\n        let m = this.displayObject.transform.worldTransform;\r\n        for (let p of this.hitPolygonInitial) {\r\n            this.hitPolygonTransformed.push({\r\n                x: (m.a * p.x) + (m.c * p.y) + m.tx,\r\n                y: (m.b * p.x) + (m.d * p.y) + m.ty\r\n            });\r\n        }\r\n        this.setHitPolygonDirty(false);\r\n\r\n    }\r\n\r\n    isOutsideView() {\r\n        let bounds = this.displayObject.getBounds(true);\r\n        let wh = this.worldHelper;\r\n        return bounds.right < wh.currentLeft || bounds.left > wh.currentLeft + wh.currentWidth\r\n            || bounds.bottom < wh.currentTop || bounds.top > wh.currentTop + wh.currentHeight;\r\n    }\r\n\r\n    defineCenter(x: number, y: number) {\r\n        let p = new PIXI.Point(x, y);\r\n        this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n        this.centerXInitial = p.x;\r\n        this.centerYInitial = p.y;\r\n    }\r\n\r\n    defineCenterRelative(x: number, y: number) {\r\n        let bounds = this.displayObject.getBounds(false);\r\n        this.defineCenter(bounds.left + bounds.width * x, bounds.top + bounds.height * y);\r\n    }\r\n\r\n    move(dx: number, dy: number) {\r\n\r\n        if (dx != 0 || dy != 0) {\r\n            this.lastMoveDx = dx;\r\n            this.lastMoveDy = dy;\r\n        }\r\n\r\n        this.displayObject.localTransform.translate(dx, dy);\r\n        //@ts-ignore\r\n        this.displayObject.transform.onChange();\r\n        this.displayObject.updateTransform();\r\n        this.setHitPolygonDirty(true);\r\n    }\r\n\r\n    forward(distance: number) {\r\n        let dx = distance * Math.cos(this.directionRad);\r\n        let dy = -distance * Math.sin(this.directionRad);\r\n        this.move(dx, dy);\r\n    }\r\n\r\n    rotate(angleInDeg: number, cX?: number, cY?: number) {\r\n\r\n        if (cX == null) {\r\n            let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        } else {\r\n            let p = new PIXI.Point(cX, cY);\r\n            this.displayObject.updateTransform();       // necessary if world coordinate system is scaled\r\n            this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        }\r\n\r\n        this.displayObject.localTransform.translate(-cX, -cY);\r\n        this.displayObject.localTransform.rotate(-angleInDeg / 180 * Math.PI);\r\n        this.displayObject.localTransform.translate(cX, cY);\r\n        //@ts-ignore\r\n        this.displayObject.transform.onChange();\r\n        this.displayObject.updateTransform();\r\n        this.setHitPolygonDirty(true);\r\n\r\n        this.angle += angleInDeg;\r\n        this.directionRad += angleInDeg / 180 * Math.PI;\r\n    }\r\n\r\n    mirrorXY(scaleX: number, scaleY: number) {\r\n        let cX: number, cY: number;\r\n\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        this.displayObject.localTransform.apply(p, p);\r\n        cX = p.x;\r\n        cY = p.y;\r\n\r\n        this.displayObject.localTransform.translate(-cX, -cY);\r\n        this.displayObject.localTransform.scale(scaleX, scaleY);\r\n        this.displayObject.localTransform.translate(cX, cY);\r\n        //@ts-ignore\r\n        this.displayObject.transform.onChange();\r\n        this.displayObject.updateTransform();\r\n\r\n        this.setHitPolygonDirty(true);\r\n\r\n    }\r\n\r\n\r\n    scale(factor: number, cX?: number, cY?: number) {\r\n\r\n        if (cX == null) {\r\n            let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        } else {\r\n            let p = new PIXI.Point(cX, cY);\r\n            this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n            this.displayObject.localTransform.apply(p, p);\r\n            cX = p.x;\r\n            cY = p.y;\r\n        }\r\n\r\n        this.displayObject.localTransform.translate(-cX, -cY);\r\n        this.displayObject.localTransform.scale(factor, factor);\r\n        this.displayObject.localTransform.translate(cX, cY);\r\n        //@ts-ignore\r\n        this.displayObject.transform.onChange();\r\n        this.displayObject.updateTransform();\r\n\r\n        this.setHitPolygonDirty(true);\r\n\r\n        this.scaleFactor *= factor;\r\n\r\n    }\r\n\r\n    public getCenterX(): number {\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        this.displayObject.updateTransform();\r\n        // this.displayObject.localTransform.apply(p, p);\r\n        this.displayObject.transform.worldTransform.apply(p, p);\r\n        return p.x;\r\n    }\r\n\r\n    public getCenterY(): number {\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        this.displayObject.updateTransform();\r\n        this.displayObject.transform.worldTransform.apply(p, p);\r\n        return p.y;\r\n    }\r\n\r\n    public abstract render(): void;\r\n\r\n    public destroy(): void {\r\n        super.destroy();\r\n        if (this.belongsToGroup != null) {\r\n            this.belongsToGroup.remove(this.runtimeObject);\r\n        } else {\r\n            let index = this.worldHelper.shapes.indexOf(this);\r\n            if (index >= 0) this.worldHelper.shapes.splice(index, 1);\r\n        }\r\n\r\n        let index1 = this.worldHelper.shapesNotAffectedByWorldTransforms.indexOf(this);\r\n        if (index1 >= 0) {\r\n            this.worldHelper.shapesNotAffectedByWorldTransforms.splice(index1, 1);\r\n        }\r\n\r\n    }\r\n\r\n    getCollidingShapes(groupHelper: GroupHelper, shapeType: Type): any {\r\n        let collidingShapes: Value[] = [];\r\n        for (let shape of groupHelper.shapes) {\r\n            let shapeHelper: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            if (shapeHelper.collidesWith(this)) {\r\n                collidingShapes.push({\r\n                    type: shapeType,\r\n                    value: shape\r\n                });\r\n            }\r\n        }\r\n\r\n        return collidingShapes;\r\n    }\r\n\r\n    abstract getCopy(klass: Klass): RuntimeObject;\r\n\r\n    getHitPolygon(vector2Class: Klass): Value[] {\r\n\r\n        if (this.hitPolygonDirty) {\r\n            this.transformHitPolygon();\r\n        }\r\n\r\n        let ret: Value[] = [];\r\n        for (let p of this.hitPolygonTransformed) {\r\n            let ro = new RuntimeObject(vector2Class);\r\n            ro.attributes = [{ type: doublePrimitiveType, value: p.x }, { type: doublePrimitiveType, value: p.y }];\r\n            ret.push({ type: vector2Class, value: ro });\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    setStatic(isStatic: boolean) {\r\n        let list = this.worldHelper.shapesNotAffectedByWorldTransforms;\r\n        if (isStatic) {\r\n            list.push(this);\r\n        } else {\r\n            let index = list.indexOf(this);\r\n            if (index >= 0) {\r\n                list.splice(index, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, stringPrimitiveType, voidPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { ColorClassIntrinsicData } from \"./Color.js\";\r\nimport { isPrefixUnaryExpression } from \"typescript\";\r\nimport { BufferResource } from \"@pixi/core\";\r\nimport { FORMATS } from \"@pixi/constants\";\r\n\r\nexport class BitmapClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Bitmap\", module, \"Rechteckige Bitmap mit beliebiger Auflösung und Positionierung in der Grafikausgabe\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        let colorType: Klass = <Klass>this.module.typeStore.getType(\"Color\");\r\n\r\n        this.addMethod(new Method(\"Bitmap\", new Parameterlist([\r\n            { identifier: \"pointsX\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"pointsY\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"displayWidth\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"displayHeight\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let pointsX: number = parameters[1].value;\r\n                let pointsY: number = parameters[2].value;\r\n                let left: number = parameters[3].value;\r\n                let top: number = parameters[4].value;\r\n                let width: number = parameters[5].value;\r\n                let height: number = parameters[6].value;\r\n\r\n                let rh = new BitmapHelperNew(pointsX, pointsY, left, top, width, height, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Bitmap. pointsX bzw. pointsY bezeichnet Anzahl der Bildpunkte in x bzw. y-Richtung, (left, top) sind die Koordinaten der linken oberen Ecke.', true));\r\n\r\n        this.addMethod(new Method(\"getColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), colorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.getFarbeAsObject(x, y, colorType);\r\n\r\n            }, false, false, 'Gibt die Farbe des Punkts (x, y) zurück.', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: number = parameters[3].value;\r\n                let alpha: number = parameters[4].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color, alpha);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0.', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: number = parameters[3].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau.', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: string = parameters[3].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"setColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: string = parameters[3].value;\r\n                let alpha: number = parameters[4].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setzeFarbe(x, y, color, alpha);\r\n\r\n            }, false, false, 'Setzt die Farbe des Pixels bei (x, y). Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\". 0.0 <= alpha <= 1.0.', false));\r\n\r\n        this.addMethod(new Method(\"isColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: string = parameters[3].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.istFarbe(x, y, color);\r\n\r\n            }, false, false, 'Gibt genau dann true zurück, wenn das Pixel bei (x, y) die angegebene Farbe besitzt. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"isColor\", new Parameterlist([\r\n            { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let color: number = parameters[3].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.istFarbe(x, y, color, 1);\r\n\r\n            }, false, false, 'Gibt genau dann true zurück, wenn das Pixel bei (x, y) die angegebene Farbe besitzt. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n\r\n        this.addMethod(new Method(\"fillAll\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.fillAll(color, alpha);\r\n\r\n            }, false, false, 'Füllt die ganze Bitmap mit einer Farbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"fillAll\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.fillAll(color);\r\n\r\n            }, false, false, 'Füllt die ganze Bitmap mit einer Farbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Bitmap-Objekts und git sie zurück.', false));\r\n\r\n        this.addMethod(new Method(\"clone\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: BitmapHelperNew = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"clone\")) return;\r\n\r\n                return sh.getCopyOrClone(<Klass>o.class, true);\r\n\r\n            }, false, false, 'Erstellt ein weiteres Bitmap-Objekt, das auf dieselben Pixeldaten zurückgreift.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class BitmapHelperNew extends ShapeHelper {\r\n\r\n    texture: PIXI.Texture;\r\n    data: Uint32Array;\r\n\r\n    isBigEndian: boolean = true;\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        return this.getCopyOrClone(klass, false)\r\n    }\r\n\r\n    getCopyOrClone(klass: Klass, clone: boolean = false): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let bh: BitmapHelperNew = new BitmapHelperNew(this.anzahlX, this.anzahlY, this.left, this.top, this.width, this.height, this.worldHelper.interpreter, ro, this, clone);\r\n\r\n        ro.intrinsicData[\"Actor\"] = bh;\r\n\r\n        bh.copyFrom(this);\r\n        bh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    constructor(public anzahlX, public anzahlY, public left: number, public top: number, public width: number, public height: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject, bitmapToCopy?: BitmapHelperNew, clone: boolean = false) {\r\n        super(interpreter, runtimeObject);\r\n\r\n        let uInt32 = new Uint32Array([0x11223344]);\r\n        let uInt8 = new Uint8Array(uInt32.buffer);\r\n     \r\n        if(uInt8[0] === 0x44) {\r\n            this.isBigEndian = false;\r\n        } else if (uInt8[0] === 0x11) {\r\n            this.isBigEndian = true;\r\n        }\r\n\r\n        // TODO: Little Endian...\r\n\r\n        this.centerXInitial = left + width / 2;\r\n        this.centerYInitial = top + height / 2;\r\n\r\n        this.hitPolygonInitial = [\r\n            { x: left, y: top }, { x: left, y: top + height }, { x: left + width, y: top + height }, { x: left + width, y: top }\r\n        ];\r\n\r\n        this.initGraphics(bitmapToCopy, clone);\r\n\r\n        let sprite = <PIXI.Sprite>this.displayObject;\r\n\r\n        sprite.localTransform.scale(width/anzahlX, height/anzahlY);\r\n        sprite.localTransform.translate(left, top);\r\n        //@ts-ignore\r\n        sprite.transform.onChange();\r\n\r\n        let p = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n        sprite.localTransform.applyInverse(p, p);\r\n        this.centerXInitial = p.x;\r\n        this.centerYInitial = p.y;\r\n\r\n\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n    }\r\n\r\n    render(): void {\r\n\r\n    };\r\n\r\n    protected initGraphics(bitmapToCopy?: BitmapHelperNew, clone: boolean = false) {\r\n\r\n        if(bitmapToCopy == null){\r\n            this.data = new Uint32Array(this.anzahlX * this.anzahlY);\r\n        } else {\r\n            if(clone){\r\n                this.data = bitmapToCopy.data;\r\n            } else {\r\n                this.data = new Uint32Array(bitmapToCopy.data);\r\n            }\r\n        }\r\n        \r\n        let u8Array = new Uint8Array(this.data.buffer);\r\n\r\n        if(!clone){\r\n            let bufferResource = new PIXI.BufferResource(u8Array, {width: this.anzahlX, height: this.anzahlY});\r\n            let bt = new PIXI.BaseTexture(bufferResource, {\r\n                scaleMode: PIXI.SCALE_MODES.NEAREST \r\n            });\r\n            this.texture = new PIXI.Texture(bt);\r\n        } else {\r\n            this.texture = bitmapToCopy.texture;\r\n        }\r\n\r\n        this.displayObject = new PIXI.Sprite(this.texture);\r\n        this.worldHelper.stage.addChild(this.displayObject);\r\n    }\r\n\r\n    uploadData(){\r\n        this.texture.baseTexture.update();\r\n    }\r\n\r\n    public getFarbeAsObject(x: number, y: number, colorType: Klass): RuntimeObject {\r\n\r\n        let i = (x + y * (this.anzahlX));\r\n\r\n        // let a = this.data[i + 3];\r\n        let rto: RuntimeObject = new RuntimeObject(colorType);\r\n\r\n        let c = this.data[i];\r\n\r\n        let red = c & 0xff;\r\n        let green = (c & 0xff00) >> 8;\r\n        let blue = (c & 0xff0000) >> 16;\r\n\r\n        let id: ColorClassIntrinsicData = {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            hex: ColorHelper.intColorToHexRGB(c >> 8)\r\n        }\r\n\r\n        rto.intrinsicData = id;\r\n\r\n        return rto;\r\n\r\n    }\r\n\r\n\r\n    public istFarbe(x: number, y: number, color: string | number, alpha?: number) {\r\n\r\n        let i = (x + y * (this.anzahlX));\r\n\r\n        let c: number;\r\n\r\n        if (typeof color == \"string\") {\r\n            let ch = ColorHelper.parseColorToOpenGL(color);\r\n            c = ch.color;\r\n            alpha = ch.alpha;\r\n        } else {\r\n            c = color;\r\n        }\r\n\r\n        let c1 = this.data[i];\r\n        let red = c1 & 0xff;\r\n        let green = (c1 & 0xff00) >> 8;\r\n        let blue = (c1 & 0xff0000) >> 16;\r\n\r\n\r\n        return c == red*0x10000 + green * 0x100 + blue;\r\n\r\n    }\r\n\r\n    public setzeFarbe(x: number, y: number, color: string | number, alpha?: number) {\r\n\r\n        let i = (x + y * (this.anzahlX));\r\n        let c: number;\r\n\r\n        if (typeof color == \"string\") {\r\n            let ch = ColorHelper.parseColorToOpenGL(color);\r\n            c = ch.color;\r\n            if (alpha == null) alpha = ch.alpha;\r\n        } else {\r\n            c = color;\r\n            if (alpha == null) alpha = 1.0;\r\n        }\r\n\r\n        this.data[i] = Math.round(alpha * 255) * 0x1000000 + ((c & 0xff) << 16) + (c & 0xff00) + ((c & 0xff0000) >> 16);\r\n        \r\n        this.uploadData();\r\n    }\r\n\r\n    public fillAll(color: string | number, alpha?: number) {\r\n        let c: number;\r\n\r\n        if (typeof color == \"string\") {\r\n            let ch = ColorHelper.parseColorToOpenGL(color);\r\n            c = ch.color;\r\n            alpha = ch.alpha;\r\n        } else {\r\n            c = color;\r\n        }\r\n\r\n        this.data.fill(Math.round(alpha * 255) * 0x1000000 + ((c & 0xff) << 16) + (c & 0xff00) + ((c & 0xff0000) >> 16));\r\n        // this.data.fill(0xffff0000);\r\n        \r\n        this.uploadData();\r\n    }\r\n    \r\n    public setzeFarbeRGBA(x: number, y: number, r: number, g: number, b: number, alpha: number) {\r\n        let c = alpha * 0xff000000 + b*0x10000 + g * 0x100 + r;\r\n        let i = (x + y * (this.anzahlX));\r\n        this.data[i] = c;\r\n        this.uploadData();\r\n    }\r\n\r\n    public getFarbe(x: number, y: number): number {\r\n        let c = this.data[x + y * this.anzahlX] & 0xffffff;\r\n        return (c & 0xff) << 16 + (c & 0xff00) + (c & 0xff0000) >> 16;\r\n    }\r\n\r\n    public getAlpha(x: number, y: number): number {\r\n        return (this.data[x + y * this.anzahlX] & 0xff000000) >> 24 / 255;\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, stringPrimitiveType, voidPrimitiveType, intPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ColorClassIntrinsicData } from \"./Color.js\";\r\nimport { FilledShapeDefaults } from \"./FilledShapeDefaults.js\";\r\n\r\nexport class FilledShapeClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"FilledShape\", module, \"Basisklasse für grafische Objekte mit Füllfarbe und Randfarbe, beide wahlweise auch transparent\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n        this.isAbstract = true;\r\n\r\n        let that = this;\r\n\r\n        let colorType: Klass = <Klass>this.module.typeStore.getType(\"Color\");\r\n\r\n        this.addMethod(new Method(\"getFillColor\", new Parameterlist([\r\n        ]), colorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.getFarbeAsObject(sh.fillColor, sh.fillColor, colorType);\r\n\r\n            }, false, false, 'Gibt die Füllfarbe des Objekts zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getBorderColor\", new Parameterlist([\r\n        ]), colorType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                return sh.getFarbeAsObject(sh.borderColor, sh.borderColor, colorType);\r\n\r\n            }, false, false, 'Gibt die Randfarbe des Objekts zurück.', false));\r\n\r\n        this.addAttribute(new Attribute(\"borderWidth\", doublePrimitiveType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                let helper: FilledShapeHelper = rto.intrinsicData[\"Actor\"];\r\n                if (helper == null) {\r\n                    value.value = Number.NaN;\r\n                    return;\r\n                }\r\n\r\n                value.value = helper.borderWidth;\r\n\r\n            }, false, Visibility.protected, true, \"Randbreite in Pixeln\"));\r\n\r\n        this.addMethod(new Method(\"setAlpha\", new Parameterlist([\r\n            { identifier: \"alphaValue\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let alpha: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setAlpha\")) return;\r\n\r\n                sh.setAlpha(alpha);\r\n\r\n            }, false, false, 'Setzt die Durchsichtigkeit von Füllung und Rand. 0.0 bedeutet vollkommen durchsichtig, 1.0 bedeutet vollkommen undurchsichtig.\"', false));\r\n\r\n        this.addMethod(new Method(\"getAlpha\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getAlpha\")) return;\r\n\r\n                return sh.fillAlpha;\r\n\r\n            }, false, false, 'Setzt die Durchsichtigkeit von Füllung und Rand. 0.0 bedeutet vollkommen durchsichtig, 1.0 bedeutet vollkommen undurchsichtig.\"', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau', false));\r\n\r\n        this.addMethod(new Method(\"setDefaultBorder\", new Parameterlist([\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let width: number = parameters[1].value;\r\n                let color: string = parameters[2].value;\r\n\r\n                FilledShapeDefaults.setDefaultBorder(width, color);\r\n\r\n            }, false, true, 'Setzt Default-Eigenschaften des Randes. Sie werden nachfolgend immer dann verwendet, wenn ein neues grafisches Objekt erstellt wird. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"setDefaultBorder\", new Parameterlist([\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let width: number = parameters[1].value;\r\n                let color: number = parameters[2].value;\r\n                let alpha: number = parameters[3].value;\r\n\r\n                FilledShapeDefaults.setDefaultBorder(width, color, alpha);\r\n\r\n            }, false, true, 'Setzt Default-Eigenschaften des Randes. Sie werden nachfolgend immer dann verwendet, wenn ein neues grafisches Objekt erstellt wird. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"setDefaultFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let color: number = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n\r\n                FilledShapeDefaults.setDefaultFillColor(color, alpha);\r\n\r\n            }, false, true, 'Setzt die Default-Füllfarbe. Sie wird nachfolgend immer dann verwendet, wenn ein neues grafisches Objekt erstellt wird. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"setDefaultFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let color: string = parameters[1].value;\r\n\r\n                FilledShapeDefaults.setDefaultFillColor(color);\r\n\r\n            }, false, true, 'Setzt die Default-Füllfarbe. Sie wird nachfolgend immer dann verwendet, wenn ein neues grafisches Objekt erstellt wird. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"setFillColor\", new Parameterlist([\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setFillColor\")) return;\r\n\r\n                sh.setFillColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Füllfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" oder \"rgb(172, 22, 18)\" und 0.0 <= alpha <= 1.0\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"color\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: number = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe wird als int-Wert gegeben, wobei farbe == 255*255*rot + 255*grün + blau und 0.0 <= alpha <= 1.0\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"color\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let alpha: number = parameters[2].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color, alpha);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" oder \"rgb(172, 22, 18)\" und 0.0 <= alpha <= 1.0\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderColor\", new Parameterlist([\r\n            { identifier: \"colorAsRGBAString\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let color: string = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderColor\")) return;\r\n\r\n                sh.setBorderColor(color);\r\n\r\n            }, false, false, 'Setzt die Randfarbe. Die Farbe ist entweder eine vordefinierte Farbe (Color.black, Color.red, ...) oder eine css-Farbe der Art \"#ffa7b3\" (ohne alpha), \"#ffa7b380\" (mit alpha), \"rgb(172, 22, 18)\" oder \"rgba(123, 22,18, 0.3)\"', false));\r\n\r\n        this.addMethod(new Method(\"setBorderWidth\", new Parameterlist([\r\n            { identifier: \"widthInPixel\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let width: number = parameters[1].value;\r\n                let sh: FilledShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setBorderWidth\")) return;\r\n\r\n                sh.setBorderWidth(width);\r\n\r\n            }, false, false, 'Setzt die Linienbreite des Randes (Einheit: Pixel)\"', false));\r\n\r\n\r\n        this.setupAttributeIndicesRecursive();\r\n\r\n    }\r\n\r\n    rgbaToHex(rgb: number, alpha: number): string {\r\n        let s = rgb == null ? \"---\" : rgb.toString(16);\r\n        while (s.length < 6) s = \"0\" + s;\r\n\r\n        let a = Math.round(alpha * 255).toString(16);\r\n        if (a.length < 2) a = \"0\" + a;\r\n\r\n        return \"#\" + s + a;\r\n\r\n    }\r\n\r\n}\r\n\r\nexport abstract class FilledShapeHelper extends ShapeHelper {\r\n\r\n    fillColor: number;\r\n    fillAlpha: number;\r\n\r\n    borderColor: number;\r\n    borderAlpha: number;\r\n    borderWidth: number;\r\n\r\n\r\n    constructor(interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.borderColor = FilledShapeDefaults.defaultBorderColor;\r\n        this.borderAlpha = FilledShapeDefaults.defaultBorderAlpha;\r\n        this.borderWidth = FilledShapeDefaults.defaultBorderWidth;\r\n\r\n        this.fillColor = FilledShapeDefaults.defaultFillColor;\r\n        this.fillAlpha = FilledShapeDefaults.defaultFillAlpha;\r\n    }\r\n\r\n    copyFrom(fsh: FilledShapeHelper) {\r\n        super.copyFrom(fsh);\r\n        this.fillColor = fsh.fillColor;\r\n        this.fillAlpha = fsh.fillAlpha;\r\n\r\n        this.borderColor = fsh.borderColor;\r\n        this.borderAlpha = fsh.borderAlpha;\r\n        this.borderWidth = fsh.borderWidth;\r\n    }\r\n\r\n    setAlpha(alpha: number) {\r\n\r\n        this.fillAlpha = alpha;\r\n        this.borderAlpha = alpha;\r\n        this.render();\r\n    }\r\n\r\n    setBorderColor(color: string | number, alpha?: number) {\r\n\r\n        if (typeof color == \"string\") {\r\n            let c = ColorHelper.parseColorToOpenGL(color);\r\n            this.borderColor = c.color;\r\n            this.borderAlpha = alpha == null ? c.alpha : alpha;\r\n        } else {\r\n            this.borderColor = color;\r\n            this.borderAlpha = alpha;\r\n        }\r\n\r\n        this.render();\r\n\r\n    }\r\n\r\n    setFillColor(color: string | number, alpha?: number) {\r\n\r\n        if (typeof color == \"string\") {\r\n            let c = ColorHelper.parseColorToOpenGL(color);\r\n            this.fillColor = c.color;\r\n            this.fillAlpha = alpha == null ? c.alpha : alpha;\r\n        } else {\r\n            this.fillColor = color;\r\n            if (alpha != null) this.fillAlpha = alpha;\r\n        }\r\n\r\n\r\n        this.render();\r\n\r\n    }\r\n\r\n    setBorderWidth(width: number) {\r\n        this.borderWidth = width;\r\n        this.render();\r\n    }\r\n\r\n    public getFarbeAsObject(color: number, alpha: number, colorType: Klass): RuntimeObject {\r\n\r\n        if (color == null) return null;\r\n\r\n        let r = (color & 0xff0000) >> 16;\r\n        let g = (color & 0xff00) >> 8;\r\n        let b = color & 0xff;\r\n\r\n        let rto: RuntimeObject = new RuntimeObject(colorType);\r\n\r\n        let id: ColorClassIntrinsicData = {\r\n            red: r,\r\n            green: g,\r\n            blue: b,\r\n            hex: ColorHelper.intColorToHexRGB(color)\r\n        }\r\n\r\n        rto.intrinsicData = id;\r\n\r\n        return rto;\r\n\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\n\r\nexport class CircleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Circle\", module, \"Kreis\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Circle\", new Parameterlist([\r\n            { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"my\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"r\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let mx: number = parameters[1].value;\r\n                let my: number = parameters[2].value;\r\n                let r: number = parameters[3].value;\r\n\r\n                let rh = new CircleHelper(mx, my, r, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert einen neuen Kreis. (mx, my) ist der Mittelpunt, r sein Radius.', true));\r\n\r\n        this.addMethod(new Method(\"setRadius\", new Parameterlist([\r\n            { identifier: \"radius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let sh: CircleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setRadius\")) return;\r\n\r\n                sh.setRadius(r);\r\n\r\n            }, false, false, 'Setzt den Radius des Kreises.\"', false));\r\n\r\n        this.addMethod(new Method(\"getRadius\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: CircleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getRadius\")) return;\r\n\r\n                return sh.r * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt den Radius zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: CircleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Circle-Objekts und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class CircleHelper extends FilledShapeHelper {\r\n\r\n    constructor(public mx: number, public my: number, public r: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = mx;\r\n        this.centerYInitial = my;\r\n\r\n        this.render();\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: CircleHelper = new CircleHelper(this.mx, this.my, this.r, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let deltaAlpha = Math.PI / 8;\r\n        for (let i = 0; i < 16; i++) {\r\n            let alpha = deltaAlpha * i;\r\n            this.hitPolygonInitial.push({\r\n                x: this.mx + this.r * Math.cos(alpha),\r\n                y: this.my + this.r * Math.sin(alpha)\r\n            });\r\n        }\r\n        this.hitPolygonDirty = true;\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.drawCircle(this.mx, this.my, this.r);\r\n        g.closePath();\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n\r\n    };\r\n\r\n    setRadius(r: number) {\r\n        this.r = r;\r\n        this.render();\r\n    }\r\n\r\n    isOutsideView() {\r\n\r\n        return super.isOutsideView();\r\n\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        let p: PIXI.Point = new PIXI.Point(x, y);\r\n        let m = this.displayObject.transform.worldTransform;\r\n\r\n        m.applyInverse(p, p);\r\n\r\n        let dx = p.x - this.mx;\r\n        let dy = p.y - this.my;\r\n        return dx * dx + dy * dy <= this.r * this.r;\r\n\r\n    }\r\n\r\n    collidesWith(shapeHelper: ShapeHelper) {\r\n        if (shapeHelper instanceof CircleHelper) {\r\n\r\n            let p1 = new PIXI.Point(this.centerXInitial, this.centerYInitial);\r\n            this.displayObject.updateTransform();\r\n            this.displayObject.transform.worldTransform.apply(p1, p1);\r\n\r\n            let radius1 = this.r * this.displayObject.scale.x\r\n            \r\n            let p2 = new PIXI.Point(shapeHelper.centerXInitial, shapeHelper.centerYInitial);\r\n            shapeHelper.displayObject.updateTransform();\r\n            shapeHelper.displayObject.transform.worldTransform.apply(p2, p2);\r\n            \r\n            let radius2 = shapeHelper.r * shapeHelper.displayObject.scale.x\r\n\r\n            let d1 = p1.x - p2.x;\r\n            let d2 = p1.y - p2.y;\r\n\r\n            return d1*d1 + d2*d2 <= (radius1 + radius2) * (radius1 + radius2);\r\n\r\n\r\n        } else {\r\n            return super.collidesWith(shapeHelper);\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\n\r\nexport class SectorClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Sector\", module, \"Kreisbogen/Kreissektor\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"Sector\", new Parameterlist([\r\n            { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"my\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"r\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"startAngle\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"endAngle\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let mx: number = parameters[1].value;\r\n                let my: number = parameters[2].value;\r\n                let r: number = parameters[3].value;\r\n                let startAngle: number = parameters[4].value;\r\n                let endAngle: number = parameters[5].value;\r\n\r\n                let rh = new SectorHelper(mx, my, r, startAngle/180*Math.PI, endAngle/180*Math.PI, true, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert einen neuen Kreisbogen bzw. (falls die Füllfarbe nicht null ist) Kreissektor. (mx, my) ist der Mittelpunt, r sein Radius. Der Kreisbogen wird von startAngle bis endAngle (beides in Grad) gegen den Uhrzeigersinn gezogen.', true));\r\n\r\n            this.addMethod(new Method(\"drawRadii\", new Parameterlist([\r\n                { identifier: \"radiiZeichnen\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let r: boolean = parameters[1].value;\r\n                    let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"drawRadii\")) return;\r\n    \r\n                    sh.drawRadii = r;\r\n                    sh.render();\r\n    \r\n                }, false, false, 'Legt fest, ob beim Zeichnen des Umrisses auch die beiden Radii ( = Strecken vom Mittelpunkt zur Kreislinie) mitgezeichnet werden sollen.', false));\r\n    \r\n\r\n        this.addMethod(new Method(\"setRadius\", new Parameterlist([\r\n            { identifier: \"radius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setRadius\")) return;\r\n\r\n                sh.setRadius(r);\r\n\r\n            }, false, false, 'Setzt den Radius des Kreisbogens/Kreissektors.\"', false));\r\n\r\n        this.addMethod(new Method(\"setStartAngle\", new Parameterlist([\r\n            { identifier: \"startWinkelInGrad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setStartAngle\")) return;\r\n\r\n                if(angle < 0){\r\n                    angle += Math.ceil(-angle/360) * 360;\r\n                }\r\n\r\n                if(angle > 360){\r\n                    angle -= Math.trunc(angle/360) * 360;\r\n                }\r\n\r\n                sh.startAngleRad = angle/180*Math.PI;\r\n                sh.render();\r\n\r\n            }, false, false, 'Setzt den Startwinkel des Kreisbogens/Kreissektors.\"', false));\r\n\r\n            this.addMethod(new Method(\"setEndAngle\", new Parameterlist([\r\n            { identifier: \"endWinkelInGrad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setEndAngle\")) return;\r\n\r\n                if(angle < 0){\r\n                    angle += Math.ceil(-angle/360) * 360;\r\n                }\r\n\r\n                if(angle > 360){\r\n                    angle -= Math.trunc(angle/360) * 360;\r\n                }\r\n\r\n                sh.endAngleRad = angle/180*Math.PI;\r\n                sh.render();\r\n\r\n            }, false, false, 'Setzt den Endwinkel des Kreisbogens/Kreissektors.\"', false));\r\n\r\n        this.addMethod(new Method(\"getRadius\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getRadius\")) return;\r\n\r\n                return sh.r * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt den Radius zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getStartAngle\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getStartAngle\")) return;\r\n\r\n                return sh.startAngleRad/Math.PI*180;\r\n\r\n            }, false, false, \"Gibt den Startwinkel in Grad zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getEndAngle\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getEndAngle\")) return;\r\n\r\n                return sh.endAngleRad/Math.PI*180;\r\n\r\n            }, false, false, \"Gibt den Endwinkel in Grad zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SectorHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Sector-Objekts und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class SectorHelper extends FilledShapeHelper {\r\n\r\n    constructor(public mx: number, public my: number, public r: number,\r\n        public startAngleRad: number, public endAngleRad: number,\r\n        public drawRadii: boolean,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = mx;\r\n        this.centerYInitial = my;\r\n\r\n        this.render();\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: SectorHelper = new SectorHelper(this.mx, this.my, this.r, this.startAngleRad, this.endAngleRad, this.drawRadii, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let deltaAlpha = this.endAngleRad - this.startAngleRad;\r\n        this.hitPolygonInitial.push({x: this.mx, y: this.my});\r\n\r\n        for (let i = 0; i < 16; i++) {\r\n            let alpha = this.startAngleRad + deltaAlpha * i;\r\n            this.hitPolygonInitial.push({\r\n                x: this.mx + this.r * Math.cos(alpha),\r\n                y: this.my + this.r * Math.sin(alpha)\r\n            });\r\n        }\r\n        this.hitPolygonInitial.push({x: this.mx, y: this.my});\r\n\r\n        this.hitPolygonDirty = true;\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        if(Math.abs(this.startAngleRad - this.endAngleRad) < 0.00000001){\r\n            g.drawCircle(this.mx, this.my, this.r);\r\n        } else {\r\n            if(this.drawRadii){\r\n                g.moveTo(this.mx, this.my);\r\n            }\r\n            g.arc(this.mx, this.my, this.r, -this.startAngleRad, -this.endAngleRad, true);\r\n            if(this.drawRadii){\r\n                g.lineTo(this.mx, this.my);\r\n            }\r\n        }\r\n        if(this.drawRadii){\r\n            g.closePath();\r\n        }\r\n\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n\r\n    };\r\n\r\n    setRadius(r: number) {\r\n        this.r = r;\r\n        this.render();\r\n    }\r\n\r\n    isOutsideView() {\r\n\r\n        return super.isOutsideView();\r\n\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        let p: PIXI.Point = new PIXI.Point(x, y);\r\n        let m = this.displayObject.transform.worldTransform;\r\n\r\n        m.applyInverse(p, p);\r\n\r\n        let dx = p.x - this.mx;\r\n        let dy = p.y - this.my;\r\n        let angle = Math.atan2(-dy, dx);\r\n\r\n        if (dx * dx + dy * dy <= this.r * this.r) {\r\n            let towPI = 2*Math.PI;\r\n            let normalizedStartAngle = this.startAngleRad < 0 ? towPI + this.startAngleRad : this.startAngleRad;\r\n            let normalizedEndAngle = this.endAngleRad < 0 ? towPI + this.endAngleRad : this.endAngleRad;\r\n            let normalizedAngle = angle < 0 ? towPI + angle : angle;\r\n            let ret = (normalizedAngle >= normalizedStartAngle && normalizedStartAngle <= normalizedEndAngle);\r\n            if(normalizedStartAngle <= normalizedEndAngle){\r\n                return ret;\r\n            } else {\r\n                return !ret;\r\n            }  \r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\n\r\nexport class ArcClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Arc\", module, \"Kreisbogenumriss (wahlweise gefüllt)\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"Arc\", new Parameterlist([\r\n            { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"my\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"innerRadius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"outerRadius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"startAngle\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"endAngle\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let mx: number = parameters[1].value;\r\n                let my: number = parameters[2].value;\r\n                let ri: number = parameters[3].value;\r\n                let ra: number = parameters[4].value;\r\n                let startAngle: number = parameters[5].value;\r\n                let endAngle: number = parameters[6].value;\r\n\r\n                let rh = new ArcHelper(mx, my, ri, ra, startAngle / 180 * Math.PI, endAngle / 180 * Math.PI, true, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert einen neuen Kreisbogen. (mx, my) ist der Mittelpunt, ri sein Innenradius, ra sein Außenradius. Der Kreisbogen wird von startAngle bis endAngle (beides in Grad) gegen den Uhrzeigersinn gezogen.', true));\r\n\r\n        this.addMethod(new Method(\"setInnerRadius\", new Parameterlist([\r\n            { identifier: \"innerRadius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setRadius\")) return;\r\n                sh.ri = r;\r\n                sh.render();\r\n\r\n            }, false, false, 'Setzt den inneren Radius des Kreisbogens\"', false));\r\n\r\n        this.addMethod(new Method(\"setOuterRadius\", new Parameterlist([\r\n            { identifier: \"outerRadius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setRadius\")) return;\r\n                sh.ra = r;\r\n                sh.render();\r\n\r\n            }, false, false, 'Setzt den äußeren Radius des Kreisbogens\"', false));\r\n\r\n        this.addMethod(new Method(\"setStartAngle\", new Parameterlist([\r\n            { identifier: \"startWinkelInGrad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setStartAngle\")) return;\r\n\r\n                if (angle < 0) {\r\n                    angle += Math.ceil(-angle / 360) * 360;\r\n                }\r\n\r\n                if (angle > 360) {\r\n                    angle -= Math.trunc(angle / 360) * 360;\r\n                }\r\n\r\n                sh.startAngleRad = angle / 180 * Math.PI;\r\n                sh.render();\r\n\r\n            }, false, false, 'Setzt den Startwinkel des Kreisbogens/Kreissektors.\"', false));\r\n\r\n        this.addMethod(new Method(\"setEndAngle\", new Parameterlist([\r\n            { identifier: \"endWinkelInGrad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setEndAngle\")) return;\r\n\r\n                if (angle < 0) {\r\n                    angle += Math.ceil(-angle / 360) * 360;\r\n                }\r\n\r\n                if (angle > 360) {\r\n                    angle -= Math.trunc(angle / 360) * 360;\r\n                }\r\n\r\n                sh.endAngleRad = angle / 180 * Math.PI;\r\n                sh.render();\r\n\r\n            }, false, false, 'Setzt den Endwinkel des Kreisbogens/Kreissektors.\"', false));\r\n\r\n        this.addMethod(new Method(\"getInnerRadius\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getRadius\")) return;\r\n\r\n                return sh.ri * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt den inneren Radius zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getOuterRadius\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getOuterRadius\")) return;\r\n\r\n                return sh.ra * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt den äußeren Radius zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getStartAngle\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getStartAngle\")) return;\r\n\r\n                return sh.startAngleRad / Math.PI * 180;\r\n\r\n            }, false, false, \"Gibt den Startwinkel in Grad zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getEndAngle\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getEndAngle\")) return;\r\n\r\n                return sh.endAngleRad / Math.PI * 180;\r\n\r\n            }, false, false, \"Gibt den Endwinkel in Grad zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: ArcHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Arc-Objekts und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class ArcHelper extends FilledShapeHelper {\r\n\r\n    constructor(public mx: number, public my: number, public ri: number,\r\n        public ra: number,\r\n        public startAngleRad: number, public endAngleRad: number,\r\n        public drawRadii: boolean,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = mx;\r\n        this.centerYInitial = my;\r\n\r\n        this.render();\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: ArcHelper = new ArcHelper(this.mx, this.my, this.ri, this.ra, this.startAngleRad, this.endAngleRad, this.drawRadii, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let deltaAlpha = this.endAngleRad - this.startAngleRad;\r\n\r\n        for (let i = 0; i < 16; i++) {\r\n            let alpha = this.startAngleRad + deltaAlpha * i;\r\n            this.hitPolygonInitial.push({\r\n                x: this.mx + this.ra * Math.cos(alpha),\r\n                y: this.my + this.ra * Math.sin(alpha)\r\n            });\r\n        }\r\n\r\n        for (let i = 0; i < 16; i++) {\r\n            let alpha = this.endAngleRad - deltaAlpha * i;\r\n            this.hitPolygonInitial.push({\r\n                x: this.mx + this.ri * Math.cos(alpha),\r\n                y: this.my + this.ri * Math.sin(alpha)\r\n            });\r\n        }\r\n\r\n        this.hitPolygonDirty = true;\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n\r\n        if (this.startAngleRad === void 0) { this.startAngleRad = 0; }\r\n        if (this.endAngleRad === void 0) { this.endAngleRad = Math.PI * 2; }\r\n        if (Math.abs(this.endAngleRad - this.startAngleRad) >= Math.PI * 2) {\r\n            g.drawCircle(this.mx, this.my, this.ra)\r\n                .beginHole()\r\n                .drawCircle(this.mx, this.my, this.ri)\r\n                .endHole();\r\n        } else {\r\n            g.moveTo(this.mx + this.ra * Math.cos(this.startAngleRad), this.my - this.ra * Math.sin(this.startAngleRad));\r\n            g.lineTo(this.mx + this.ri * Math.cos(this.startAngleRad), this.my - this.ri * Math.sin(this.startAngleRad));\r\n            g.arc(this.mx, this.my, this.ri, -this.startAngleRad, -this.endAngleRad, true)\r\n                .arc(this.mx, this.my, this.ra, -this.endAngleRad, -this.startAngleRad, false)\r\n        }\r\n\r\n        g.closePath();\r\n\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n\r\n    };\r\n\r\n    \r\n\r\n    isOutsideView() {\r\n\r\n        return super.isOutsideView();\r\n\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        let p: PIXI.Point = new PIXI.Point(x, y);\r\n        let m = this.displayObject.transform.worldTransform;\r\n\r\n        m.applyInverse(p, p);\r\n\r\n        let dx = p.x - this.mx;\r\n        let dy = p.y - this.my;\r\n        let angle = Math.atan2(-dy, dx);\r\n\r\n        let r2 = dx * dx + dy * dy;\r\n\r\n        if ( r2 <= this.ra * this.ra && r2 >= this.ri * this.ri) {\r\n            let towPI = 2 * Math.PI;\r\n            let normalizedStartAngle = this.startAngleRad < 0 ? towPI + this.startAngleRad : this.startAngleRad;\r\n            let normalizedEndAngle = this.endAngleRad < 0 ? towPI + this.endAngleRad : this.endAngleRad;\r\n            let normalizedAngle = angle < 0 ? towPI + angle : angle;\r\n            let ret = (normalizedAngle >= normalizedStartAngle && normalizedStartAngle <= normalizedEndAngle);\r\n            if (normalizedStartAngle <= normalizedEndAngle) {\r\n                return ret;\r\n            } else {\r\n                return !ret;\r\n            }\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n","import { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { intPrimitiveType, doublePrimitiveType, voidPrimitiveType, stringPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { ColorHelper } from \"./ColorHelper.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper, WorldClass } from \"./World.js\";\r\nimport { param } from \"jquery\";\r\n\r\nexport type ColorClassIntrinsicData = {\r\n    red: number,\r\n    green: number,\r\n    blue: number,\r\n    hex: string\r\n}\r\n\r\nexport class ColorClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Color\", module, \"Farbe\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        for (let colorName in ColorHelper.predefinedColors) {\r\n\r\n            let intColor = ColorHelper.predefinedColors[colorName];\r\n\r\n            let r: RuntimeObject = new RuntimeObject(this);\r\n\r\n            let red = (intColor & 0xff0000) >> 16;\r\n            let green = (intColor & 0xff00) >> 8;\r\n            let blue = (intColor & 0xff);\r\n\r\n            let id: ColorClassIntrinsicData = {\r\n                red: red,\r\n                green: green,\r\n                blue: blue,\r\n                hex: ColorHelper.intColorToHexRGB(intColor)\r\n            }\r\n\r\n            r.intrinsicData = id;\r\n\r\n            let a: Attribute = new Attribute(colorName, this,\r\n                (value) => { value.value = r }, true, Visibility.public, true,\r\n                \"Die Farbe \" + colorName + \" (\" + ColorHelper.intColorToHexRGB(intColor) + \") oder \" + ColorHelper.intColorToRGB(intColor));\r\n\r\n            //@ts-ignore\r\n            a.color = ColorHelper.intColorToHexRGB(intColor);\r\n\r\n            this.addAttribute(a);\r\n        }\r\n\r\n        this.setupAttributeIndicesRecursive();\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        this.addMethod(new Method(\"Color\", new Parameterlist([\r\n            { identifier: \"red\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"green\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"blue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let red: number = Math.trunc(parameters[1].value);\r\n                let green: number = Math.trunc(parameters[2].value);\r\n                let blue: number = Math.trunc(parameters[3].value);\r\n\r\n\r\n                let intrinsicData: ColorClassIntrinsicData = {\r\n                    red: red,\r\n                    green: green,\r\n                    blue: blue,\r\n                    hex: \"rgb(\" + red + \", \" + green + \", \" + blue + \")\"\r\n                };\r\n\r\n                o.intrinsicData = intrinsicData;\r\n\r\n            }, false, false, 'Instanziert eine neue Farbe. Red, green und blue sind die Farbanteile, jeweils als integer-Zahlen im Bereich von 0 bis 255.'\r\n            , true));\r\n\r\n        this.addMethod(new Method(\"randomColor\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return Math.floor(Math.random() * 0xffffff);\r\n\r\n            }, false, true, 'Gibt eine zufällige Farbe (ohne Transparenz) zurück.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"randomColor\", new Parameterlist([\r\n            { identifier: \"minimumRGBValue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let min: number = parameters[1].value;\r\n                if (min < 0) min = 0;\r\n                if (min > 255) min = 255;\r\n\r\n                let r: number = Math.floor(Math.random() * (256 - min)) + min;\r\n                let g: number = Math.floor(Math.random() * (256 - min)) + min;\r\n                let b: number = Math.floor(Math.random() * (256 - min)) + min;\r\n\r\n                return 0x10000 * r + 0x100 * g + b;\r\n\r\n            }, false, true, 'Gibt eine zufällige Farbe (ohne Transparenz) zurück. Min ist der Mindestwert für den Rot-, Grün- und Blauanteil, wobei jeder der Anteile und daher auch min zwischen 0 und 255 (jeweils einschließlich) liegen muss.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"randomColor\", new Parameterlist([\r\n            { identifier: \"minimumRGBValue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"maximumRGBValue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let min: number = parameters[1].value;\r\n                let max: number = parameters[1].value;\r\n                if (min < 0) min = 0;\r\n                if (min > 255) min = 255;\r\n                if (max < 0) max = 0;\r\n                if (max > 255) max = 255;\r\n\r\n                if (max < min) {\r\n                    let z = max;\r\n                    max = min;\r\n                    min = z;\r\n                }\r\n\r\n                let r: number = Math.floor(Math.random() * (max - min + 1)) + min;\r\n                let g: number = Math.floor(Math.random() * (max - min + 1)) + min;\r\n                let b: number = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\r\n                return 0x10000 * r + 0x100 * g + b;\r\n\r\n            }, false, true, 'Gibt eine zufällige Farbe (ohne Transparenz) zurück. Min ist der Mindestwert für den Rot-, Grün- und Blauanteil, max der Höchstwert, wobei jeder der Anteile und daher auch min zwischen 0 und 255 (jeweils einschließlich) liegen muss.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).hex;\r\n\r\n            }, false, false, 'Verwandelt die Farbe in einen String.', false));\r\n\r\n        this.addMethod(new Method(\"toInt\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let cid = <ColorClassIntrinsicData>(o.intrinsicData);\r\n\r\n                return 0x10000 * cid.red + 0x100 * cid.green + cid.blue;\r\n\r\n            }, false, false, 'Verwandelt die Farbe in einen int-Wert um, genauer: gibt 0x10000 * red + 0x100 * green + blue zurück.', false));\r\n\r\n        this.addMethod(new Method(\"equals\", new Parameterlist([\r\n            { identifier: \"otherColor\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let d = <ColorClassIntrinsicData>(o.intrinsicData);\r\n                let d1 = <ColorClassIntrinsicData>(o1.intrinsicData);\r\n\r\n                return (d.red == d1.red && d.green == d1.green && d.blue == d1.blue);\r\n\r\n            }, false, false, 'Vergleicht zwei Farben', false));\r\n\r\n        this.addMethod(new Method(\"getRed\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).red;\r\n\r\n            }, false, false, 'Gibt den Rotanteil der Farbe zurück (0 - 255).', false));\r\n\r\n        this.addMethod(new Method(\"getGreen\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).green;\r\n\r\n            }, false, false, 'Gibt den Grünanteil der Farbe zurück (0 - 255).', false));\r\n\r\n        this.addMethod(new Method(\"getBlue\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<ColorClassIntrinsicData>(o.intrinsicData)).blue;\r\n\r\n            }, false, false, 'Gibt den Blauanteil der Farbe zurück (0 - 255).', false));\r\n\r\n        this.addMethod(new Method(\"fromRGB\", new Parameterlist([\r\n            { identifier: \"red\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"green\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"blue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let g: number = parameters[2].value;\r\n                let b: number = parameters[3].value;\r\n\r\n                r = Math.min(r, 255); r = Math.max(0, r);\r\n                g = Math.min(g, 255); g = Math.max(0, g);\r\n                b = Math.min(b, 255); b = Math.max(0, b);\r\n\r\n                return (r * 0x10000 + g * 0x100 + b);\r\n\r\n            }, false, true, 'Berechnet aus Rot-, Grün- und Blauwert (alle zwischen 0 und 255) die Farbe.', false));\r\n\r\n        this.addMethod(new Method(\"fromRGBA\", new Parameterlist([\r\n            { identifier: \"red\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"green\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"blue\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let r: number = parameters[1].value;\r\n                let g: number = parameters[2].value;\r\n                let b: number = parameters[3].value;\r\n                let a: number = parameters[4].value;\r\n\r\n                r = Math.min(r, 255); r = Math.max(0, r);\r\n                g = Math.min(g, 255); g = Math.max(0, g);\r\n                b = Math.min(b, 255); b = Math.max(0, b);\r\n\r\n                a = Math.min(a, 1); a = Math.max(0, a);\r\n\r\n                let color: string = (r * 0x1000000 + g * 0x10000 + b * 0x100 + Math.floor(a * 255)).toString(16);\r\n                while (color.length < 8) color = \"0\" + color;\r\n\r\n                return \"#\" + color;\r\n\r\n            }, false, true, 'Berechnet aus Rot-, Grün- und Blauwert (alle zwischen 0 und 255) sowie Alpha-Wert (zwischen 0 und 1) die Farbe.', false));\r\n\r\n        this.addMethod(new Method(\"fromHSLA\", new Parameterlist([\r\n            { identifier: \"hue\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"saturation\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"luminance\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"alpha\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let h: number = parameters[1].value;\r\n                let s: number = parameters[2].value;\r\n                let l: number = parameters[3].value;\r\n                let a: number = parameters[4].value;\r\n\r\n                h = Math.min(h, 360); h = Math.max(0, h);\r\n                s = Math.min(s, 100); s = Math.max(0, s);\r\n                l = Math.min(l, 100); l = Math.max(0, l);\r\n                a = Math.min(a, 1); a = Math.max(0, a);\r\n\r\n                let rgb = this.hslToRgb(h, s, l);\r\n\r\n                let color: string = (rgb.r * 0x1000000 + rgb.g * 0x10000 + rgb.b * 0x100 + Math.floor(a * 255)).toString(16);\r\n                while (color.length < 8) color = \"0\" + color;\r\n\r\n                return \"#\" + color;\r\n\r\n            }, false, true, 'Berechnet Hue (0 - 360), Saturation (0 - 100) und Luminance (0 - 100) sowie Alpha-Wert (zwischen 0 und 1) die Farbe.', false));\r\n\r\n        this.addMethod(new Method(\"fromHSL\", new Parameterlist([\r\n            { identifier: \"hue\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"saturation\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"luminance\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let h: number = parameters[1].value;\r\n                let s: number = parameters[2].value;\r\n                let l: number = parameters[3].value;\r\n\r\n                h = Math.min(h, 360); h = Math.max(0, h);\r\n                s = Math.min(s, 100); s = Math.max(0, s);\r\n                l = Math.min(l, 100); l = Math.max(0, l);\r\n\r\n                let rgb = this.hslToRgb(h, s, l);\r\n\r\n                return (rgb.r * 0x10000 + rgb.g * 0x100 + rgb.b);\r\n\r\n            }, false, true, 'Berechnet Hue (0 - 360), Saturation (0 - 100) und Luminance (0 - 100)die Farbe.', false));\r\n\r\n\r\n    }\r\n\r\n    hslToRgb(h: number, s: number, l: number): { r: number, g: number, b: number } {\r\n\r\n        s /= 100;\r\n        l /= 100;\r\n\r\n        let c = (1 - Math.abs(2 * l - 1)) * s,\r\n            x = c * (1 - Math.abs((h / 60) % 2 - 1)),\r\n            m = l - c / 2,\r\n            r = 0,\r\n            g = 0,\r\n            b = 0;\r\n\r\n        if (0 <= h && h < 60) {\r\n            r = c; g = x; b = 0;\r\n        } else if (60 <= h && h < 120) {\r\n            r = x; g = c; b = 0;\r\n        } else if (120 <= h && h < 180) {\r\n            r = 0; g = c; b = x;\r\n        } else if (180 <= h && h < 240) {\r\n            r = 0; g = x; b = c;\r\n        } else if (240 <= h && h < 300) {\r\n            r = x; g = 0; b = c;\r\n        } else if (300 <= h && h < 360) {\r\n            r = c; g = 0; b = x;\r\n        }\r\n        r = Math.round((r + m) * 255);\r\n        g = Math.round((g + m) * 255);\r\n        b = Math.round((b + m) * 255);\r\n\r\n\r\n        return {r: r, g: g, b: b}\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\n\r\nexport class EllipseClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Ellipse\", module, \"Ellipse\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Ellipse\", new Parameterlist([\r\n            { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"my\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"rx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"ry\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let mx: number = parameters[1].value;\r\n                let my: number = parameters[2].value;\r\n                let rx: number = parameters[3].value;\r\n                let ry: number = parameters[4].value;\r\n\r\n                let rh = new EllipseHelper(mx, my, rx, ry, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Ellipse. (mx, my) ist der Mittelpunt, rx und ry sind ihre Radien.', true));\r\n\r\n            this.addMethod(new Method(\"setRadiusX\", new Parameterlist([\r\n                { identifier: \"rx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let r: number = parameters[1].value;\r\n                    let sh: EllipseHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    sh.setRadiusX(r);\r\n    \r\n                }, false, false, 'Setzt den x-Radius der Ellipse\"', false));\r\n\r\n            this.addMethod(new Method(\"setRadiusY\", new Parameterlist([\r\n                { identifier: \"ry\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let r: number = parameters[1].value;\r\n                    let sh: EllipseHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    sh.setRadiusY(r);\r\n    \r\n                }, false, false, 'Setzt den y-Radius der Ellipse\"', false));\r\n    \r\n                this.addMethod(new Method(\"copy\", new Parameterlist([\r\n                ]), this,\r\n                    (parameters) => {\r\n        \r\n                        let o: RuntimeObject = parameters[0].value;\r\n                        let sh: EllipseHelper = o.intrinsicData[\"Actor\"];\r\n        \r\n                        if (sh.testdestroyed(\"copy\")) return;\r\n        \r\n                        return sh.getCopy(<Klass>o.class);\r\n        \r\n                    }, false, false, 'Erstellt eine Kopie des Ellipse-Objekts und git sie zurück.', false));\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport class EllipseHelper extends FilledShapeHelper {\r\n\r\n    constructor(public mx: number, public my: number, public rx: number, public ry: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = mx;\r\n        this.centerYInitial = my;\r\n\r\n        this.render();\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: EllipseHelper = new EllipseHelper(this.mx, this.my, this.rx, this.ry, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    \r\n    render(): void {\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let deltaAlpha = Math.PI/8;\r\n        for(let i = 0; i < 16; i++){\r\n            let alpha = deltaAlpha * i;\r\n            this.hitPolygonInitial.push({\r\n                x: this.mx + this.rx*Math.cos(alpha),\r\n                y: this.my + this.ry*Math.sin(alpha)\r\n            });\r\n        }\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.drawEllipse(this.mx, this.my, this.rx, this.ry);\r\n        g.closePath();\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n    setRadiusX(r: number){\r\n        this.rx = r;\r\n        this.render();\r\n    }\r\n\r\n    setRadiusY(r: number){\r\n        this.rx = r;\r\n        this.render();\r\n    }\r\n\r\n    isOutsideView() {\r\n\r\n        return super.isOutsideView();\r\n\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n\r\n        if (!this.displayObject.getBounds().contains(x, y)) return false;\r\n\r\n        let p: PIXI.Point = new PIXI.Point(x, y);\r\n        let m = this.displayObject.transform.worldTransform;\r\n\r\n        m.applyInverse(p, p);\r\n\r\n        let dx = p.x - this.mx;\r\n        let dy = p.y - this.my;\r\n        return dx*dx/(this.rx*this.rx) + dy*dy/(this.ry*this.ry) <= 1;\r\n    \r\n    }\r\n    \r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, booleanPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value, Attribute, Type } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { ShapeHelper, ShapeClass } from \"./Shape.js\";\r\nimport { HitPolygonStore } from \"./PolygonStore.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class CollisionPairClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"CollisionPair\", module, \"Speichert die Referenzen auf zwei Figuren, die gerade kollidiert sind. Diese Klasse von den Kollisionsmethden der Klasse Group benutzt.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        let shapeType = module.typeStore.getType(\"Shape\");\r\n\r\n        this.addAttribute(new Attribute(\"shapeA\", shapeType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                value.value = rto.intrinsicData[\"ShapeA\"];\r\n\r\n            }, false, Visibility.public, true, \"Erstes an der Kollision beteiligtes Shape\"));\r\n\r\n        this.addAttribute(new Attribute(\"shapeB\", shapeType,\r\n            (value) => {\r\n\r\n                let rto: RuntimeObject = value.object;\r\n                value.value = rto.intrinsicData[\"ShapeB\"];\r\n\r\n            }, false, Visibility.public, true, \"Zweites an der Kollision beteiligtes Shape\"));\r\n\r\n        this.setupAttributeIndicesRecursive();\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport class GroupClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Group\", module, \"Klasse zum Gruppieren grafischer Elemente. Die gruppierten Elemente können miteinander verschoben, gedreht, gestreckt sowie ein- und ausgeblendet werden. Zudem besitzt die Klasse Methoden zur schnellen Erkennung von Kollision mit Elementen außerhalb der Gruppe.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n\r\n        let collisionPairType = module.typeStore.getType(\"CollisionPair\");\r\n        let collisionPairArrayType = new ArrayType(collisionPairType);\r\n        let shapeType = module.typeStore.getType(\"Shape\");\r\n\r\n\r\n        this.addMethod(new Method(\"Group\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let rh = new GroupHelper(module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Gruppe. Ihr können mit der Methode add Elemente hinzugefügt werden, die dann mit der Gruppe verschoben, gedreht, ... werden.', true));\r\n\r\n        this.addMethod(new Method(\"Group\", new Parameterlist([\r\n            { identifier: \"shapes\", type: new ArrayType(module.typeStore.getType(\"Shape\")), declaration: null, usagePositions: null, isFinal: true, isEllipsis: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shapes: Value[] = parameters[1].value;\r\n\r\n                let rh = new GroupHelper(module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n                for (let s of shapes) {\r\n                    rh.add(s.value);\r\n                }\r\n\r\n            }, false, false, 'Instanziert eine neue Gruppe und fügt die übergebenen Grafikobjekte der Gruppe hinzu. Der Gruppe können mit der Methode add weitere Grafikobjekte hinzugefügt werden, die dann mit der Gruppe verschoben, gedreht, ... werden.', true));\r\n\r\n        this.addMethod(new Method(\"add\", new Parameterlist([\r\n            { identifier: \"shapes\", type: new ArrayType(shapeType), declaration: null, usagePositions: null, isFinal: true, isEllipsis: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shapes: Value[] = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"add\")) return;\r\n\r\n                for (let s of shapes) {\r\n                    sh.add(s.value);\r\n                }\r\n\r\n            }, false, false, 'Fügt die Grafikobjekte der Gruppe hinzu.', false));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), shapeType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"get\")) return;\r\n\r\n                return sh.getElement(index);\r\n\r\n            }, false, false, 'Gibt das Grafikelement der Gruppe mit dem entsprechenden Index zurück. VORSICHT: Das erste Element hat Index 0!', false));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                sh.removeElementAt(index);\r\n\r\n            }, false, false, 'Entfernt das Grafikelement aus der Gruppe mit dem entsprechenden Index, zerstört es jedoch nicht. VORSICHT: Das erste Element hat Index 0!', false));\r\n\r\n        this.addMethod(new Method(\"remove\", new Parameterlist([\r\n            { identifier: \"shape\", type: shapeType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"remove\")) return;\r\n\r\n                sh.remove(shape);\r\n                sh.worldHelper.shapes.push(shape.intrinsicData[\"Actor\"]);\r\n\r\n            }, false, false, 'Entfernt das übergebene Grafikelement aus der Gruppe, zerstört es jedoch nicht.', false));\r\n\r\n\r\n        let shapeArrayType = new ArrayType(shapeType);\r\n\r\n        this.addMethod(new Method(\"getCollidingShapes\", new Parameterlist([\r\n            { identifier: \"shape\", type: module.typeStore.getType(\"Shape\"), declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), shapeArrayType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCollidingShapes\") || shape == null) return [];\r\n\r\n                let shapes: RuntimeObject[] = sh.getCollidingObjects(shape);\r\n\r\n                let values: Value[] = [];\r\n                for (let sh of shapes) {\r\n                    values.push({\r\n                        type: shapeType,\r\n                        value: sh\r\n                    })\r\n\r\n                }\r\n\r\n                return values;\r\n\r\n            }, false, false, 'Gibt die Objekte der Gruppe zurück, die mit dem übergebenen Shape kollidieren.', false));\r\n\r\n        this.addMethod(new Method(\"getCollisionPairs\", new Parameterlist([\r\n            { identifier: \"group\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"maxOneCollisionPerShape\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), collisionPairArrayType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let group2: RuntimeObject = parameters[1].value;\r\n                let maxOneCollisionPerShape: boolean = parameters[2].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n                let groupHelper2: GroupHelper = <GroupHelper>group2.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCollidingShapes\")) return;\r\n\r\n                return sh.getCollidingObjects2(groupHelper2, collisionPairType, maxOneCollisionPerShape);\r\n\r\n            }, false, false, 'Überprüft, welche Objekte der Gruppe mit welchen der anderen kollidieren.' +\r\n            ' Gibt für jede Kollision ein Collisionpair-Objekt zurück, das die beiden kollidierenden Objekte enthält.' +\r\n        ' Falls maxOneCollisionPerShape == true ist jedes Objekt dabei aber nur in max. einem Collisionpair-Objekt enthalten.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"size\")) return;\r\n\r\n                return sh.shapes.length;\r\n\r\n            }, false, false, 'Gibt zurück, wie viele Elemente in der Gruppe enthalten sind.', false));\r\n\r\n        this.addMethod(new Method(\"empty\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"empty\")) return;\r\n\r\n                sh.removeAllChidren();\r\n\r\n            }, false, false, 'Entfernt alle Elemente aus der Gruppe, löscht die Elemente aber nicht.', false));\r\n\r\n        this.addMethod(new Method(\"destroyAllChildren\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: GroupHelper = <GroupHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"destroyAllChildren\")) return;\r\n\r\n                sh.destroyChildren();\r\n\r\n            }, false, false, 'Löscht alle Elemente der Gruppe, nicht aber die Gruppe selbst.', false));\r\n\r\n\r\n        (<Klass>shapeType).addMethod(new Method(\"getCollidingShapes\", new Parameterlist([\r\n            { identifier: \"group\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), shapeArrayType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let group: RuntimeObject = parameters[1].value;\r\n                let groupHelper: GroupHelper = group.intrinsicData[\"Actor\"];\r\n                let sh: ShapeHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getCollidingShapes\")) return;\r\n\r\n                return sh.getCollidingShapes(groupHelper, shapeType);\r\n\r\n            }, false, false, 'Gibt alle Shapes der Gruppe group zurück, die mit dem Shape kollidieren.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: GroupHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Group-Objekts (und aller seiner enthaltenen Grafikobjekte!) und git sie zurück.', false));\r\n\r\n        this.addMethod(new Method(\"renderAsStaticBitmap\", new Parameterlist([\r\n            { identifier: \"renderAsStaticBitmap\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: GroupHelper = o.intrinsicData[\"Actor\"];\r\n                let doCache: boolean = parameters[1].value;\r\n\r\n                if (sh.testdestroyed(\"renderAsStaticBitmap\")) return;\r\n\r\n                sh.cacheAsBitmap(doCache);\r\n\r\n                return;\r\n\r\n            }, false, false, 'Zeichnet alle Objekte dieser Group in ein Bild und verwendet fortan nur noch dieses Bild, ohne die Kindelemente der Group erneut zu zeichnen. Mit dieser Methode können komplexe Bilder (z.B. ein Sternenhimmel) aufgebaut und dann statisch gemacht werden. Nach dem Aufbau brauchen sie daher kaum mehr Rechenzeit.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class GroupHelper extends ShapeHelper {\r\n\r\n    shapes: RuntimeObject[] = [];\r\n\r\n    constructor(interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.displayObject = new PIXI.Container();\r\n        this.worldHelper.stage.addChild(this.displayObject);\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n\r\n    cacheAsBitmap(doCache: boolean) {\r\n        let container = <PIXI.Container>this.displayObject;\r\n\r\n        // If you set doCache to false and shortly afterwards to true: \r\n        // make shure there's at least one rendercycle in between.\r\n        if (doCache) {\r\n            setTimeout(() => {\r\n                container.cacheAsBitmap = true;\r\n            }, 300);\r\n        } else {\r\n            container.cacheAsBitmap = doCache;\r\n        }\r\n    }\r\n\r\n\r\n    removeElementAt(index: number) {\r\n        if (index < 0 || index >= this.shapes.length) {\r\n            this.worldHelper.interpreter.throwException(\"In der Gruppe gibt es kein Element mit Index \" + index + \".\");\r\n            return;\r\n        }\r\n\r\n        let shape = this.shapes[index];\r\n        this.remove(shape);\r\n    }\r\n\r\n    getElement(index: number): RuntimeObject {\r\n        if (index < 0 || index >= this.shapes.length) {\r\n            this.worldHelper.interpreter.throwException(\"In der Gruppe gibt es kein Element mit Index \" + index + \".\");\r\n            return;\r\n        }\r\n        return this.shapes[index];\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let groupHelperCopy: GroupHelper = new GroupHelper(this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = groupHelperCopy;\r\n\r\n        for (let ro of this.shapes) {\r\n            let shapeHelper: ShapeHelper = ro.intrinsicData[\"Actor\"];\r\n\r\n            let roCopy: RuntimeObject = shapeHelper.getCopy(<Klass>ro.class)\r\n            let shapeHelperCopy: ShapeHelper = roCopy.intrinsicData[\"Actor\"];\r\n\r\n            groupHelperCopy.shapes.push(roCopy);\r\n\r\n            shapeHelperCopy.belongsToGroup = groupHelperCopy;\r\n\r\n            (<PIXI.Container>groupHelperCopy.displayObject).addChild(shapeHelperCopy.displayObject);\r\n\r\n        }\r\n\r\n        groupHelperCopy.copyFrom(this);\r\n        groupHelperCopy.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    setTimerPaused(tp: boolean) {\r\n        this.timerPaused = tp;\r\n\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            sh.timerPaused = tp;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    add(shape: RuntimeObject) {\r\n\r\n        if(shape == null) return;\r\n\r\n        let shapeHelper: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n\r\n        if (shapeHelper.isDestroyed) {\r\n            this.worldHelper.interpreter.throwException(\"Ein schon zerstörtes Objekt kann keiner Gruppe hinzugefügt werden.\");\r\n            return;\r\n        }\r\n\r\n        if (this.hasCircularReference(shape)) {\r\n            return;\r\n        }\r\n\r\n        this.shapes.push(shape);\r\n\r\n        if (shapeHelper.belongsToGroup != null) {\r\n            shapeHelper.belongsToGroup.remove(shape);\r\n        } else {\r\n            let index = this.worldHelper.shapes.indexOf(shapeHelper);\r\n            if (index >= 0) this.worldHelper.shapes.splice(index, 1);\r\n        }\r\n\r\n        shapeHelper.belongsToGroup = this;\r\n\r\n        this.displayObject.parent.updateTransform();\r\n        let inverse = new PIXI.Matrix().copyFrom(this.displayObject.transform.worldTransform);\r\n        inverse.invert();\r\n        shapeHelper.displayObject.localTransform.prepend(inverse.prepend(this.worldHelper.stage.localTransform));\r\n        //@ts-ignore\r\n        shapeHelper.displayObject.transform.onChange();\r\n\r\n        (<PIXI.Container>this.displayObject).addChild(shapeHelper.displayObject);\r\n        shapeHelper.displayObject.updateTransform();\r\n\r\n        let xSum: number = 0;\r\n        let ySum: number = 0;\r\n\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            xSum += sh.getCenterX();\r\n            ySum += sh.getCenterY();\r\n        }\r\n\r\n        let x = xSum / this.shapes.length;\r\n        let y = ySum / this.shapes.length;\r\n\r\n        this.displayObject.updateTransform();\r\n        let p1: PIXI.Point = this.displayObject.worldTransform.applyInverse(new PIXI.Point(x, y));\r\n        this.centerXInitial = p1.x;\r\n        this.centerYInitial = p1.y;\r\n    }\r\n\r\n    public removeAllChidren() {\r\n        let index: number = 0;\r\n        for (let shape of this.shapes) {\r\n            this.deregister(shape, index++);\r\n        }\r\n        this.shapes = [];\r\n    }\r\n\r\n    public remove(shape: RuntimeObject) {\r\n        let index = this.shapes.indexOf(shape);\r\n        if (index >= 0) {\r\n            this.shapes.splice(index, 1);\r\n\r\n            this.deregister(shape, index);\r\n        }\r\n    }\r\n\r\n    private deregister(shape: RuntimeObject, index: number) {\r\n        let shapeHelper: ShapeHelper = shape.intrinsicData['Actor'];\r\n\r\n        let transform = new PIXI.Matrix().copyFrom(shapeHelper.displayObject.transform.worldTransform);\r\n\r\n        (<PIXI.Container>this.displayObject).removeChildAt(index);\r\n\r\n        let inverseStageTransform = new PIXI.Matrix().copyFrom(this.worldHelper.stage.localTransform);\r\n        inverseStageTransform.invert();\r\n        shapeHelper.displayObject.localTransform.identity();\r\n        shapeHelper.displayObject.localTransform.append(transform.prepend(inverseStageTransform));\r\n        //@ts-ignore\r\n        shapeHelper.displayObject.transform.onChange();\r\n        this.worldHelper.stage.addChild(shapeHelper.displayObject);\r\n        shapeHelper.displayObject.updateTransform();\r\n        shapeHelper.belongsToGroup = null;\r\n\r\n    }\r\n\r\n\r\n    public render(): void {\r\n    }\r\n\r\n    public destroy(): void {\r\n        this.destroyChildren();\r\n        super.destroy();\r\n    }\r\n\r\n    public destroyChildren(): void {\r\n        for (let shape of this.shapes.slice(0)) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            sh.destroy();\r\n        }\r\n        this.shapes = [];\r\n    }\r\n\r\n    hasOverlappingBoundingBoxWith(shapeHelper: ShapeHelper): boolean {\r\n        this.displayObject.updateTransform();\r\n        shapeHelper.displayObject.updateTransform();\r\n\r\n        let bb = this.displayObject.getBounds();\r\n        let bb1 = shapeHelper.displayObject.getBounds();\r\n\r\n        if (bb.left > bb1.right || bb1.left > bb.right) return false;\r\n\r\n        if (bb.top > bb1.bottom || bb1.top > bb.bottom) return false;\r\n        return true;\r\n    }\r\n\r\n\r\n    collidesWith(shapeHelper: ShapeHelper) {\r\n        if (!this.hasOverlappingBoundingBoxWith(shapeHelper)) {\r\n            return false;\r\n        }\r\n\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            if (sh.collidesWith(shapeHelper)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setHitPolygonDirty(dirty: boolean) {\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            sh.setHitPolygonDirty(dirty);\r\n        }\r\n    }\r\n\r\n    containsPoint(x: number, y: number) {\r\n        this.displayObject.updateTransform();\r\n\r\n        let bb = this.displayObject.getBounds();\r\n\r\n        if (x < bb.left || x > bb.left + bb.width || y < bb.top || y > bb.top + bb.height) {\r\n            return false;\r\n        }\r\n\r\n        for (let shape of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n            if (sh.containsPoint(x, y)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getCollidingObjects(shape: RuntimeObject): RuntimeObject[] {\r\n\r\n        let collidingShapes: RuntimeObject[] = [];\r\n        let shapeHelper: ShapeHelper = <ShapeHelper>shape.intrinsicData[\"Actor\"];\r\n\r\n        for (let s of this.shapes) {\r\n            let sh: ShapeHelper = <ShapeHelper>s.intrinsicData[\"Actor\"];\r\n            if (sh.collidesWith(shapeHelper)) {\r\n                collidingShapes.push(s);\r\n            }\r\n        }\r\n\r\n        return collidingShapes;\r\n\r\n    }\r\n\r\n    getCollidingObjects2(groupHelper2: GroupHelper, collisionPairType: Type,\r\n        maxOneCollisionPerShape: boolean): Value[] {\r\n\r\n        let collisionPairs: Value[] = [];\r\n\r\n        let alreadyCollidedHelpers2: Map<ShapeHelper, boolean> = new Map();\r\n\r\n        for (let shape1 of this.shapes) {\r\n            let shapeHelper1: ShapeHelper = <ShapeHelper>shape1.intrinsicData[\"Actor\"];\r\n            for (let shape2 of groupHelper2.shapes) {\r\n                let shapeHelper2: ShapeHelper = <ShapeHelper>shape2.intrinsicData[\"Actor\"];\r\n                if (shapeHelper1.collidesWith(shapeHelper2)) {\r\n\r\n                    if (!maxOneCollisionPerShape || alreadyCollidedHelpers2.get(shapeHelper2) == null) {\r\n                        alreadyCollidedHelpers2.set(shapeHelper2, true);\r\n                        let rto: RuntimeObject = new RuntimeObject(<Klass>collisionPairType);\r\n\r\n                        rto.intrinsicData[\"ShapeA\"] = shapeHelper1.runtimeObject;\r\n                        rto.intrinsicData[\"ShapeB\"] = shapeHelper2.runtimeObject;\r\n                        collisionPairs.push({\r\n                            type: collisionPairType,\r\n                            value: rto\r\n                        });\r\n                    }\r\n\r\n                    if (maxOneCollisionPerShape) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return collisionPairs;\r\n\r\n    }\r\n\r\n    hasCircularReference(shapeToAdd: RuntimeObject) {\r\n        let gh = shapeToAdd.intrinsicData[\"Actor\"];\r\n        if (gh instanceof GroupHelper) {\r\n            if (gh == this) {\r\n                this.worldHelper.interpreter.throwException(\"Eine Group darf sich nicht selbst enthalten!\");\r\n                return true;\r\n            } else {\r\n                for (let shape of gh.shapes) {\r\n                    if (this.hasCircularReference(shape)) {\r\n                        return true;\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    tint(color: string) {\r\n        for (let child of this.shapes) {\r\n            (<ShapeHelper>child.intrinsicData[\"Actor\"]).tint(color);\r\n        }\r\n    }\r\n\r\n\r\n}\r\n","import { Type, Method, Parameterlist, Value, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\n\r\nexport class KeyClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Key\", module, \"Aufzählung von Sondertasten zur Benutzung in den Methoden Actor.onKeyUp, Actor.onKeyTyped und Actor.onKeyDown\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addAttribute(new Attribute(\"ArrowUp\", stringPrimitiveType, (value) => { value.value = \"ArrowUp\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"ArrowDown\", stringPrimitiveType, (value) => { value.value = \"ArrowDown\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"ArrowLeft\", stringPrimitiveType, (value) => { value.value = \"ArrowLeft\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"ArrowRight\", stringPrimitiveType, (value) => { value.value = \"ArrowRight\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Enter\", stringPrimitiveType, (value) => { value.value = \"Enter\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Space\", stringPrimitiveType, (value) => { value.value = \" \" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Shift\", stringPrimitiveType, (value) => { value.value = \"Shift\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Alt\", stringPrimitiveType, (value) => { value.value = \"Alt\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Strg\", stringPrimitiveType, (value) => { value.value = \"Control\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"PageUp\", stringPrimitiveType, (value) => { value.value = \"PageUp\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"PageDown\", stringPrimitiveType, (value) => { value.value = \"PageDown\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Backspace\", stringPrimitiveType, (value) => { value.value = \"Backspace\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Escape\", stringPrimitiveType, (value) => { value.value = \"Escape\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Entf\", stringPrimitiveType, (value) => { value.value = \"Delete\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Einf\", stringPrimitiveType, (value) => { value.value = \"Insert\" }, true, Visibility.public, true, \"\"));\r\n        this.addAttribute(new Attribute(\"Ende\", stringPrimitiveType, (value) => { value.value = \"End\" }, true, Visibility.public, true, \"\"));\r\n\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n\r\n    }\r\n\r\n}","/* \r\n * Convex hull algorithm - Library (TypeScript)\r\n * \r\n * Copyright (c) 2020 Project Nayuki\r\n * https://www.nayuki.io/page/convex-hull-algorithm\r\n * \r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Lesser General Public License as published by\r\n * the Free Software Foundation, either version 3 of the License, or\r\n * (at your option) any later version.\r\n * \r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n * GNU Lesser General Public License for more details.\r\n * \r\n * You should have received a copy of the GNU Lesser General Public License\r\n * along with this program (see COPYING.txt and COPYING.LESSER.txt).\r\n * If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\n\r\n\r\n\r\nexport namespace convexhull {\r\n    \r\n    export interface Point {\r\n        x: number;\r\n        y: number;\r\n    }\r\n\t// Returns a new array of points representing the convex hull of\r\n\t// the given set of points. The convex hull excludes collinear points.\r\n\t// This algorithm runs in O(n log n) time.\r\n\texport function makeHull<P extends Point>(points: Array<P>): Array<P> {\r\n\t\tlet newPoints: Array<P> = points.slice();\r\n\t\tnewPoints.sort(convexhull.POINT_COMPARATOR);\r\n\t\treturn convexhull.makeHullPresorted(newPoints);\r\n\t}\r\n\t\r\n\t\r\n\t// Returns the convex hull, assuming that each points[i] <= points[i + 1]. Runs in O(n) time.\r\n\texport function makeHullPresorted<P extends Point>(points: Array<P>): Array<P> {\r\n\t\tif (points.length <= 1)\r\n\t\t\treturn points.slice();\r\n\t\t\r\n\t\t// Andrew's monotone chain algorithm. Positive y coordinates correspond to \"up\"\r\n\t\t// as per the mathematical convention, instead of \"down\" as per the computer\r\n\t\t// graphics convention. This doesn't affect the correctness of the result.\r\n\t\t\r\n\t\tlet upperHull: Array<P> = [];\r\n\t\tfor (let i = 0; i < points.length; i++) {\r\n\t\t\tconst p: P = points[i];\r\n\t\t\twhile (upperHull.length >= 2) {\r\n\t\t\t\tconst q: P = upperHull[upperHull.length - 1];\r\n\t\t\t\tconst r: P = upperHull[upperHull.length - 2];\r\n\t\t\t\tif ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x))\r\n\t\t\t\t\tupperHull.pop();\r\n\t\t\t\telse\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tupperHull.push(p);\r\n\t\t}\r\n\t\tupperHull.pop();\r\n\t\t\r\n\t\tlet lowerHull: Array<P> = [];\r\n\t\tfor (let i = points.length - 1; i >= 0; i--) {\r\n\t\t\tconst p: P = points[i];\r\n\t\t\twhile (lowerHull.length >= 2) {\r\n\t\t\t\tconst q: P = lowerHull[lowerHull.length - 1];\r\n\t\t\t\tconst r: P = lowerHull[lowerHull.length - 2];\r\n\t\t\t\tif ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x))\r\n\t\t\t\t\tlowerHull.pop();\r\n\t\t\t\telse\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tlowerHull.push(p);\r\n\t\t}\r\n\t\tlowerHull.pop();\r\n\t\t\r\n\t\tif (upperHull.length == 1 && lowerHull.length == 1 && upperHull[0].x == lowerHull[0].x && upperHull[0].y == lowerHull[0].y)\r\n\t\t\treturn upperHull;\r\n\t\telse\r\n\t\t\treturn upperHull.concat(lowerHull);\r\n\t}\r\n\t\r\n\t\r\n\texport function POINT_COMPARATOR(a: Point, b: Point): number {\r\n\t\tif (a.x < b.x)\r\n\t\t\treturn -1;\r\n\t\telse if (a.x > b.x)\r\n\t\t\treturn +1;\r\n\t\telse if (a.y < b.y)\r\n\t\t\treturn -1;\r\n\t\telse if (a.y > b.y)\r\n\t\t\treturn +1;\r\n\t\telse\r\n\t\t\treturn 0;\r\n\t}\r\n\t\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { convexhull } from \"../../tools/ConvexHull.js\";\r\nimport { GroupHelper } from \"./Group.js\";\r\n\r\nexport class PolygonClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Polygon\", module, \"Wahlweise geschlossenes Polygon (mit Füllung und Rand) oder offener Streckenzug\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n        let shapeClass = <Klass>module.typeStore.getType(\"Shape\");\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Polygon\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"points\", type: new ArrayType(doublePrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n                let points: Value[] = parameters[2].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n                points.forEach(v => pointsNumber.push(v.value));\r\n\r\n                let ph = new PolygonHelper(pointsNumber, closeAndFill, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Polygon. Die Punkte werden als Array von double-Werten der Form {x1, y1, x2, y2, ...} übergeben.', true));\r\n\r\n        this.addMethod(new Method(\"Polygon\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"points\", type: new ArrayType(doublePrimitiveType), declaration: null, usagePositions: null, isFinal: true, isEllipsis: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n                let points: Value[] = parameters[2].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n                points.forEach(v => pointsNumber.push(v.value));\r\n\r\n                let ph = new PolygonHelper(pointsNumber, closeAndFill, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Polygon. Die Punkte werden als double-Werte der Form x1, y1, x2, y2, ... übergeben.', true));\r\n\r\n        this.addMethod(new Method(\"Polygon\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n\r\n                let ph = new PolygonHelper(pointsNumber, closeAndFill, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Polygon ohne Punkte.', true));\r\n\r\n        this.addMethod(new Method(\"Polygon\", new Parameterlist([\r\n            { identifier: \"shape\", type: shapeClass, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n\r\n                if(shape == null){\r\n                    module.main.getInterpreter().throwException(\"Die übergebene Figur ist null.\");\r\n                    return;\r\n                }\r\n\r\n                let shapeHelper: ShapeHelper = shape.intrinsicData[\"Actor\"];\r\n                shapeHelper.displayObject.getBounds();  // seems to work magic in updating transforms of children...\r\n                \r\n                let points: convexhull.Point[] = [];\r\n                points = this.extractPoints(shapeHelper, points);\r\n                points = convexhull.makeHull(points);\r\n\r\n\r\n                let pointsNumber: number[] = [];\r\n                for(let p of points){\r\n                    pointsNumber.push(p.x);\r\n                    pointsNumber.push(p.y);\r\n                }\r\n\r\n                if(pointsNumber.length > 0){\r\n                    pointsNumber = pointsNumber.concat(pointsNumber.slice(0, 2))\r\n                }\r\n\r\n                let ph = new PolygonHelper(pointsNumber, false, module.main.getInterpreter(), o, true);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Polygon. Seine Punkte sind die Punkte des Hitpolygons der übergebenen Figur.', true));\r\n            \r\n        this.addMethod(new Method(\"addPoint\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"addPoint\")) return;\r\n\r\n                sh.addPoint(x, y);\r\n\r\n            }, false, false, 'Fügt dem Polygon einen Punkt hinzu.\"', false));\r\n\r\n            this.addMethod(new Method(\"setPoints\", new Parameterlist([\r\n                { identifier: \"points\", type: new ArrayType(doublePrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let points: Value[] = parameters[1].value;\r\n                    let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"addPoints\")) return;\r\n    \r\n                    let p: { x: number, y: number }[];\r\n    \r\n                    sh.setPoints(points.map(value => value.value));\r\n    \r\n                }, false, false, 'Löscht alle Punkte des Polygons und setzt komplett neue. Diese werden in einem double[] übergeben, das abwechselnd die x- und y-Koordinaten enthält.\"', false));\r\n                \r\n        this.addMethod(new Method(\"addPoints\", new Parameterlist([\r\n            { identifier: \"points\", type: new ArrayType(doublePrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let points: Value[] = parameters[1].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"addPoints\")) return;\r\n\r\n                let p: { x: number, y: number }[];\r\n\r\n                for (let i = 0; i < points.length - 1; i += 2) {\r\n                    sh.addPoint(points[i].value, points[i + 1].value, i >= points.length - 2);\r\n                }\r\n\r\n            }, false, false, 'Fügt dem Polygon mehrere Punkte hinzu. Diese werden in einem double[] übergeben, das abwechselnd die x- und y-Koordinaten enthält.\"', false));\r\n\r\n        this.addMethod(new Method(\"insertPoint\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let index: number = parameters[3].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"insertPoint\")) return;\r\n\r\n                sh.insertPoint(x, y, index);\r\n\r\n            }, false, false, 'Fügt dem Polygon einen Punkt als \"index-ter\" Punkt hinzu. index == 0 => ganz am Anfang; index == Anzahl der bisherigen Punkte => ganz am Ende;\"', false));\r\n\r\n        this.addMethod(new Method(\"movePointTo\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let index: number = parameters[3].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"insertPoint\")) return;\r\n\r\n                sh.movePointTo(x, y, index);\r\n\r\n            }, false, false, 'schiebt den index-ten Punkt nach (x, y). index == 0 => erster Punkt, index == 1 => zweiter Punkt usw.', false));\r\n\r\n        this.addMethod(new Method(\"close\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"close\")) return;\r\n\r\n                sh.isClosed = true;\r\n                sh.render();\r\n\r\n            }, false, false, 'Schließt das Polygon. Diese Methode hat bei gefüllten Polygonen keinen Effekt.', false));\r\n\r\n        this.addMethod(new Method(\"open\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"open\")) return;\r\n\r\n                sh.isClosed = false;\r\n                sh.render();\r\n\r\n            }, false, false, 'Öffnet das Polygon. Diese Methode hat bei gefüllten Polygonen keinen Effekt.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Polygon-Objekts und git sie zurück.', false));\r\n\r\n\r\n    }\r\n\r\n\r\n    extractPoints(shapeHelper: ShapeHelper, points: convexhull.Point[]): convexhull.Point[]{\r\n        if(shapeHelper instanceof GroupHelper){\r\n            let points1: convexhull.Point[] = [];\r\n            for(let sh of shapeHelper.shapes){\r\n                points1 = this.extractPoints(sh.intrinsicData[\"Actor\"], points1);\r\n            }\r\n            return points.concat(points1);\r\n        } else {\r\n            if(shapeHelper.hitPolygonDirty) shapeHelper.transformHitPolygon();\r\n            return points.concat(shapeHelper.hitPolygonTransformed.map(function(punkt){return {x: punkt.x, y: punkt.y}}));\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nexport class PolygonHelper extends FilledShapeHelper {\r\n\r\n    isClosed: boolean = false;\r\n\r\n    constructor(points: number[], private closeAndFill: boolean,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject, isClosed: boolean = false) {\r\n        super(interpreter, runtimeObject);\r\n\r\n        this.isClosed = isClosed;\r\n        let xSum = 0; let ySum = 0;\r\n        this.hitPolygonInitial = [];\r\n\r\n        for (let i = 0; i < points.length;) {\r\n            let x = points[i++];\r\n            let y = points[i++];\r\n            xSum += x;\r\n            ySum += y;\r\n            this.hitPolygonInitial.push({ x: x, y: y });\r\n        }\r\n\r\n        if (points.length > 1) {\r\n            this.centerXInitial = xSum / this.hitPolygonInitial.length;\r\n            this.centerYInitial = ySum / this.hitPolygonInitial.length;\r\n        }\r\n\r\n        if (!closeAndFill) {\r\n            this.borderColor = 0x0000ff;\r\n        }\r\n\r\n        this.render();\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: PolygonHelper = new PolygonHelper([], this.closeAndFill, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null && this.closeAndFill) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        if (this.hitPolygonInitial.length > 0) {\r\n            g.moveTo(this.hitPolygonInitial[0].x, this.hitPolygonInitial[0].y);\r\n            for (let i = 1; i < this.hitPolygonInitial.length; i++) {\r\n                g.lineTo(this.hitPolygonInitial[i].x, this.hitPolygonInitial[i].y);\r\n            }\r\n        }\r\n\r\n        if (this.closeAndFill || this.isClosed) {\r\n            g.closePath();\r\n        }\r\n\r\n        if (this.fillColor != null && this.closeAndFill) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n\r\n    addPoint(x: number, y: number, render: boolean = true) {\r\n        let p = new PIXI.Point(x, y);\r\n        this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n        this.hitPolygonInitial.push({ x: p.x, y: p.y });\r\n        this.hitPolygonDirty = true;\r\n        if (render) this.render();\r\n    }\r\n\r\n    insertPoint(x: number, y: number, index: number) {\r\n        if (index < 0) index = 0;\r\n        if (index > this.hitPolygonInitial.length) index = this.hitPolygonInitial.length;\r\n        let p = new PIXI.Point(x, y);\r\n        this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n        this.hitPolygonInitial.splice(index, 0, { x: p.x, y: p.y });\r\n        this.hitPolygonDirty = true;\r\n        this.render();\r\n    }\r\n\r\n    movePointTo(x: number, y: number, index: number) {\r\n        if (index < 0) index = 0;\r\n        if (index > this.hitPolygonInitial.length) index = this.hitPolygonInitial.length;\r\n        if(this.hitPolygonInitial.length == 0) return;\r\n        let p = new PIXI.Point(x, y);\r\n        this.displayObject.transform.worldTransform.applyInverse(p, p);\r\n        this.hitPolygonInitial[index].x = p.x;\r\n        this.hitPolygonInitial[index].y = p.y;\r\n        this.hitPolygonDirty = true;\r\n        this.render();\r\n    }\r\n\r\n    setPoint(x: number, y: number, index: number) {\r\n        if (index == 0 || index == 1) {\r\n            this.hitPolygonInitial[index] = { x: x, y: y };\r\n            this.hitPolygonDirty = true;\r\n            this.render();\r\n        }\r\n    }\r\n\r\n    setPoints(coordinates: number[]) {\r\n\r\n        this.hitPolygonInitial = [];\r\n        for(let i = 0; i < coordinates.length - 1; i += 2){\r\n            this.hitPolygonInitial.push({x: coordinates[i], y: coordinates[i+1]});\r\n        }\r\n\r\n        this.hitPolygonDirty = true;\r\n        this.render();\r\n    }\r\n\r\n    setAllPointsUntransformed(points: number[]) {\r\n        this.hitPolygonInitial = [];\r\n        for (let i = 0; i < points.length; i += 2) {\r\n            this.hitPolygonInitial.push({ x: points[i], y: points[i + 1] })\r\n        }\r\n        this.hitPolygonDirty = true;\r\n        this.render();\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { FilledShapeDefaults } from \"./FilledShapeDefaults.js\";\r\n\r\nexport class RectangleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Rectangle\", module, \"Rechteck\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Rectangle\", new Parameterlist([\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let left: number = parameters[1].value;\r\n                let top: number = parameters[2].value;\r\n                let width: number = parameters[3].value;\r\n                let height: number = parameters[4].value;\r\n                \r\n                let rh = new RectangleHelper(left, top, width, height, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n                \r\n            }, false, false, 'Instanziert ein neues, achsenparalleles Rechteck-Objekt. (left, top) sind die Koordinaten der linken oberen Ecke.', true));\r\n            \r\n            this.addMethod(new Method(\"setWidth\", new Parameterlist([\r\n                { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), null,\r\n            (parameters) => {\r\n                \r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n                let width: number = parameters[1].value;\r\n                \r\n                if (sh.testdestroyed(\"setWidth\")) return;\r\n\r\n                sh.width = width / sh.displayObject.scale.x;\r\n                sh.centerXInitial = sh.left + sh.width/2;\r\n\r\n                sh.render();\r\n\r\n            }, false, false, \"Setzt die Breite des Rechtecks.\", false));\r\n\r\n            this.addMethod(new Method(\"setHeight\", new Parameterlist([\r\n                { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), null,\r\n            (parameters) => {\r\n                \r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n                let height: number = parameters[1].value;\r\n                \r\n                if (sh.testdestroyed(\"setHeight\")) return;\r\n\r\n                sh.height = height / sh.displayObject.scale.y;\r\n                sh.centerYInitial = sh.top + sh.height/2;\r\n\r\n                sh.render();\r\n\r\n            }, false, false, \"Setzt die Höhe des Rechtecks.\", false));\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getWidth\")) return;\r\n\r\n                return sh.width * sh.scaleFactor;\r\n\r\n            }, false, false, \"Gibt die Breite zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.height * sh.scaleFactor;\r\n\r\n            }, false, false, \"Gibt die Höhe zurück.\", false));\r\n\r\n            this.addMethod(new Method(\"copy\", new Parameterlist([\r\n            ]), this,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let sh: RectangleHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"copy\")) return;\r\n    \r\n                    return sh.getCopy(<Klass>o.class);\r\n    \r\n                }, false, false, 'Erstellt eine Kopie des Rectangle-Objekts und git sie zurück.', false));\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport class RectangleHelper extends FilledShapeHelper {\r\n\r\n    constructor(public left: number, public top: number, public width: number, public height: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = left + width / 2;\r\n        this.centerYInitial = top + height / 2;\r\n\r\n        this.render();\r\n\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: RectangleHelper = new RectangleHelper(this.left, this.top, this.width, this.height, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    render(): void {\r\n\r\n        this.hitPolygonInitial = [\r\n            { x: this.left, y: this.top }, { x: this.left, y: this.top + this.height },\r\n             { x: this.left + this.width, y: this.top + this.height }, { x: this.left + this.width, y: this.top }\r\n        ];\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.moveTo(this.left, this.top);\r\n        g.lineTo(this.left + this.width, this.top);\r\n        g.lineTo(this.left + this.width, this.top + this.height);\r\n        g.lineTo(this.left, this.top + this.height);\r\n        g.closePath();\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n\r\n}\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class RepeatTypeClass extends Enum {\r\n\r\n    constructor(module: Module){\r\n        super(\"RepeatType\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null, \r\n                identifier: \"once\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"loop\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"backAndForth\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Gibt an, auf welche Art eine Sprite-Animation abgespielt werden soll.\"\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class RoundedRectangleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"RoundedRectangle\", module, \"Rechteck mit abgerundeten Ecken\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"RoundedRectangle\", new Parameterlist([\r\n            { identifier: \"left\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"top\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"radius\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let left: number = parameters[1].value;\r\n                let top: number = parameters[2].value;\r\n                let width: number = parameters[3].value;\r\n                let height: number = parameters[4].value;\r\n                let radius: number = parameters[5].value;\r\n\r\n                let rh = new RoundedRectangleHelper(left, top, width, height, radius, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues, achsenparalleles abgerundetes Rechteck-Objekt. (left, top) sind die Koordinaten der linken oberen Ecke.', true));\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getWidth\")) return;\r\n\r\n                return sh.width * sh.displayObject.scale.x;\r\n\r\n            }, false, false, \"Gibt die Breite zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.height * sh.displayObject.scale.y;\r\n\r\n            }, false, false, \"Gibt die Höhe zurück.\", false));\r\n\r\n            this.addMethod(new Method(\"getRadius\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.radius * sh.displayObject.scale.y;\r\n\r\n            }, false, false, \"Gibt den Eckradius zurück.\", false));\r\n\r\n            this.addMethod(new Method(\"copy\", new Parameterlist([\r\n            ]), this,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let sh: RoundedRectangleHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"copy\")) return;\r\n    \r\n                    return sh.getCopy(<Klass>o.class);\r\n    \r\n                }, false, false, 'Erstellt eine Kopie des RoundedRectangle-Objekts und git sie zurück.', false));\r\n    \r\n\r\n    }\r\n\r\n}\r\n\r\nexport class RoundedRectangleHelper extends FilledShapeHelper {\r\n\r\n    constructor(public left: number, public top: number, public width: number, public height: number, public radius: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = left + width / 2;\r\n        this.centerYInitial = top + height / 2;\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        this.addCenterCircle(left + radius, top + radius, Math.PI/2);\r\n        this.addCenterCircle(left + radius, top + height - radius, Math.PI);\r\n        this.addCenterCircle(left + width - radius, top + height - radius, 3*Math.PI/2);\r\n        this.addCenterCircle(left + width - radius, top + radius, 0);\r\n        this.hitPolygonInitial.push({x: left + radius, y: top});\r\n\r\n        this.render();\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: RoundedRectangleHelper = new RoundedRectangleHelper(this.left, this.top, this.width, this.height, this.radius, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    addCenterCircle(midx: number, midy: number, angleStart: number){\r\n        let n = 8;\r\n        let dw = Math.PI/2/n;\r\n\r\n        for(let i = 0; i <= n; i++){\r\n            this.hitPolygonInitial.push({x: midx + this.radius*Math.cos(angleStart + dw*i), y: midy - this.radius*Math.sin(angleStart + dw*i)})\r\n        }\r\n    }\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n        if (this.borderColor != null) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5)\r\n        }\r\n\r\n        g.drawRoundedRect(this.left,this.top, this.width, this.height, this.radius);\r\n\r\n        if (this.fillColor != null) {\r\n            g.endFill();\r\n        }\r\n\r\n        // g.lineStyle(1, 0xff0000, 1);\r\n\r\n        // g.moveTo(this.hitPolygonInitial[0].x, this.hitPolygonInitial[0].y);\r\n        // for(let i = 1; i < this.hitPolygonInitial.length; i++){\r\n        //     g.lineTo(this.hitPolygonInitial[i].x, this.hitPolygonInitial[i].y);\r\n        // }\r\n        \r\n    };\r\n\r\n\r\n}\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class ScaleModeClass extends Enum {\r\n\r\n    constructor(module: Module){\r\n        super(\"ScaleMode\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"linear\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"nearest_neighbour\"\r\n            }\r\n        ]);\r\n\r\n        this.documentation = \"Art der Interpolation der Pixelfarben beim Skalieren von grafischen Objekten\"\r\n    }\r\n\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { SoundTools } from \"../../tools/SoundTools.js\";\r\n\r\nexport class SoundKlass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Sound\", module, \"Aufzählung aller Geräusche\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        for(let sound of SoundTools.sounds){\r\n            this.addAttribute(new Attribute(sound.name, stringPrimitiveType, (value) => { value.value = sound.name }, true, Visibility.public, true, sound.description));\r\n        }\r\n\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        this.addMethod(new Method(\"playSound\", new Parameterlist([\r\n            { identifier: \"sound\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n        (parameters) => {\r\n            let sound: string = parameters[1].value;\r\n            SoundTools.play(sound);\r\n        }    \r\n        , false, true, \"Spielt einen Sound ab. Die Möglichen Sounds sind als statische Variablen der Klasse Sound hinterlegt. Tippe als Parameter also Sound gefolgt von einem Punkt ein, um eine Auswahl zu sehen!\"));\r\n\r\n\r\n    }\r\n\r\n}","import { Punkt, abstandPunktZuGerade, abstand } from \"../../tools/MatheTools.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { SpriteHelper } from \"./Sprite.js\";\r\n\r\nexport class HitPolygonStore {\r\n\r\n    private static polygonStore: { [path: string]: Punkt[] } = {};\r\n\r\n    public static getPolygonForTexture(name: string, index: number, spriteHelper: SpriteHelper, sprite: PIXI.Sprite): Punkt[] {\r\n\r\n        if (index == null) {\r\n            index = 0;\r\n        }\r\n        name += \"#\" + index;\r\n\r\n        let polygon = HitPolygonStore.polygonStore[name];\r\n\r\n        if (polygon == null) {\r\n            // polygon = HitPolygonStore.getPolygon(<PIXI.Sprite>spriteHelper.displayObject, spriteHelper.worldHelper);\r\n            polygon = HitPolygonStore.getPolygon(sprite, spriteHelper.worldHelper);\r\n\r\n            HitPolygonStore.polygonStore[name] = polygon;\r\n        }\r\n\r\n\r\n        return polygon;\r\n\r\n    }\r\n\r\n    private static getPolygon(sprite: PIXI.Sprite, worldHelper: WorldHelper): Punkt[] {\r\n\r\n        let pixels = worldHelper.app.renderer.plugins.extract.pixels(sprite);\r\n        let w = sprite.width;\r\n        let h = sprite.height;\r\n\r\n        if (pixels.length !== 4 * w * h) {\r\n            return [{ x: 0, y: 0 }, { x: w, y: 0 }, { x: w, y: h }, { x: 0, y: h }];\r\n        }\r\n\r\n        let polygon: Punkt[] = [];\r\n        let additionalPointsPerHalfBorder = 3;\r\n        let pointsPerBorder = additionalPointsPerHalfBorder*2 + 3;\r\n\r\n        let probes: Punkt[] = [];\r\n        HitPolygonStore.addPointsOnLine({x: 0, y: 0}, {x: w-1, y: 0}, \r\n            pointsPerBorder, probes);\r\n        HitPolygonStore.addPointsOnLine({x: w-1, y: 0}, {x: w-1, y: h-1}, \r\n            pointsPerBorder, probes);\r\n        HitPolygonStore.addPointsOnLine({x: w-1, y: h-1}, {x: 0, y: h-1}, \r\n            pointsPerBorder, probes);\r\n        HitPolygonStore.addPointsOnLine({x: 0, y: h-1}, {x: 0, y: 0}, \r\n            pointsPerBorder, probes);\r\n\r\n        let mid = {x: w/2, y: h/2};    \r\n        for(let probe of probes){\r\n            HitPolygonStore.probe(polygon, probe, mid,w, h, pixels);\r\n        }\r\n\r\n        let done: boolean = false;\r\n        while(!done){\r\n            done = true;\r\n            for(let i = 0; i < polygon.length - 1; i++){\r\n                let d = abstandPunktZuGerade(polygon[i], polygon[(i+2)%polygon.length], polygon[i+1]);\r\n                if(d < 2){\r\n                    polygon.splice(i+1, 1);\r\n                    done = false;\r\n                }\r\n            }\r\n        }\r\n\r\n        // console.log(polygon);\r\n\r\n        return polygon;\r\n\r\n    }\r\n\r\n    private static addPointsOnLine(start: Punkt, end: Punkt, n: number, points: Punkt[]){\r\n    \r\n        let fx = (end.x - start.x)/(n-1);\r\n        let fy = (end.y - start.y)/(n-1);\r\n\r\n        for(let i = 1; i <= n - 1 + 0.1; i++ ){\r\n            points.push({\r\n                x: start.x + fx*i,\r\n                y: start.y + fy*i\r\n            });\r\n        }    \r\n\r\n\r\n    }\r\n\r\n    private static probe(polygon: Punkt[], start: Punkt, end: Punkt, \r\n        width: number, height: number, pixels: Uint8Array) {\r\n\r\n        let length = abstand(start, end);\r\n        let fx = (end.x - start.x) / length;\r\n        let fy = (end.y - start.y) / length;\r\n\r\n        let x: number, y: number;\r\n\r\n        for (let i = 0; i <= length - 2; i++) {\r\n\r\n            x = start.x + i * fx;\r\n            y = start.y + i * fy;\r\n\r\n            if (!HitPolygonStore.isTransparent(x, y, width, height, pixels)) {\r\n                break;\r\n            }\r\n        }\r\n\r\n        polygon.push({ x: x, y: y });\r\n\r\n    }\r\n\r\n\r\n    private static isTransparent(x: number, y: number, width: number, height: number, pixels: Uint8Array) {\r\n\r\n        if (x < 0 || y < 0 || x > width || y > height) {\r\n            return true;\r\n        }\r\n\r\n        let p = pixels[4 * Math.round(x) + 4 * width * Math.round(y) + 3];\r\n        // console.log(\"x: \" + x + \", y: \" + y + \", width: \" + width + \" = \" + p);\r\n        // console.log(\"index: \" + (4 * x + 4 * width * y + 3) + \", length: \" + pixels.length);\r\n\r\n        return p == 0;\r\n    }\r\n\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\nimport { HitPolygonStore } from \"./PolygonStore.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { SpriteLibraryPage } from \"../../help/SpriteLibraryPage.js\";\r\nimport { RenderTexture } from \"@pixi/core\";\r\nimport { convexhull } from \"../../tools/ConvexHull.js\";\r\nimport { GroupHelper } from \"./Group.js\";\r\n\r\nexport class SpriteClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Sprite\", module, \"Ein Sprite ist eine kleine Pixelgrafik, die verschoben, gedreht und skaliert werden kann. Zudem besitzt es Methoden zum Erkennen von Kollisionen mit anderen grafischen Objekten.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Shape\"));\r\n\r\n        let scaleModeClass = <Klass>module.typeStore.getType(\"ScaleMode\")\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"scalemode\", type: scaleModeClass, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[3].value;\r\n                let index: number = parameters[4].value;\r\n                let scaleMode: EnumRuntimeObject = parameters[5].value;\r\n\r\n                let rh = new SpriteHelper(x, y, spriteLibraryEntry.enumValue.identifier, index, module.main.getInterpreter(), o, null, scaleMode.enumValue.identifier);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Sprite und stellt es an der Position (x, y) dar. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', true));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"shape\", type: module.typeStore.getType(\"Shape\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"scalemode\", type: scaleModeClass, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n                let scaleMode: EnumRuntimeObject = parameters[2].value;\r\n\r\n                if (shape == null) {\r\n                    module.main.getInterpreter().throwException(\"Die übergebene Figur ist null.\");\r\n                    return;\r\n                }\r\n\r\n                let rh = new SpriteHelper(0, 0, \"\", 0, module.main.getInterpreter(), o, shape.intrinsicData[\"Actor\"], scaleMode.enumValue.identifier);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Zeichnet das graphische Objekt (shape) in eine Bitmap und macht daraus ein Sprite. Dieses wird an der Position (x, y) dargestellt.', true));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"shape\", type: module.typeStore.getType(\"Shape\"), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let shape: RuntimeObject = parameters[1].value;\r\n\r\n                if (shape == null) {\r\n                    module.main.getInterpreter().throwException(\"Die übergebene Figur ist null.\");\r\n                    return;\r\n                }\r\n\r\n                let rh = new SpriteHelper(0, 0, \"\", 0, module.main.getInterpreter(), o, shape.intrinsicData[\"Actor\"], \"linear\");\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Zeichnet das graphische Objekt (shape) in eine Bitmap und macht daraus ein Sprite. Dieses wird an der Position (x, y) dargestellt.', true));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[3].value;\r\n                let index: number = parameters[4].value;\r\n\r\n                let rh = new SpriteHelper(x, y, spriteLibraryEntry.enumValue.identifier, index, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Sprite und stellt es an der Position (x, y) dar. SpriteLibraryEntry ist ein Aufzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', true));\r\n\r\n        this.addMethod(new Method(\"Sprite\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[3].value;\r\n\r\n                let rh = new SpriteHelper(x, y, spriteLibraryEntry.enumValue.identifier, null, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Sprite und stellt es an der Position (x, y) dar. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', true));\r\n\r\n        this.addMethod(new Method(\"setImage\", new Parameterlist([\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[1].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.isDestroyed) return;\r\n\r\n                sh.setTexture(spriteLibraryEntry.enumValue.identifier);\r\n\r\n            }, false, false, 'Ändert das Bild des Sprites. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', false));\r\n\r\n        this.addMethod(new Method(\"setImage\", new Parameterlist([\r\n            { identifier: \"spriteLibraryEntry\", type: module.typeStore.getType(\"SpriteLibrary\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let spriteLibraryEntry: EnumRuntimeObject = parameters[1].value;\r\n                let index: number = parameters[2].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.isDestroyed) return;\r\n\r\n                sh.setTexture(spriteLibraryEntry.enumValue.identifier, index);\r\n\r\n            }, false, false, 'Ändert das Bild des Sprites. SpriteLibraryEntry ist ein Auzählungstyp (enum). Gib einfach SpriteLibraryEntry gefolgt von einem Punkt ein, dann erhältst Du ein Auswahl von Bildern. Einen Überblick über die Bilder bekommst Du auch über den Menüpunkt Hilfe->Sprite-Bilderübersicht.', false));\r\n\r\n        this.addMethod(new Method(\"setImageIndex\", new Parameterlist([\r\n            { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let index: number = parameters[1].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.isDestroyed) return;\r\n\r\n\r\n                sh.setTexture(sh.textureName, index);\r\n\r\n            }, false, false, 'Ändert den Bildindex des Sprites.', false));\r\n\r\n        this.addMethod(new Method(\"playAnimation\", new Parameterlist([\r\n            { identifier: \"indexArray\", type: new ArrayType(intPrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"repeatType\", type: module.typeStore.getType(\"RepeatType\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"imagesPerSecond\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let indexArray: Value[] = parameters[1].value;\r\n                let repeatType: EnumRuntimeObject = parameters[2].value;\r\n                let imagesPerSecond: number = parameters[3].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                let indices: number[] = [];\r\n                for (let v of indexArray) {\r\n                    indices.push(v.value);\r\n                }\r\n\r\n                if (sh.testdestroyed(\"playAnimation\")) return;\r\n\r\n                sh.playAnimation(indices, repeatType.enumValue.identifier, imagesPerSecond);\r\n\r\n            }, false, false, 'Spielt eine Animation ab.', false));\r\n\r\n        this.addMethod(new Method(\"playAnimation\", new Parameterlist([\r\n            { identifier: \"fromIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"toIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"repeatType\", type: module.typeStore.getType(\"RepeatType\"), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"imagesPerSecond\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let fromIndex: number = parameters[1].value;\r\n                let toIndex: number = parameters[2].value;\r\n                let repeatType: EnumRuntimeObject = parameters[3].value;\r\n                let imagesPerSecond: number = parameters[4].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"playAnimation\")) return;\r\n\r\n                let indices: number[] = [];\r\n\r\n                if (Math.abs(toIndex - fromIndex) < 10000) {\r\n                    let delta = Math.sign(toIndex - fromIndex);\r\n                    for (let i = fromIndex; i != toIndex; i = i + delta) indices.push(i);\r\n                }\r\n\r\n                sh.playAnimation(indices, repeatType.enumValue.identifier, imagesPerSecond);\r\n\r\n            }, false, false, 'Spielt eine Animation ab.', false));\r\n\r\n        this.addMethod(new Method(\"stopAnimation\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.isDestroyed) return;\r\n\r\n                sh.stopAnimation(false);\r\n\r\n            }, false, false, 'Stoppt die gerade laufende Animation', false));\r\n\r\n        this.addMethod(new Method(\"pauseAnimation\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"pauseAnimation\")) return;\r\n\r\n                sh.pauseAnimation();\r\n\r\n            }, false, false, 'Pausiert die laufende Animation.', false));\r\n\r\n        this.addMethod(new Method(\"resumeAnimation\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = <SpriteHelper>o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"resumeAnimation\")) return;\r\n\r\n                sh.resumeAnimation();\r\n\r\n            }, false, false, 'Fährt mit einer pausierten Animation wieder fort.', false));\r\n\r\n        this.addMethod(new Method(\"setAlpha\", new Parameterlist([\r\n            { identifier: \"alphaValue\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let alpha: number = parameters[1].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"setAlpha\")) return;\r\n\r\n                sh.setAlpha(alpha);\r\n\r\n            }, false, false, 'Setzt die Durchsichtigkeit. 0.0 bedeutet vollkommen durchsichtig, 1.0 bedeutet vollkommen undurchsichtig.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Sprite-Objekts und git sie zurück.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getWidth\")) return;\r\n\r\n                return sh.getWidth();\r\n\r\n            }, false, false, \"Gibt die Breite zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.getHeight();\r\n\r\n            }, false, false, \"Gibt die Höhe zurück.\", false));\r\n\r\n        this.addMethod(new Method(\"makeTiling\", new Parameterlist([\r\n            { identifier: \"width\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let width: number = parameters[1].value;\r\n                let height: number = parameters[2].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"makeTiling\")) return;\r\n\r\n                sh.makeTiling(width, height);\r\n\r\n            }, false, false, \"Fügt das identische Bild nach rechts und unten kachelartig ('tile'!) so oft hinzu, bis die angegebene Breite erreicht ist. \\nTIPP: Mit der Methode getTileImage() erhält man ein Tile-Objekt, dessen Methoden move, scale, mirrorX und mirrorY sich gleichzeitig auf jede einzelne Kachel auswirken.\", false));\r\n\r\n        this.addMethod(new Method(\"getTileImage\", new Parameterlist([\r\n        ]), <Klass>module.typeStore.getType(\"Tile\"),\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: SpriteHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getTileImage\")) return;\r\n\r\n                if(!sh.isTileSprite){\r\n                    sh.worldHelper.interpreter.throwException(\"Das Sprite hat kein TileImage. Sie müssen es zuerst mit der Methode makeTiling in ein Kachel-Sprite umwandeln.\")\r\n                    return;\r\n                }\r\n\r\n                let ret: RuntimeObject = new RuntimeObject(<Klass>module.typeStore.getType(\"Tile\"));\r\n\r\n                ret.intrinsicData[\"Actor\"] = new TileHelper(sh);\r\n\r\n                return ret;\r\n\r\n            }, false, false, \"Nachdem das Sprite mittels der Methode 'makeTiling' zum TileSprite gemacht wurde, kann wirken die Methoden move, scale und rotate immer auf den ganzen gekachelten Bereich. Will man das verfielfachte Bild ändern, so bekommt man über diese Methode das Sprite-Objekt, das diesem Bild entspricht. Ruft man für dieses Objekt die Methoden move, rotate oder scale auf, so wirken sie auf jede der einzelnen Kacheln.\", false));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class SpriteHelper extends ShapeHelper {\r\n\r\n    animationIndices: number[] = [];\r\n    animationRuns: boolean = false;\r\n    imagesPerMillisecond: number = 1;\r\n    animationTime: number = 0;\r\n    animationPaused: boolean = false;\r\n\r\n    repeatType = \"once\";\r\n    textureName: string = \"\";\r\n\r\n    isTileSprite: boolean = false;\r\n\r\n    constructor(public x: number, public y: number, public name: string, public index: number,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject, copyFromOtherShape?: ShapeHelper,\r\n        public scaleMode: string = \"nearest_neighbour\") {\r\n        super(interpreter, runtimeObject);\r\n\r\n        if (copyFromOtherShape == null) {\r\n            this.setTexture(null, index);\r\n        } else {\r\n            this.copyBitmapFromShape(copyFromOtherShape);\r\n            let bounds = copyFromOtherShape.displayObject.getBounds();\r\n            this.x = bounds.left + bounds.width / 2;\r\n            this.y = bounds.top + bounds.height / 2;\r\n        }\r\n\r\n        let sprite = <PIXI.Sprite>this.displayObject;\r\n\r\n        this.displayObject.localTransform.translate(this.x - sprite.width / 2, this.y - sprite.height / 2);\r\n        //@ts-ignore\r\n        this.displayObject.transform.onChange();\r\n\r\n        this.worldHelper.stage.addChild(sprite);\r\n\r\n        this.centerXInitial = sprite.width / 2;\r\n        this.centerYInitial = sprite.height / 2;\r\n\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    makeTiling(width: number, height: number) {\r\n        width /= this.scaleFactor;\r\n        height /= this.scaleFactor;\r\n        let sprite: PIXI.Sprite = <PIXI.Sprite>this.displayObject;\r\n        let tileSprite = new PIXI.TilingSprite(sprite.texture, width, height);\r\n        sprite.texture.baseTexture.mipmap = PIXI.MIPMAP_MODES.OFF;\r\n        tileSprite.setParent(sprite.parent);\r\n        tileSprite.transform.localTransform.copyFrom(sprite.transform.localTransform);\r\n        //@ts-ignore\r\n        tileSprite.transform.onChange();\r\n        tileSprite.updateTransform();\r\n        // tileSprite.clampMargin = -0.5;\r\n        this.displayObject = tileSprite;\r\n        this.centerXInitial += -sprite.width / 2 + width / 2;\r\n        this.centerYInitial += -sprite.height / 2 + height / 2;\r\n        let left = this.centerXInitial - width / 2;\r\n        let top = this.centerYInitial - height / 2;\r\n        let right = left + width;\r\n        let bottom = top + height;\r\n        this.hitPolygonInitial = [\r\n            { x: left, y: top }, { x: right, y: top }, { x: right, y: bottom }, { x: left, y: bottom }\r\n        ];\r\n        this.setHitPolygonDirty(true);\r\n        sprite.destroy();\r\n        this.isTileSprite = true;\r\n    }\r\n\r\n    setTileOffset(x: number, y: number) {\r\n        if (this.isTileSprite) {\r\n            let tileSprite: PIXI.TilingSprite = <PIXI.TilingSprite>this.displayObject;\r\n            tileSprite.tilePosition.set(x, y);\r\n        }\r\n    }\r\n\r\n\r\n    copyBitmapFromShape(copyFromOtherShape: ShapeHelper) {\r\n\r\n        let bounds = copyFromOtherShape.displayObject.getBounds();\r\n\r\n        let width = bounds.width;\r\n        let height = bounds.height;\r\n\r\n        const brt = new PIXI.BaseRenderTexture(\r\n            {\r\n                scaleMode: this.scaleMode == \"nearest_neighbour\" ? PIXI.SCALE_MODES.NEAREST : PIXI.SCALE_MODES.LINEAR,\r\n                width: width,\r\n                height: height\r\n            }\r\n        );\r\n        let rt: PIXI.RenderTexture = new PIXI.RenderTexture(brt);\r\n\r\n        let dob = copyFromOtherShape.displayObject;\r\n        this.worldHelper.app.renderer.render(dob, {\r\n            renderTexture: rt,\r\n            transform: new PIXI.Matrix().translate(-bounds.left, -bounds.top)\r\n        });\r\n\r\n        let points: convexhull.Point[] = [];\r\n        points = this.extractPoints(copyFromOtherShape, points);\r\n\r\n        for (let p of points) {\r\n            p.x -= bounds.left;\r\n            p.y -= bounds.top;\r\n        }\r\n\r\n        this.hitPolygonInitial = points;\r\n        this.hitPolygonInitial = convexhull.makeHull(points);\r\n\r\n        this.hitPolygonDirty = true;\r\n\r\n        this.displayObject = new PIXI.Sprite(rt);\r\n\r\n        copyFromOtherShape.setHitPolygonDirty(true);\r\n\r\n    }\r\n\r\n    extractPoints(shapeHelper: ShapeHelper, points: convexhull.Point[]): convexhull.Point[] {\r\n        if (shapeHelper instanceof GroupHelper) {\r\n            for (let sh of shapeHelper.shapes) {\r\n                points = this.extractPoints(sh.intrinsicData[\"Actor\"], points);\r\n            }\r\n            return points;\r\n        } else {\r\n            if (shapeHelper.hitPolygonDirty) shapeHelper.transformHitPolygon();\r\n            return points.concat(shapeHelper.hitPolygonTransformed.map(function (punkt) { return { x: punkt.x, y: punkt.y } }));\r\n\r\n        }\r\n    }\r\n\r\n    getWidth(): number {\r\n        let sprite = <PIXI.Sprite>this.displayObject;\r\n        return sprite.width * this.scaleFactor;\r\n    }\r\n\r\n    getHeight(): number {\r\n        let sprite = <PIXI.Sprite>this.displayObject;\r\n        return sprite.height * this.scaleFactor;\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: SpriteHelper = new SpriteHelper(this.x, this.y, this.name, this.index, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    setAlpha(alpha: number) {\r\n        this.displayObject.alpha = alpha;\r\n    }\r\n\r\n    setTexture(name?: string, index?: number) {\r\n\r\n        if (name == this.name && index == this.index) return;\r\n\r\n        if (name == null) name = this.name;\r\n        if (index == null) index = 0;\r\n        this.index = index;\r\n\r\n        this.textureName = name;\r\n\r\n        // let prefix = \"\";\r\n        // //@ts-ignore\r\n        // if (window.javaOnlineDir != null) {\r\n        //     //@ts-ignore\r\n        //     prefix = window.javaOnlineDir;\r\n        // }\r\n\r\n        // let sheet = PIXI.Loader.shared.resources[prefix + \"assets/graphics/spritesheet.json\"].spritesheet;\r\n        let sheet = PIXI.Loader.shared.resources[\"spritesheet\"].spritesheet;\r\n        let nameWithIndex = name + \"#\" + index;\r\n        let texture = sheet.textures[nameWithIndex];\r\n\r\n        if (texture != null) {\r\n\r\n            if (this.scaleMode == \"linear\") {\r\n\r\n                let t = this.worldHelper.scaledTextures[nameWithIndex];\r\n\r\n                if (t == null) {\r\n                    let sprite = new PIXI.Sprite(texture);\r\n\r\n                    let dynamicTexture1 = PIXI.RenderTexture.create({\r\n                        width: sprite.width,\r\n                        height: sprite.height,\r\n                        scaleMode: PIXI.SCALE_MODES.LINEAR\r\n                    });\r\n\r\n                    this.worldHelper.app.renderer.render(sprite, {\r\n                        renderTexture: dynamicTexture1\r\n                    });\r\n                    this.worldHelper.scaledTextures[nameWithIndex] = dynamicTexture1;\r\n                    t = dynamicTexture1;\r\n                }\r\n\r\n                texture = t;\r\n                if (texture == null) texture = sheet.textures[nameWithIndex];\r\n\r\n                // let t = this.worldHelper.scaledTextures[nameWithIndex][this.scaleOnTextureGeneration];\r\n                // if( t != null){\r\n                //     texture = t;\r\n                // } else {\r\n                //     let sprite = new PIXI.Sprite(texture);\r\n\r\n                //     let dynamicTexture1 = PIXI.RenderTexture.create({\r\n                //         width: sprite.width,\r\n                //         height: sprite.height,\r\n                //         scaleMode: PIXI.SCALE_MODES.NEAREST\r\n                //     });\r\n\r\n                //     this.worldHelper.app.renderer.render(sprite, dynamicTexture1, true);\r\n\r\n                //     sprite = new PIXI.Sprite(dynamicTexture1);\r\n\r\n                //     let dynamicTexture2 = PIXI.RenderTexture.create({\r\n                //         width: sprite.width * this.scaleOnTextureGeneration,\r\n                //         height: sprite.height * this.scaleOnTextureGeneration,\r\n                //         scaleMode: PIXI.SCALE_MODES.LINEAR\r\n                //     });\r\n\r\n                //     let m = new PIXI.Matrix();\r\n                //     m.scale(this.scaleOnTextureGeneration, this.scaleOnTextureGeneration);\r\n\r\n                //     this.worldHelper.app.renderer.render(sprite, dynamicTexture2, true,\r\n                //         m);\r\n\r\n                //     texture = dynamicTexture2;\r\n\r\n                //     this.worldHelper.scaledTextures[nameWithIndex][this.scaleOnTextureGeneration] = texture;\r\n            }\r\n\r\n            let sprite: PIXI.Sprite = <PIXI.Sprite>this.displayObject;\r\n            if (sprite == null) {\r\n                sprite = new PIXI.Sprite(texture);\r\n                this.displayObject = sprite;\r\n            } else {\r\n                sprite.texture = texture; // sheet.textures[nameWithIndex];\r\n            }\r\n\r\n            this.hitPolygonInitial = HitPolygonStore.getPolygonForTexture(name, index, this, new PIXI.Sprite(sheet.textures[nameWithIndex]));\r\n            this.hitPolygonDirty = true;\r\n\r\n        } else {\r\n            if (this.displayObject == null) {\r\n                this.displayObject = new PIXI.Sprite();\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    render(): void {\r\n\r\n    };\r\n\r\n    playAnimation(indexArray: number[], repeatType: string, imagesPerSecond: number) {\r\n        this.stopAnimation(false);\r\n        this.animationIndices = indexArray;\r\n        this.repeatType = repeatType;\r\n        this.imagesPerMillisecond = imagesPerSecond / 1000;\r\n        this.animationTime = 0;\r\n        this.animationRuns = true;\r\n        this.worldHelper.spriteAnimations.push(this);\r\n    }\r\n\r\n    stopAnimation(setInvisible: boolean) {\r\n        if (this.animationRuns) {\r\n            let spriteHelperList = this.worldHelper.spriteAnimations;\r\n            let i = spriteHelperList.indexOf(this);\r\n            if (i >= 0) spriteHelperList.splice(i, 1);\r\n        }\r\n        this.animationRuns = false;\r\n        if (setInvisible) this.setVisible(false);\r\n    }\r\n\r\n    pauseAnimation() {\r\n        this.animationPaused = true;\r\n    }\r\n\r\n    resumeAnimation() {\r\n        this.animationPaused = false;\r\n    }\r\n\r\n    tick(deltaTime: number) {\r\n\r\n        if (this.animationPaused) return;\r\n\r\n        let image: number;\r\n\r\n        if (this.repeatType == \"backAndForth\") {\r\n            let period2 = this.animationIndices.length * 2 / this.imagesPerMillisecond;\r\n            let numberOfPeriodsDone = Math.trunc(this.animationTime / period2);\r\n            let timeIntoPeriod = this.animationTime - numberOfPeriodsDone * period2;\r\n            image = this.imagesPerMillisecond * timeIntoPeriod;\r\n            if (image >= this.animationIndices.length) {\r\n                image = Math.max(2 * this.animationIndices.length - 0.1 - image, 0);\r\n            }\r\n            image = Math.trunc(image);\r\n        } else\r\n            if (this.repeatType == \"loop\") {\r\n                let period = this.animationIndices.length / this.imagesPerMillisecond;\r\n                let numberOfPeriodsDone = Math.trunc(this.animationTime / period);\r\n                let timeIntoPeriod = this.animationTime - numberOfPeriodsDone * period;\r\n                image = this.imagesPerMillisecond * timeIntoPeriod;\r\n                image = Math.trunc(image);\r\n            } else {\r\n                image = Math.trunc(this.imagesPerMillisecond * this.animationTime);\r\n                if (image >= this.animationIndices.length) {\r\n                    this.stopAnimation(true);\r\n                    return;\r\n                }\r\n            }\r\n\r\n        this.animationTime += deltaTime;\r\n\r\n        this.setTexture(null, this.animationIndices[image]);\r\n    }\r\n\r\n}\r\n\r\nexport class TileClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Tile\", module, \"Eine Kachel in einem Sprite, das mithilfe der Methode makeTiling zu einer Kachelfläche gemacht wurde.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"move\", new Parameterlist([\r\n            { identifier: \"dx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"dy\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let dx: number = parameters[1].value;\r\n                let dy: number = parameters[2].value;\r\n                let sh: TileHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"move\")) return;\r\n\r\n                sh.move(dx, dy);\r\n\r\n            }, false, false, \"Verschiebt das Grafikobjekt um dx Pixel nach rechts und um dy Pixel nach unten.\", false));\r\n\r\n        this.addMethod(new Method(\"scale\", new Parameterlist([\r\n            { identifier: \"factor\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let factor: number = parameters[1].value;\r\n                let sh: TileHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"scale\")) return;\r\n\r\n                sh.scale(factor, factor);\r\n\r\n            }, false, false, \"Streckt das Grafikobjekt um den angegebenen Faktor. Das Zentrum der Streckung ist der 'Mittelpunkt' des Objekts.\", false));\r\n\r\n        this.addMethod(new Method(\"mirrorX\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TileHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"mirrorX\")) return;\r\n\r\n                sh.scale(-1, 1);\r\n\r\n            }, false, false, \"Spiegelt das Objekt in X-Richtung.\", false));\r\n\r\n        this.addMethod(new Method(\"mirrorY\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TileHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"mirrorX\")) return;\r\n\r\n                sh.scale(1, -1);\r\n\r\n            }, false, false, \"Spiegelt das Objekt in Y-Richtung.\", false));\r\n\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n\r\nexport class TileHelper {\r\n    constructor(public spriteHelper: SpriteHelper) {\r\n    }\r\n\r\n    move(dx: number, dy: number){\r\n        let tileSprite: PIXI.TilingSprite = <PIXI.TilingSprite>this.spriteHelper.displayObject;\r\n        tileSprite.tilePosition.x += dx;\r\n        tileSprite.tilePosition.y += dy;\r\n    }\r\n    \r\n    scale(fx: number, fy: number){\r\n        let tileSprite: PIXI.TilingSprite = <PIXI.TilingSprite>this.spriteHelper.displayObject;\r\n        tileSprite.tileScale.x *= fx;\r\n        tileSprite.tileScale.y *= fy;\r\n    }\r\n\r\n    testdestroyed(method: string) {\r\n        return this.spriteHelper.testdestroyed(method);\r\n    }\r\n\r\n\r\n}","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\ntype SpriteLibraryEntry = {\r\n    filename: string,\r\n    name: string,\r\n    index?: number\r\n}\r\n\r\ndeclare var SpriteLibrary: SpriteLibraryEntry[];\r\n\r\nexport class SpriteLibraryClass extends Enum {\r\n\r\n    constructor(module: Module) {\r\n        super(\"SpriteLibrary\", module,\r\n\r\n            SpriteLibrary.filter(\r\n                (sle) => {\r\n                    return sle.index == null || sle.index == 0\r\n                }\r\n            ).map((sle: SpriteLibraryEntry) => {\r\n                return {\r\n                    type: TokenType.pushEnumValue,\r\n                    position: null,\r\n                    identifier: sle.name\r\n                };\r\n\r\n            })\r\n\r\n        );\r\n        this.documentation = \"Aufzählung der Sprite-Grafiken\"\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, doublePrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { WorldHelper } from \"./World.js\";\r\nimport { EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\n\r\nexport class TextClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Text\", module, \"Text, der innerhalb der Grafikausgabe dargestellt werden kann\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Text\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"fontsize\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let fontsize: number = parameters[3].value;\r\n                let text: string = parameters[4].value;\r\n\r\n                let sh = new TextHelper(x, y, fontsize, text, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = sh;\r\n\r\n            }, false, false, 'Instanziert ein neues Textobjekt. (x, y) sind die Koordinaten des Textankers (default: links oben), fontsize die Höhe des Textes in Pixeln.', true));\r\n\r\n        this.addMethod(new Method(\"Text\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"fontsize\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"font-family\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let fontsize: number = parameters[3].value;\r\n                let text: string = parameters[4].value;\r\n                let fontFamily: string = parameters[5].value;\r\n\r\n                let sh = new TextHelper(x, y, fontsize, text, module.main.getInterpreter(), o, fontFamily);\r\n                o.intrinsicData[\"Actor\"] = sh;\r\n\r\n            }, false, false, 'Instanziert ein neues Textobjekt. (x, y) sind die Koordinaten des Textankers (default: links oben), fontsize die Höhe des Textes in Pixeln.', true));\r\n\r\n        this.addMethod(new Method(\"setFontsize\", new Parameterlist([\r\n            { identifier: \"fontsize\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let fontsize: number = parameters[1].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setFontsize(fontsize);\r\n\r\n            }, false, false, 'Setzt die Schriftgröße des Textes (Einheit: Pixel).', false));\r\n\r\n        this.addMethod(new Method(\"setAlignment\", new Parameterlist([\r\n            { identifier: \"alignment\", type: module.typeStore.getType(\"Alignment\"), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let alignment: EnumRuntimeObject = parameters[1].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setAlignment(alignment.enumValue.identifier);\r\n\r\n            }, false, false, 'Setzt die Ausrichtung in X-Richtung. Zulässige Werte sind \"Alignment.left\", \"Alignment.right\" und \"Alignment.center\".', false));\r\n\r\n        this.addMethod(new Method(\"setText\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let text: string = parameters[1].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                sh.setText(text);\r\n\r\n            }, false, false, 'Setzt den Text.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Text-Objekts und git sie zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getWidth\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getWidth\")) return;\r\n\r\n                return sh.getWidth();\r\n\r\n            }, false, false, 'Gibt die Breite des Textes zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getHeight\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                return sh.getHeight();\r\n\r\n            }, false, false, 'Gibt die Höhe des Textes zurück.', false));\r\n\r\n        this.addMethod(new Method(\"setStyle\", new Parameterlist([\r\n            { identifier: \"isBold\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"isItalic\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let isBold: boolean = parameters[1].value;\r\n                let isItalic: boolean = parameters[2].value;\r\n                let sh: TextHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"getHeight\")) return;\r\n\r\n                sh.setStyle(isBold, isItalic);\r\n\r\n                return;\r\n\r\n            }, false, false, 'Gibt die Höhe des Textes zurück.', false));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class TextHelper extends FilledShapeHelper {\r\n\r\n    alignment: string = \"left\";\r\n\r\n    textStyle: PIXI.TextStyle =\r\n        new PIXI.TextStyle({\r\n            fontFamily: 'Arial',\r\n            fontSize: this.fontsize,\r\n            fontStyle: 'normal',\r\n            fontWeight: 'normal',\r\n            fill: [this.fillColor], // gradient possible...\r\n            stroke: this.borderColor,\r\n            strokeThickness: this.borderWidth,\r\n            dropShadow: false,\r\n            wordWrap: false,\r\n            align: \"left\",\r\n            lineJoin: 'round'\r\n        });\r\n\r\n    constructor(public x: number, public y: number, public fontsize: number,\r\n        public text: string,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject, public fontFamily?: string) {\r\n        super(interpreter, runtimeObject);\r\n        this.centerXInitial = x;\r\n        this.centerYInitial = y;\r\n\r\n        if (this.fontsize == 0) this.fontsize = 10;\r\n\r\n        this.borderColor = null;\r\n        this.textStyle.stroke = null;\r\n        if (fontFamily != null) {\r\n            this.textStyle.fontFamily = fontFamily;\r\n        }\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        this.render();\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n    }\r\n\r\n    setStyle(isBold: boolean, isItalic: boolean){\r\n        this.textStyle.fontWeight = isBold ? \"bold\" : \"normal\";\r\n        this.textStyle.fontStyle = isItalic ? \"italic\" : \"normal\";\r\n        this.render();\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: TextHelper = new TextHelper(this.x, this.y, this.fontsize, this.text, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.alignment = this.alignment;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Text = <any>this.displayObject;\r\n        this.textStyle.fill = this.fillColor;\r\n        this.textStyle.stroke = this.borderColor;\r\n        this.textStyle.strokeThickness = this.borderWidth;\r\n        this.textStyle.fontSize = this.fontsize;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Text(this.text, this.textStyle);\r\n            this.displayObject = g;\r\n            this.displayObject.localTransform.translate(this.x, this.y);\r\n            //@ts-ignore\r\n            this.displayObject.transform.onChange();\r\n            this.worldHelper.stage.addChild(g);\r\n        } else {\r\n            g.text = this.text;\r\n            g.alpha = this.fillAlpha;\r\n            switch (this.alignment) {\r\n                case \"left\": g.anchor.x = 0; break;\r\n                case \"center\": g.anchor.x = 0.5; break;\r\n                case \"right\": g.anchor.x = 1.0; break;\r\n            }\r\n            g.style = this.textStyle;\r\n        }\r\n\r\n        this.centerXInitial = 0;\r\n        this.centerYInitial = 0;\r\n        if (this.text != null) {\r\n            let tm = PIXI.TextMetrics.measureText(this.text, this.textStyle);\r\n\r\n            this.centerXInitial = tm.width / 2;\r\n            this.centerYInitial = tm.height / 2;\r\n        }\r\n\r\n\r\n    };\r\n\r\n    setFontsize(fontsize: number) {\r\n        this.fontsize = fontsize;\r\n        if (this.fontsize == 0) this.fontsize = 10;\r\n        this.render();\r\n    }\r\n\r\n    setText(text: string) {\r\n        this.text = text;\r\n        this.render();\r\n    }\r\n\r\n    setAlignment(alignment: string) {\r\n        this.alignment = alignment;\r\n        this.render();\r\n    }\r\n\r\n    getWidth(): number {\r\n        let g: PIXI.Text = <any>this.displayObject;\r\n        return g.width;\r\n    }\r\n\r\n    getHeight(): number {\r\n        let g: PIXI.Text = <any>this.displayObject;\r\n        return g.height;\r\n    }\r\n\r\n}\r\n","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, charPrimitiveType, booleanPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\n\r\nexport class InputClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Input\", module, \"Klasse mit statischen Methoden zur Eingabe von Text per Tastatur\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"readChar\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: charPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp char\"));\r\n\r\n        this.addMethod(new Method(\"readInt\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp int\"));\r\n\r\n        this.addMethod(new Method(\"readString\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp String\"));\r\n\r\n        this.addMethod(new Method(\"readFloat\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp float\"));\r\n\r\n        this.addMethod(new Method(\"readDouble\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp double\"));\r\n\r\n        this.addMethod(new Method(\"readBoolean\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Defaultwert\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp boolean\"));\r\n\r\n        /**\r\n         * Same methods without default value:\r\n         */\r\n\r\n        this.addMethod(new Method(\"readChar\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), charPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp char\"));\r\n\r\n        this.addMethod(new Method(\"readInt\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp int\"));\r\n\r\n        this.addMethod(new Method(\"readString\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp String\"));\r\n\r\n        this.addMethod(new Method(\"readFloat\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp float\"));\r\n\r\n        this.addMethod(new Method(\"readDouble\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp double\"));\r\n\r\n        this.addMethod(new Method(\"readBoolean\", new Parameterlist([\r\n            { identifier: \"Meldungstext\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n                return null; // done by compiler magic in class Interpreter!\r\n            }, \r\n        false, true, \"Erwartet vom Benutzer die Eingabe eines Wertes vom Datentyp boolean\"));\r\n\r\n    }\r\n\r\n\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, booleanPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\n\r\nexport class GamepadClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Gamepad\", module, \"Klasse mit statischen Methoden zur Abfrage der Gamepads\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (value) => { value.value = Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n        // this.addAttribute(new Attribute(\"E\", doublePrimitiveType, (value) => { value.value = Math.E }, true, Visibility.public, true, \"Die Eulersche Zahl e\"));\r\n\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        this.addMethod(new Method(\"isButtonDown\", new Parameterlist([\r\n            { identifier: \"gamepadIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"buttonIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gamepadIndex: number = parameters[1].value;\r\n                let buttonIndex: number = parameters[2].value;\r\n\r\n                return module.main.getInterpreter().gamepadTool.isGamepadButtonPressed(gamepadIndex, buttonIndex);\r\n\r\n            }, false, true, \"Gibt genau dann true zurück, wenn der Button buttonIndex des Gamepads GamepadIndex gedrückt ist.\", false));\r\n\r\n        this.addMethod(new Method(\"isConnected\", new Parameterlist([\r\n            { identifier: \"gamepadIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gamepadIndex: number = parameters[1].value;\r\n\r\n                return module.main.getInterpreter().gamepadTool.isGamepadConnected(gamepadIndex);\r\n\r\n            }, false, true, \"Gibt true zurück, falls das Gamepad mit dem übergebenen Index angeschlossen ist. VORSICHT: Das erste Gamepad hat Index 0.\", false));\r\n\r\n        this.addMethod(new Method(\"getAxisValue\", new Parameterlist([\r\n            { identifier: \"gamepadIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"axisIndex\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let gamepadIndex: number = parameters[1].value;\r\n                let axisIndex: number = parameters[2].value;\r\n\r\n                return module.main.getInterpreter().gamepadTool.getGamepadAxisValue(gamepadIndex, axisIndex);\r\n\r\n            }, false, true, \"Gibt den Wert des Gamepad-Steuerknüppels mit Index axisIndex zurück.\", false));\r\n\r\n\r\n    }\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\n\r\nexport class MathClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Math\", module, \"Klasse mit statischen Methoden zur Berechnung mathematischer Funktionen (sin, cos, abs, ...) und zur Ermittlung von Zufallszahlen.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (value) => { value.value = Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n        this.addAttribute(new Attribute(\"E\", doublePrimitiveType, (value) => { value.value = Math.E }, true, Visibility.public, true, \"Die Eulersche Zahl e\"));\r\n\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        this.addMethod(new Method(\"round\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.round(<number>parameters[1].value);\r\n            }, false, true, \"**Rundet** den Wert\"));\r\n\r\n        this.addMethod(new Method(\"floor\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.floor(<number>parameters[1].value);\r\n            }, false, true, \"Rundet den Wert ab, sucht also die **nächstkleinere** ganze Zahl\"));\r\n\r\n        this.addMethod(new Method(\"ceil\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.ceil(<number>parameters[1].value);\r\n            }, false, true, \"Rundet den Wert auf, sucht also die **nächstgrößere** Zahl.\"));\r\n\r\n        this.addMethod(new Method(\"signum\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.sign(<number>parameters[1].value);\r\n            }, false, true, \"Gibt das Vorzeichen der Zahl zurück, d.h. \\n  - -1, falls die Zahl **negativ** ist,\\n  - 0, falls die Zahl **0** ist und\\n  - +1, falls die Zahl **positiv** ist.\"));\r\n\r\n        this.addMethod(new Method(\"sqrt\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.sqrt(<number>parameters[1].value);\r\n            }, false, true, \"Gibt die **Quadratwurzel** der Zahl zurück. Für andere Wurzeln benutze Math.pow(a, b), z.B. Math.pow(10, 1.0/3.0) für die Kubikwurzel aus 10.\"));\r\n\r\n        this.addMethod(new Method(\"random\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.random();\r\n            }, false, true, \"Gibt eine Zufallszahl aus dem Intervall [0;1[ zurück.\"));\r\n\r\n        this.addMethod(new Method(\"pow\", new Parameterlist([\r\n            { identifier: \"Basis\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"Exponent\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.pow(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, 'Math.pow(a, b) gibt \"a hoch b\" zurück.'));\r\n\r\n        this.addMethod(new Method(\"toDegrees\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return (<number>parameters[1].value) / Math.PI * 180;\r\n            }, false, true, \"Wandelt einen Winkel von Rad in Grad um, d.h. berechnet Winkel/Pi*180.\"));\r\n\r\n        this.addMethod(new Method(\"toRadians\", new Parameterlist([\r\n            { identifier: \"WinkelInGrad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return (<number>parameters[1].value) / 180 * Math.PI;\r\n            }, false, true, \"Wandelt einen Winkel von Grad in Rad um, d.h. berechnet Winkel/180*Pi.\"));\r\n\r\n        this.addMethod(new Method(\"exp\", new Parameterlist([\r\n            { identifier: \"Zahl\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.exp(<number>parameters[1].value);\r\n            }, false, true, 'Berechnet \"e hoch die Zahl\".'));\r\n\r\n        this.addMethod(new Method(\"log\", new Parameterlist([\r\n            { identifier: \"Zahl\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.log(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den natürlichen Logarithmus der Zahl.\"));\r\n\r\n        this.addMethod(new Method(\"log10\", new Parameterlist([\r\n            { identifier: \"Zahl\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.log10(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Zehnerlogarithmus der Zahl.\"));\r\n\r\n        this.addMethod(new Method(\"sin\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.sin(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Sinus des Winkels.\"));\r\n\r\n        this.addMethod(new Method(\"cos\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.cos(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Cosinus des Winkels.\"));\r\n\r\n        this.addMethod(new Method(\"tan\", new Parameterlist([\r\n            { identifier: \"WinkelInRad\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.tan(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Tangens des Winkels.\"));\r\n\r\n        this.addMethod(new Method(\"asin\", new Parameterlist([\r\n            { identifier: \"WertDesSinus\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.asin(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Arcus-Sinus des Wertes in Rad.\"));\r\n\r\n        this.addMethod(new Method(\"acos\", new Parameterlist([\r\n            { identifier: \"WertDesCosinus\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.acos(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Arcus-Cosinus des Wertes in Rad.\"));\r\n\r\n        this.addMethod(new Method(\"atan\", new Parameterlist([\r\n            { identifier: \"WertDesTangens\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.atan(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Arcus-Tangens des Wertes in Rad.\"));\r\n\r\n        this.addMethod(new Method(\"atan2\", new Parameterlist([\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.atan2(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Sind (x, y) die kartesischen Koordinaten eines Punktes, so ist Math.atan2(x, y) der Winkel alpha der Polarkoordinaten (alpha, r) des Punktes. \\n**Bem.: **Alpha wird in Rad berechnet.\"));\r\n\r\n        this.addMethod(new Method(\"abs\", new Parameterlist([\r\n            { identifier: \"Wert\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.abs(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Betrag des Wertes.\"));\r\n\r\n        this.addMethod(new Method(\"abs\", new Parameterlist([\r\n            { identifier: \"Wert\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Math.abs(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Betrag des Wertes.\"));\r\n\r\n        this.addMethod(new Method(\"abs\", new Parameterlist([\r\n            { identifier: \"Wert\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.abs(<number>parameters[1].value);\r\n            }, false, true, \"Berechnet den Betrag des Wertes.\"));\r\n\r\n        this.addMethod(new Method(\"max\", new Parameterlist([\r\n            { identifier: \"a\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.max(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die größere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"max\", new Parameterlist([\r\n            { identifier: \"a\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Math.max(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die größere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"max\", new Parameterlist([\r\n            { identifier: \"a\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.max(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die größere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"min\", new Parameterlist([\r\n            { identifier: \"a\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Math.min(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die kleinere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"min\", new Parameterlist([\r\n            { identifier: \"a\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), floatPrimitiveType,\r\n            (parameters) => {\r\n                return Math.min(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die kleinere der beiden Zahlen zurück.\"));\r\n\r\n        this.addMethod(new Method(\"min\", new Parameterlist([\r\n            { identifier: \"a\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"b\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                return Math.min(<number>parameters[1].value, <number>parameters[2].value);\r\n            }, false, true, \"Gibt die kleinere der beiden Zahlen zurück.\"));\r\n\r\n    }\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, booleanPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\nimport { ArrayType } from \"../compiler/types/Array.js\";\r\nimport { abstandPunktZuGerade, abstandPunktZuStrecke, polygonEnthältPunkt, Punkt, schnittpunkteKreisStrecke, streckeSchneidetStrecke, vektorVonPolarkoordinaten } from \"../tools/MatheTools.js\";\r\nimport { param } from \"jquery\";\r\n\r\nexport class MathToolsClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"MathTools\", module, \"Klasse mit mathematischen Hilfsfunktionen als statische Methoden\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        let vector2Class = <Klass>module.typeStore.getType(\"Vector2\");\r\n        let vectorArrayClass = new ArrayType(vector2Class);\r\n\r\n        let xIndex = vector2Class.attributeMap.get(\"x\").index;\r\n        let yIndex = vector2Class.attributeMap.get(\"y\").index;\r\n\r\n\r\n        this.addMethod(new Method(\"intersectCircleWithPolygon\", new Parameterlist([\r\n            { identifier: \"mx\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"my\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"r\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"points\", type: vectorArrayClass, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), vectorArrayClass,\r\n            (parameters) => {\r\n\r\n                let mx: number = parameters[1].value;\r\n                let my: number = parameters[2].value;\r\n                let r: number = parameters[3].value;\r\n                let points: Value[] = parameters[4].value;\r\n\r\n                let punkte: Punkt[] = [];\r\n                for(let p of points){\r\n                    punkte.push({x: p.value.attributes[xIndex].value, y: p.value.attributes[yIndex].value});\r\n                }\r\n\r\n                let schnittpunkte: Punkt[] = [];\r\n                let m: Punkt = {x: mx, y: my};\r\n                for(let i = 0; i < punkte.length; i++){\r\n                    let p1 = punkte[i];\r\n                    let p2 = punkte[(i+1)%punkte.length];\r\n                    schnittpunkteKreisStrecke(m, r, p1, p2, schnittpunkte);\r\n                }\r\n\r\n                let returnArray: Value[] = []\r\n\r\n                for(let p of schnittpunkte){\r\n                    let pVector = new RuntimeObject(vector2Class);\r\n                    pVector.attributes[xIndex] = {type: doublePrimitiveType, value: p.x};\r\n                    pVector.attributes[yIndex] = {type: doublePrimitiveType, value: p.y};\r\n                    returnArray.push({type: vector2Class, value:pVector});\r\n                }\r\n\r\n                return returnArray;\r\n\r\n            }, false, true, \"Zu einem gegebenen Kreis werden die Punkte berechnet, die auf den Seiten eines gegebenen Polygons liegen.\"));\r\n\r\n        this.addMethod(new Method(\"intersectLineSegments\", new Parameterlist([\r\n            { identifier: \"p0\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"p1\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"p2\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"p3\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), vector2Class,\r\n            (parameters) => {\r\n\r\n                let p: Punkt[] = [];\r\n                for(let i = 0; i < 4; i++){\r\n                    let att = parameters[i].value.attributes;\r\n                    p.push({x: att[xIndex].value, y: att[yIndex].value})\r\n                }\r\n\r\n                let ps: Punkt = {x: 0, y: 0};\r\n                if(streckeSchneidetStrecke(p[0], p[1], p[2], p[3], ps)){\r\n                    let pVector = new RuntimeObject(vector2Class);\r\n                    pVector.attributes[xIndex] = {type: doublePrimitiveType, value: ps.x};\r\n                    pVector.attributes[yIndex] = {type: doublePrimitiveType, value: ps.y};\r\n                    return pVector;\r\n                } else {\r\n                    return null;                    \r\n                }\r\n\r\n            }, false, true, \"Berechnet den Schnittpunkt der Strecken [p0, p1] und [p2, p3]. Gibt null zurück, wenn sich die Strecken nicht schneiden oder wenn sie parallel sind und teilweise aufeinander liegen.\"));\r\n\r\n        this.addMethod(new Method(\"polygonContainsPoint\", new Parameterlist([\r\n            { identifier: \"polygonPoints\", type: vectorArrayClass, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"p\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let points = parameters[1].value;\r\n                let punkte: Punkt[] = [];\r\n                for(let p of points){\r\n                    punkte.push({x: p.value.attributes[xIndex].value, y: p.value.attributes[yIndex].value});\r\n                }\r\n\r\n                let att = parameters[2].value.attributes;\r\n                let p: Punkt = {x: att[xIndex].value, y: att[yIndex].value}\r\n\r\n                return polygonEnthältPunkt(punkte, p);\r\n\r\n            }, false, true, \"Gibt genau dann true zurück, wenn das Polygon den Punkt enthält.\"));\r\n\r\n            this.addMethod(new Method(\"distancePointToLine\", new Parameterlist([\r\n                { identifier: \"p\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"a\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"b\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), doublePrimitiveType,\r\n                (parameters) => {\r\n    \r\n                    let p: Punkt[] = [];\r\n                    for(let i = 0; i < 3; i++){\r\n                        let att = parameters[i].value.attributes;\r\n                        p.push({x: att[xIndex].value, y: att[yIndex].value})\r\n                    }\r\n    \r\n                    return abstandPunktZuGerade(p[1], p[2], p[0]);\r\n    \r\n                }, false, true, \"Berechnet den Abstand des Punktes P zur Gerade AB.\"));\r\n    \r\n            this.addMethod(new Method(\"distancePointToLineSegment\", new Parameterlist([\r\n                { identifier: \"p\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"a\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"b\", type: vector2Class, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), doublePrimitiveType,\r\n                (parameters) => {\r\n    \r\n                    let p: Punkt[] = [];\r\n                    for(let i = 0; i < 3; i++){\r\n                        let att = parameters[i].value.attributes;\r\n                        p.push({x: att[xIndex].value, y: att[yIndex].value})\r\n                    }\r\n    \r\n                    return abstandPunktZuStrecke(p[1], p[2], p[0]);\r\n    \r\n                }, false, true, \"Berechnet den Abstand des Punktes P zur Strecke [AB].\"));\r\n    \r\n    \r\n\r\n\r\n    }\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility, Interface } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\nimport { EnumRuntimeObject } from \"../compiler/types/Enum.js\";\r\nimport { SoundTools } from \"../tools/SoundTools.js\";\r\n\r\nexport class SystemClass extends Klass {\r\n\r\n    printStream: RuntimeObject;\r\n\r\n    deltaTimeMillis: number = 0; // when using WebSocket then the Server sends time synchronization\r\n\r\n    constructor(module: Module) {\r\n        super(\"System\", module, \"Klasse mit statischen Methoden für Systemfunktionen, z.B. Sound, Löschen der Ausgabe usw.\");\r\n\r\n        this.printStream = new RuntimeObject(<Klass>module.typeStore.getType(\"PrintStream\"));\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addAttribute(new Attribute(\"out\", module.typeStore.getType(\"PrintStream\"),\r\n            (value) => { value.value = this.printStream }, true, Visibility.public, true, \"PrintStream-Objekt, mit dem Text ausgegeben werden kann.\"));\r\n\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        // this.addMethod(new Method(\"clearScreen\", new Parameterlist([\r\n        // ]), null,\r\n        //     (parameters) => {\r\n        //         module.main.getInterpreter().printManager.clear();\r\n        //     }, false, true, \"Löscht den Bildschirm\"));\r\n\r\n        // this.addMethod(new Method(\"addKeyListener\", new Parameterlist([\r\n        //     { identifier: \"keyListener\", type: module.typeStore.getType(\"KeyListener\"), declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), null,\r\n        // (parameters) => {\r\n        //     let r: RuntimeObject = parameters[1].value;\r\n        //     let method = (<Klass>r.class).getMethodBySignature(\"onKeyTyped(String)\");\r\n\r\n        //     if (method != null) {\r\n\r\n        //         module.main.getInterpreter().keyboardTool.keyPressedCallbacks.push((key) => {\r\n\r\n        //             let program = method?.program;\r\n        //             let invoke = method?.invoke;\r\n\r\n        //             let stackElements: Value[] = [\r\n        //                 {\r\n        //                     type: r.class,\r\n        //                     value: r\r\n        //                 },\r\n        //                 {\r\n        //                     type: stringPrimitiveType,\r\n        //                     value: key\r\n        //                 }\r\n        //             ];\r\n\r\n        //             if (program != null) {\r\n        //                 module.main.getInterpreter().runTimer(method, stackElements, null, false);\r\n        //             } else if (invoke != null) {\r\n        //                 invoke([]);\r\n        //             }\r\n\r\n\r\n        //         });\r\n        //     }\r\n        // }    \r\n        // , false, true, \"Fügt einen KeyListener hinzu, dessen Methode keyTyped immer dann aufgerufen wird, wenn eine Taste gedrückt und anschließend losgelassen wird.\"));\r\n\r\n        // this.addMethod(new Method(\"playSound\", new Parameterlist([\r\n        //     { identifier: \"sound\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), null,\r\n        // (parameters) => {\r\n        //     let sound: string = parameters[1].value;\r\n        //     SoundTools.play(sound);\r\n        // }    \r\n        // , false, true, \"Spielt einen Sound ab. Die Möglichen Sounds sind als statische Variablen der Klasse Sound hinterlegt. Tippe als Parameter also Sound gefolgt von einem Punkt ein, um eine Auswahl zu sehen!\"));\r\n\r\n        this.addMethod(new Method(\"currentTimeMillis\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return Date.now() + this.deltaTimeMillis;\r\n            }\r\n            , false, true, \"Gibt die Anzahl der Millisekunden, die seit dem 01.01.1970 00:00:00 UTC vergangen sind, zurück.\"));\r\n\r\n        this.addMethod(new Method(\"exit\", new Parameterlist([\r\n            { identifier: \"status\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n                let console = module.main.getBottomDiv()?.console;\r\n                if(console != null){\r\n                    console.writeConsoleEntry(\"Das Programm wurde angehalten mit Statuswert: \" + parameters[1].value, null, \"#0000ff\");\r\n                    console.showTab();\r\n                }\r\n                module.main.getInterpreter().stop();\r\n            }\r\n            , false, true, \"Beendet das Programm und gibt den übergebenen Wert in der Konsole aus.\"));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class PrintStreamClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"PrintStream\", module, \"Interne Hilfsklasse, um System.out.println zu ermöglichen. Das Objekt System.out ist von der Klasse PrintStream.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"print\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.print(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus.\"));\r\n\r\n        this.addMethod(new Method(\"println\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.println(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus, gefolgt von einem Zeilensprung.\"));\r\n\r\n        this.addMethod(new Method(\"println\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.println(\"\");\r\n            }, false, true, \"Setzt den Cursor in die nächste Zeile.\"));\r\n\r\n\r\n    }\r\n\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility, Interface } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\nimport { EnumRuntimeObject } from \"../compiler/types/Enum.js\";\r\nimport { SoundTools } from \"../tools/SoundTools.js\";\r\n\r\nexport class SystemToolsClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"SystemTools\", module, \"Klasse mit statischen Methoden für Systemfunktionen, z.B. Löschen der Ausgabe, Registrieren eines Tastaturlisteners usw.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        this.staticClass.setupAttributeIndicesRecursive();\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        this.addMethod(new Method(\"clearScreen\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.clear();\r\n            }, false, true, \"Löscht den Bildschirm\"));\r\n\r\n        this.addMethod(new Method(\"setSpeed\", new Parameterlist([\r\n            {identifier: \"speed\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                let speed: number = parameters[1].value;\r\n                module.main.getInterpreter().controlButtons.speedControl.setSpeedInStepsPerSecond(speed >= 1 ? speed : \"max\");\r\n\r\n            }, false, true, \"Setzt die Ausführungsgeschwindigkeit. Der Parameter speed wir in Steps/Sekunde angegeben. Eine negative Zahl bedeutet: 'maximal'.\"));\r\n\r\n        this.addMethod(new Method(\"getSpeed\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                return module.main.getInterpreter().controlButtons.speedControl.getSpeedInStepsPerSecond();\r\n\r\n            }, false, true, \"Gibt die Ausführungsgeschwindigkeit in Steps pro Sekunde zurück.\"));\r\n\r\n        this.addMethod(new Method(\"pause\", new Parameterlist([\r\n            {identifier: \"durationInMs\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n            }, false, true, \"Pausiert das Programm für die angegebene Zeit in ms.\"));\r\n\r\n        this.addMethod(new Method(\"addKeyListener\", new Parameterlist([\r\n            { identifier: \"keyListener\", type: module.typeStore.getType(\"KeyListener\"), declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                let r: RuntimeObject = parameters[1].value;\r\n                let method = (<Klass>r.class).getMethodBySignature(\"onKeyTyped(String)\");\r\n\r\n                if (method != null) {\r\n\r\n                    module.main.getInterpreter().keyboardTool.keyPressedCallbacks.push((key) => {\r\n\r\n                        let program = method?.program;\r\n                        let invoke = method?.invoke;\r\n\r\n                        let stackElements: Value[] = [\r\n                            {\r\n                                type: r.class,\r\n                                value: r\r\n                            },\r\n                            {\r\n                                type: stringPrimitiveType,\r\n                                value: key\r\n                            }\r\n                        ];\r\n\r\n                        if (program != null) {\r\n                            module.main.getInterpreter().runTimer(method, stackElements, null, false);\r\n                        } else if (invoke != null) {\r\n                            invoke([]);\r\n                        }\r\n\r\n\r\n                    });\r\n                }\r\n            }\r\n            , false, true, \"Fügt einen KeyListener hinzu, dessen Methode keyTyped immer dann aufgerufen wird, wenn eine Taste gedrückt und anschließend losgelassen wird.\"));\r\n\r\n        // this.addMethod(new Method(\"playSound\", new Parameterlist([\r\n        //     { identifier: \"sound\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        // ]), null,\r\n        // (parameters) => {\r\n        //     let sound: string = parameters[1].value;\r\n        //     SoundTools.play(sound);\r\n        // }    \r\n        // , false, true, \"Spielt einen Sound ab. Die Möglichen Sounds sind als statische Variablen der Klasse Sound hinterlegt. Tippe als Parameter also Sound gefolgt von einem Punkt ein, um eine Auswahl zu sehen!\"));\r\n    }\r\n}\r\n\r\nexport class KeyListener extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        super(\"KeyListener\", module, \"Interface mit Methode onKeyTyped. Eine Klasse, die dieses Interface implementiert, kann auf Tastatureingaben reagieren. Ein Objekt dieser Klasse muss zuvor aber mit System.addKeyListener() registriert werden.\");\r\n\r\n        this.addMethod(new Method(\"onKeyTyped\", new Parameterlist([\r\n            { identifier: \"key\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, nachdem eine Taste gedrückt wurde.\"));\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class PrintStreamClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"PrintStream\", module, \"Interne Hilfsklasse, um System.out.println zu ermöglichen. Das Objekt System.out ist von der Klasse PrintStream.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addMethod(new Method(\"print\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.print(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus.\"));\r\n\r\n        this.addMethod(new Method(\"println\", new Parameterlist([\r\n            { identifier: \"text\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().printManager.println(parameters[1].value);\r\n            }, false, true, \"Gibt den Text aus, gefolgt von einem Zeilensprung.\"));\r\n\r\n\r\n    }\r\n\r\n}","import { Type, Method, Parameterlist, Value, Attribute } from \"../compiler/types/Types.js\";\r\nimport { Klass, Visibility, Interface } from \"../compiler/types/Class.js\";\r\nimport { stringPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Module } from \"../compiler/parser/Module.js\";\r\nimport { PrintManager } from \"../main/gui/PrintManager.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\nimport { Enum } from \"../compiler/types/Enum.js\";\r\nimport { InterpreterState, Interpreter } from \"../interpreter/Interpreter.js\";\r\nimport { Program } from \"../compiler/parser/Program.js\";\r\n\r\n\r\nexport class Runnable extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Runnable\", module);\r\n\r\n        this.addMethod(new Method(\"run\", new Parameterlist([\r\n            // { identifier: \"deltaTimeInMs\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird vom Timer immer wieder aufgerufen\"));\r\n    }\r\n\r\n}\r\n\r\ntype TimerEntry = {\r\n    timerListener: RuntimeObject,\r\n    dt: number,\r\n    running: boolean,\r\n    lastTimeFired: number,\r\n    method: Method\r\n}\r\n\r\nexport class TimerClass extends Klass {\r\n\r\n    timerEntries: TimerEntry[] = [];\r\n    timerRunning: boolean = false;\r\n\r\n    timerStarted: boolean = false;\r\n\r\n    constructor(module: Module) {\r\n        super(\"Timer\", module, \"Timer Klasse zur periodischen Ausführung von Methoden\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n\r\n        this.addMethod(new Method(\"repeat\", new Parameterlist([\r\n            {\r\n                identifier: \"runnable\", type: module.typeStore.getType(\"Runnable\"),\r\n                declaration: null, usagePositions: null, isFinal: true\r\n            },\r\n            {\r\n                identifier: \"deltaTimeInMs\", type: intPrimitiveType,\r\n                declaration: null, usagePositions: null, isFinal: true\r\n            },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let tl: RuntimeObject = <RuntimeObject>parameters[1].value;\r\n                let dt: number = <number>parameters[2].value;\r\n\r\n                let timerEntry: TimerEntry = {\r\n                    timerListener: tl,\r\n                    dt: dt,\r\n                    lastTimeFired: 0,\r\n                    running: true,\r\n                    method: tl.class.getMethod(\"run\", new Parameterlist([\r\n                        // {\r\n                        //     identifier: \"deltaTimeInMs\",\r\n                        //     type: intPrimitiveType,\r\n                        //     declaration: null,\r\n                        //     isFinal: true,\r\n                        //     usagePositions: null\r\n                        // }\r\n                    ]))\r\n                }\r\n\r\n                this.timerEntries.push(timerEntry);\r\n\r\n                // console.log(\"TimerListener added with dt = \" + dt + \" ms.\");\r\n\r\n            }, false, true, \"Fügt ein neues TimerListener-Objekt hinzu und ruft dessen tick-Methode immer wieder auf.\"));\r\n\r\n    }\r\n\r\n    startTimer(){\r\n        if(!this.timerStarted){\r\n            this.timerStarted = true;\r\n            this.processTimerEntries();\r\n        }\r\n    }\r\n    \r\n    stopTimer(){\r\n        this.timerStarted = false;\r\n    }\r\n\r\n    processTimerEntries() {\r\n\r\n        if(!this.timerStarted){\r\n            return;\r\n        }\r\n\r\n        if (this.timerEntries.length > 0) {\r\n            let interpreter = this.module?.main?.getInterpreter();\r\n\r\n            if (interpreter != null) {\r\n                if (!this.timerRunning && interpreter.state == InterpreterState.running) {\r\n                    let t: number = performance.now();\r\n                    for (let timerentry of this.timerEntries) {\r\n                        let dt = t - timerentry.lastTimeFired;\r\n                        if (dt >= timerentry.dt) {\r\n                            this.runEntry(timerentry, interpreter, Math.round(dt));\r\n                            timerentry.lastTimeFired = t;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                switch (interpreter.state) {\r\n                    case InterpreterState.done:\r\n                    case InterpreterState.error:\r\n                    case InterpreterState.not_initialized:\r\n                        this.timerEntries = [];\r\n                        this.timerRunning = false;\r\n                        break;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        let that = this;\r\n        setTimeout(() => {\r\n            that.processTimerEntries();\r\n        }, 10);\r\n\r\n    }\r\n\r\n    runEntry(timerentry: TimerEntry, interpreter: Interpreter, dt: number) {\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: timerentry.timerListener.class,\r\n                value: timerentry.timerListener\r\n            },\r\n            // {\r\n            //     type: intPrimitiveType,\r\n            //     value: dt\r\n            // }\r\n        ];\r\n\r\n        this.timerRunning = true;\r\n        let that = this;\r\n\r\n        interpreter.runTimer(timerentry.method, stackElements, (interpreter) => {\r\n            that.timerRunning = false;\r\n        }, false);\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { Interface, TypeVariable, Klass } from \"../../compiler/types/Class.js\";\r\nimport { voidPrimitiveType, booleanPrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\n\r\nexport class MapClass extends Interface {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Map\", module, \"Interface mit Methoden einer Map (Schlüssel-Wert-Speicher)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        let typeK: Klass = (<Klass>objectType).clone();\r\n        typeK.identifier = \"K\";\r\n        typeK.isTypeVariable = true;\r\n\r\n        let tvK: TypeVariable = {\r\n            identifier: \"K\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeK\r\n        };\r\n        this.typeVariables.push(tvK);\r\n\r\n        let typeV: Klass = (<Klass>objectType).clone();\r\n        typeV.identifier = \"V\";\r\n        typeV.isTypeVariable = true;\r\n\r\n        let tvV: TypeVariable = {\r\n            identifier: \"V\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeV\r\n        };\r\n        this.typeVariables.push(tvV);\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt die Anzahl der Elemente der Map zurück.\"));\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Testet, ob die Map leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"containsKey\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn die Map zum Schlüssel key einen Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"containsValue\", new Parameterlist([\r\n            { identifier: \"value\", type: typeV, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt genau dann true zurück, wenn die Map den Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            null,  // no implementation!\r\n            true, false, \"Gibt den Wert zum Schlüssel key zurück. Gibt null zurück, falls die Map zum Schlüssel key keinen Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"put\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"value\", type: typeV, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            null,  // no implementation!\r\n            true, false, \"Speichert das key-value pair in der Map. Falls zum key vorher schon ein Value gespeichert war, wird dieser zurückgegeben. In der Map wird er dann durch den neuen Value überschrieben. Falls es zum key noch keinen value in der Map gab, wird null zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            null,  // no implementation!\r\n            true, false, \"Entfernt alle Element aus dieser Map.\"));\r\n\r\n    }\r\n\r\n}\r\n","import { TextPosition, TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Program, Statement } from \"../../compiler/parser/Program.js\";\r\nimport { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { booleanPrimitiveType, stringPrimitiveType, StringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, PrimitiveType, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { ListHelper } from \"./ArrayList.js\";\r\n\r\n\r\nexport class MapHelper {\r\n\r\n    keyArray: Value[] = [];\r\n    valueArray: Value[] = [];\r\n\r\n    map: Map<any, Value> = new Map(); // Maps key objects to value-Values\r\n\r\n    constructor(private runtimeObject: RuntimeObject, public interpreter: Interpreter, private module: Module) {\r\n    }\r\n\r\n    get(key: Value){\r\n        return this.map.get(key.value);\r\n    }\r\n\r\n    set(key: Value, value: Value): Value {\r\n\r\n        let old = this.map.get(key.value);\r\n\r\n        if(old == null){\r\n            this.keyArray.push(key);\r\n        } else {\r\n            this.valueArray.splice(this.valueArray.indexOf(old), 1);\r\n        }\r\n\r\n        this.valueArray.push(value);\r\n        \r\n        this.map.set(key.value, value);\r\n\r\n        return old;\r\n\r\n    }\r\n\r\n    allElementsPrimitive(): boolean {\r\n        for (let v of this.keyArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n            }\r\n        }\r\n        for (let v of this.valueArray) {\r\n            if (!(v.type instanceof PrimitiveType || [\"String\", \"_Double\", \"Integer\", \"Boolean\" ,\"Character\"].indexOf(v.type.identifier) >= 0)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    to_String(): any {\r\n\r\n        if (this.allElementsPrimitive()) {\r\n            let s = \"[\";\r\n            for (let i = 0; i < this.keyArray.length; i++) {\r\n                s += \"\" + this.keyArray[i].value + \" => \" + this.valueArray[i].value;\r\n                if (i < this.keyArray.length - 1) s += \", \";\r\n            }\r\n\r\n            return s + \"]\";\r\n        }\r\n\r\n        let position: TextPosition = {\r\n            line: 1,\r\n            column: 1,\r\n            length: 1\r\n        }\r\n\r\n        let statements: Statement[] = [\r\n            {\r\n                type: TokenType.noOp,\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n            {\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \"[\",\r\n                position: position,\r\n                stepFinished: false\r\n            },\r\n        ];\r\n\r\n        let toStringParameters = new Parameterlist([]);\r\n\r\n        for (let i = 0; i < this.valueArray.length; i++) {\r\n\r\n            let key = this.keyArray[i];\r\n            if (key.type instanceof PrimitiveType || key.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: key.type.castTo(key, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: key.type,\r\n                    value: key.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>key.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            statements.push({\r\n                type: TokenType.pushConstant,\r\n                dataType: stringPrimitiveType,\r\n                value: \" => \",\r\n                position: position,\r\n                stepFinished: false\r\n            });\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n\r\n            let value = this.valueArray[i];\r\n            if (value.value == null || value.type instanceof PrimitiveType || value.type instanceof StringPrimitiveType) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: value.value == null ? \"null\" : value.type.castTo(value, stringPrimitiveType).value,\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n            } else {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: value.type,\r\n                    value: value.value,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n                statements.push({\r\n                    type: TokenType.callMethod,\r\n                    method: (<Klass | Interface | Enum>value.type).getMethod(\"toString\", toStringParameters),\r\n                    isSuperCall: false,\r\n                    stackframeBegin: -1,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n            statements.push({\r\n                type: TokenType.binaryOp,\r\n                operator: TokenType.plus,\r\n                leftType: stringPrimitiveType,\r\n                stepFinished: false,\r\n                position: position\r\n            });\r\n\r\n            if (i < this.valueArray.length - 1) {\r\n                statements.push({\r\n                    type: TokenType.pushConstant,\r\n                    dataType: stringPrimitiveType,\r\n                    value: \", \",\r\n                    position: position,\r\n                    stepFinished: false\r\n                });\r\n                statements.push({\r\n                    type: TokenType.binaryOp,\r\n                    leftType: stringPrimitiveType,\r\n                    operator: TokenType.plus,\r\n                    stepFinished: false,\r\n                    position: position\r\n                });\r\n\r\n            }\r\n\r\n        }\r\n\r\n        statements.push({\r\n            type: TokenType.pushConstant,\r\n            dataType: stringPrimitiveType,\r\n            value: \"]\",\r\n            position: position,\r\n            stepFinished: false\r\n        });\r\n\r\n        statements.push({\r\n            type: TokenType.binaryOp,\r\n            operator: TokenType.plus,\r\n            leftType: stringPrimitiveType,\r\n            stepFinished: false,\r\n            position: position\r\n        });\r\n\r\n        // statements.push({\r\n        //     type: TokenType.binaryOp,\r\n        //     operator: TokenType.plus,\r\n        //     leftType: stringPrimitiveType,\r\n        //     stepFinished: false,\r\n        //     position: position\r\n        // });\r\n\r\n        statements.push({\r\n            type: TokenType.return,\r\n            copyReturnValueToStackframePos0: true,\r\n            leaveThisObjectOnStack: false,\r\n            stepFinished: false,\r\n            position: position,\r\n            methodWasInjected: true\r\n        });\r\n\r\n        let program: Program = {\r\n            module: this.module,\r\n            statements: statements,\r\n            labelManager: null\r\n        }\r\n\r\n        let method: Method = new Method(\"toString\", new Parameterlist([]), stringPrimitiveType, program, false, false);\r\n        this.interpreter.runTimer(method, [], () => console.log(\"List.toString fertig!\"), true)\r\n\r\n        return \"\";\r\n    }\r\n\r\n    size(): number {\r\n        return this.valueArray.length;\r\n    }\r\n\r\n    isEmpty(): boolean {\r\n        return this.valueArray.length == 0;\r\n    }\r\n\r\n    containsKey(key: Value): any {\r\n        return this.map.get(key.value) != null;\r\n    }\r\n\r\n    containsValue(value: Value): any {\r\n        for(let v of this.valueArray){\r\n            if(v.value == value.value) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    clear() {\r\n        this.valueArray = [];\r\n        this.keyArray = [];\r\n        this.map.clear();\r\n    }\r\n\r\n}\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass, TypeVariable } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { MapHelper } from \"./MapHelper.js\";\r\n\r\nexport class HashMapClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"HashMap\", module, \"Map-Klasse mit Zugriffszeit proportional zu log(Anzahl der Elemente)\");\r\n\r\n        let objectType = module.typeStore.getType(\"Object\");\r\n\r\n        this.setBaseClass(<Klass>objectType);\r\n\r\n        let typeK: Klass = (<Klass>objectType).clone();\r\n        typeK.identifier = \"K\";\r\n        typeK.isTypeVariable = true;\r\n\r\n        let tvK: TypeVariable = {\r\n            identifier: \"K\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeK\r\n        };\r\n        this.typeVariables.push(tvK);\r\n\r\n        let typeV: Klass = (<Klass>objectType).clone();\r\n        typeV.identifier = \"V\";\r\n        typeV.isTypeVariable = true;\r\n\r\n        let tvV: TypeVariable = {\r\n            identifier: \"V\",\r\n            scopeFrom: { line: 1, column: 1, length: 1 },\r\n            scopeTo: { line: 1, column: 1, length: 1 },\r\n            type: typeV\r\n        };\r\n        this.typeVariables.push(tvV);\r\n\r\n\r\n\r\n        let setInterface = (<Interface>module.typeStore.getType(\"Map\")).clone();\r\n        setInterface.typeVariables = [tvK, tvV];\r\n\r\n        this.implements.push(setInterface);\r\n\r\n        this.addMethod(new Method(\"HashMap\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let mh = new MapHelper(o, module.main.getInterpreter(), module);\r\n                o.intrinsicData[\"MapHelper\"] = mh;\r\n\r\n            }, false, false, 'Instanziert eine neue HashMap', true));\r\n\r\n\r\n        this.addMethod(new Method(\"put\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"value\", type: typeV, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: Value = parameters[1];\r\n                let value: Value = parameters[2];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.set(key, value);\r\n\r\n            }, false, false, \"Speichert das key-value pair in der Map. Falls zum key vorher schon ein Value gespeichert war, wird dieser zurückgegeben. In der Map wird er dann durch den neuen Value überschrieben. Falls es zum key noch keinen value in der Map gab, wird null zurückgegeben.\"));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.clear();\r\n\r\n            },\r\n            false, false, \"Entfernt alle Key-Value-Pairs aus dieser HashMap.\"));\r\n\r\n        this.addMethod(new Method(\"containsKey\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: Value = parameters[1];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.containsKey(key);\r\n\r\n            },  // no implementation!\r\n            false, false, \"Gibt genau dann true zurück, wenn die Map zum Schlüssel key einen Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"containsValue\", new Parameterlist([\r\n            { identifier: \"value\", type: typeV, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let value: Value = parameters[1];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.containsValue(value);\r\n\r\n            },  // no implementation!\r\n            false, false, \"Gibt genau dann true zurück, wenn die Map den Wert enthält.\"));\r\n\r\n        this.addMethod(new Method(\"get\", new Parameterlist([\r\n            { identifier: \"key\", type: typeK, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), typeV,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let key: Value = parameters[1];\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                let v: Value = ah.get(key);\r\n                return v == null ? null : v.value;\r\n\r\n            },  // no implementation!\r\n            false, false, \"Gibt den Wert zum Schlüssel key zurück. Gibt null zurück, falls die Map zum Schlüssel key keinen Wert enthält.\"));\r\n\r\n\r\n        this.addMethod(new Method(\"isEmpty\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.isEmpty();\r\n\r\n            },\r\n            false, false, \"Testet, ob die HashMap leer ist.\"));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.size();\r\n\r\n            },\r\n            false, false, \"Gibt die Anzahl der key-value-pairs der HashMap zurück.\"));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ah: MapHelper = o.intrinsicData[\"MapHelper\"];\r\n\r\n                return ah.to_String();\r\n\r\n            }, false, false));\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, doublePrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { PolygonHelper } from \"./Polygon.js\";\r\n\r\nexport class TriangleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Triangle\", module, \"Dreieck\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Polygon\"));\r\n\r\n        this.addMethod(new Method(\"Triangle\", new Parameterlist([\r\n            { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x3\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y3\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let pointsNumber: number[] = [];\r\n                for(let i = 1; i <= 6; i++){\r\n                    pointsNumber.push(parameters[i].value);\r\n                }\r\n\r\n                let ph = new PolygonHelper(pointsNumber, true, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Dreieck.', true));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Triangle-Objekts und git sie zurück.', false));\r\n\r\n        }\r\n\r\n}\r\n","import { TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { Enum, EnumRuntimeObject } from \"../../compiler/types/Enum.js\";\r\nimport { intPrimitiveType, stringPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\n\r\nexport type LocalDateTimeIntrinsicData = {\r\n    date: Date\r\n}\r\n\r\nexport class LocalDateTimeClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"LocalDateTime\", module, \"Ein LocalDate-Objekt speichert einen Zeitpunkt (Datum und Uhrzeit).\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        let dayOfWeekType = <Enum>module.typeStore.getType(\"DayOfWeek\");\r\n        let MonthType = <Enum>module.typeStore.getType(\"Month\");\r\n\r\n        // this.staticClass.classObject = new RuntimeObject(this.staticClass);\r\n        // this.staticClass.classObject.initializeAttributeValues();\r\n        \r\n        this.addMethod(new Method(\"LocalDateTime\", new Parameterlist([]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                var today = new Date();\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: today\r\n                };\r\n\r\n                o.intrinsicData[\"ldt\"] = intrinsicData;\r\n\r\n                return;\r\n\r\n            }, false, false, 'Holt den aktuellen Zeitpunkt von der Systemuhr des Rechners und gibt ihn als LocalDateTime-Objekt zurück.'\r\n            , true));\r\n\r\n\r\n        this.addMethod(new Method(\"now\", new Parameterlist([]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n\r\n                var today = new Date();\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: today\r\n                };\r\n\r\n                o.intrinsicData[\"ldt\"] = intrinsicData;\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Holt den aktuellen Zeitpunkt von der Systemuhr des Rechners und gibt ihn als LocalDateTime-Objekt zurück.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"of\", new Parameterlist([\r\n            { identifier: \"year\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"month\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"dayOfMonth\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"hour\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"minute\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"second\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n                let year: number = Math.trunc(parameters[1].value);\r\n                let month: number = Math.trunc(parameters[2].value);\r\n                let dayOfMonth: number = Math.trunc(parameters[3].value);\r\n                let hour: number = Math.trunc(parameters[4].value);\r\n                let minute: number = Math.trunc(parameters[5].value);\r\n                let second: number = Math.trunc(parameters[6].value);\r\n\r\n                var date = new Date(year, month - 1, dayOfMonth, hour, minute, second);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: date\r\n                };\r\n\r\n                o.intrinsicData[\"ldt\"]= intrinsicData;\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Gibt ein LocalDateTime-Objekt zurück, das den durch year, month (1 - 12), dayOfMonth, hour, minute, second beschriebenen Zeitpunkt repräsentiert.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"of\", new Parameterlist([\r\n            { identifier: \"year\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"month\", type: MonthType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"dayOfMonth\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"hour\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"minute\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"second\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n                let year: number = Math.trunc(parameters[1].value);\r\n                let month: EnumRuntimeObject = parameters[2].value;\r\n                let dayOfMonth: number = Math.trunc(parameters[3].value);\r\n                let hour: number = Math.trunc(parameters[4].value);\r\n                let minute: number = Math.trunc(parameters[5].value);\r\n                let second: number = Math.trunc(parameters[6].value);\r\n\r\n                var date = new Date(year, month.enumValue.ordinal, dayOfMonth, hour, minute, second);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: date\r\n                };\r\n\r\n                o.intrinsicData[\"ldt\"] = intrinsicData;\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Gibt ein LocalDateTime-Objekt zurück, das den durch year, month (1 - 12), dayOfMonth, hour, minute, second beschriebenen Zeitpunkt repräsentiert.'\r\n            , false));\r\n\r\n        this.addMethod(new Method(\"plusDays\", new Parameterlist([\r\n            { identifier: \"days\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let days: number = Math.trunc(parameters[1].value);\r\n\r\n                let oldDate: Date = (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date;\r\n                let newDate: Date = new Date(oldDate.getTime() + days*24*3600*1000);\r\n\r\n                let o1: RuntimeObject = new RuntimeObject(this);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: newDate\r\n                };\r\n\r\n                o1.intrinsicData[\"ldt\"] = intrinsicData;\r\n\r\n                return o1;\r\n\r\n            }, false, false, 'Gibt ein neues LocalDateTime-Objekt zurück, das einen Zeitpunkt repräsentiert, der um die übergebene Anzahl von Tagen später liegt.', false));\r\n\r\n        this.addMethod(new Method(\"minusDays\", new Parameterlist([\r\n            { identifier: \"days\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), this,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let days: number = Math.trunc(parameters[1].value);\r\n\r\n                let oldDate: Date = (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date;\r\n                let newDate: Date = new Date(oldDate.getTime() - days*24*3600*1000);\r\n\r\n                let o1: RuntimeObject = new RuntimeObject(this);\r\n\r\n                let intrinsicData: LocalDateTimeIntrinsicData = {\r\n                    date: newDate\r\n                };\r\n\r\n                o1.intrinsicData[\"ldt\"] = intrinsicData;\r\n\r\n                return o1;\r\n\r\n            }, false, false, 'Gibt ein neues LocalDateTime-Objekt zurück, das einen Zeitpunkt repräsentiert, der um die übergebene Anzahl von Tagen früher liegt.', false));\r\n\r\n        this.addMethod(new Method(\"compareTo\", new Parameterlist([\r\n            { identifier: \"date\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let oldMs: number = (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getTime();\r\n                let newMs: number = (<LocalDateTimeIntrinsicData>(o1.intrinsicData[\"ldt\"])).date.getTime();\r\n\r\n                return Math.sign(oldMs - newMs);\r\n\r\n            }, false, false, 'Gibt 1 zurück, falls das Datum größer ist als das übergebene, 0, falls sie gleich sind und -1, falls das Datum kleiner ist als das übergebene.', false));\r\n\r\n        this.addMethod(new Method(\"until\", new Parameterlist([\r\n            { identifier: \"date\", type: this, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let oldMs: number = (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getTime();\r\n                let newMs: number = (<LocalDateTimeIntrinsicData>(o1.intrinsicData[\"ldt\"])).date.getTime();\r\n\r\n                return (oldMs - newMs)/(24*3600);\r\n\r\n            }, false, false, 'Gibt zurück, wie viele Tage (gerundet) zwischen den beiden Zeitpunkten liegen.', false));\r\n\r\n        this.addMethod(new Method(\"getYear\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getFullYear();\r\n\r\n            }, false, false, 'Gibt das Jahr zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getMonthValue\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getMonth() + 1;\r\n\r\n            }, false, false, 'Gibt den Monat als Zahl zurück (Januar == 1, Februar == 2, ..., Dezember == 12).', false));\r\n\r\n        this.addMethod(new Method(\"getDayOfMonth\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getDate();\r\n\r\n            }, false, false, 'Gibt den Tag innerhalb des Monats zurück (Zahl von 1 bis 31).', false));\r\n\r\n        this.addMethod(new Method(\"getHour\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getHours();\r\n\r\n            }, false, false, 'Gibt die Stunde innerhalb des Tages zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getMinute\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getMinutes();\r\n\r\n            }, false, false, 'Gibt die Minute zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getSecond\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                return (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getSeconds();\r\n\r\n            }, false, false, 'Gibt die Sekunde zurück.', false));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let date = (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date;\r\n\r\n                let td = (value: number) => {\r\n                    if(value < 10) return \"0\" + value;\r\n                    return \"\" + value;\r\n                }\r\n\r\n                return `${td(date.getDate())}.${td(date.getMonth() + 1)}.${td(date.getFullYear())} ${td(date.getHours())}:${td(date.getMinutes())}:${td(date.getSeconds())}`;\r\n\r\n            }, false, false, 'Gibt den Wert in der Form 12.03.2007 10:15:30 zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getDayOfWeek\", new Parameterlist([\r\n        ]), dayOfWeekType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let dow = (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getDay();\r\n                return dayOfWeekType.enumInfoList[dow - 1].object;\r\n\r\n            }, false, false, 'Gibt die den Wochentag zurück. Falls Du ihn als Zahl (0 == Montag, ...) benötigst, nutze getDayOfWeek().toOrdinal(). ', false));\r\n\r\n        this.addMethod(new Method(\"getMonth\", new Parameterlist([\r\n        ]), MonthType,\r\n            (parameters) => {\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let monthIndex = (<LocalDateTimeIntrinsicData>(o.intrinsicData[\"ldt\"])).date.getMonth();\r\n                return MonthType.enumInfoList[monthIndex].object;\r\n\r\n            }, false, false, 'Gibt die den Monat zurück. Falls Du ihn als Zahl (1 == Januar, ...) benötigst, nutze getMonthValue()', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class DayOfWeekEnum extends Enum {\r\n\r\n    constructor(module: Module) {\r\n        super(\"DayOfWeek\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Montag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Dienstag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Mittwoch\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Donnerstag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Freitag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Samstag\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Sonntag\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Wochentag\"\r\n    }\r\n}\r\n\r\nexport class MonthEnum extends Enum {\r\n\r\n    constructor(module: Module) {\r\n        super(\"Month\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Januar\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Februar\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"März\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"April\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Mai\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Juni\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Juli\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"August\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Septemter\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Oktober\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"November\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"Dezember\"\r\n            },\r\n        ]);\r\n\r\n        this.documentation = \"Monat\"\r\n    }\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { PolygonHelper } from \"./Polygon.js\";\r\n\r\nexport class LineClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Line\", module, \"Strecke (gerade Linie zwischen zwei Punkten)\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"Line\", new Parameterlist([\r\n            { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x1: number = parameters[1].value;\r\n                let y1: number = parameters[2].value;\r\n                let x2: number = parameters[3].value;\r\n                let y2: number = parameters[4].value;\r\n\r\n                let pointsNumber: number[] = [x1, y1, x2, y2];\r\n\r\n                let ph = new PolygonHelper(pointsNumber, false, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert eine Strecke mit Anfangspunkt (x1/y1) und Endpunkt (x2/y2).', true));\r\n\r\n            this.addMethod(new Method(\"copy\", new Parameterlist([\r\n            ]), this,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n    \r\n                    if (sh.testdestroyed(\"copy\")) return;\r\n    \r\n                    return sh.getCopy(<Klass>o.class);\r\n    \r\n                }, false, false, 'Erstellt eine Kopie der Strecke und git sie zurück.', false));\r\n\r\n                this.addMethod(new Method(\"setPoint\", new Parameterlist([\r\n                    { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"index\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                ]), null,\r\n                    (parameters) => {\r\n        \r\n                        let o: RuntimeObject = parameters[0].value;\r\n                        let x: number = parameters[1].value;\r\n                        let y: number = parameters[2].value;\r\n                        let index: number = parameters[3].value;\r\n                        let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n        \r\n                        if (sh.testdestroyed(\"setPoint\")) return;\r\n        \r\n                        sh.setPoint(x, y, index - 1);\r\n        \r\n                    }, false, false, 'Ändert einen Punkt des Polygons. index == 1 bedeutet: Anfangspunkt; index == 2 bedeutet: Endpunkt', false));\r\n        \r\n                this.addMethod(new Method(\"setPoints\", new Parameterlist([\r\n                    { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                    { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                ]), null,\r\n                    (parameters) => {\r\n        \r\n                        let o: RuntimeObject = parameters[0].value;\r\n                        let x1: number = parameters[1].value;\r\n                        let y1: number = parameters[2].value;\r\n                        let x2: number = parameters[3].value;\r\n                        let y2: number = parameters[4].value;\r\n                                let sh: PolygonHelper = o.intrinsicData[\"Actor\"];\r\n        \r\n                        if (sh.testdestroyed(\"setPoints\")) return;\r\n        \r\n                        sh.setPoints([x1, y1, x2, y2]);\r\n        \r\n                    }, false, false, 'Ändert die Punkte der Strecke. (x1/y1) ist der neue Anfangspunkt, (x2/y2) ist der neue Endpunkt.', false));\r\n        \r\n     \r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, stringPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist, Value } from \"../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\n\r\nexport class Vector2Class extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Vector2\", module, \"Repräsentiert einen zweidimensionalen Vektor\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.addAttribute(new Attribute(\"x\", doublePrimitiveType,\r\n            null, false, Visibility.public, false, \"x-Komponente des Vektors\"));\r\n\r\n        this.addAttribute(new Attribute(\"y\", doublePrimitiveType,\r\n            null, false, Visibility.public, false, \"y-Komponente des Vektors\"));\r\n\r\n        this.setupAttributeIndicesRecursive();\r\n\r\n        let xIndex = this.attributeMap.get(\"x\").index;\r\n        let yIndex = this.attributeMap.get(\"y\").index;\r\n        \r\n\r\n        this.addMethod(new Method(\"Vector2\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                o.attributes[xIndex] = { type: doublePrimitiveType, value: x };\r\n                o.attributes[yIndex] = { type: doublePrimitiveType, value: y };\r\n\r\n            }, false, false, 'Instanziert einen neuen zweidimensionalen Vektor mit den Komponenten x und y.', true));\r\n\r\n        this.addMethod(new Method(\"fromPolarCoordinates\", new Parameterlist([\r\n            { identifier: \"r\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"alphaDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = new RuntimeObject(this);\r\n                let r: number = parameters[1].value;\r\n                let alphaDeg: number = parameters[2].value;\r\n\r\n                alphaDeg *= Math.PI / 180.0;\r\n\r\n                o.attributes[xIndex] = { type: doublePrimitiveType, value: Math.cos(alphaDeg) * r };\r\n                o.attributes[yIndex] = { type: doublePrimitiveType, value: Math.sin(alphaDeg) * r };\r\n\r\n                return o;\r\n\r\n            }, false, true, 'Gibt einen neuen zweidimensionalen Vektor zurück, der mit den Polarkoordinaten (r/alphaDeg) gebildet wird. Datei ist r (Abstand zum Ursprung des Koordinatensystems) und alphaDeg (Winkel zur positiven x-Achse in Grad).', false));\r\n\r\n        this.addMethod(new Method(\"toString\", new Parameterlist([\r\n        ]), stringPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                return `(${x}/${y})`;\r\n\r\n            }, false, false, 'Gibt den Vektor als Zeichenkette in der Form \"(x/y)\" zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getAngleDeg\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let angle = Math.atan2(y, x) / Math.PI * 180;\r\n\r\n                return angle >= 0 ? angle : 360 + angle;\r\n\r\n            }, false, false, 'Gibt den zur positiven x-Achse in Grad zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getAngleRad\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let angle = Math.atan2(y, x);\r\n\r\n                return angle >= 0 ? angle : Math.PI * 2 + angle;\r\n\r\n            }, false, false, 'Gibt den zur positiven x-Achse im Bogenmaß zurück.', false));\r\n\r\n        this.addMethod(new Method(\"getLength\", new Parameterlist([\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                return Math.sqrt(x * x + y * y);\r\n\r\n            }, false, false, 'Gibt die Länge des Vectors zurück.', false));\r\n\r\n        this.addMethod(new Method(\"toUnitVector\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let o1: RuntimeObject = new RuntimeObject(this);\r\n                let length: number = Math.sqrt(x * x + y * y);\r\n\r\n                if (Math.abs(length) > 0.00000000001) {\r\n                    x /= length;\r\n                    y /= length;\r\n                } else {\r\n                    x = 0;\r\n                    y = 0;\r\n                }\r\n\r\n                o1.attributes[xIndex] = { type: doublePrimitiveType, value: x };\r\n                o1.attributes[yIndex] = { type: doublePrimitiveType, value: y };\r\n\r\n                return o1;\r\n\r\n            }, false, false, 'Gibt den zum Vektor zugehörigen Einheitsvektor (d.h. den Vektor mit derselben Richtung, aber der Länge 1) zurück.', false));\r\n\r\n        this.addMethod(new Method(\"setLength\", new Parameterlist([\r\n            { identifier: \"length\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let length: number = parameters[1].value;\r\n\r\n                let l = Math.sqrt(x * x + y * y);\r\n                if (l > 0) {\r\n\r\n                    o.attributes[xIndex].value = x / l * length;\r\n                    o.attributes[yIndex].value = y / l * length;\r\n\r\n                }\r\n\r\n            }, false, false, 'Ändert den Vektor so, dass er seine Richtung beibehält, aber auf die angegebene Länge gestreckt/gestaucht wird.', false));\r\n\r\n        this.addMethod(new Method(\"plus\", new Parameterlist([\r\n            { identifier: \"vector\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let x1: number = o1.attributes[xIndex].value;\r\n                let y1: number = o1.attributes[yIndex].value;\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n\r\n                oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x + x1 };\r\n                oRet.attributes[yIndex] = { type: doublePrimitiveType, value: y + y1 };\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt die Summe zurück, die sich aus Addition dieses Vektor mit dem übergebenen Vektor ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n        this.addMethod(new Method(\"minus\", new Parameterlist([\r\n            { identifier: \"vector\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let o1: RuntimeObject = parameters[1].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let x1: number = o1.attributes[xIndex].value;\r\n                let y1: number = o1.attributes[yIndex].value;\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n\r\n                oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x - x1 };\r\n                oRet.attributes[yIndex] = { type: doublePrimitiveType, value: y - y1 };\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt die Differenz zurück, die sich aus Subtraktion des übergebenen Vektors von diesem Vektor ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n        this.addMethod(new Method(\"scalarProduct\", new Parameterlist([\r\n            { identifier: \"vector1\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"vector2\", type: this, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[1].value;\r\n                let o1: RuntimeObject = parameters[2].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let x1: number = o1.attributes[xIndex].value;\r\n                let y1: number = o1.attributes[yIndex].value;\r\n\r\n                return x * x1 + y * y1;\r\n\r\n            }, false, true, 'Gibt das Skalarprodukt der beiden Vektoren zurück.', false));\r\n\r\n\r\n        this.addMethod(new Method(\"scaledBy\", new Parameterlist([\r\n            { identifier: \"scalar\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let s: number = parameters[1].value;\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n                oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x * s };\r\n                oRet.attributes[yIndex] = { type: doublePrimitiveType, value: y * s };\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt das Produkt zurück, das sich aus Multiplikation dieses Vektor mit dem übergebenen Skalar ergibt. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n        this.addMethod(new Method(\"rotatedBy\", new Parameterlist([\r\n            { identifier: \"angleDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let x: number = o.attributes[xIndex].value;\r\n                let y: number = o.attributes[yIndex].value;\r\n\r\n                let angle: number = -parameters[1].value * Math.PI / 180;\r\n                let sin: number = Math.sin(angle);\r\n                let cos: number = Math.cos(angle);\r\n\r\n                let oRet: RuntimeObject = new RuntimeObject(this);\r\n                oRet.attributes[xIndex] = { type: doublePrimitiveType, value: x * cos - y * sin };\r\n                oRet.attributes[yIndex] = { type: doublePrimitiveType, value: x * sin + y * cos };\r\n\r\n                return oRet;\r\n\r\n            }, false, false, 'Gibt den um den übergebenen Winkel (in Grad) rotierten Vektor zurück. Positiver Winkel => Rotation GEGEN DEN Uhrzeigersinn. WICHTIG: Diese Methode ändert das Objekt nicht, für das sie aufgerufen wurde!', false));\r\n\r\n\r\n        this.addMethod(new Method(\"distance\", new Parameterlist([\r\n            { identifier: \"x1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y1\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"x2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y2\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n                let x1: number = <number>parameters[1].value;\r\n                let y1: number = <number>parameters[2].value;\r\n                let x2: number = <number>parameters[3].value;\r\n                let y2: number = <number>parameters[4].value;\r\n                let dx = x2 - x1;\r\n                let dy = y2 - y1;\r\n                return Math.sqrt(dx * dx + dy * dy);\r\n            }, false, true, \"Berechnet den Abstand der Punkte (x1/y1) und (x2/y2).\"));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Interface, Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../compiler/types/Types.js\";\r\n\r\nexport class MouseListenerInterface extends Interface {\r\n\r\n    constructor(module: Module) {\r\n        super(\"MouseListener\", module, \"Interface mit Methoden, die aufgerufen werden, wenn Maus-Ereignisse eintreten. Ein Objekt dieser Klasse muss zuvor aber mit world.addMouseListener() registriert werden, wobei world das aktuelle World-Objekt ist.\");\r\n\r\n        this.addMethod(new Method(\"onMouseUp\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich losgelassen wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseDown\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich gedrückt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseMove\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger über dem Grafikbereich bewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseEnter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger in den Grafikbereich hineinbewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseLeave\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            null,  // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger aus dem Grafikbereich herausbewegt wird.\"));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class MouseAdapterClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"MouseAdapter\", module, \"Klasse mit leeren Methoden, die aufgerufen werden, wenn Maus-Ereignisse eintreten. Ein Objekt einer Kindklasse dieser Klasse muss zuvor aber mit world.addMouseListener() registriert werden, wobei world das aktuelle World-Objekt ist.\");\r\n\r\n        let mouseListenerType = <MouseListenerInterface>module.typeStore.getType(\"MouseListener\");\r\n\r\n        this.implements.push(mouseListenerType);\r\n\r\n        this.addMethod(new Method(\"onMouseUp\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            () => {}, // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich losgelassen wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseDown\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"button\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            () => {}, // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn eine Maustaste über dem Grafikbereich gedrückt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseMove\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            () => {}, // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger über dem Grafikbereich bewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseEnter\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            () => {}, // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger in den Grafikbereich hineinbewegt wird.\"));\r\n\r\n        this.addMethod(new Method(\"onMouseLeave\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            () => {}, // no implementation!\r\n            false, false, \"Wird aufgerufen, wenn der Mauszeiger aus dem Grafikbereich herausbewegt wird.\"));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { intPrimitiveType, objectType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { WebSocketRequestConnect, WebSocketRequestDisconnect, WebSocketRequestSendToAll, WebSocketRequestSendToClient, WebSocketResponseOtherClientDisconnected, WebSocketResponseMessage, WebSocketResponseNewClient, WebSocketResponse } from \"../../communication/Data.js\";\r\nimport { WebSocketHelper } from \"./WebSocket.js\";\r\n\r\nexport class WebSocketClientClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"WebSocketClient\", module, \"Ein Objekt der Klasse WebSocketClient repräsentiert einen anderen Rechner, mit dem dieser Rechner über den WebSocket in Kontakt steht.\");\r\n\r\n        let objectType = <Klass>module.typeStore.getType(\"Object\");\r\n        this.setBaseClass(objectType);\r\n\r\n        this.addMethod(new Method(\"send\", new Parameterlist([\r\n            { identifier: \"message\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"messageType\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n                let message: string = parameters[1].value;\r\n                let messageType: string = parameters[2].value;\r\n\r\n                wh.send(message, messageType);\r\n\r\n            }, false, false, 'Sendet Daten (message) an diesen Client. Den messageType kannst Du frei wählen. Die client bekommt ihn zusammen mit den Daten übermittelt. Tipp: Du kannst auch Objekte senden, musst sie dazu aber vorher serialisieren, d.h. mithilfe der Methode toJson in eine Zeichenkette verwandeln.', false));\r\n\r\n        this.addMethod(new Method(\"setUserData\", new Parameterlist([\r\n            { identifier: \"schlüssel\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"wert\", type: objectType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n                let key: string = parameters[1].value;\r\n                let value: RuntimeObject = parameters[2].value;\r\n\r\n                wh.setUserData(key, value);\r\n\r\n            }, false, false, 'Mit dieser Methode kannst Du beliebige Objektreferenzen in diesem WebSocketClient-Objekt speichern. Den Schlüssel kannst Du dabei frei wählen und später nutzen, um den Wert durch die Methode getUserData wieder zu holen.', false));\r\n\r\n        this.addMethod(new Method(\"getUserData\", new Parameterlist([\r\n            { identifier: \"schlüssel\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), objectType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n                let key: string = parameters[1].value;\r\n\r\n                return wh.getUserData(key);\r\n\r\n            }, false, false, 'Mit dieser Methode kannst Du eine Objektreferenz erhalten, die Du zuvor mit der Methode setUserData gespeichert hast. Bemerkung1: Diese Methode entfernt die Objekreferenz nicht aus dem WebSocketClient-Objekt. Bemerkung2: Damit Du alle Methoden des erhaltenen Objekts aufrufen kannst, musst Du dem Computer mitteilen, von welcher Klasse es ist (\"casten\"). Das geht für die Klasse MeineNutzerDaten bspw. so: MeineNutzerDaten mnd = (MeineNutzerDaten)client.getUserData(\"schlüssel\");', false));\r\n\r\n        let getterList: { att: string, getter: string, help: string }[] = [{ att: \"rufname\", getter: \"getFirstName\", help: \"Rufnamen\" },\r\n        { att: \"familienname\", getter: \"getLastName\", help: \"Familiennamen\" },\r\n        { att: \"username\", getter: \"getUsername\", help: \"Benutzernamen\" }, { att: \"nickname\", getter: \"getNickname\", help: \"Spielernamen\" }];\r\n\r\n        for (let getter of getterList) {\r\n            this.addMethod(new Method(getter.getter, new Parameterlist([\r\n            ]), stringPrimitiveType,\r\n                (parameters) => {\r\n\r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n\r\n                    return wh[getter.att];\r\n\r\n                }, false, false, 'Gibt den ' + getter.help + \" des Clients zurück.\", false));\r\n\r\n        }\r\n\r\n        this.addMethod(new Method(\"getNumber\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n\r\n                return wh.index;\r\n\r\n            }, false, false, 'Gehört ein Client zu einer mit findClient bzw. findClients gefundenen Gruppe, so erhältst Du mit dieser Methode die \"Rangfolge\" dieses Clients in dieser Gruppe. Allen Clients wird dieselbe Rangfolgeordnung vom Server mitgeteilt. So lässt sich bspw. einfach festlegen, welcher Client eine besondere Rolle (Server) in der Gruppe erhalten soll (z.B. Client mit Nummer 1). Bemerkung: Die Nummer ist eine Zahl zwischen 1 und der Anzahl der Clients in der Gruppe.', false));\r\n\r\n        this.addMethod(new Method(\"getIndex\", new Parameterlist([\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketClientHelper = o.intrinsicData[\"Helper\"];\r\n\r\n                return wh.index;\r\n\r\n            }, false, false, 'Diese Methode ist veraltet. Bitte benutze stattdessen getNumber.', false));\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class WebSocketClientHelper {\r\n\r\n    keyValueStore: { [key: string]: RuntimeObject } = {};\r\n    index: number = 0;\r\n\r\n    public connected: boolean = true;\r\n\r\n    constructor(public runtimeObject: RuntimeObject, private webSocketHelper: WebSocketHelper,\r\n        private id: number, public rufname: string, public familienname: string, public username: string, public nickname: string) {\r\n\r\n    }\r\n\r\n    send(message: string, messageType: string) {\r\n        this.webSocketHelper.sendToClient(this.id, message, messageType);\r\n    }\r\n\r\n    getUserData(key: string): any {\r\n        return this.keyValueStore[key];\r\n    }\r\n\r\n    setUserData(key: string, value: RuntimeObject) {\r\n        this.keyValueStore[key] = value;\r\n    }\r\n\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { intPrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter, InterpreterState } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { WebSocketRequestConnect, WebSocketRequestDisconnect, WebSocketRequestSendToAll, WebSocketRequestSendToClient, WebSocketResponseOtherClientDisconnected, WebSocketResponseMessage, WebSocketResponseNewClient, WebSocketResponse, GetWebSocketTokenResponse, WebSocketResponsePairingFound, WebSocketRequestFindPairing } from \"../../communication/Data.js\";\r\nimport { WebSocketClientHelper } from \"./WebSocketClient.js\";\r\nimport { ajax } from \"../../communication/AjaxHelper.js\";\r\nimport { SystemClass } from \"../System.js\";\r\nimport { ArrayType } from \"../../compiler/types/Array.js\";\r\n\r\nexport class WebSocketClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n        super(\"WebSocket\", module, \"Ein Objekt der Klasse WebSocket kann Daten über das Internet senden und empfangen. Um die Klasse benutzen zu können, musst Du eine eigene Klasse schreiben, die die Klasse WebSocket erweitert und die Methoden onConnect, onMessage, onOtherClientConnected und onOtherClientDisconnected überschreibt.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        let webSocketClientType = <Klass>module.typeStore.getType(\"WebSocketClient\");\r\n        let systemClassType = <SystemClass>module.typeStore.getType(\"System\");\r\n\r\n        this.addMethod(new Method(\"WebSocket\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let interpreter = this.module?.main?.getInterpreter();\r\n\r\n                let wh = new WebSocketHelper(o, interpreter, webSocketClientType, systemClassType);\r\n\r\n                o.intrinsicData[\"Helper\"] = wh;\r\n\r\n            }, false, false, 'Instanziert ein neues WebSocket-Objekt.', true));\r\n\r\n        this.addMethod(new Method(\"open\", new Parameterlist([\r\n            { identifier: \"sessionCode\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"nickName\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sessionCode: string = parameters[1].value;\r\n                let nickName: string = parameters[2].value;\r\n\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                wh.connect(sessionCode, nickName);\r\n\r\n                o.intrinsicData[\"Helper\"] = wh;\r\n\r\n            }, false, false, 'Startet die Verbindung mit dem Server. Den SessionCode kannst Du frei wählen. Mit allen anderen Clients, die eine Verbindung mit demselben SessionCode aufbauen, kannst Du anschließend Daten austauschen. Auch der Nickname ist frei wählbar. Er ist für alle anderen Clients sichtbar.',\r\n            false));\r\n\r\n        this.addMethod(new Method(\"sendToAll\", new Parameterlist([\r\n            { identifier: \"message\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"messageType\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let message: string = parameters[1].value;\r\n                let messageType: string = parameters[2].value;\r\n\r\n                wh.sendToAll(message, messageType);\r\n\r\n            }, false, false, 'Sendet Daten (message) an alle anderen Clients. Den messageType kannst Du frei wählen. Die empfangenden Clients bekommen ihn zusammen mit den Daten übermittelt. Tipp: Du kannst auch Objekte senden, musst sie dazu aber vorher serialisieren, d.h. mithilfe der Methode toJson in eine Zeichenkette verwandeln.', false));\r\n\r\n        this.addMethod(new Method(\"findClients\", new Parameterlist([\r\n            { identifier: \"count\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let count: number = parameters[1].value;\r\n\r\n                wh.findClientsFromCount(count);\r\n\r\n            }, false, false, 'Sucht die übergebene Anzahl von \"kontaktbereiten\" Clients, d.h. solchen Clients, die exakt dieselbe Suchanfrage abgegeben haben. Findet der Server die Clients, so ruft er bei allen beteiligten Clients onClientsFound auf.', false));\r\n\r\n        this.addMethod(new Method(\"findClients\", new Parameterlist([\r\n            { identifier: \"nicknames\", type: new ArrayType(stringPrimitiveType), declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let nickNamesValues: Value[] = parameters[1].value;\r\n\r\n                let nicknames: string[] = nickNamesValues.map((nnv) => nnv.value);\r\n\r\n                wh.findClientsFromNicknames(nicknames);\r\n\r\n            }, false, false, 'Sucht die Clients mit den angegebenen Nicknames. Haben sie eine entsprechende Suchanfrage (d.h. dieselben Nicknames) abgegeben, so so ruft der Server bei allen beteiligten Clients onClientsFound auf.', false));\r\n\r\n        this.addMethod(new Method(\"findClient\", new Parameterlist([\r\n            { identifier: \"nickname\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n                let nickName: string = parameters[1].value;\r\n\r\n                wh.findClientsFromNicknames([nickName]);\r\n\r\n            }, false, false, 'Sucht den Client mit dem angegebenen Nickname. Hat er eine entsprechende Suchanfrage (d.h. mit dem Nickname DIESES clients) abgegeben, so so ruft der Server bei beiden Clients onClientsFound auf.', false));\r\n\r\n        this.addMethod(new Method(\"close\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n\r\n                wh.disconnect();\r\n\r\n            }, false, false, 'Beendet die Verbindung. Bei allen anderen Clients, die sich mit derselben sessionId verbunden haben, wird daraufhin die Methode onOtherClientDisconnected aufgerufen.', false));\r\n\r\n        this.addMethod(new Method(\"onOpen\", new Parameterlist([\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, sobald die Verbindung mit dem Server zustandegekommen ist.\", false));\r\n\r\n        this.addMethod(new Method(\"onClose\", new Parameterlist([\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, nachdem die Verbindung geschlossen wurde.\", false));\r\n\r\n        this.addMethod(new Method(\"onMessage\", new Parameterlist([\r\n            { identifier: \"sender\", type: webSocketClientType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"message\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"messageType\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird immer dann aufgerufen, wenn eine Nachricht eines anderen Clients empfangen wurde.\", false));\r\n\r\n        this.addMethod(new Method(\"onOtherClientConnected\", new Parameterlist([\r\n            { identifier: \"otherClient\", type: webSocketClientType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird immer dann aufgerufen, wenn sich ein anderer Client unter Nutzung desselben sessionCodes mit dem Server verbunden hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onOtherClientDisconnected\", new Parameterlist([\r\n            { identifier: \"otherClient\", type: webSocketClientType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird immer dann aufgerufen, wenn ein anderer Client unter Nutzung desselben sessionCodes die Verbindung mit dem Server beendet hat.\", false));\r\n\r\n        this.addMethod(new Method(\"onClientsFound\", new Parameterlist([\r\n            { identifier: \"oherClients\", type: new ArrayType(webSocketClientType), declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"ownNumber\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            null, // no statements!\r\n            false, false, \"Wird aufgerufen, wenn die durch die Methoden findClient bzw. findClients zuvor gesuchten Clients gefunden wurden.\", false));\r\n\r\n        this.addMethod(new Method(\"getOtherClients\", new Parameterlist([]),\r\n            new ArrayType(webSocketClientType),\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let wh: WebSocketHelper = o.intrinsicData[\"Helper\"];\r\n\r\n                let ret = wh.clientList.map(client => {return {type: webSocketClientType, value: client.runtimeObject}});\r\n                \r\n                return ret;\r\n\r\n            }, // no statements!\r\n            false, false, \"Gibt alle bisher bei der selben Session angemeldeten Clients zurück.\", false));\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class WebSocketHelper {\r\n\r\n    onOpenMethod: Method;\r\n    onCloseMethod: Method;\r\n    onMessageMethod: Method;\r\n    onClientConnectedMethod: Method;\r\n    onClientDisconnectedMethod: Method;\r\n    onClientsFoundMethod: Method;\r\n\r\n    clientList: WebSocketClientHelper[] = [];\r\n    idToClientMap: { [id: number]: WebSocketClientHelper } = {};\r\n\r\n    connection: WebSocket;\r\n    client_id: number; // own client-id\r\n    isOpen: boolean = false;\r\n\r\n    constructor(private runtimeObject: RuntimeObject, private interpreter: Interpreter,\r\n        private webSocketClientType: Klass, private systemClassType: SystemClass) {\r\n\r\n        let klass: Klass = <Klass>runtimeObject.class;\r\n\r\n        // [[Entries]]:Array(4)\r\n        // 0:{\"Test3()\" => Method}\r\n        // 1:{\"onConnect()\" => Method}\r\n        // 2:{\"onMessage(WebSocketClient, String, String)\" => Method}\r\n        // 3:{\"toJson()\" => Method}\r\n\r\n        this.onOpenMethod = klass.methods.find(m => m.signature == \"onOpen()\");\r\n        this.onCloseMethod = klass.methods.find(m => m.signature == \"onClose()\");\r\n        this.onMessageMethod = klass.methods.find(m => m.signature == \"onMessage(WebSocketClient, String, String)\");\r\n        this.onClientConnectedMethod = klass.methods.find(m => m.signature == \"onOtherClientConnected(WebSocketClient)\");\r\n        this.onClientDisconnectedMethod = klass.methods.find(m => m.signature == \"onOtherClientDisconnected(WebSocketClient)\");\r\n        this.onClientsFoundMethod = klass.methods.find(m => m.signature == \"onClientsFound(WebSocketClient[], int)\");\r\n\r\n    }\r\n\r\n    connect(sessionCode: string, nickName: string) {\r\n\r\n        if(this.interpreter.main.isEmbedded()){\r\n            this.interpreter.throwException(\"Die Netzwerkfunktionalitäten stehen nur eingeloggten Nutzern in der Entwicklungsumgebung zur Verfügung und können daher leider hier nicht ausprobiert werden.\");\r\n            return;\r\n        }\r\n\r\n\r\n        ajax('getWebSocketToken', {}, (response: GetWebSocketTokenResponse) => {\r\n\r\n            let url: string = (window.location.protocol.startsWith(\"https\") ? \"wss://\" : \"ws://\") + window.location.host + \"/servlet/websocket\";\r\n            this.connection = new WebSocket(url);\r\n\r\n            this.connection.onerror = (error: Event) => { this.onError(error); }\r\n            this.connection.onclose = (event: CloseEvent) => { this.onClose(event); }\r\n            this.connection.onmessage = (event: MessageEvent) => { this.onMessage(event); }\r\n\r\n            this.connection.onopen = (event: Event) => {\r\n                let request: WebSocketRequestConnect = {\r\n                    command: 1,\r\n                    token: response.token,\r\n                    nickname: nickName,\r\n                    sessionCode: sessionCode\r\n                }\r\n\r\n                this.interpreter.webSocketsToCloseAfterProgramHalt.push(this.connection);\r\n                this.isOpen = true;\r\n                this.sendIntern(JSON.stringify(request));\r\n                this.onOpen();\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    unsentMessages: string[] = [];\r\n    sendIntern(message: string) {\r\n\r\n        if (!this.isOpen) {\r\n            this.unsentMessages.push(message);\r\n        } else {\r\n            try {\r\n                this.connection.send(message);\r\n            } catch (exception) {\r\n                console.log(exception);\r\n            }\r\n        }\r\n    }\r\n\r\n    onClose(event: CloseEvent) {\r\n        this.isOpen = false;\r\n        this.runMethod(this.onCloseMethod, []);\r\n    }\r\n\r\n    sendToClient(clientId: number, data: string, dataType: string) {\r\n        let message: WebSocketRequestSendToClient = {\r\n            command: 3,\r\n            data: data,\r\n            dataType: dataType,\r\n            recipient_id: clientId\r\n        };\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n    sendToAll(data: string, dataType: string) {\r\n        let message: WebSocketRequestSendToAll = {\r\n            command: 2,\r\n            data: data,\r\n            dataType: dataType\r\n        };\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n    disconnect() {\r\n        let message: WebSocketRequestDisconnect = {\r\n            command: 4\r\n        };\r\n        this.sendIntern(JSON.stringify(message));\r\n        this.connection.close();\r\n        let wtr = this.interpreter.webSocketsToCloseAfterProgramHalt;\r\n        wtr.splice(wtr.indexOf(this.connection), 1);\r\n    }\r\n\r\n    onMessage(event: MessageEvent) {\r\n\r\n        let response: WebSocketResponse = JSON.parse(event.data);\r\n        if (response.command == undefined) return;\r\n\r\n        switch (response.command) {\r\n            case 1: // new Client\r\n                let clientRuntimeObject = new RuntimeObject(this.webSocketClientType);\r\n                let wch: WebSocketClientHelper = new WebSocketClientHelper(clientRuntimeObject, this, response.user_id,\r\n                    response.rufname, response.familienname, response.username, response.nickname);\r\n                clientRuntimeObject.intrinsicData[\"Helper\"] = wch;\r\n                this.clientList.push(wch);\r\n                this.idToClientMap[response.user_id] = wch;\r\n                this.runMethod(this.onClientConnectedMethod, [{ type: this.webSocketClientType, value: clientRuntimeObject }]);\r\n                break;\r\n            case 2: // message\r\n                let clientHelper = this.idToClientMap[response.from_client_id];\r\n                if (clientHelper == null) return;\r\n                this.runMethod(this.onMessageMethod, [\r\n                    { type: this.webSocketClientType, value: clientHelper.runtimeObject },\r\n                    { type: stringPrimitiveType, value: response.data },\r\n                    { type: stringPrimitiveType, value: response.dataType }\r\n                ]);\r\n                break;\r\n            case 3: // other client disconnected\r\n                let clientHelper1 = this.idToClientMap[response.disconnecting_client_id];\r\n                if (clientHelper1 == null) return;\r\n                this.clientList.splice(this.clientList.indexOf(clientHelper1), 1);\r\n                this.idToClientMap[response.disconnecting_client_id] = undefined;\r\n                this.runMethod(this.onClientDisconnectedMethod, [\r\n                    { type: this.webSocketClientType, value: clientHelper1.runtimeObject }\r\n                ]);\r\n                break;\r\n            case 4: // time synchronization\r\n                this.systemClassType.deltaTimeMillis = response.currentTimeMills - Date.now();\r\n                this.client_id = response.client_id\r\n                break;\r\n            case 5: // keep alive\r\n                break;\r\n            case 6: // Clients found\r\n                this.onClientsFound(response);\r\n                break;\r\n        }\r\n    }\r\n\r\n    onClientsFound(response: WebSocketResponsePairingFound) {\r\n        let own_index: number = 0;\r\n        let otherClients: Value[] = [];\r\n\r\n        for (let client of response.clients) {\r\n            if (client.id == this.client_id) {\r\n                own_index = client.index;\r\n            } else {\r\n                let otherClient = this.idToClientMap[client.id];\r\n                if (otherClient != null) {\r\n                    otherClient.index = client.index;\r\n                    otherClients.push({\r\n                        type: this.webSocketClientType,\r\n                        value: otherClient.runtimeObject\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        let arrayValue: Value = {\r\n            type: new ArrayType(this.webSocketClientType),\r\n            value: otherClients\r\n        }\r\n\r\n        this.runMethod(this.onClientsFoundMethod, [arrayValue, { type: intPrimitiveType, value: own_index }]);\r\n\r\n    }\r\n\r\n    onError(error: Event) {\r\n        this.interpreter.throwException(\"Kommunikationsfehler beim WebSocket\");\r\n    }\r\n\r\n    onOpen() {\r\n        this.isOpen = true;\r\n        if(this.unsentMessages.length > 0){\r\n            this.unsentMessages.forEach(m => this.sendIntern(m));\r\n            this.unsentMessages = [];\r\n        }\r\n        this.runMethod(this.onOpenMethod, []);\r\n    }\r\n\r\n    runMethod(method: Method, stackElements: Value[]) {\r\n        if (method == null) return;\r\n        stackElements.splice(0, 0, {\r\n            type: this.runtimeObject.class,\r\n            value: this.runtimeObject\r\n        });\r\n\r\n        if (this.interpreter.state == InterpreterState.waitingForInput) {\r\n            this.interpreter.executeImmediatelyInNewStackframe(method.program, stackElements);\r\n        } else {\r\n            this.interpreter.runTimer(method, stackElements, () => { }, false);\r\n        }\r\n    }\r\n\r\n    findClientsFromCount(count: number) {\r\n        let message: WebSocketRequestFindPairing = {\r\n            command: 6,\r\n            count: count,\r\n            nicknames: []\r\n        }\r\n\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n    findClientsFromNicknames(nicknames: string[]) {\r\n        let message: WebSocketRequestFindPairing = {\r\n            command: 6,\r\n            count: nicknames.length,\r\n            nicknames: nicknames\r\n        }\r\n\r\n        this.sendIntern(JSON.stringify(message));\r\n    }\r\n\r\n\r\n}","import { TokenType } from \"../../compiler/lexer/Token.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../../compiler/types/Class.js\";\r\nimport { charPrimitiveType, floatPrimitiveType, intPrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Type, Value, Variable, Attribute } from \"../../compiler/types/Types.js\";\r\nimport { Interpreter, InterpreterState } from \"../../interpreter/Interpreter.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\n\r\n// import * as p5 from \"p5\";\r\ntype p5 = any;\r\n\r\nexport class ProcessingClass extends Klass {\r\n\r\n    constructor(public module: Module) {\r\n\r\n        super(\"PApplet\", module, \"Processing-Applet\")\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        this.documentation = \"Wenn Du Deine Klasse von PApplet ableitest (class Test extends PApplet{...}), kannst Du auf diese Weise ein Processing-Applet erstellen (siehe https://processing.org), indem Du ihre Methoden draw(), mousePressed(), usw. überschreibst und mit Inhalt füllst. Du startest das Applet, indem Du ein Objekt Deiner Klasse instanzierst und davon die main-Methode aufrufst: new Test().main();\"\r\n\r\n        // this.addAttribute(new Attribute(\"mouseX\", intPrimitiveType, (object) => { object.value = Math.round(module.main.getInterpreter().processingHelper.p5o.mouseX) },\r\n        //     false, Visibility.public, true, \"aktuelle x-Koordinate des Mauszeigers\"));\r\n\r\n        // this.addAttribute(new Attribute(\"mouseY\", intPrimitiveType, (object) => { object.value = Math.round(module.main.getInterpreter().processingHelper.p5o.mouseY) },\r\n        //     false, Visibility.public, true, \"aktuelle y-Koordinate des Mauszeigers\"));\r\n\r\n        let intConstants: string[][] = [[\"mouseX\", \"aktuelle x-Koordinate des Mauszeigers\"], [\"mouseY\", \"aktuelle y-Koordinate des Mauszeigers\"],\r\n        [\"pMouseX\", \"x-Koordinate des Mauszeigers im vorhergehenden Frame\"], [\"pMouseY\", \"y-Koordinate des Mauszeigers im vorhergehenden Frame\"],\r\n        [\"LEFT\", \"links\"], [\"CENTER\", \"Mitte\"], [\"RIGHT\", \"rechts\"], [\"TOP\", \"obenbündig\"], [\"BASELINE\", \"bündig auf der Grundlinie\"], [\"BOTTOM\", \"untenbündig\"],\r\n        [\"width\", \"Breite des Zeichenbereichs\"], [\"height\", \"Höhe des Zeichenbereichs\"], [\"keyCode\", \"Zahlencode der zuletzt gedrückten Taste\"],\r\n        [\"mouseButton\", \"zuletzt gedrückte Maustaste, kann die Werte LEFT, RIGHT und CENTER annehmen\"],\r\n        [\"CORNER\", \"Mode zum Zeichnen von Rechtecken\"], [\"CORNERS\", \"Mode zum Zeichnen von Rechtecken\"], [\"RADIUS\", \"Mode zum Zeichnen von Rechtecken\"],\r\n\r\n        [\"POINTS\", \"zeichne nachfolgend Einzelpunkte\"],\r\n        [\"LINES\", \"zeichne nachfolgend einzelne Linien\"],\r\n        [\"TRIANGLES\", \"zeichne nachfolgend einzelne Dreiecke\"],\r\n        [\"TRIANGLE_STRIP\", \"zeichne nachfolgend einen Triangle-Strip\"],\r\n        [\"TRIANGLE_FAN\", \"zeichne nachfolgend einen Triangle-Fan\"],\r\n        [\"QUADS\", \"zeichne nachfolgend Vierecke\"],\r\n        [\"QUAD_STRIP\", \"zeichne nachfolgend einen Quad-Strip\"],\r\n        [\"TESS\", \"zeichne nachfolgend ein TESS - geht nur bei createCanvas(width, height, WEBGL)\"],\r\n        [\"CLOSE\", \"endShape(CLOSE) schließt den Linienzug\"],\r\n\r\n        [\"DEGREES\", \"angleMode(DEGREES) sorgt dafür, dass nachfolgende Winkelangaben in Grad interpretiert werden.\"],\r\n        [\"RADIANS\", \"angleMode(RADIANS) sorgt dafür, dass nachfolgende Winkelangaben im Bogenmaß interpretiert werden.\"],\r\n\r\n        ];\r\n\r\n        intConstants.forEach(constant => {\r\n            this.addAttribute(new Attribute(constant[0], intPrimitiveType, (object) => { object.value = module.main.getInterpreter().processingHelper.p5o[constant[0]] },\r\n                false, Visibility.public, true, constant[1]));\r\n        });\r\n\r\n        let stringConstants: string[][] = [[\"WEBGL\", \"WebGL-Renderer zur 3D-Ausgabe\"], [\"P2D\", \"Renderer zur zweidimensionalen Ausgabe\"],\r\n        [\"RGB\", \"Color-Mode RGB (rot, grün, blau)\"], [\"HSL\", \"Color-Mode HSL\"], [\"HSB\", \"Color-Mode HSB\"]\r\n        ];\r\n\r\n        stringConstants.forEach(constant => {\r\n            this.addAttribute(new Attribute(constant[0], stringPrimitiveType, (object) => { object.value = module.main.getInterpreter().processingHelper.p5o[constant[0]] },\r\n                false, Visibility.public, true, constant[1]));\r\n        });\r\n\r\n        this.addAttribute(new Attribute(\"key\", charPrimitiveType, (object) => { object.value = module.main.getInterpreter().processingHelper.p5o.key },\r\n            false, Visibility.public, true, \"letzte gedrückte Taste\"));\r\n\r\n\r\n        this.addMethod(new Method(\"PApplet\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = this.getProcessingHelper(o);\r\n                o.intrinsicData[\"Processing\"] = ph;\r\n\r\n            }, false, false, \"Legt eine neues Processing-Applet an\", true));\r\n\r\n        this.addMethod(new Method(\"main\", new Parameterlist([\r\n            { identifier: \"name\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                // ph.main legt das aktuelle Programm (a) des Interpreters auf den programStack\r\n                // und setzt als currentProgram ein neues (b). Nach Ende dieser Methode erhöht\r\n                // der Interpreter currentProgramPosition im Glauben, (a) sei aktiv. Daher ist\r\n                // die gespeicherte ProgramPosition von (a) um eins zu niedrig (und wird daher gleich noch\r\n                // vor ph.main(); erhöht) und die bei (b) wird irrtümlich nach Rückkehr von dieser Methode \r\n                // um eins erhöht. Sie wird daher nach Ausführung von ph.main() um eins erniedrigt, damit\r\n                // der Effekt kompensiert wird. \r\n                let interpreter = module.main.getInterpreter();\r\n                interpreter.currentProgramPosition++;\r\n                ph.main();\r\n                interpreter.currentProgramPosition--;\r\n\r\n            }, false, false, 'Startet das Processing-Applet.', false));\r\n\r\n        this.addMethod(new Method(\"main\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                let interpreter = module.main.getInterpreter();\r\n                interpreter.currentProgramPosition++;\r\n                ph.main();\r\n                interpreter.currentProgramPosition--;\r\n\r\n            }, false, false, 'Startet das Processing-Applet.', false));\r\n\r\n        this.addMethod(new Method(\"loop\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                ph.loop();\r\n\r\n            }, false, false, 'Startet nach noLoop() die Renderer-Loop wieder neu, so dass draw() wieder periodisch aufgerufen wird.', false));\r\n\r\n        this.addMethod(new Method(\"noLoop\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n\r\n                ph.noLoop();\r\n\r\n            }, false, false, 'Stoppt die Render-Loop, so dass draw() nicht mehr aufgerufen wird. Kann mit loop() wieder gestartet werden.', false));\r\n\r\n        this.addMethod(new Method(\"size\", new Parameterlist([\r\n            { identifier: \"width\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                let width: number = parameters[1].value;\r\n                let height: number = parameters[2].value;\r\n\r\n                ph.createCanvas(width, height)\r\n\r\n            }, false, false, 'Definiert die Abmessungen des Processing-Ausgabebereichs in Pixeln.', false));\r\n\r\n        this.addMethod(new Method(\"createCanvas\", new Parameterlist([\r\n            { identifier: \"width\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                let width: number = parameters[1].value;\r\n                let height: number = parameters[2].value;\r\n\r\n                ph.createCanvas(width, height)\r\n\r\n            }, false, false, 'Definiert die Abmessungen des Processing-Ausgabebereichs in Pixeln.', false));\r\n\r\n        this.addMethod(new Method(\"createCanvas\", new Parameterlist([\r\n            { identifier: \"width\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"height\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"renderer\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), voidPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                let width: number = parameters[1].value;\r\n                let height: number = parameters[2].value;\r\n                let renderer: string = parameters[3].value;\r\n\r\n                ph.renderer = renderer;\r\n                ph.createCanvas(width, height);\r\n\r\n            }, false, false, 'Definiert die Abmessungen des Processing-Ausgabebereichs in Pixeln.', false));\r\n\r\n        this.addMethod(new Method(\"draw\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die draw-Methode wird 60-mal pro Sekunde aufgerufen (\"Render-Loop\"). Die Render-Loop kann mit der Methode noLoop() gestoppt und mit loop() wieder gestartet werden. redraw() ruft (im gestoppten Zustand) draw genau ein Mal auf.', false));\r\n\r\n        this.addMethod(new Method(\"settings\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die settings-Methode wird aufgerufen, nachdem das Processing-Applet durch Aufruf der Methode main gestartet wurde. Im Unterschied zur Original Java-Version von Processing hat die Methode settings hier keine andere Bewandtnis als die - unmittelbar darauf aufgerufene - Methode setup. In beiden Methoden kann man bspw. mit createCanvas(width, height) das Koordinatensystem einrichten und Figuren zeichnen.', false));\r\n\r\n        this.addMethod(new Method(\"setup\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die setup-Methode wird beim Programmstart nach der settings-Methode aufgerufen. Im Unterschied zur Original Java-Version von Processing hat die Methode setup hier keine andere Bewandtnis als die - unmittelbar davor aufgerufene - Methode settings. In beiden Methoden kann man bspw. mit createCanvas(width, height) das Koordinatensystem einrichten und Figuren zeichnen.', false));\r\n\r\n        this.addMethod(new Method(\"mousePressed\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mousePressed-Methode wird immer dann aufgerufen, wenn gerade eine Maustaste heruntergedrückt wurde. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die gerade heruntergedrückte Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseReleased\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseReleased-Methode wird immer dann aufgerufen, wenn gerade eine Maustaste losgelassen wurde. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die gerade losgelassene Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseClicked\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseClicked-Methode wird immer dann aufgerufen, wenn eine Maustaste auf dem Zeichenbereich gedrückt und anschließend losgelassen wurde. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die gerade losgelassene Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseDragged\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseDragged-Methode wird immer dann aufgerufen, wenn eine Maustaste gerade heruntergedrückt ist und die Position des Mauszeigers sich verändert hat. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die zuletzt gedrückte Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseMoved\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseMoved-Methode wird immer dann aufgerufen, wenn die Position des Mauszeigers sich verändert hat. Die aktuellen Koordinaten des Mauszeigers liegen in den Attributen mouseX und mouseY vor, die zuletzt gedrückte Maustaste kann dem Attribut mouseButton entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"mouseEntered\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseEntered-Methode wird immer dann aufgerufen, wenn der Mauszeiger von außen neu in den Zeichenbereich hineinfährt.', false));\r\n\r\n        this.addMethod(new Method(\"mouseExited\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die mouseExited-Methode wird immer dann aufgerufen, wenn der Mauszeiger den Zeichnbereich gerade verlassen hat.', false));\r\n\r\n        this.addMethod(new Method(\"keyPressed\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die keyPressed-Methode wird immer dann aufgerufen, wenn eine Taste gerade heruntergedrückt wurde. Informationen zur Taste können den Attributen key (String) und keyCode (int) entnommen werden.', false));\r\n\r\n        this.addMethod(new Method(\"keyReleased\", new Parameterlist([\r\n        ]), voidPrimitiveType,\r\n            null, false, false, 'Die keyReleased-Methode wird immer dann aufgerufen, wenn eine Taste gerade losgelassen wurde. Informationen zur Taste können den Attributen key (String) und keyCode (int) entnommen werden.', false));\r\n\r\n\r\n\r\n        // this.addMethod(new Method(\"rect\", new Parameterlist([\r\n        //     { identifier: \"left\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        //     { identifier: \"top\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        //     { identifier: \"width\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        //     { identifier: \"height\", type: floatPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        // ]), voidPrimitiveType,\r\n        //     (parameters) => {\r\n\r\n        //         let o: RuntimeObject = parameters[0].value;\r\n        //         let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n        //         let left: number = parameters[1].value;\r\n        //         let top: number = parameters[2].value;\r\n        //         let width: number = parameters[3].value;\r\n        //         let height: number = parameters[4].value;\r\n\r\n        //         ph.addStatement((p5o) => p5o.rect(left, top, width, height));\r\n\r\n\r\n        //     }, false, false, 'Zeichnet ein Rechteck. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.', false));\r\n\r\n\r\n        /**\r\n         * Setzen von Farben\r\n         */\r\n        this.addProcessingMethod('clear', [], [],\r\n            'Löscht die Zeichenfläche.');\r\n\r\n        this.addProcessingMethod('background', ['rgb'], floatPrimitiveType,\r\n            'Übermalt die komplette Zeichenfläche mit der übergebenen Farbe.');\r\n\r\n        this.addProcessingMethod('background', ['colorAsString'], stringPrimitiveType,\r\n            \"Übermalt die komplette Zeichenfläche mit der übergebenen Farbe. Übergeben wird eine Zeichenkette der Form 'rgb(0,0,255)' oder 'rgb(0%, 0%, 100%)' oder 'rgba(0, 0, 255, 1)' oder 'rgba(0%, 0%, 100%, 1)' und all diese Kombinationen statt rgb auch mit hsl und hsb.\", stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('background', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Übermalt die komplette Zeichenfläche mit der übergebenen Farbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('fill', ['rgb'], intPrimitiveType,\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['rgb'], stringPrimitiveType,\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['rgb', 'alpha'], [intPrimitiveType, floatPrimitiveType],\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['gray'], floatPrimitiveType,\r\n            'Setzt die Füllfarbe.');\r\n\r\n        this.addProcessingMethod('fill', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Setzt die Füllfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('fill', ['v1', 'v2', 'v3', 'alpha'], floatPrimitiveType,\r\n            'Setzt die Füllfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('noFill', [], [],\r\n            'Die nachfolgend gezeichneten Figuren werden nicht gefüllt.');\r\n\r\n        this.addProcessingMethod('stroke', ['rgb'], intPrimitiveType,\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['rgb'], stringPrimitiveType,\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['rgb', 'alpha'], [intPrimitiveType, floatPrimitiveType],\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['gray'], floatPrimitiveType,\r\n            'Setzt die Linienfarbe.');\r\n\r\n        this.addProcessingMethod('stroke', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Setzt die Linienfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('stroke', ['v1', 'v2', 'v3', 'alpha'], floatPrimitiveType,\r\n            'Setzt die Linienfarbe. v1, v2 und v3 sind - abhängig vom aktuellen color mode - rot, grün und blauwert oder Farbe, Sättigung und Helligkeit');\r\n\r\n        this.addProcessingMethod('strokeWeight', ['weight'], floatPrimitiveType,\r\n            'Setzt die Linienbreite.');\r\n\r\n        this.addProcessingMethod('noStroke', [], [],\r\n            'Die nachfolgend gezeichneten Figuren werden ohne Rand gezeichnet.');\r\n\r\n        this.addProcessingMethod('color', ['gray'], floatPrimitiveType,\r\n            'Gibt den Grauton als String-kodierte Farbe zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['colorAsString'], stringPrimitiveType,\r\n            \"Gibt die Farbe zurück. Übergeben kann eine Zeichenkette der Form 'rgb(0,0,255)' oder 'rgb(0%, 0%, 100%)' oder 'rgba(0, 0, 255, 1)' oder 'rgba(0%, 0%, 100%, 1)' und all diese Kombinationen statt rgb auch mit hsl und hsb.\", stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['gray', 'alpha'], floatPrimitiveType,\r\n            'Gibt den Grauton als String-kodierte Farbe zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['v1', 'v2', 'v3'], floatPrimitiveType,\r\n            'Gibt die aus v1, v2, v3 gebildete Farbe String-kodiert zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('color', ['v1', 'v2', 'v3', 'alpha'], floatPrimitiveType,\r\n            'Gibt die aus v1, v2, v3 und alpha gebildete Farbe String-kodiert zurück.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('lerpColor', ['colorA', 'colorB', 't'], [stringPrimitiveType, stringPrimitiveType, floatPrimitiveType],\r\n            'Gibt eine Zwischenfarbe zwischen colorA und colorB zurück. t == 0 bedeutet: colorA, t == 1 bedeutet: colorB, t == 0.5 bedeutet: genau zwischen beiden, usw.', stringPrimitiveType);\r\n\r\n        this.addProcessingMethod('colorMode', ['mode'], stringPrimitiveType,\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB.');\r\n\r\n        this.addProcessingMethod('colorMode', ['mode', 'max'], [stringPrimitiveType, floatPrimitiveType],\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB für Mode. Max ist der Maximalwert jeder Farbkomponente.');\r\n\r\n        this.addProcessingMethod('colorMode', ['mode', 'max1', 'max2', 'max3'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB für Mode. Max ist der Maximalwert jeder Farbkomponente.');\r\n\r\n        this.addProcessingMethod('colorMode', ['mode', 'max1', 'max2', 'max3', 'maxAlpha'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von color(...) interpretiert werden. Möglich sind die Werte RGB, HSL und HSB für Mode. Max ist der Maximalwert jeder Farbkomponente.');\r\n\r\n\r\n\r\n        /**\r\n         * Zeichnen geometrischer Figuren\r\n         */\r\n        this.addProcessingMethod('rectMode', ['mode'], stringPrimitiveType,\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von rect(...) interpretiert werden. Möglich sind die Werte CORNER, CORNERS, RADIUS und CENTER.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height', 'radius'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height', 'radius1', 'radius2', 'radius3', 'radius4'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks.');\r\n\r\n        this.addProcessingMethod('square', ['left', 'top', 'width'], floatPrimitiveType,\r\n            'Zeichnet ein Quadrat. (left, top) ist die linke obere Ecke, width Seitenlänge des Quadrats.');\r\n\r\n        this.addProcessingMethod('square', ['left', 'top', 'width', 'radius'], floatPrimitiveType,\r\n            'Zeichnet ein Quadrat mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width Seitenlänge des Quadrats. Radius ist der Eckenradius.');\r\n\r\n        this.addProcessingMethod('square', ['left', 'top', 'width', 'radius1', 'radius2', 'radius3', 'radius4'], floatPrimitiveType,\r\n            'Zeichnet ein Quadrat mit abgerundeten Ecken. (left, top) ist die linke obere Ecke, width Seitenlänge des Quadrats. Radius ist der Eckenradius.');\r\n\r\n        this.addProcessingMethod('rect', ['left', 'top', 'width', 'height', 'radius'], floatPrimitiveType,\r\n            'Zeichnet ein Rechteck. (left, top) ist die linke obere Ecke, width die Breite und height die Höhe des Rechtecks. Radius ist der Eckenradius');\r\n\r\n        this.addProcessingMethod('ellipse', ['left', 'top', 'width', 'height'], floatPrimitiveType,\r\n            'Zeichnet eine Ellipse. (left, top) ist die linke obere Ecke der Boundingbox der Ellipse, width ihre Breite und height ihre Höhe. Das lässt sich aber mit ellipseMode(...) ändern!');\r\n\r\n        this.addProcessingMethod('circle', ['x', 'y', 'extent'], floatPrimitiveType,\r\n            'Zeichnet einen Kreis. (x, y) ist der Mittelpunkt des Kreises, extent der doppelte Radius.');\r\n\r\n        this.addProcessingMethod('ellipseMode', ['mode'], stringPrimitiveType,\r\n            'Setzt den Modus, in dem nachfolgende Aufrufe von ellipse(...) interpretiert werden. Möglich sind die Werte CORNER, CORNERS, RADIUS und CENTER.');\r\n\r\n\r\n        this.addProcessingMethod('line', ['x1', 'y1', 'x2', 'y2'], floatPrimitiveType,\r\n            'Zeichnet eine Strecke von (x1, y1) nach (x2, y2).');\r\n\r\n        this.addProcessingMethod('line', ['x1', 'y1', 'z1', 'x2', 'y2', 'z2'], floatPrimitiveType,\r\n            'Zeichnet eine Strecke von (x1, y1, z1) nach (x2, y2, z2).');\r\n\r\n        this.addProcessingMethod('triangle', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3'], floatPrimitiveType,\r\n            'Zeichnet eine Dreieck mit den Eckpunkten (x1, y1), (x2, y2) und (x3, y3).');\r\n\r\n        this.addProcessingMethod('quad', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3', 'x4', 'y4'], floatPrimitiveType,\r\n            'Zeichnet eine Viereck mit den Eckpunkten (x1, y1), (x2, y2), (x3, y3) und (x4, y4).');\r\n\r\n        this.addProcessingMethod('bezier', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3', 'x4', 'y4'], floatPrimitiveType,\r\n            'Zeichnet eine kubische Bezierkurve mit den Ankerpunkten (x1, y1), (x4, y4) und den Kontrollpunkten (x2, y2), (x3, y3).');\r\n\r\n        this.addProcessingMethod('curve', ['x1', 'y1', 'x2', 'y2', 'x3', 'y3', 'x4', 'y4'], floatPrimitiveType,\r\n            'Zeichnet eine Catmull-Rom-Kurve vom Punkt (x2, y2) nach (x3, y3) so, als würde sie von (x1, x2) kommen und es am Ende zu (x4, y4) weitergehen.');\r\n\r\n        this.addProcessingMethod('curvePoint', ['a', 'b', 'c', 'd', 't'], floatPrimitiveType,\r\n            'Will man die Zwischenpunkte einer Curve erhalten (Beginn b, Ende c, als würde sie von a kommen und nach d gehen), so verwendet man sowohl für die x- als auch für die y-Koordinate diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('curveTangent', ['a', 'b', 'c', 'd', 't'], floatPrimitiveType,\r\n            'Will man die Zwischentangenten einer Curve erhalten (Beginn b, Ende c, als würde sie von a kommen und nach d gehen), so verwendet man sowohl für die x- als auch für die y-Koordinate diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('bezierPoint', ['x1', 'x2', 'x3', 'x4', 't'], floatPrimitiveType,\r\n            'Will man die Zwischenpunkte einer Bezierkurve erhalten (Ankerkoordinaten x1, x4 und Stützkoordinaten x2, x3), so nutzt man - einzeln sowohl für die x- also auch für die y-Koordinate - diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('bezierTangent', ['x1', 'x2', 'x3', 'x4', 't'], floatPrimitiveType,\r\n            'Will man die Zwischentangenten einer Bezierkurve erhalten (Ankerkoordinaten x1, x4 und Stützkoordinaten x2, x3), so nutzt man - einzeln sowohl für die x- also auch für die y-Koordinate - diese Funktion. t gibt an, welchen Punkt der Kurve man haben möchte. t hat Werte zwischen 0 (Startpunkt) und 1 (Endpunkt).', floatPrimitiveType);\r\n\r\n\r\n        this.addProcessingMethod('beginShape', [], [],\r\n            'Beginnt mit dem Zeichnen eines Polygons. Die einzelnen Punkte werden mit der Methode vertex(x, y) gesetzt.');\r\n\r\n        this.addProcessingMethod('endShape', [], [],\r\n            'Endet das Zeichnen eines Polygons.');\r\n\r\n        this.addProcessingMethod('beginShape', ['kind'], stringPrimitiveType,\r\n            'Beginnt mit dem Zeichnen eines Polygons. Die einzelnen Punkte werden mit der Methode vertex(x, y) gesetzt. Mögliche Werte für kind sind: POINTS, LINES, TRIANGLES, TRIANGLE_STRIP, TRIANGLE_FAN, QUADS, QUAD_STRIP');\r\n\r\n        this.addProcessingMethod('endShape', ['kind'], stringPrimitiveType,\r\n            'endShape(CLOSE) schließt den Linienzug.');\r\n\r\n        this.addProcessingMethod('vertex', ['x', 'y'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt.');\r\n\r\n        this.addProcessingMethod('point', ['x', 'y'], floatPrimitiveType,\r\n            'Zeichnet einen Punkt.');\r\n\r\n        this.addProcessingMethod('set', ['x', 'y', 'color'], [floatPrimitiveType, floatPrimitiveType, stringPrimitiveType],\r\n            'Setzt die Farbe des Pixels bei (x, y).');\r\n\r\n        this.addProcessingMethod('vertex', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt.');\r\n\r\n        this.addProcessingMethod('point', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Zeichnet einen Punkt.');\r\n\r\n        this.addProcessingMethod('curveVertex', ['x', 'y'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt. Processing zeichnet damit eine Kurve nach dem Catmull-Rom-Algorithmus.');\r\n\r\n        this.addProcessingMethod('curvevertex', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Setzt zwischen beginShape() und endShape() einen Punkt. Processing zeichnet damit eine Kurve nach dem Catmull-Rom-Algorithmus.');\r\n\r\n        this.addProcessingMethod('box', ['size'], floatPrimitiveType,\r\n            'Zeichnet einen 3D-Würfel mit der Seitenlänge size.');\r\n\r\n        this.addProcessingMethod('box', ['sizeX', 'sizeY', 'sizeZ'], floatPrimitiveType,\r\n            'Zeichnet einen 3D-Würfel mit den angegebenen Seitenlängen.');\r\n\r\n        /**\r\n         * Transformationen\r\n         */\r\n        this.addProcessingMethod('resetMatrix', [], [],\r\n            'Setzt alle erfolgten Transformationen zurück.');\r\n\r\n        this.addProcessingMethod('push', [], [],\r\n            'Sichert den aktuellen Zeichenzustand, d.h. die Farben und Transformationen, auf einen Stack.');\r\n\r\n        this.addProcessingMethod('pop', [], [],\r\n            'Holt den obersten Zeichenzustand, d.h. die Farben und Transformationen, vom Stack.');\r\n\r\n        this.addProcessingMethod('scale', ['factor'], floatPrimitiveType,\r\n            'Streckt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('scale', ['factorX', 'factorY'], floatPrimitiveType,\r\n            'Streckt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('scale', ['factorX', 'factorY', 'factorZ'], floatPrimitiveType,\r\n            'Streckt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('translate', ['x', 'y'], floatPrimitiveType,\r\n            'Verschiebt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('translate', ['x', 'y', 'z'], floatPrimitiveType,\r\n            'Verschiebt die nachfolgend gezeichneten Figuren.');\r\n\r\n        this.addProcessingMethod('rotate', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('rotateX', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren um die X-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('rotateY', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren um die Y-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('shearX', ['angle'], floatPrimitiveType,\r\n            'Schert die nachfolgend gezeichneten Figuren in Richtung derX-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('shearY', ['angle'], floatPrimitiveType,\r\n            'Schert die nachfolgend gezeichneten Figuren in Richtung der Y-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('rotateZ', ['angle'], floatPrimitiveType,\r\n            'Rotiert die nachfolgend gezeichneten Figuren um die Z-Achse. Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie angle interpretiert wird. Default ist RADIANS.');\r\n\r\n        this.addProcessingMethod('angleMode', ['mode'], stringPrimitiveType,\r\n            'Mit angleMode(RADIANS) bzw. angleMode(DEGREES) kann beeinflusst werden, wie winkel bei Rotationen interpretiert werden. Default ist RADIANS.');\r\n\r\n        /**\r\n         * Text\r\n         */\r\n        this.addProcessingMethod('textSize', ['size'], floatPrimitiveType,\r\n            'Setzt die Schriftgröße in Pixel.');\r\n\r\n        // this.addProcessingMethod('loadFont', ['fontname'], stringPrimitiveType,\r\n        //     'Lädt eine Schriftart. Diese Methode muss in der Methode preload aufgerufen werden.');\r\n\r\n        this.addProcessingMethod('textAlign', ['alignX'], intPrimitiveType,\r\n            'Setzt die Ausrichtung des nächsten ausgegebenen Textes in x-Richtung. Mögliche Werte sind CENTER, LEFT, RIGHT');\r\n\r\n        this.addProcessingMethod('textAlign', ['alignX', 'alignY'], intPrimitiveType,\r\n            'Setzt die Ausrichtung des nächsten ausgegebenen Textes. Mögliche Werte für alignX sind CENTER, LEFT, RIGHT, mögliche Werte für alignY sind TOP, CENTER, BASELINE, BOTTOM');\r\n\r\n        this.addProcessingMethod('text', ['text', 'x', 'y'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Gibt Text aus.');\r\n\r\n        this.addProcessingMethod('text', ['text', 'x', 'y', 'x2', 'y2'], [stringPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType, floatPrimitiveType],\r\n            'Gibt Text aus. x2 und y2 sind die Breite und Höhe des Textausgabebereichs. Hat der Text horizontal nicht Platz, so wird er entsprechend umgebrochen.');\r\n\r\n        /**\r\n         * Mathematische Funktionen\r\n         */\r\n        this.addProcessingMethod('random', ['low', 'high'], floatPrimitiveType,\r\n            'Gibt eine Zufallszahl zwischen low und high zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('random', ['high'], floatPrimitiveType,\r\n            'Gibt eine Zufallszahl zwischen 0 und high zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sqrt', ['n'], floatPrimitiveType,\r\n            'Gibt die Quadratwurzel von n zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('pow', ['basis', 'exponent'], floatPrimitiveType,\r\n            'Gibt die den Wert der Potenz (\"basis hoch exponent\") zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('max', ['a', 'b'], floatPrimitiveType,\r\n            'Gibt den größeren der beiden Werte zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('min', ['a', 'b'], floatPrimitiveType,\r\n            'Gibt den kleineren der beiden Werte zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('abs', ['n'], floatPrimitiveType,\r\n            'Gibt den Betrag des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sin', ['n'], floatPrimitiveType,\r\n            'Gibt den Sinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('cos', ['n'], floatPrimitiveType,\r\n            'Gibt den Cosinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('tan', ['n'], floatPrimitiveType,\r\n            'Gibt den Tangens des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('asin', ['n'], floatPrimitiveType,\r\n            'Gibt den Arcussinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('acos', ['n'], floatPrimitiveType,\r\n            'Gibt den Arcussosinus des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('radians', ['angle'], floatPrimitiveType,\r\n            'Wandelt einen Winkel vom Gradmaß ins Bogenmaß um.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('degrees', ['angle'], floatPrimitiveType,\r\n            'Wandelt einen Winkel vom Bogenmaß ins Gradmaß um.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('atan', ['n'], floatPrimitiveType,\r\n            'Gibt den Arcussangens des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('atan2', ['x', 'y'], floatPrimitiveType,\r\n            'Gibt den Arcussangens des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sqrt', ['x', 'y'], floatPrimitiveType,\r\n            'Gibt die Quadratwurzel des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('sq', ['x', 'y'], floatPrimitiveType,\r\n            'Gibt das Quadrat des Wertes zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('abs', ['n'], intPrimitiveType,\r\n            'Gibt den Betrag des Wertes zurück.', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('round', ['n'], floatPrimitiveType,\r\n            'Rundet den Wert auf eine ganze Zahl.', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('ceil', ['n'], floatPrimitiveType,\r\n            'Rundet den Wert auf eine ganze Zahl (Aufrunden!).', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('floor', ['n'], floatPrimitiveType,\r\n            'Rundet den Wert auf eine ganze Zahl (Abfrunden!).', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('dist', ['x1', 'y1', 'x2', 'y2'], floatPrimitiveType,\r\n            'Berechnet den Abstand der Punkte (x1, y1) und (x2, y2).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('lerp', ['a', 'b', 't'], floatPrimitiveType,\r\n            'Berechnet den a + (b - a)*t. Wählt man t zwischen 0 und 1, so kann man damit die Zwischenwerte zwischen a und b errechnen.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('constrain', ['value', 'min', 'max'], floatPrimitiveType,\r\n            'Beschränkt value auf den Bereich [min, max], genauer: Ist value < min, so wird min zurückgegeben. Ist value > max, so wird max zurückgegeben. Ansonsten wird value zurückgegeben.', floatPrimitiveType);\r\n\r\n        /**\r\n         * Sonstiges\r\n         */\r\n\r\n        this.addProcessingMethod('year', [], [],\r\n            'Aktuelle Jahreszahl', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('month', [], [],\r\n            'Monat: 1 == Januar, 12 == Dezember', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('day', [], [],\r\n            'Tag (innerhalb des Monats) des aktuellen Datums', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('hour', [], [],\r\n            'Stundenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('hour', [], [],\r\n            'Stundenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('minute', [], [],\r\n            'Minutenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('second', [], [],\r\n            'Sekundenzahl der aktuellen Uhrzeit', intPrimitiveType);\r\n\r\n        this.addProcessingMethod('frameRate', ['n'], intPrimitiveType,\r\n            'Setzt die Framerate (Anzahl der Aufrufe von draw() pro Sekunde)');\r\n\r\n        this.addProcessingMethod('textWidth', ['text'], stringPrimitiveType,\r\n            'Gibt die Breite des Texts zurück.', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('textAscent', ['text'], stringPrimitiveType,\r\n            'Gibt den Ascent Textes zurück ( = Höhe des größten Zeichens über der Grundlinie).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('textDescent', ['text'], stringPrimitiveType,\r\n            'Gibt den Descent Textes zurück ( = Tiefe des tiefsten Zeichens unter der Grundlinie).', floatPrimitiveType);\r\n\r\n        this.addProcessingMethod('textLeading', ['leading'], floatPrimitiveType,\r\n            'Setzt den Abstand zweier aufeinanderfolgender Textzeilen.');\r\n\r\n        this.addProcessingMethod('cursor', ['type'], stringPrimitiveType,\r\n            'Ändert das Aussehen des Mauscursors. Type ist einer der Werte \"arrow\", \"cross\", \"text\", \"move\", \"hand\", \"wait\", \"progress\".');\r\n\r\n        this.addProcessingMethod('noCursor', ['type'], stringPrimitiveType,\r\n            'Hat zur Folge, dass der Mauscursor über dem Zeichenbereich unsichtbar ist.');\r\n\r\n        this.addProcessingMethod('copy', ['sx', 'sy', 'sw', 'sh', 'dx', 'dy', 'dw', 'dh'], floatPrimitiveType,\r\n            'Kopiert den rechteckigen Bereich mit der linken oberen Ecke (sx, sy) sowie der Breite sw und der Höhe sh in den Bereich mit der linken oberen Ecke (dx, dy), der Breite dw und der Höhe dh.');\r\n\r\n        this.addProcessingMethod('millis', [], [],\r\n            'Gibt die Millisekunden zurück, die vergangen sind, seit setup() aufgerufen wurde.');\r\n\r\n        this.addProcessingMethod('redraw', [], [],\r\n            'Führt draw() genau ein Mal aus. Macht ggf. Sinn, wenn die Render-Loop zuvor mit noLoop() gestoppt wurde.');\r\n\r\n\r\n        this.setupAttributeIndicesRecursive();\r\n\r\n    }\r\n\r\n    addProcessingMethod(identifier: string, parameterNames: string[], parameterTypes: Type[] | Type, comment: string, returnType?: Type) {\r\n\r\n        let parameters: Variable[] = [];\r\n        if (Array.isArray(parameterTypes)) {\r\n            for (let i = 0; i < parameterNames.length; i++) {\r\n                parameters.push({ identifier: parameterNames[i], type: parameterTypes[i], declaration: null, usagePositions: null, isFinal: true });\r\n            }\r\n        } else {\r\n            parameters = parameterNames.map((name) => { return { identifier: name, type: parameterTypes, declaration: null, usagePositions: null, isFinal: true } })\r\n        }\r\n\r\n        if (returnType == null) {\r\n            this.addMethod(new Method(identifier, new Parameterlist(parameters), null,\r\n                (parameters) => {\r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                    let pList = parameters.slice(1).map(p => p.value);\r\n\r\n                    ph.p5o[identifier](...pList);\r\n\r\n                }, false, false, comment, false));\r\n        } else {\r\n            this.addMethod(new Method(identifier, new Parameterlist(parameters), returnType,\r\n                (parameters) => {\r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let ph: ProcessingHelper = o.intrinsicData[\"Processing\"];\r\n                    let pList = parameters.slice(1).map(p => p.value);\r\n\r\n                    return ph.p5o[identifier](...pList);\r\n\r\n                }, false, false, comment, false));\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n    getProcessingHelper(processingObject: RuntimeObject, breite: number = 800, höhe: number = 600): ProcessingHelper {\r\n\r\n        let interpreter = this.module?.main?.getInterpreter();\r\n\r\n\r\n        if (interpreter.processingHelper != null) {\r\n\r\n            interpreter.throwException(\"Es kann nur ein einziges Processing-Applet instanziert werden.\");\r\n            return;\r\n        }\r\n\r\n        if (interpreter.worldHelper != null) {\r\n\r\n            interpreter.throwException(\"Processing kann nicht gleichzeitig mit der herkömmlichen Grafikausgabe genutzt werden.\");\r\n            return;\r\n        }\r\n\r\n        return new ProcessingHelper(this.module, interpreter, processingObject);\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport class ProcessingHelper {\r\n\r\n    $containerOuter: JQuery<HTMLElement>;\r\n    $containerInner: JQuery<HTMLElement>;\r\n\r\n    $div: JQuery<HTMLElement>;\r\n\r\n    width: number = 800;\r\n    height: number = 600;\r\n\r\n    p5o: p5;\r\n\r\n    renderer: string;\r\n    loopStopped: boolean = false;\r\n\r\n    onSizeChanged: () => void;\r\n\r\n\r\n    constructor(private module: Module, private interpreter: Interpreter, public runtimeObject: RuntimeObject) {\r\n\r\n        this.interpreter.processingHelper = this;\r\n\r\n        this.$containerOuter = jQuery('<div></div>');\r\n        let $graphicsDiv = this.module.main.getInterpreter().printManager.getGraphicsDiv();\r\n\r\n        this.onSizeChanged = () => {\r\n            let $jo_tabs = $graphicsDiv.parents(\".jo_tabs\");\r\n            let maxWidth: number = $jo_tabs.width();\r\n            let maxHeight: number = $jo_tabs.height();\r\n            // let maxWidth: number = $graphicsDiv.parent().width();\r\n            // let maxHeight: number = $graphicsDiv.parent().height();\r\n\r\n            if (this.height / this.width > maxHeight / maxWidth) {\r\n                $graphicsDiv.css({\r\n                    'width': this.width / this.height * maxHeight + \"px\",\r\n                    'height': maxHeight + \"px\",\r\n                })\r\n            } else {\r\n                $graphicsDiv.css({\r\n                    'height': this.height / this.width * maxWidth + \"px\",\r\n                    'width': maxWidth + \"px\",\r\n                })\r\n            }\r\n        };\r\n\r\n        $graphicsDiv.off('sizeChanged');\r\n        $graphicsDiv.on('sizeChanged', this.onSizeChanged);\r\n\r\n        this.onSizeChanged();\r\n\r\n        this.$containerInner = jQuery('<div></div>');\r\n        this.$containerOuter.append(this.$containerInner);\r\n\r\n        $graphicsDiv.append(this.$containerOuter);\r\n        $graphicsDiv.show();\r\n\r\n        $graphicsDiv[0].oncontextmenu = function (e) {\r\n            e.preventDefault();\r\n        };\r\n\r\n        this.module.main.getRightDiv()?.adjustWidthToWorld();\r\n\r\n    }\r\n\r\n    createCanvas(width: number, height: number) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.onSizeChanged();\r\n        this.p5o.createCanvas(this.width, this.height, this.renderer);\r\n        this.$div.find('canvas').css({\r\n            'width': '',\r\n            'height': ''\r\n\r\n        });\r\n    }\r\n\r\n    main() {\r\n        this.interpreter.timerExtern = true;\r\n        this.setupProcessing(this.$containerInner);\r\n    }\r\n\r\n    setupProcessing($div: JQuery<HTMLElement>) {\r\n\r\n        let that = this;\r\n        let drawMethodPending: boolean = true;\r\n        this.$div = $div;\r\n\r\n        let sketch = (p5: p5) => {\r\n\r\n            p5.setup = function () {\r\n                that.renderer = p5.P2D;\r\n\r\n                let afterFinishingBoth = () => {\r\n                    // p5.createCanvas(that.width, that.height, that.renderer);\r\n                    drawMethodPending = false\r\n                    // $div.find('canvas').css({\r\n                    //     'width': '',\r\n                    //     'height': ''\r\n                    // })            \r\n                }\r\n\r\n                let i = 2;\r\n\r\n                that.runMethod('setup', () => {\r\n                    if (--i == 0) afterFinishingBoth();\r\n                });\r\n\r\n                that.runMethod('settings', () => {\r\n                    if (--i == 0) afterFinishingBoth();\r\n                });\r\n\r\n\r\n            };\r\n\r\n            p5.preload = function () {\r\n                that.runMethod('preload');\r\n            };\r\n\r\n            p5.draw = function () {\r\n                if (that.interpreter.state == InterpreterState.running && !that.loopStopped) {\r\n                    if (!drawMethodPending) {\r\n                        drawMethodPending = true;\r\n                        that.runMethod(\"draw\", () => {\r\n                            drawMethodPending = false;\r\n                        });\r\n                    }\r\n                }\r\n                that.tick();\r\n                // p5.background(50);\r\n                // p5.rect(p5.width / 2, p5.height / 2, 50, 50);\r\n\r\n            };\r\n\r\n            p5.mousePressed = function () {\r\n                that.runMethod('mousePressed');\r\n            };\r\n\r\n            p5.mouseReleased = function () {\r\n                that.runMethod('mouseReleased');\r\n            };\r\n\r\n            p5.mouseClicked = function () {\r\n                that.runMethod('mouseClicked');\r\n            };\r\n\r\n            p5.mouseDragged = function () {\r\n                that.runMethod('mouseDragged');\r\n            };\r\n\r\n            p5.mouseEntered = function () {\r\n                that.runMethod('mouseEntered');\r\n            };\r\n\r\n            p5.mouseExited = function () {\r\n                that.runMethod('mouseExited');\r\n            };\r\n\r\n            p5.mouseMoved = function () {\r\n                that.runMethod('mouseMoved');\r\n            };\r\n\r\n            p5.keyPressed = function () {\r\n                that.runMethod('keyPressed');\r\n            };\r\n\r\n            p5.keyReleased = function () {\r\n                that.runMethod('keyReleased');\r\n            };\r\n\r\n\r\n        }\r\n\r\n        //@ts-ignore\r\n        this.p5o = new p5(sketch, $div[0]);\r\n        $div.find('canvas').css({\r\n            'width': '',\r\n            'height': ''\r\n        })\r\n\r\n    }\r\n\r\n\r\n    tick() {\r\n\r\n        if (this.interpreter.state == InterpreterState.running) {\r\n            this.interpreter.timerFunction(33.33, true, 0.5);\r\n            this.interpreter.timerStopped = false;\r\n            this.interpreter.timerFunction(33.33, false, 0.08);\r\n        }\r\n\r\n    }\r\n\r\n    loop() {\r\n        this.loopStopped = false;\r\n    }\r\n\r\n    noLoop() {\r\n        this.loopStopped = true;\r\n    }\r\n\r\n    runMethod(methodIdentifier: string, callback: () => void = null) {\r\n\r\n        let klass: Klass = <Klass>this.runtimeObject.class;\r\n        let method = klass.getMethodBySignature(methodIdentifier + \"()\");\r\n\r\n        let program = method?.program;\r\n\r\n        if (program == null) {\r\n            if (callback != null) callback();\r\n            return;\r\n        }\r\n\r\n        let stackElements: Value[] = [\r\n            {\r\n                type: klass,\r\n                value: this.runtimeObject\r\n            },\r\n        ];\r\n\r\n        this.interpreter.runTimer(method, stackElements, (interpreter) => {\r\n            if (callback != null) callback();\r\n        }, methodIdentifier == \"draw\");\r\n    }\r\n\r\n\r\n    destroyWorld() {\r\n        if (this.p5o != null) this.p5o.remove();\r\n        this.$containerOuter.remove();\r\n        this.module.main.getInterpreter().printManager.getGraphicsDiv().hide();\r\n        this.interpreter.timerExtern = false;\r\n        this.interpreter.processingHelper = null;\r\n    }\r\n\r\n}","import { Module } from \"../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, booleanPrimitiveType } from \"../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist, Value } from \"../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"./FilledShape.js\";\r\nimport { Interpreter } from \"../../interpreter/Interpreter.js\";\r\nimport { polygonBerührtPolygon } from \"../../tools/MatheTools.js\";\r\nimport { ShapeHelper } from \"./Shape.js\";\r\n\r\nexport class TurtleClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Turtle\", module, \"Turtle-Klasse zum Zeichnen von Streckenzügen oder gefüllten Figuren. Wichtig sind vor allem die Methoden forward(double length) und turn(double angleDeg), die die Turtle nach vorne bewegen bzw. ihre Blickrichtung ändern.\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"FilledShape\"));\r\n\r\n        this.addMethod(new Method(\"Turtle\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n\r\n                let ph = new TurtleHelper(x, y, true, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Turtle-Objekt ohne Punkte. Die Turtle blickt anfangs nach rechts. Am Ende des Streckenzugs wird eine \"Schildkröte\" (kleines Dreieck) gezeichnet.', true));\r\n\r\n\r\n        this.addMethod(new Method(\"Turtle\", new Parameterlist([\r\n            { identifier: \"x\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"y\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"showTurtle\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let x: number = parameters[1].value;\r\n                let y: number = parameters[2].value;\r\n                let showTurtle: boolean = parameters[3].value;\r\n\r\n                let ph = new TurtleHelper(x, y, showTurtle, module.main.getInterpreter(), o);\r\n                o.intrinsicData[\"Actor\"] = ph;\r\n\r\n            }, false, false, 'Instanziert ein neues Turtle-Objekt ohne Punkte. Die Turtle blickt anfangs nach rechts. Falls showTurtle == true, wird am Ende des Streckenzuges eine \"Schildkröte\" (kleines Dreieck) gezeichnet.', true));\r\n\r\n\r\n        this.addMethod(new Method(\"forward\", new Parameterlist([\r\n            { identifier: \"length\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let length: number = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"forward\")) return;\r\n\r\n                sh.forward(length);\r\n\r\n            }, false, false, 'Weist die Turtle an, die angegebene Länge vorwärts zu gehen. Ihr zurückgelegter Weg wird als gerade Strecke mit der aktuellen BorderColor gezeichnet. Mit setBorderColor(null) bewirkst Du, dass ein Stück ihres Weges nicht gezeichnet wird.', false));\r\n\r\n        this.addMethod(new Method(\"turn\", new Parameterlist([\r\n            { identifier: \"angleInDeg\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let angle: number = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"turn\")) return;\r\n\r\n                sh.turn(angle);\r\n\r\n            }, false, false, 'Bewirkt, dass sich die Turtle um den angegebenen Winkel (in Grad!) dreht, d.h. ihre Blickrichtung ändert. Ein positiver Winkel bewirkt eine Drehung gegen den Uhrzeigersinn. Diese Methode wirkt sich NICHT auf die bisher gezeichneten Strecken aus. Willst Du alles bisher Gezeichnete inklusive Turtle drehen, so nutze die Methode rotate.', false));\r\n\r\n        this.addMethod(new Method(\"penUp\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"penUp\")) return;\r\n\r\n                sh.penIsDown = false;\r\n\r\n            }, false, false, 'Bewirkt, dass die Turtle beim Gehen ab jetzt nicht mehr zeichnet.', false));\r\n\r\n        this.addMethod(new Method(\"penDown\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"penDown\")) return;\r\n\r\n                sh.penIsDown = true;\r\n\r\n            }, false, false, 'Bewirkt, dass die Turtle beim Gehen ab jetzt wieder zeichnet.', false));\r\n\r\n        this.addMethod(new Method(\"closeAndFill\", new Parameterlist([\r\n            { identifier: \"closeAndFill\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let closeAndFill: boolean = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"closeAndFill\")) return;\r\n\r\n                sh.closeAndFill(closeAndFill);\r\n\r\n            }, false, false, 'closeAndFill == true bewirkt, dass das von der Turtlezeichnung umschlossene Gebiet gefüllt wird.', false));\r\n\r\n        this.addMethod(new Method(\"showTurtle\", new Parameterlist([\r\n            { identifier: \"showTurtle\", type: booleanPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let showTurtle: boolean = parameters[1].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"showTurtle\")) return;\r\n\r\n                sh.setShowTurtle(showTurtle);\r\n\r\n            }, false, false, 'showTurtle == true bewirkt, dass am Ort der Turtle ein rotes Dreieck gezeichnet wird.', false));\r\n\r\n        this.addMethod(new Method(\"copy\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"copy\")) return;\r\n\r\n                return sh.getCopy(<Klass>o.class);\r\n\r\n            }, false, false, 'Erstellt eine Kopie des Turtle-Objekts und gibt es zurück.', false));\r\n\r\n        this.addMethod(new Method(\"clear\", new Parameterlist([\r\n        ]), this,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let sh: TurtleHelper = o.intrinsicData[\"Actor\"];\r\n\r\n                if (sh.testdestroyed(\"clear\")) return;\r\n\r\n                return sh.clear();\r\n\r\n            }, false, false, 'Löscht alle bis jetzt mit der Turtle gezeichneten Strecken.', false));\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\ntype LineElement = {\r\n    x: number,\r\n    y: number,\r\n    color: number,\r\n    alpha: number,\r\n    lineWidth: number\r\n}\r\n\r\nexport class TurtleHelper extends FilledShapeHelper {\r\n\r\n    lineElements: LineElement[] = [];\r\n    turtleAngleDeg: number = 0; // in Rad\r\n\r\n    isFilled: boolean = false;\r\n\r\n    turtle: PIXI.Graphics;\r\n    lineGraphic: PIXI.Graphics;\r\n\r\n    xSum: number = 0;\r\n    ySum: number = 0;\r\n\r\n    initialHitPolygonDirty: boolean = true;\r\n\r\n    turtleSize: number = 40;\r\n\r\n    penIsDown: boolean = true;\r\n\r\n    lastLineWidth: number = 0;\r\n    lastColor: number = 0;\r\n    lastAlpha: number = 0;\r\n\r\n    lastTurtleAngleDeg: number = 0; // angle in Rad\r\n\r\n    renderJobPresent: boolean = false;\r\n\r\n    constructor(xStart: number, yStart: number, private showTurtle: boolean,\r\n        interpreter: Interpreter, runtimeObject: RuntimeObject) {\r\n        super(interpreter, runtimeObject);\r\n\r\n        this.lineElements.push({\r\n            x: xStart,\r\n            y: yStart,\r\n            color: 0,\r\n            alpha: 1,\r\n            lineWidth: 1\r\n        });\r\n        this.calculateCenter();\r\n\r\n        this.borderColor = 0xffffff;\r\n\r\n        this.hitPolygonInitial = [];\r\n\r\n        let container = new PIXI.Container();\r\n        this.displayObject = container;\r\n\r\n        this.lineGraphic = new PIXI.Graphics();\r\n        container.addChild(this.lineGraphic);\r\n        this.lineGraphic.moveTo(xStart, yStart);\r\n\r\n        this.turtle = new PIXI.Graphics();\r\n        container.addChild(this.turtle);\r\n        this.turtle.visible = this.showTurtle;\r\n        this.initTurtle(0, 0, this.turtleAngleDeg);\r\n        this.moveTurtleTo(xStart, yStart, this.turtleAngleDeg);\r\n\r\n\r\n        // let g: PIXI.Graphics = <any>this.displayObject;\r\n\r\n        this.worldHelper.stage.addChild(this.displayObject);\r\n\r\n        this.addToDefaultGroupAndSetDefaultVisibility();\r\n\r\n    }\r\n\r\n    calculateCenter() {\r\n        let length = this.lineElements.length;\r\n        let lastLineElement = this.lineElements[length - 1];\r\n        this.xSum += lastLineElement.x;\r\n        this.ySum += lastLineElement.y;\r\n        this.centerXInitial = this.xSum / length;\r\n        this.centerYInitial = this.ySum / length;\r\n    }\r\n\r\n    closeAndFill(closeAndFill: boolean) {\r\n        if (closeAndFill != this.isFilled) {\r\n            this.isFilled = closeAndFill;\r\n            this.render();\r\n            this.initialHitPolygonDirty = true;\r\n        }\r\n    }\r\n\r\n    setShowTurtle(show: boolean) {\r\n        this.turtle.visible = show;\r\n    }\r\n\r\n    turn(angleDeg: number) {\r\n        this.turtleAngleDeg -= angleDeg;\r\n        if(Math.abs(this.turtleAngleDeg) > 360){\r\n            this.turtleAngleDeg -= Math.floor(this.turtleAngleDeg/360)*360;\r\n        }\r\n        let lastLineElement: LineElement = this.lineElements[this.lineElements.length - 1];\r\n        this.moveTurtleTo(lastLineElement.x, lastLineElement.y, this.turtleAngleDeg);\r\n    }\r\n\r\n    rotate(angleInDegrees: number, cx?: number, cy?: number) {\r\n        // this.turn(angleInDegrees);\r\n        super.rotate(angleInDegrees, cx, cy);\r\n    }\r\n\r\n    getCopy(klass: Klass): RuntimeObject {\r\n\r\n        let ro: RuntimeObject = new RuntimeObject(klass);\r\n        let rh: TurtleHelper = new TurtleHelper(this.lineElements[0].x, this.lineElements[0].y,\r\n            this.showTurtle, this.worldHelper.interpreter, ro);\r\n        ro.intrinsicData[\"Actor\"] = rh;\r\n\r\n        rh.turtleAngleDeg = this.turtleAngleDeg;\r\n\r\n        rh.copyFrom(this);\r\n        rh.render();\r\n\r\n        return ro;\r\n    }\r\n\r\n    newTurtleX: number;\r\n    newTurtleY: number;\r\n    newAngleDeg: number;\r\n\r\n    forward(length: number) {\r\n\r\n        let lastLineElement: LineElement = this.lineElements[this.lineElements.length - 1];\r\n\r\n        let turtleAngleRad = this.turtleAngleDeg/180.0*Math.PI;\r\n\r\n        let newLineElement: LineElement = {\r\n            x: lastLineElement.x + length * Math.cos(turtleAngleRad),\r\n            y: lastLineElement.y + length * Math.sin(turtleAngleRad),\r\n            color: this.penIsDown ? this.borderColor : null,\r\n            alpha: this.borderAlpha,\r\n            lineWidth: this.borderWidth\r\n        }\r\n\r\n        this.lineElements.push(newLineElement);\r\n\r\n        // if (this.isFilled) {\r\n        //     this.render();\r\n        // } else {\r\n        //     if (this.borderColor != null) {\r\n        //         // this.lineGraphic.moveTo(lastLineElement.x, lastLineElement.y);\r\n        //         this.lineGraphic.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5);\r\n        //         this.lineGraphic.lineTo(newLineElement.x, newLineElement.y);\r\n        //         console.log(\"LineTo: \" + newLineElement.x + \", \" + newLineElement.y);\r\n        //     } else {\r\n        //         this.lineGraphic.moveTo(newLineElement.x, newLineElement.y);\r\n        //         console.log(\"MoveTo: \" + newLineElement.x + \", \" + newLineElement.y);\r\n        //     }\r\n        // }\r\n\r\n        this.hitPolygonDirty = true;\r\n        this.initialHitPolygonDirty = true;\r\n        this.calculateCenter();\r\n\r\n        this.newTurtleX = newLineElement.x;\r\n        this.newTurtleY = newLineElement.y;\r\n        this.newAngleDeg = this.turtleAngleDeg;\r\n\r\n        // don't render more frequent than every 1/100 s\r\n        if (!this.renderJobPresent) {\r\n            this.renderJobPresent = true;\r\n            setTimeout(() => {\r\n                this.renderJobPresent = false;\r\n                this.render();\r\n                this.moveTurtleTo(this.newTurtleX, this.newTurtleY, this.turtleAngleDeg);\r\n            }, 100);\r\n        }\r\n\r\n    }\r\n\r\n    moveTo(x: number, y: number) {\r\n        let newLineElement: LineElement = {\r\n            x: x,\r\n            y: y,\r\n            color: null,\r\n            alpha: this.borderAlpha,\r\n            lineWidth: this.borderWidth\r\n        }\r\n\r\n        this.lineElements.push(newLineElement);\r\n\r\n        this.hitPolygonDirty = true;\r\n        this.initialHitPolygonDirty = true;\r\n        this.calculateCenter();\r\n        this.moveTurtleTo(newLineElement.x, newLineElement.y, this.turtleAngleDeg);\r\n    }\r\n\r\n\r\n    initTurtle(x: number, y: number, angleDeg: number): void {\r\n        this.turtle.clear();\r\n        this.turtle.lineStyle(3, 0xff0000, 1, 0.5);\r\n        this.turtle.moveTo(x, y);\r\n\r\n        let angleRad = angleDeg/180.0*Math.PI;\r\n\r\n        let vx = Math.cos(angleRad);\r\n        let vy = Math.sin(angleRad);\r\n\r\n        let vxp = -Math.sin(angleRad);\r\n        let vyp = Math.cos(angleRad);\r\n\r\n        let lengthForward = this.turtleSize / 2;\r\n        let lengthBackward = this.turtleSize / 4;\r\n        let lengthBackwardP = this.turtleSize / 4;\r\n\r\n        this.turtle.moveTo(x + vx * lengthForward, y + vy * lengthForward);\r\n        this.turtle.lineTo(x - vx * lengthBackward + vxp * lengthBackwardP, y - vy * lengthBackward + vyp * lengthBackwardP);\r\n        this.turtle.lineTo(x - vx * lengthBackward - vxp * lengthBackwardP, y - vy * lengthBackward - vyp * lengthBackwardP);\r\n        this.turtle.lineTo(x + vx * lengthForward, y + vy * lengthForward);\r\n    }\r\n\r\n    moveTurtleTo(x: number, y: number, angleDeg: number){\r\n        this.turtle.localTransform.identity();\r\n        this.turtle.localTransform.rotate(angleDeg/180.0*Math.PI);\r\n        this.turtle.localTransform.translate(x, y);\r\n\r\n        // this.turtle.localTransform.translate(-this.turtleX, -this.turtleY);\r\n        // this.turtle.localTransform.rotate((angleDeg - this.lastTurtleAngleDeg)/180.0*Math.PI);\r\n        // this.turtle.localTransform.translate(x, y);\r\n        //@ts-ignore\r\n        this.turtle.transform.onChange();\r\n        this.turtle.updateTransform();\r\n\r\n        this.lastTurtleAngleDeg = this.turtleAngleDeg;\r\n    }\r\n\r\n    render(): void {\r\n\r\n        let g: PIXI.Graphics = this.lineGraphic;\r\n\r\n        this.lastLineWidth = 0;\r\n        this.lastColor = 0;\r\n        this.lastAlpha = 0;\r\n\r\n        if (this.displayObject == null) {\r\n            g = new PIXI.Graphics();\r\n            this.displayObject = g;\r\n            this.worldHelper.stage.addChild(g);\r\n\r\n        } else {\r\n            g.clear();\r\n        }\r\n\r\n        if (this.fillColor != null && this.isFilled) {\r\n            g.beginFill(this.fillColor, this.fillAlpha);\r\n        }\r\n\r\n        let firstPoint = this.lineElements[0];\r\n        g.moveTo(firstPoint.x, firstPoint.y);\r\n\r\n        if (this.isFilled) {\r\n            g.lineStyle(this.borderWidth, this.borderColor, this.borderAlpha, 0.5);\r\n        }\r\n        for (let i = 1; i < this.lineElements.length; i++) {\r\n            let le: LineElement = this.lineElements[i];\r\n            if (le.color != null) {\r\n                if (!this.isFilled) {\r\n                    if (le.lineWidth != this.lastLineWidth || le.color != this.lastColor || le.alpha != this.lastAlpha) {\r\n                        g.lineStyle(le.lineWidth, le.color, le.alpha, 0.5)\r\n                        this.lastLineWidth = le.lineWidth;\r\n                        this.lastColor = le.color;\r\n                        this.lastAlpha = le.alpha;\r\n                    }\r\n                }\r\n                g.lineTo(le.x, le.y);\r\n                // console.log(\"LineTo: \" + le.x + \", \" + le.y);\r\n            } else {\r\n                g.moveTo(le.x, le.y);\r\n                // console.log(\"MoveTo: \" + le.x + \", \" + le.y);\r\n            }\r\n        }\r\n\r\n        if (this.isFilled) {\r\n            g.closePath();\r\n        }\r\n\r\n        if (this.fillColor != null && this.isFilled) {\r\n            g.endFill();\r\n        }\r\n    };\r\n\r\n    collidesWith(shapeHelper: any) {\r\n\r\n        if (shapeHelper instanceof TurtleHelper && shapeHelper.initialHitPolygonDirty) {\r\n            shapeHelper.setupInitialHitPolygon();\r\n        }\r\n\r\n        if (this.initialHitPolygonDirty) {\r\n            this.setupInitialHitPolygon();\r\n            this.transformHitPolygon();\r\n        }\r\n\r\n        let bb = this.displayObject.getBounds();\r\n        let bb1 = shapeHelper.displayObject.getBounds();\r\n\r\n        if (bb.left > bb1.right || bb1.left > bb.right) return false;\r\n\r\n        if (bb.top > bb1.bottom || bb1.top > bb.bottom) return false;\r\n\r\n        if (shapeHelper[\"shapes\"]) {\r\n            return shapeHelper.collidesWith(this);\r\n        }\r\n\r\n        if (this.hitPolygonInitial == null || shapeHelper.hitPolygonInitial == null) return true;\r\n\r\n        // boundig boxes collide, so check further:\r\n        if (this.hitPolygonDirty) this.transformHitPolygon();\r\n        if (shapeHelper.hitPolygonDirty) shapeHelper.transformHitPolygon();\r\n\r\n        return polygonBerührtPolygon(this.hitPolygonTransformed, shapeHelper.hitPolygonTransformed);\r\n\r\n    }\r\n\r\n    setupInitialHitPolygon() {\r\n        this.hitPolygonInitial = this.lineElements.map((le) => { return { x: le.x, y: le.y } });\r\n    }\r\n\r\n    clear(x: number = null, y: number = null, angle: number = null) {\r\n        let lastLineElement = this.lineElements.pop();\r\n        if(x == null) x = lastLineElement.x;\r\n        if(y == null) y = lastLineElement.y;\r\n\r\n        this.lineElements = [];\r\n\r\n        this.lineElements.push({\r\n            x: x,\r\n            y: y,\r\n            color: 0,\r\n            alpha: 1,\r\n            lineWidth: 1\r\n        });\r\n        this.calculateCenter();\r\n\r\n        this.hitPolygonInitial = [];\r\n        if(angle != null){\r\n            this.turtleAngleDeg = angle;\r\n            this.lastTurtleAngleDeg = 0;\r\n            this.borderColor = 0;\r\n            this.turtleSize = 40;\r\n        }\r\n        this.render();\r\n        if(angle != null){\r\n            this.moveTurtleTo(x, y, angle);\r\n        }\r\n    }\r\n\r\n\r\n    touchesAtLeastOneFigure(): boolean {\r\n        let lastLineElement: LineElement = this.lineElements[this.lineElements.length - 1];\r\n        let x = lastLineElement.x;\r\n        let y = lastLineElement.y;\r\n\r\n        for (let sh of this.worldHelper.shapes) {\r\n            if (sh != this && sh.containsPoint(x, y)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    touchesColor(farbe: number): boolean {\r\n        let lastLineElement: LineElement = this.lineElements[this.lineElements.length - 1];\r\n        let x = lastLineElement.x;\r\n        let y = lastLineElement.y;\r\n\r\n        for (let sh of this.worldHelper.shapes) {\r\n            if (sh != this && sh.containsPoint(x, y)) {\r\n                if (sh instanceof FilledShapeHelper && sh.fillColor == farbe) return true;\r\n                // if(sh instanceof TurtleHelper) TODO\r\n            }\r\n        }\r\n    }\r\n\r\n    touchesShape(shape: ShapeHelper) {\r\n        let lastLineElement: LineElement = this.lineElements[this.lineElements.length - 1];\r\n        let x = lastLineElement.x;\r\n        let y = lastLineElement.y;\r\n        return shape.containsPoint(x, y);\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Module } from \"../compiler/parser/Module.js\";\r\nimport { Klass, Visibility } from \"../compiler/types/Class.js\";\r\nimport { doublePrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, Parameterlist, Value } from \"../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../interpreter/RuntimeObject.js\";\r\n\r\nexport class RandomClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Random\", module, \"Zufallszahlengenerator\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        this.setupAttributeIndicesRecursive();\r\n\r\n\r\n        this.addMethod(new Method(\"nextInt\", new Parameterlist([\r\n            { identifier: \"bound\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let bound: number = parameters[1].value;\r\n\r\n                return Math.floor(Math.random()*bound);\r\n\r\n            }, false, false, 'Gibt eine ganzzahlige Zufallszahl aus der Menge {0, 1, ..., bound - 1} zurück.', false));\r\n\r\n        this.addMethod(new Method(\"randint\", new Parameterlist([\r\n            { identifier: \"from\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"to\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), intPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let from: number = parameters[1].value;\r\n                let to: number = parameters[2].value;\r\n\r\n                return Math.floor(Math.random()*(to - from + 1) + from);\r\n\r\n            }, false, true, 'Gibt eine ganzzahlige Zufallszahl aus der Menge {from, from + 1, ..., to} zurück.', false));\r\n\r\n        this.addMethod(new Method(\"randdouble\", new Parameterlist([\r\n            { identifier: \"from\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n            { identifier: \"to\", type: doublePrimitiveType, declaration: null, usagePositions: null, isFinal: true, isEllipsis: false },\r\n        ]), doublePrimitiveType,\r\n            (parameters) => {\r\n\r\n                let from: number = parameters[1].value;\r\n                let to: number = parameters[2].value;\r\n\r\n                return Math.random()*(to - from) + from;\r\n\r\n            }, false, true, 'Gibt eine Zufallszahl aus dem Intervall [from, to[ zurück.', false));\r\n\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n","import { Enum } from \"../../compiler/types/Enum.js\";\r\nimport { Module } from \"../../compiler/parser/Module.js\";\r\nimport { TokenType } from \"../../compiler/lexer/Token.js\";\r\n\r\nexport class DirectionClass extends Enum {\r\n\r\n    constructor(module: Module){\r\n        super(\"Direction\", module, [\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"top\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"right\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"bottom\"\r\n            },\r\n            {\r\n                type: TokenType.pushEnumValue,\r\n                position: null,\r\n                identifier: \"left\"\r\n            }\r\n        ]);\r\n\r\n        this.documentation = \"Richtung (oben, rechts, unten, links)\"\r\n    }\r\n\r\n}","type Patch = {\r\n    old: RegExp, \r\n    new: string\r\n}\r\n\r\nexport class Patcher {\r\n\r\n    static patches: Patch[] = [\r\n        {old: /SpriteLibrary.Ship_Adrian,\\s*0/g, new: \"SpriteLibrary.Space_Shooter_1, 0\"},\r\n        {old: /SpriteLibrary.Ship_Adrian,\\s*1/g, new: \"SpriteLibrary.Space_Shooter_1, 1\"},\r\n        {old: /SpriteLibrary.Ship_Adrian,\\s*2/g, new: \"SpriteLibrary.Space_Shooter_1, 2\"},\r\n        {old: /SpriteLibrary.Ship_Adrian,\\s*3/g, new: \"SpriteLibrary.Space_Shooter_1, 3\"},\r\n        {old: /SpriteLibrary.Ship_Adrian,\\s*4/g, new: \"SpriteLibrary.Space_Shooter_1, 4\"},\r\n\r\n        {old: /SpriteLibrary.Schuss_Adrian,\\s*0/g, new: \"SpriteLibrary.Space_Shooter_1, 5\"},\r\n        {old: /SpriteLibrary.Schuss_Adrian,\\s*1/g, new: \"SpriteLibrary.Space_Shooter_1, 6\"},\r\n        {old: /SpriteLibrary.Schuss_Adrian,\\s*2/g, new: \"SpriteLibrary.Space_Shooter_1, 7\"},\r\n        {old: /SpriteLibrary.Schuss_Adrian,\\s*3/g, new: \"SpriteLibrary.Space_Shooter_1, 8\"},\r\n        {old: /SpriteLibrary.Schuss_Adrian,\\s*4/g, new: \"SpriteLibrary.Space_Shooter_1, 9\"},\r\n\r\n        {old: /SpriteLibrary.Asteroid_Adrian,\\s*0/g, new: \"SpriteLibrary.Space_Shooter_1, 10\"},\r\n        {old: /SpriteLibrary.Gegner_Adrian,\\s*0/g, new: \"SpriteLibrary.Space_Shooter_1, 11\"},\r\n\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*0/g, new: \"SpriteLibrary.Space_Shooter_1, 12\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*1/g, new: \"SpriteLibrary.Space_Shooter_1, 13\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*2/g, new: \"SpriteLibrary.Space_Shooter_1, 14\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*3/g, new: \"SpriteLibrary.Space_Shooter_1, 15\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*4/g, new: \"SpriteLibrary.Space_Shooter_1, 16\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*5/g, new: \"SpriteLibrary.Space_Shooter_1, 17\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*6/g, new: \"SpriteLibrary.Space_Shooter_1, 18\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*7/g, new: \"SpriteLibrary.Space_Shooter_1, 19\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*8/g, new: \"SpriteLibrary.Space_Shooter_1, 20\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*9/g, new: \"SpriteLibrary.Space_Shooter_1, 21\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*10/g, new: \"SpriteLibrary.Space_Shooter_1, 22\"},\r\n        {old: /SpriteLibrary.Explosion_Adrian,\\s*11/g, new: \"SpriteLibrary.Space_Shooter_1, 23\"},\r\n    ] \r\n\r\n    static patch(text: string): {patchedText: string, modified: boolean} {\r\n\r\n        let modified: boolean = false;\r\n\r\n        for(let patch of Patcher.patches){\r\n            if(text.match(patch.old) != null){\r\n                text = text.replace(patch.old, patch.new);\r\n                modified = true;\r\n            }\r\n        }\r\n\r\n        return {patchedText: text, modified: modified}\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}","export class Boxes3d {\r\n    public static createCube3d(material: Pixi3d.Material = new Pixi3d.StandardMaterial()){\r\n        return new Pixi3d.Mesh3D(this.createCube3dMesh(), material);\r\n    }\r\n    public static createCube3dMesh() {\r\n        return Object.assign(new Pixi3d.MeshGeometry3D(), {\r\n            positions: {\r\n                buffer: new Float32Array([-1, 1, 1, -1, -1, -1, -1, -1, 1, -1, 1, -1,  // 0, 1, 2, 3\r\n                -1, 1, -1, 1, -1, -1, -1, -1, -1, 1, 1, -1,  // 4, 5, 6, 7\r\n                    1, 1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, // 8, 9, 10, 11\r\n                    1, 1, 1, -1, -1, 1, 1, -1, 1, -1, 1, 1,  // 12, 13, 14, 15\r\n                    1, -1, 1, -1, -1, -1, 1, -1, -1, -1, -1, 1,  // 16, 17, 18, 19\r\n                -1, 1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1]) // 20, 21, 22, 23\r\n            },\r\n            indices: {\r\n                buffer: new Uint8Array([0, 1, 2, 0, 3, 1, 4, 5, 6, 4, 7, 5, 8, 9, 10, 8, 11, 9, 12, 13, 14, 12, 15, 13, 16, 17, 18, 16, 19, 17, 20, 21, 22, 20, 23, 21])\r\n            },\r\n            normals: {\r\n                buffer: new Float32Array([-1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0])\r\n            },\r\n            uvs: [{\r\n                buffer: new Float32Array([\r\n                    0.66666, 0.00, 0.33333, 1.00,  0.66666, 1.00, 0.33333, 0.00, \r\n                    0.66666, 0.00, 0.33333, 1.00, 0.66666, 1.00, 0.33333, 0.00, \r\n                    0.66666, 0.00, 0.33333, 1.00, 0.66666, 1.00, 0.33333, 0.00, \r\n                    0.66666, 0.00, 0.33333, 1.00, 0.66666, 1.00, 0.33333, 0.00, \r\n                    0,       0,    0.33333, 0.25, 0.33333, 0,    0,       0.25, \r\n                    0.66666, 0, 1.0, 1.0, 1.0, 0, 0.66666, 1.00])\r\n                // buffer: new Float32Array([0.66666, 1, 0.33333, 0.75, 0.33333, 1,   0.66666, 0.75, 0.66666, 0.75, 0.33333, 0.5, 0.33333, 0.75, 0.66666, 0.5, \r\n                //  0.66666, 0.5, 0.33333, 0.25, 0.33333, 0.5, 0.66666, 0.25, 0.66666, 0.25, 0.33333, 0, 0.33333, 0.25, 0.66666, 0, \r\n                //  0.33333, 0.25, 0.125, 0.5, 0.33333, 0.5, 0.125, 0.25, \r\n                //1.0, 0.25, 0.66666, 0.5, 1.0, 0.5, 0.66666, 0.25])\r\n            }],\r\n            tangents: {\r\n                buffer: new Float32Array([0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1])\r\n            }\r\n        })\r\n    }\r\n\r\n    public static createHalfheightCube3d(material: Pixi3d.Material = new Pixi3d.StandardMaterial()){\r\n        return new Pixi3d.Mesh3D(this.createHalfheightCube3dMesh(), material);\r\n    }\r\n    public static createHalfheightCube3dMesh() {\r\n        return Object.assign(new Pixi3d.MeshGeometry3D(), {\r\n            positions: {\r\n                buffer: new Float32Array([-1, 1, 1, -1, 0, -1, -1, 0, 1, -1, 1, -1,  // 0, 1, 2, 3\r\n                -1, 1, -1, 1, 0, -1, -1, 0, -1, 1, 1, -1,  // 4, 5, 6, 7\r\n                    1, 1, -1, 1, 0, 1, 1, 0, -1, 1, 1, 1, // 8, 9, 10, 11\r\n                    1, 1, 1, -1, 0, 1, 1, 0, 1, -1, 1, 1,  // 12, 13, 14, 15\r\n                    1, 0, 1, -1, 0, -1, 1, 0, -1, -1, 0, 1,  // 16, 17, 18, 19\r\n                -1, 1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1]) // 20, 21, 22, 23\r\n            },\r\n            indices: {\r\n                buffer: new Uint8Array([0, 1, 2, 0, 3, 1, 4, 5, 6, 4, 7, 5, 8, 9, 10, 8, 11, 9, 12, 13, 14, 12, 15, 13, 16, 17, 18, 16, 19, 17, 20, 21, 22, 20, 23, 21])\r\n            },\r\n            normals: {\r\n                buffer: new Float32Array([-1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0])\r\n            },\r\n            uvs: [{\r\n                buffer: new Float32Array([\r\n                    0.66666, 0.00, 0.33333, 0.50,  0.66666, 0.50, 0.33333, 0.00, \r\n                    0.66666, 0.00, 0.33333, 0.50,  0.66666, 0.50, 0.33333, 0.00, \r\n                    0.66666, 0.00, 0.33333, 0.50,  0.66666, 0.50, 0.33333, 0.00, \r\n                    0.66666, 0.00, 0.33333, 0.50,  0.66666, 0.50, 0.33333, 0.00, \r\n                    0,       0,    0.33333, 0.25, 0.33333, 0,    0,       0.25, \r\n                    0.66666, 0, 1.0, 1.0, 1.0, 0, 0.66666, 1.00])\r\n                // buffer: new Float32Array([0.6, 1, 0.4, 0.75, 0.4, 1, 0.6, 0.75, 0.6, 0.75, 0.4, 0.5, 0.4, 0.75, \r\n                //                           0.6, 0.5, 0.6, 0.5, 0.4, 0.25, 0.4, 0.5, 0.6, 0.25, 0.6, 0.25, 0.4, 0, \r\n                //                           0.4, 0.25, 0.6, 0, 0.4, 0.25, 0.125, 0.5, 0.4, 0.5, 0.125, 0.25, 1.0, 0.25, 0.6, \r\n                //                           0.5, 1.0, 0.5, 0.6, 0.25])\r\n            }],\r\n            tangents: {\r\n                buffer: new Float32Array([0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1, -1, 0, 0, 1])\r\n            }\r\n        })\r\n    }\r\n\r\n    public static createPlane3d(repeatTextureU: number = 1, repeatTextureV: number = 1, material: Pixi3d.Material = new Pixi3d.StandardMaterial()){\r\n        return new Pixi3d.Mesh3D(this.createPlane3dMesh(repeatTextureU, repeatTextureV), material);\r\n    }\r\n\r\n    public static createPlane3dMesh(repeatTextureU: number = 1, repeatTextureV: number = 1) {\r\n        return Object.assign(new Pixi3d.MeshGeometry3D(), {\r\n            positions: {\r\n              buffer: new Float32Array([-1, 0, 1, 1, 0, -1, -1, 0, -1, 1, 0, 1])\r\n            },\r\n            indices: {\r\n              buffer: new Uint8Array([0, 1, 2, 0, 3, 1])\r\n            },\r\n            normals: {\r\n              buffer: new Float32Array([0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0])\r\n            },\r\n            uvs: [{\r\n              buffer: new Float32Array([0, repeatTextureV, repeatTextureU, 0, 0, 0, repeatTextureU, repeatTextureV])\r\n            }]\r\n          })\r\n    }\r\n\r\n\r\n}\r\n","import { WorldHelper } from \"../World.js\";\r\nimport { Boxes3d } from \"./Boxes3d.js\";\r\n\r\nexport function getSpritesheetTexture(identifier: string, copy: boolean = false, renderer: PIXI.Renderer = null) {\r\n    let sheet = PIXI.Loader.shared.resources[\"spritesheet\"].spritesheet;\r\n    let texture = sheet.textures[identifier];\r\n\r\n    if (copy) {\r\n        let sprite = new PIXI.Sprite(texture);\r\n\r\n        let dynamicTexture1 = PIXI.RenderTexture.create({\r\n            width: sprite.width,\r\n            height: sprite.height,\r\n            scaleMode: PIXI.SCALE_MODES.NEAREST,\r\n            wrapMode: PIXI.WRAP_MODES.REPEAT\r\n        });\r\n\r\n        renderer.render(sprite, {\r\n            renderTexture: dynamicTexture1\r\n        });\r\n\r\n        return new Pixi3d.StandardMaterialTexture(dynamicTexture1.baseTexture);\r\n    } else {\r\n        let smt = new Pixi3d.StandardMaterialTexture(texture.baseTexture);\r\n        smt.transform = new Pixi3d.TextureTransform()\r\n        smt.transform.offset.set(\r\n            (texture.frame.x + 0) / texture.baseTexture.width,\r\n            (texture.frame.y + 0) / texture.baseTexture.height\r\n        )\r\n        smt.transform.scale.set(\r\n            texture.frame.width / texture.baseTexture.width,\r\n            texture.frame.height / texture.baseTexture.height\r\n        )\r\n        return smt;\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class RobotMarker extends Pixi3d.Mesh3D {\r\n    constructor(geometry: Pixi3d.MeshGeometry3D, material: Pixi3d.Material, public farbe: string) {\r\n        super(geometry, material);\r\n    }\r\n}\r\n\r\nexport class RobotBrick extends Pixi3d.Mesh3D {\r\n    constructor(geometry: Pixi3d.MeshGeometry3D, material: Pixi3d.Material, public farbe: string) {\r\n        super(geometry, material);\r\n    }\r\n}\r\n\r\nexport class RobotCubeFactory {\r\n\r\n    farben: string[] = [\"rot\", \"gelb\", \"grün\", \"blau\"];\r\n    farbeToColorInfoMap: { [farbe: string]: number[] } = {\r\n        \"rot\": [1.0, 0.0, 0.0],\r\n        \"gelb\": [1.0, 1.0, 0.0],\r\n        \"grün\": [0.0, 1.0, 0.0],\r\n        \"blau\": [0.0, 0.0, 1.0]\r\n    }\r\n    farbeToMarkerMaterialMap: { [farbe: string]: Pixi3d.StandardMaterial } = {};\r\n    farbeToBrickMaterialMap: { [farbe: string]: Pixi3d.StandardMaterial } = {};\r\n\r\n\r\n    grassBrickMaterial: Pixi3d.StandardMaterial;\r\n    groundPlaneMaterial: Pixi3d.StandardMaterial;\r\n\r\n    planeMaterial: { [key: string]: Pixi3d.StandardMaterial } = {};\r\n\r\n    cloudMaterial: Pixi3d.StandardMaterial;\r\n\r\n    light1: Pixi3d.Light;\r\n    light2: Pixi3d.Light;\r\n    lightingEnvironment: Pixi3d.LightingEnvironment;\r\n\r\n\r\n\r\n    getBrick(farbe: string) {\r\n        return new RobotBrick(Boxes3d.createHalfheightCube3dMesh(), this.farbeToBrickMaterialMap[farbe], farbe);\r\n    }\r\n\r\n    getGrassBrick() {\r\n        return new Pixi3d.Mesh3D(Boxes3d.createCube3dMesh(), this.grassBrickMaterial);\r\n    }\r\n\r\n    getGrassPlane(x: number, z: number) {\r\n        let mesh = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(x, z), this.groundPlaneMaterial);\r\n        mesh.scale.x = x;\r\n        mesh.scale.z = z;\r\n        mesh.x += x - 1;\r\n        mesh.z += z - 1;\r\n        //let plane = Pixi3d.Mesh3D.createPlane();\r\n        // (<Pixi3d.StandardMaterial>plane.material).baseColor = new Pixi3d.Color(0, 1, 0, 1); // The base color will be blended together with base color texture (if available).\r\n        // plane.y = -0.5;\r\n        // plane.scale.set(10);\r\n        return mesh;\r\n    }\r\n\r\n    makePlane(container: Pixi3d.Container3D, x: number, y: number, z: number, widthX: number, widthZ: number, spriteOrColor: string | Pixi3d.Color) {\r\n        let material: Pixi3d.StandardMaterial;\r\n        if (typeof spriteOrColor == \"string\") {\r\n            material = this.getPlaneMaterial(spriteOrColor);\r\n        } else {\r\n            material = new Pixi3d.StandardMaterial();\r\n            this.initMaterial(material);\r\n            material.baseColor = spriteOrColor;\r\n        }\r\n        let mesh = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(widthX, widthZ), material);\r\n        mesh.y = y;\r\n        mesh.x = x;\r\n        mesh.z = z;\r\n        mesh.scale.set(widthX, 1, widthZ);\r\n        container.addChild(mesh);\r\n    }\r\n\r\n    getMarker(farbe: string) {\r\n        let marker = new RobotMarker(Boxes3d.createCube3dMesh(), this.farbeToMarkerMaterialMap[farbe], farbe);\r\n        marker.scale.set(0.9, 0.1, 0.9);\r\n        return marker;\r\n    }\r\n\r\n    getSidePlanes(worldX: number, worldY: number, sideSprite: string, radius: number, deep: number): Pixi3d.Mesh3D[] {\r\n        let planes: Pixi3d.Mesh3D[] = [];\r\n\r\n        let sideMaterial = this.getPlaneMaterial(sideSprite); //3d#3\r\n\r\n        let mesh1 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldX, 1), sideMaterial);\r\n        mesh1.scale.x = worldX + 2 * radius;\r\n        mesh1.x += worldX - 1;\r\n        mesh1.y -= 1 + 2 * deep;\r\n        mesh1.z -= 1 + 2 * radius;\r\n        mesh1.rotationQuaternion.setEulerAngles(-90, 0, 180);\r\n        planes.push(mesh1);\r\n\r\n        let mesh2 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldX, 1), sideMaterial);\r\n        mesh2.scale.x = worldX + 2 * radius;\r\n        mesh2.x += worldX - 1;\r\n        mesh2.y -= 1 + 2 * deep;\r\n        mesh2.z += 2 * worldY - 1 + 2 * radius;\r\n        mesh2.rotationQuaternion.setEulerAngles(90, 0, 0);\r\n        planes.push(mesh2);\r\n\r\n        let mesh3 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldY, 1), sideMaterial);\r\n        mesh3.scale.x = worldY + 2 * radius;\r\n        mesh3.y -= 1 + 2 * deep;\r\n        mesh3.x -= 1 + 2 * radius;\r\n        mesh3.z += worldY - 1;\r\n        mesh3.rotationQuaternion.setEulerAngles(90, -90, 0);\r\n        planes.push(mesh3);\r\n\r\n        let mesh4 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldY, 1), sideMaterial);\r\n        mesh4.scale.x = worldY + 2 * radius;\r\n        mesh4.y -= 1 + 2 * deep;\r\n        mesh4.x += 2 * worldX - 1 + 2 * radius;\r\n        mesh4.z += worldY - 1;\r\n        mesh4.rotationQuaternion.setEulerAngles(90, 90, 0);\r\n        planes.push(mesh4);\r\n\r\n        return planes;\r\n    }\r\n\r\n    getHorizontalPlanes(worldX: number, worldY: number, topSprite: string, radius: number, deep: number): Pixi3d.Mesh3D[] {\r\n        let planes: Pixi3d.Mesh3D[] = [];\r\n\r\n        let topMaterial = this.getPlaneMaterial(topSprite);\r\n\r\n        let mesh5 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldY, 1), topMaterial);\r\n        mesh5.scale.x = worldX + 2 * radius;\r\n        mesh5.x += worldX - 1;\r\n        mesh5.y -= 2 + 2 * deep;\r\n        mesh5.z -= 2 + 2 * radius;\r\n        mesh5.rotationQuaternion.setEulerAngles(180, 0, 180);\r\n        planes.push(mesh5);\r\n\r\n        let mesh6 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldX, 1), topMaterial);\r\n        mesh6.scale.x = worldX + 2 * radius;\r\n        mesh6.x += worldX - 1;\r\n        mesh6.y -= 2 + 2 * deep;\r\n        mesh6.z += 2 * worldY + 2 * radius;\r\n        mesh6.rotationQuaternion.setEulerAngles(0, 0, 0);\r\n        planes.push(mesh6);\r\n\r\n        let mesh7 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldY, 1), topMaterial);\r\n        mesh7.scale.x = worldY + 2 * radius + 2;\r\n        mesh7.y -= 2 + 2 * deep;\r\n        mesh7.x -= 2 + 2 * radius;\r\n        mesh7.z += worldY - 1;\r\n        mesh7.rotationQuaternion.setEulerAngles(0, -90, 0);\r\n        planes.push(mesh7);\r\n\r\n        let mesh8 = new Pixi3d.Mesh3D(Boxes3d.createPlane3dMesh(worldY, 1), topMaterial);\r\n        mesh8.scale.x = worldY + 2 * radius + 2;\r\n        mesh8.y -= 2 + 2 * deep;\r\n        mesh8.x += 2 * worldX + 2 * radius;\r\n        mesh8.z += worldY - 1;\r\n        mesh8.rotationQuaternion.setEulerAngles(0, 90, 0);\r\n        planes.push(mesh8);\r\n\r\n        return planes;\r\n    }\r\n\r\n    makeClouds(container: Pixi3d.Container3D, height: number, originX: number, originZ: number) {\r\n        let count = 200;\r\n        let numberOfBatches = 10;\r\n        let todo = count;\r\n\r\n        let f = () => {\r\n            if (todo <= 0) return;\r\n            let radius = 1500;\r\n            let maxWidth = 20;\r\n            for (let i = 0; i < count / numberOfBatches; i++) {\r\n                todo--;\r\n                let distance = Math.sqrt(Math.random()) * radius;\r\n                let angle = Math.random() * 2 * Math.PI;\r\n\r\n                let x1 = Math.floor(distance * Math.cos(angle)) + originX;\r\n                let z1 = Math.floor(distance * Math.sin(angle)) + originZ;\r\n\r\n                let count = Math.random() * 10 + 2;\r\n\r\n                for (let j = 0; j < count; j++) {\r\n                    let mesh = Boxes3d.createCube3d(this.cloudMaterial);\r\n\r\n                    let scaleX = Math.floor(Math.random() * maxWidth + 2);\r\n                    let scaleY = Math.floor(Math.random() * maxWidth / 4 + 2);\r\n                    let scaleZ = Math.floor(Math.random() * maxWidth + 2);\r\n\r\n                    let dx = Math.floor(Math.random() * 3 * (5 + count + scaleX));\r\n                    let dz = Math.floor(Math.random() * 3 * (5 + count + scaleZ));\r\n\r\n                    mesh.x = x1 + dx;\r\n                    mesh.z = z1 + dz;\r\n\r\n                    mesh.y = height + scaleY / 2;\r\n\r\n                    mesh.scale.set(scaleX, scaleY, scaleZ);\r\n\r\n                    container.addChild(mesh);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            setTimeout(f, 100);\r\n\r\n        }\r\n\r\n        f();\r\n\r\n    }\r\n\r\n    constructor(private worldHelper: WorldHelper, private camera: Pixi3d.Camera) {\r\n\r\n        let renderer = <PIXI.Renderer>worldHelper.app.renderer;\r\n\r\n        this.light1 = Object.assign(new Pixi3d.Light(), {\r\n            type: Pixi3d.LightType.ambient,\r\n            range: 100,\r\n            intensity: 30,\r\n            color: new Pixi3d.Color(1, 1, 1)\r\n        });\r\n        this.light1.position.set(-4, 4, 4);\r\n\r\n        this.light2 = Object.assign(new Pixi3d.Light(), {\r\n            type: Pixi3d.LightType.directional,\r\n            range: 600,\r\n            intensity: 4,\r\n            color: new Pixi3d.Color(1, 1, 1)\r\n        });\r\n        this.light2.position.set(12, 16, -12);\r\n        this.light2.rotationQuaternion.setEulerAngles(25, 45, 0);\r\n\r\n        this.lightingEnvironment = new Pixi3d.LightingEnvironment(<PIXI.Renderer>worldHelper.app.renderer);\r\n        this.lightingEnvironment.lights.push(this.light1, this.light2);\r\n\r\n\r\n        this.grassBrickMaterial = new Pixi3d.StandardMaterial();\r\n        this.initMaterial(this.grassBrickMaterial);\r\n        this.grassBrickMaterial.baseColorTexture = getSpritesheetTexture(\"robot#0\");\r\n\r\n        this.cloudMaterial = new Pixi3d.StandardMaterial();\r\n        this.initMaterial(this.cloudMaterial);\r\n        this.cloudMaterial.baseColor = new Pixi3d.Color(1.0, 1.0, 1.0, 0.5);\r\n\r\n        this.groundPlaneMaterial = new Pixi3d.StandardMaterial();\r\n        this.initMaterial(this.groundPlaneMaterial);\r\n        this.groundPlaneMaterial.baseColorTexture = getSpritesheetTexture(\"robot#2\", true, renderer);\r\n\r\n        for (let farbe of this.farben) {\r\n            let material = new Pixi3d.StandardMaterial();\r\n            this.initMaterial(material);\r\n            let colorInfo = this.farbeToColorInfoMap[farbe];\r\n            material.baseColor = new Pixi3d.Color(colorInfo[0], colorInfo[1], colorInfo[2], 1);\r\n            this.farbeToMarkerMaterialMap[farbe] = material;\r\n\r\n            let brickMaterial = new Pixi3d.StandardMaterial();\r\n            this.initMaterial(brickMaterial);\r\n            let index = this.farben.indexOf(farbe) + 4;\r\n            brickMaterial.baseColorTexture = getSpritesheetTexture(\"robot#\" + index);\r\n            this.farbeToBrickMaterialMap[farbe] = brickMaterial;\r\n        }\r\n\r\n    }\r\n\r\n    initMaterial(material: Pixi3d.StandardMaterial) {\r\n        material.camera = this.camera;\r\n        material.exposure = 1;\r\n        material.roughness = 0.9;\r\n        material.lightingEnvironment = this.lightingEnvironment;\r\n    }\r\n\r\n    getPlaneMaterial(spriteKey: string): Pixi3d.StandardMaterial {\r\n        let renderer = <PIXI.Renderer>this.worldHelper.app.renderer;\r\n\r\n        if (this.planeMaterial[spriteKey] != null) return this.planeMaterial[spriteKey];\r\n\r\n        let material = new Pixi3d.StandardMaterial();\r\n        this.initMaterial(material);\r\n        material.baseColorTexture = getSpritesheetTexture(spriteKey, true, renderer);\r\n        // material.doubleSided = true;\r\n        this.planeMaterial[spriteKey] = material;\r\n\r\n        return material;\r\n    }\r\n\r\n    makeSprite3d(textureKey: string, container: Pixi3d.Container3D){\r\n        let material = new Pixi3d.StandardMaterial();\r\n        this.initMaterial(material);\r\n        material.baseColorTexture = getSpritesheetTexture(textureKey, false);\r\n        material.alphaMode = Pixi3d.StandardMaterialAlphaMode.mask;\r\n        let sprite = Boxes3d.createPlane3d(1, 1, material);\r\n        container.addChild(sprite);\r\n        return sprite;\r\n    }\r\n\r\n}","import { Module } from \"../../../compiler/parser/Module.js\";\r\nimport { Klass } from \"../../../compiler/types/Class.js\";\r\nimport { booleanPrimitiveType, doublePrimitiveType, intPrimitiveType, stringPrimitiveType } from \"../../../compiler/types/PrimitiveTypes.js\";\r\nimport { Method, Parameterlist } from \"../../../compiler/types/Types.js\";\r\nimport { RuntimeObject } from \"../../../interpreter/RuntimeObject.js\";\r\nimport { FilledShapeHelper } from \"../FilledShape.js\";\r\nimport { WorldHelper } from \"../World.js\";\r\nimport { Interpreter } from \"../../../interpreter/Interpreter.js\";\r\nimport { FilledShapeDefaults } from \"../FilledShapeDefaults.js\";\r\nimport { ShapeHelper } from \"../Shape.js\";\r\nimport { Boxes3d } from \"./Boxes3d.js\";\r\nimport { RobotBrick, RobotCubeFactory, RobotMarker } from \"./RobotCubeFactory.js\";\r\n\r\nexport class RobotClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"Robot\", module, \"Robot Karol\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n        let robotWorldType = <Klass>module.typeStore.getType(\"RobotWorld\");\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"Robot\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n\r\n                let rh = new RobotHelper(module.main.getInterpreter(), o, 1, 1, 5, 8)\r\n                o.intrinsicData[\"Robot\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Robot-Objekt. Der Roboter steht anfangs an der Stelle (1/1)', true));\r\n\r\n        this.addMethod(new Method(\"Robot\", new Parameterlist([\r\n            { identifier: \"startX\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"startY\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let startX: number = parameters[1].value;\r\n                let startY: number = parameters[2].value;\r\n\r\n                let rh = new RobotHelper(module.main.getInterpreter(), o, startX, startY, 5, 10)\r\n                o.intrinsicData[\"Robot\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Robot-Objekt. Der Roboter wird anfangs an die Stelle (startX/startY) gesetzt.', true));\r\n\r\n        this.addMethod(new Method(\"Robot\", new Parameterlist([\r\n            { identifier: \"startX\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"startY\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"worldX\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"worldY\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let startX: number = parameters[1].value;\r\n                let startY: number = parameters[2].value;\r\n                let worldX: number = parameters[3].value;\r\n                let worldY: number = parameters[4].value;\r\n\r\n                let rh = new RobotHelper(module.main.getInterpreter(), o, startX, startY, worldX, worldY)\r\n                o.intrinsicData[\"Robot\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Robot-Objekt. Der Roboter wird anfangs an die Stelle (startX/startY) gesetzt. Wenn die RobotWorld noch nicht instanziert ist, wird sie mit der Größe worldX * worldY neu erstellt.', true));\r\n\r\n        this.addMethod(new Method(\"Robot\", new Parameterlist([\r\n            { identifier: \"startX\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"startY\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"initialeWelt\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let startX: number = parameters[1].value;\r\n                let startY: number = parameters[2].value;\r\n                let initialeWelt: string = parameters[3].value;\r\n\r\n                let rh = new RobotHelper(module.main.getInterpreter(), o, startX, startY, 0, 0, initialeWelt)\r\n                o.intrinsicData[\"Robot\"] = rh;\r\n\r\n            }, false, false, 'Instanziert ein neues Robot-Objekt. Der Roboter wird anfangs an die Stelle (startX/startY) gesetzt. Wenn die RobotWorld noch nicht instanziert ist, wird sie auf Grundlage des Strings initialeWelt erstellt.', true));\r\n\r\n        this.addMethod(new Method(\"getWelt\", new Parameterlist([\r\n        ]), robotWorldType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                return rh.robotWorldHelper.runtimeObject;\r\n\r\n            }, false, false, 'Gibt das RobotWorld-Objekt zurück', false));\r\n\r\n        this.addMethod(new Method(\"rechtsDrehen\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.direction.turnRight();\r\n                rh.adjustAngle();\r\n\r\n            }, false, false, 'Dreht den Roboter um 90° nach rechts.', false));\r\n\r\n        this.addMethod(new Method(\"linksDrehen\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.direction.turnLeft();\r\n                rh.adjustAngle();\r\n\r\n            }, false, false, 'Dreht den Roboter um 90° nach links.', false));\r\n\r\n        this.addMethod(new Method(\"schritt\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.schritt();\r\n\r\n            }, false, false, 'Lässt den Roboter einen Schritt nach vorne gehen.', false));\r\n\r\n        this.addMethod(new Method(\"schritt\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                for (let i = 0; i < anzahl; i++) {\r\n                    if (!rh.schritt()) break;\r\n                }\r\n\r\n            }, false, false, 'Lässt den Roboter Anzahl Schritte nach vorne gehen.', false));\r\n\r\n        this.addMethod(new Method(\"hinlegen\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.hinlegen(\"rot\");\r\n\r\n            }, false, false, 'Lässt den Roboter einen roten Ziegel vor sich hinlegen.', false));\r\n\r\n        this.addMethod(new Method(\"markeLöschen\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.markeLöschen();\r\n\r\n            }, false, false, 'Lässt den Roboter eine Marke, die direkt unter ihm liegt, löschen.', false));\r\n\r\n        this.addMethod(new Method(\"markeSetzen\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.markeSetzen(\"gelb\");\r\n\r\n            }, false, false, 'Lässt den Roboter eine gelbe Marke direkt unter sich setzen.', false));\r\n\r\n        this.addMethod(new Method(\"markeSetzen\", new Parameterlist([\r\n            { identifier: \"Farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let farbe: string = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.markeSetzen(farbe);\r\n\r\n            }, false, false, 'Lässt den Roboter eine Marke der angegebenen Farbe direkt unter sich setzen.', false));\r\n\r\n        this.addMethod(new Method(\"hinlegen\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                for (let i = 0; i < anzahl; i++) {\r\n                    if (!rh.hinlegen(\"rot\")) break;\r\n                }\r\n\r\n            }, false, false, 'Lässt den Roboter Anzahl rote Ziegel vor sich hinlegen.', false));\r\n\r\n        this.addMethod(new Method(\"hinlegen\", new Parameterlist([\r\n            { identifier: \"Farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let farbe: string = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.hinlegen(farbe);\r\n\r\n            }, false, false, 'Lässt den Roboter einen Ziegel der angegebenen Farbe vor sich hinlegen.', false));\r\n\r\n        this.addMethod(new Method(\"aufheben\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                rh.aufheben();\r\n\r\n            }, false, false, 'Lässt den Roboter einen roten Ziegel vor sich aufheben.', false));\r\n\r\n        this.addMethod(new Method(\"aufheben\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                for (let i = 0; i < anzahl; i++) {\r\n                    if (!rh.aufheben()) break;\r\n                }\r\n\r\n            }, false, false, 'Lässt den Roboter Anzahl rote Ziegel vor sich aufheben.', false));\r\n\r\n        this.addMethod(new Method(\"warten\", new Parameterlist([\r\n            { identifier: \"ZeitInMillisekunden\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n            }, false, false, \"Pausiert das Programm für die angegebene Zeit in ms.\"));\r\n\r\n        this.addMethod(new Method(\"langsam\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().controlButtons.speedControl.setSpeedInStepsPerSecond(5);\r\n\r\n            }, false, false, \"Setzt die Ausführungsgeschwindigkeit auf 5 Programmschritte/Sekunde.\"));\r\n\r\n        this.addMethod(new Method(\"schnell\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n                module.main.getInterpreter().controlButtons.speedControl.setSpeedInStepsPerSecond(\"max\");\r\n            }, false, false, \"Setzt die Ausführungsgeschwindigkeit auf 'maximal'.\"));\r\n\r\n        this.addMethod(new Method(\"beenden\", new Parameterlist([\r\n        ]), null,\r\n            (parameters) => {\r\n                let console = module.main.getBottomDiv()?.console;\r\n                if (console != null) {\r\n                    console.writeConsoleEntry(\"Das Programm wurde durch einen Roboter angehalten.\", null, \"#0000ff\");\r\n                    console.showTab();\r\n                }\r\n                module.main.getInterpreter().stop();\r\n            }, false, false, \"Beendet das Programm.\"));\r\n\r\n        this.addMethod(new Method(\"istWand\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.istWand();\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter direkt vor einer Wand steht.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstWand\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return !rh.istWand();\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter nicht direkt vor einer Wand steht.\"));\r\n\r\n        this.addMethod(new Method(\"istZiegel\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.istZiegel(null);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn direkt vor dem Roboter mindestens ein Ziegel liegt.\"));\r\n\r\n        this.addMethod(new Method(\"istZiegel\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.istZiegel(anzahl);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn direkt vor dem Roboter genau Anzahl Ziegel liegen.\"));\r\n\r\n        this.addMethod(new Method(\"istZiegel\", new Parameterlist([\r\n            { identifier: \"Farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let farbe: string = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.istZiegel(farbe);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn auf dem Ziegelstapel direkt vor dem Roboter mindestens ein Ziegel mit der angegebenen Farbe liegt.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstZiegel\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return !rh.istZiegel(null);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn direkt vor dem Roboter kein Ziegel liegt.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstZiegel\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return !rh.istZiegel(anzahl);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn direkt vor dem Roboter nicht genau Anzahl Ziegel liegen.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstZiegel\", new Parameterlist([\r\n            { identifier: \"Farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let farbe: string = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return !rh.istZiegel(farbe);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn auf dem Ziegelstapel direkt vor dem Roboter kein Ziegel mit der angegebenen Farbe liegt.\"));\r\n\r\n        this.addMethod(new Method(\"istMarke\", new Parameterlist([\r\n            { identifier: \"Farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let farbe: string = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.istMarke(farbe);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn unter dem Roboter eine Marke in der angegebenen Farbe liegt.\"));\r\n\r\n        this.addMethod(new Method(\"istMarke\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let farbe: string = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.istMarke(null);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn unter dem Roboter eine Marke (egal in welcher Farbe) liegt.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstMarke\", new Parameterlist([\r\n            { identifier: \"Farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let farbe: string = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return !rh.istMarke(farbe);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn unter dem Roboter keine Marke in der angegebenen Farbe liegt.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstMarke\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return !rh.istMarke(null);\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn unter dem Roboter keine Marke (egal in welcher Farbe) liegt.\"));\r\n\r\n        let himmelsrichtungen = [\"Norden\", \"Osten\", \"Süden\", \"Westen\"];\r\n\r\n        for (let i = 0; i < 4; i++) {\r\n            let hr: string = himmelsrichtungen[i];\r\n\r\n            this.addMethod(new Method(\"ist\" + hr, new Parameterlist([\r\n            ]), booleanPrimitiveType,\r\n                (parameters) => {\r\n\r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                    return rh.direction.index == i;\r\n\r\n                }, false, false, \"Gibt genau dann true zurück, wenn der Roboter nach \" + hr + \" blickt.\"));\r\n        }\r\n\r\n        this.addMethod(new Method(\"istLeer\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.hatSteine == 0;\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter keinen Stein mit sich trägt.\"));\r\n\r\n        this.addMethod(new Method(\"istVoll\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.hatSteine == rh.maxSteine;\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter die maximale Anzahl von Steinen mit sich trägt.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstLeer\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.hatSteine > 0;\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter mindestens einen Stein mit sich trägt.\"));\r\n\r\n        this.addMethod(new Method(\"hatZiegel\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.hatSteine > 0;\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter mindestens einen Stein mit sich trägt.\"));\r\n\r\n        this.addMethod(new Method(\"hatZiegel\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                return rh.hatSteine >= anzahl;\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter mindestens Anzahl Steine mit sich trägt.\"));\r\n\r\n        this.addMethod(new Method(\"nichtIstVoll\", new Parameterlist([\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n                return rh.hatSteine < rh.maxSteine;\r\n\r\n            }, false, false, \"Gibt genau dann true zurück, wenn der Roboter weniger als die maximale Anzahl von Steinen mit sich trägt.\"));\r\n\r\n        this.addMethod(new Method(\"setzeAnzahlSteine\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                return rh.hatSteine = anzahl;\r\n\r\n            }, false, false, \"Befüllt den Rucksack des Roboters mit genau Anzahl Steinen.\"));\r\n\r\n        this.addMethod(new Method(\"setzeRucksackgröße\", new Parameterlist([\r\n            { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), booleanPrimitiveType,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let anzahl: number = parameters[1].value;\r\n                let rh = <RobotHelper>o.intrinsicData[\"Robot\"];\r\n\r\n                return rh.maxSteine = anzahl;\r\n\r\n            }, false, false, \"Gibt dem Roboter einen Rucksack, der maximal Anzahl Steine fasst.\"));\r\n\r\n    }\r\n\r\n}\r\n\r\nexport class RobotWorldClass extends Klass {\r\n\r\n    constructor(module: Module) {\r\n\r\n        super(\"RobotWorld\", module, \"Welt für Robot Karol\");\r\n\r\n        this.setBaseClass(<Klass>module.typeStore.getType(\"Object\"));\r\n\r\n        // this.addAttribute(new Attribute(\"PI\", doublePrimitiveType, (object) => { return Math.PI }, true, Visibility.public, true, \"Die Kreiszahl Pi (3.1415...)\"));\r\n\r\n        this.addMethod(new Method(\"RobotWorld\", new Parameterlist([\r\n            { identifier: \"worldX\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            { identifier: \"worldY\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let worldX: number = parameters[1].value;\r\n                let worldY: number = parameters[2].value;\r\n\r\n                const interpreter = module.main.getInterpreter();\r\n\r\n                let rh = new RobotWorldHelper(interpreter, o, worldX, worldY, null);\r\n                o.intrinsicData[\"RobotWorldHelper\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Robot-Welt', true));\r\n\r\n        this.addMethod(new Method(\"RobotWorld\", new Parameterlist([\r\n            { identifier: \"initialeWelt\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n        ]), null,\r\n            (parameters) => {\r\n\r\n                let o: RuntimeObject = parameters[0].value;\r\n                let initialeWelt: string = parameters[1].value;\r\n\r\n                const interpreter = module.main.getInterpreter();\r\n\r\n                let rh = new RobotWorldHelper(interpreter, o, 0, 0, initialeWelt);\r\n                o.intrinsicData[\"RobotWorldHelper\"] = rh;\r\n\r\n            }, false, false, 'Instanziert eine neue Robot-Welt.', true));\r\n\r\n            this.addMethod(new Method(\"setzeMaximalhöhe\", new Parameterlist([\r\n                { identifier: \"Anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), booleanPrimitiveType,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let anzahl: number = parameters[1].value;\r\n                    let rh = <RobotWorldHelper>o.intrinsicData[\"RobotWorldHelper\"];\r\n    \r\n                    return rh.maximumHeight = anzahl;\r\n    \r\n                }, false, false, \"Ändert die maximale Höhe der Ziegelstapel.\"));\r\n    \r\n            this.addMethod(new Method(\"setzeZiegel\", new Parameterlist([\r\n                { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"anzahl\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let x: number = parameters[1].value;\r\n                    let y: number = parameters[2].value;\r\n                    let farbe: string = parameters[3].value;\r\n                    let anzahl: number = parameters[4].value;\r\n                    let rh = <RobotWorldHelper>o.intrinsicData[\"RobotWorldHelper\"];\r\n                    \r\n                    if(x < 1 || x > rh.worldX || y < 1 || y > rh.worldY){\r\n                        rh.interpreter.throwException(`Die Position (${x}/${y}) ist außerhalb der Weltgrenzen.`);\r\n                        return;\r\n                    }\r\n\r\n                    for(let i = 0; i < anzahl; i++){\r\n                        rh.addBrick(x-1, y-1, farbe);\r\n                    }\r\n    \r\n                }, false, false, \"Setzt Anzahl Ziegel an der angegebenen Position mit der angegebenen Farbe. Die x- und y-Koordinaten beginnen bei 1.\"));\r\n    \r\n            this.addMethod(new Method(\"setzeMarke\", new Parameterlist([\r\n                { identifier: \"x\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"y\", type: intPrimitiveType, declaration: null, usagePositions: null, isFinal: true },\r\n                { identifier: \"farbe\", type: stringPrimitiveType, declaration: null, usagePositions: null, isFinal: true }\r\n            ]), null,\r\n                (parameters) => {\r\n    \r\n                    let o: RuntimeObject = parameters[0].value;\r\n                    let x: number = parameters[1].value;\r\n                    let y: number = parameters[2].value;\r\n                    let farbe: string = parameters[3].value;\r\n                    let rh = <RobotWorldHelper>o.intrinsicData[\"RobotWorldHelper\"];\r\n\r\n                    if(x < 1 || x > rh.worldX || y < 1 || y > rh.worldY){\r\n                        rh.interpreter.throwException(`Die Position (${x}/${y}) ist außerhalb der Weltgrenzen.`);\r\n                        return;\r\n                    }\r\n\r\n                    rh.setMarker(x-1, y-1, farbe);\r\n    \r\n                }, false, false, \"Setzt einen Marker an der angegebenen Position mit der angegebenen Farbe. Die x- und y-Koordinaten beginnen bei 1.\"));\r\n    \r\n    \r\n    }\r\n\r\n}\r\n\r\nexport class RobotWorldHelper {\r\n\r\n    worldHelper: WorldHelper;\r\n\r\n    robotCubeFactory: RobotCubeFactory;\r\n    camera: Pixi3d.Camera;\r\n    displayObject: PIXI.DisplayObject;\r\n    container3D: Pixi3d.Container3D;\r\n\r\n    markers: RobotMarker[][] = [];    // x, y\r\n    bricks: RobotBrick[][][] = [];   // x, y, height\r\n\r\n    maximumHeight: number = 15;\r\n\r\n    robots: RobotHelper[] = [];\r\n\r\n    constructor(public interpreter: Interpreter, public runtimeObject: RuntimeObject,\r\n        public worldX: number, public worldY: number, initialeWelt: string) {\r\n\r\n        this.fetchWorld(interpreter);\r\n\r\n        if (this.worldHelper.robotWorldHelper != null) {\r\n            this.interpreter.throwException(\"Es wurde bereits ein Robot-World-Objekt instanziert. Davon kann es aber nur ein einziges geben. \\nTipp: Jedes Robot-Objekt kann das Robot-World-Objekt mit der getRobotWorld() holen.\");\r\n            return;\r\n        }\r\n\r\n        this.worldHelper.robotWorldHelper = this;\r\n\r\n        this.camera = new Pixi3d.Camera(<PIXI.Renderer>this.worldHelper.app.renderer);\r\n\r\n        this.robotCubeFactory = new RobotCubeFactory(this.worldHelper, this.camera);\r\n\r\n        this.markers = [];\r\n        this.bricks = [];\r\n\r\n        this.container3D = new Pixi3d.Container3D();\r\n        this.displayObject = this.container3D;\r\n        this.worldHelper.stage.addChild(this.displayObject);\r\n\r\n\r\n        if (initialeWelt != null) {\r\n            this.initFromString(initialeWelt);\r\n        } else {\r\n            this.initWorldArrays(worldX, worldY);\r\n        }\r\n\r\n        this.renderOrnamentsAndInitCamera();\r\n\r\n    }\r\n\r\n    adjustRobotPositions(x: number, y: number){\r\n        for(let robot of this.robots){\r\n            if(robot.x == x && robot.y == y){\r\n                robot.model.y = this.getBrickCount(x, y) + 1.6;\r\n            }\r\n        }\r\n    }\r\n\r\n    initWorldArrays(worldX: number, worldY: number) {\r\n        for (let x = 0; x < worldX; x++) {\r\n            let markerColumn = [];\r\n            this.markers.push(markerColumn);\r\n            let brickColumn = [];\r\n            this.bricks.push(brickColumn);\r\n            for (let y = 0; y < worldY; y++) {\r\n                markerColumn.push(null);\r\n                brickColumn.push([]);\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchWorld(interpreter: Interpreter) {\r\n        let worldHelper = interpreter.worldHelper;\r\n        if (worldHelper == null) {\r\n            let w: RuntimeObject = new RuntimeObject(<Klass>interpreter.moduleStore.getType(\"World\").type);\r\n            worldHelper = new WorldHelper(800, 600, interpreter.moduleStore.getModule(\"Base Module\"), w);\r\n            w.intrinsicData[\"World\"] = worldHelper;\r\n            interpreter.worldHelper = worldHelper;\r\n        }\r\n        this.worldHelper = worldHelper;\r\n    }\r\n\r\n\r\n    renderOrnamentsAndInitCamera() {\r\n        this.worldHelper.app.renderer.backgroundColor = 0x8080ff;\r\n\r\n        let gp = this.robotCubeFactory.getGrassPlane(this.worldX, this.worldY);\r\n        this.container3D.addChild(gp);\r\n\r\n        let deep: number = 0;\r\n        let radius: number = 0;\r\n        this.robotCubeFactory.getSidePlanes(this.worldX, this.worldY, \"robot#3\", radius, deep++)\r\n            .forEach(p => { this.container3D.addChild(p); });\r\n\r\n            this.robotCubeFactory.getSidePlanes(this.worldX, this.worldY, \"robot#10\", radius, deep++)\r\n                .forEach(p => { this.container3D.addChild(p); });\r\n\r\n        this.robotCubeFactory.makeClouds(this.container3D, 60, this.worldX/2, this.worldY/2);\r\n\r\n        this.robotCubeFactory.makePlane(this.container3D, this.worldX/2, -4, this.worldY/2, 3000, 3000, \r\n        new Pixi3d.Color(55.0/255, 174.0/255, 77.0/255));\r\n\r\n        let northSprite = this.robotCubeFactory.makeSprite3d(\"robot#11\", this.container3D);\r\n        // northSprite.position.set(this.worldX + 6, 1, this.worldY - 1);\r\n        northSprite.position.set(2*this.worldX + 1, -1, 2*this.worldY - 6);\r\n        northSprite.scale.set(257.0/40, 1, 1);\r\n        northSprite.rotationQuaternion.setEulerAngles(0, 90, 0);\r\n\r\n        let control = new Pixi3d.CameraOrbitControl(this.worldHelper.app.view, this.camera);\r\n        control.angles.x = 45;\r\n        control.angles.y = -20;\r\n        control.target = { x: this.worldX - 1, y: 0, z: this.worldY - 1 }\r\n        control.distance = Math.max(this.worldX, this.worldY) * 2.3;\r\n\r\n    }\r\n\r\n    addBrick(x: number, y: number, farbe: string): boolean {\r\n        let oldHeight = this.bricks[x][y].length;\r\n        if (oldHeight < this.maximumHeight) {\r\n            let brick = this.robotCubeFactory.getBrick(farbe);\r\n            this.setToXY(x, y, oldHeight, brick);\r\n            this.bricks[x][y].push(brick);\r\n            this.container3D.addChild(brick);\r\n            this.adjustMarkerHeight(x, y);\r\n            this.adjustRobotPositions(x, y);\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    removeBrick(x: number, y: number): boolean {\r\n        if (this.bricks[x][y].length > 0) {\r\n            let brick = this.bricks[x][y].pop();\r\n            brick.destroy();\r\n            this.adjustMarkerHeight(x, y);\r\n            this.adjustRobotPositions(x, y);\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n    getBrickCount(x: number, y: number) {\r\n        return this.bricks[x][y].length;\r\n    }\r\n\r\n    hasBrickColor(x: number, y: number, farbe: string): boolean {\r\n        for (let brick of this.bricks[x][y]) {\r\n            if (brick.farbe == farbe) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getMarkerColor(x: number, y: number): string {\r\n        let marker = this.markers[x][y];\r\n        if (marker == null) return null;\r\n        return marker.farbe;\r\n    }\r\n\r\n    setMarker(x: number, y: number, farbe: string) {\r\n        if (this.markers[x][y] != null) {\r\n            this.markers[x][y].destroy();\r\n        }\r\n        let marker = this.robotCubeFactory.getMarker(farbe);\r\n        this.markers[x][y] = marker;\r\n        this.container3D.addChild(marker);\r\n        this.setToXY(x, y, 0, marker);\r\n        this.adjustMarkerHeight(x, y);\r\n    }\r\n\r\n    removeMarker(x: number, y: number): boolean {\r\n        let marker = this.markers[x][y];\r\n        if (marker == null) {\r\n            return false;\r\n        } else {\r\n            this.markers[x][y] = null;\r\n            marker.destroy();\r\n            return true;\r\n        }\r\n    }\r\n\r\n    adjustMarkerHeight(x: number, y: number) {\r\n        let marker = this.markers[x][y];\r\n        if (marker != null) {\r\n            let height = this.bricks[x][y].length\r\n            marker.y = height + 0.1;\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        for (let x = 0; x < this.bricks.length; x++) {\r\n            for (let y = 0; y < this.bricks[x].length; y++) {\r\n                let brickList = this.bricks[x][y];\r\n                while (brickList.length > 0) {\r\n                    brickList.pop().destroy();\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let x = 0; x < this.markers.length; x++) {\r\n            for (let y = 0; y < this.markers[x].length; y++) {\r\n                let marker = this.markers[x][y];\r\n                if (marker != null) {\r\n                    this.markers[x][y] = null;\r\n                    marker.destroy();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setDimensions(worldX: number, worldY: number) {\r\n        this.clear();\r\n\r\n        this.worldX = worldX;\r\n        this.worldY = worldY;\r\n\r\n        this.markers = [];\r\n        this.bricks = [];\r\n        for (let x = 0; x < worldX; x++) {\r\n            let markerColumn = [];\r\n            this.markers.push(markerColumn);\r\n            let brickColumn = [];\r\n            this.bricks.push(brickColumn);\r\n            for (let y = 0; y < worldY; y++) {\r\n                markerColumn.push(null);\r\n                brickColumn.push([]);\r\n            }\r\n        }\r\n    }\r\n\r\n    getNumberOfBricks(x: number, y: number) {\r\n        return this.bricks[x][y].length;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param initString \r\n     * \" \": empty \r\n     * \"_\": no brick, yellow marker\r\n     * \"Y\", \"G\", \"B\", \"R\": switch marker color\r\n     * \"y\", \"g\", \"b\", \"r\": switch brick color\r\n     * \"1\", ..., \"9\": 1, ..., 9 bricks \r\n     * \"1m\", ..., \"9m\": 1, ..., 9 bricks with markers on them\r\n     */\r\n    initFromString(initString: string) {\r\n\r\n        let lowerCaseCharToColor = { \"r\": \"rot\", \"g\": \"grün\", \"b\": \"blau\", \"y\": \"gelb\" };\r\n        let upperCaseCharToColor = { \"R\": \"rot\", \"G\": \"grün\", \"B\": \"blau\", \"Y\": \"gelb\" };\r\n        let digits = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\"];\r\n\r\n        this.clear();\r\n        let rows = initString.split(\"\\n\");\r\n        let maxColumns = 0;\r\n        rows.forEach((row) => { let rowLength = this.rowLength(row); if (rowLength > maxColumns) maxColumns = rowLength });\r\n        this.initWorldArrays(maxColumns, rows.length);\r\n\r\n        this.worldX = maxColumns;\r\n        this.worldY = rows.length;\r\n\r\n        let c1: string;\r\n        let c2: string;\r\n        let brickColor = \"rot\";\r\n        let markerColor = \"gelb\";\r\n\r\n        for (let y = 0; y < rows.length; y++) {\r\n            let row = rows[y];\r\n            let x = 0;\r\n            let pos = 0;\r\n            while (pos < row.length) {\r\n                c1 = row.charAt(pos);\r\n                c2 = pos < row.length - 1 ? row.charAt(pos + 1) : null;\r\n                pos++;\r\n                if (lowerCaseCharToColor[c1] != null) {\r\n                    brickColor = lowerCaseCharToColor[c1];\r\n                    continue;\r\n                }\r\n                if (upperCaseCharToColor[c1] != null) {\r\n                    markerColor = upperCaseCharToColor[c1];\r\n                    continue;\r\n                }\r\n                let index = digits.indexOf(c1);\r\n                if (index >= 0) {\r\n                    for (let i = 0; i < index + 1; i++) {\r\n                        this.addBrick(x, y, brickColor);\r\n                    }\r\n                    if (c2 == \"m\") {\r\n                        this.setMarker(x, y, markerColor);\r\n                        pos++;\r\n                    }\r\n                    x++;\r\n                    continue;\r\n                }\r\n                if (c1 == \" \") {\r\n                    x++;\r\n                    continue;\r\n                }\r\n                if (c1 == \"_\") {\r\n                    this.setMarker(x, y, markerColor);\r\n                    x++;\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    rowLength(row: string) {\r\n        let l: number = 0;\r\n        let forwardChars = \" _1234567890\";\r\n\r\n        for (let i = 0; i < row.length; i++) {\r\n            if (forwardChars.indexOf(row.charAt(i)) >= 0) {\r\n                l++;\r\n            }\r\n        }\r\n        return l;\r\n    }\r\n\r\n    setToXY(x: number, y: number, height: number, mesh: Pixi3d.Mesh3D) {\r\n        mesh.x = 2 * (this.worldX - x - 1);\r\n        mesh.z = 2 * (this.worldY - y - 1);\r\n        mesh.y = height;\r\n    }\r\n\r\n    // Wird von WorldHelper aufgerufen\r\n    destroy() {\r\n\r\n    }\r\n\r\n    gibtFarbe(farbe: string): boolean {\r\n        return this.robotCubeFactory.farben.indexOf(farbe) >= 0;\r\n    }\r\n\r\n}\r\n\r\n\r\nclass Direction {\r\n    names: string[] = [\"top\", \"right\", \"bottom\", \"left\"];\r\n    deltas: { dx: number, dy: number }[] = [{ dx: 0, dy: -1 }, { dx: -1, dy: 0 }, { dx: 0, dy: 1 }, { dx: 1, dy: 0 }];\r\n    angles: number[] = [0, 90, 180, 270];\r\n\r\n    public index: number = 2; // top\r\n\r\n    turnRight() {\r\n        this.index = (this.index - 1) % 4;\r\n    }\r\n\r\n    turnLeft() {\r\n        this.index = (this.index + 1 + 4) % 4;\r\n    }\r\n\r\n    getAngle() {\r\n        return this.angles[this.index];\r\n    }\r\n\r\n    getDeltas() {\r\n        return this.deltas[this.index];\r\n    }\r\n\r\n}\r\n\r\nexport class RobotHelper {\r\n\r\n    robotWorldHelper: RobotWorldHelper;\r\n    model: Pixi3d.Model;\r\n    x: number;\r\n    y: number;\r\n\r\n    hatSteine: number = 10000000;\r\n    maxSteine: number = 100000000;\r\n\r\n    direction: Direction = new Direction();\r\n\r\n    constructor(private interpreter: Interpreter, private runtimeObject: RuntimeObject,\r\n        startX: number, startY: number,\r\n        worldX: number, worldY: number,\r\n        initialeWelt: string = null\r\n    ) {\r\n\r\n        this.fetchRobotWorld(interpreter, worldX, worldY, initialeWelt);\r\n        this.robotWorldHelper.robots.push(this);\r\n\r\n        this.render();\r\n\r\n        this.moveTo(startX - 1, startY - 1);\r\n        this.adjustAngle();\r\n\r\n    }\r\n\r\n    fetchRobotWorld(interpreter: Interpreter, worldX: number, worldY: number, initialeWelt: string) {\r\n        let worldHelper = interpreter.worldHelper;\r\n        this.robotWorldHelper = worldHelper?.robotWorldHelper;\r\n\r\n        if (this.robotWorldHelper == null) {\r\n            let w: RuntimeObject = new RuntimeObject(<Klass>interpreter.moduleStore.getType(\"RobotWorld\").type);\r\n            this.robotWorldHelper = new RobotWorldHelper(interpreter, w, worldX, worldY, initialeWelt);\r\n            w.intrinsicData[\"RobotWorldHelper\"] = this.robotWorldHelper;\r\n        }\r\n\r\n    }\r\n\r\n    render(): void {\r\n\r\n        //@ts-ignore\r\n        let robot = Pixi3d.Model.from(PIXI.Loader.shared.resources[\"steve\"].gltf);\r\n        robot.scale.set(0.1);\r\n        for (let mesh of robot.meshes) {\r\n            let sm = <Pixi3d.StandardMaterial>mesh.material;\r\n            sm.camera = this.robotWorldHelper.camera;\r\n            sm.exposure = 0.5;\r\n            sm.lightingEnvironment = this.robotWorldHelper.robotCubeFactory.lightingEnvironment;\r\n        }\r\n        this.robotWorldHelper.container3D.addChild(robot);\r\n        this.model = robot;\r\n\r\n    };\r\n\r\n    crop(n: number, min: number, max: number): number {\r\n        if (n < min) n = min;\r\n        if (n > max) n = max;\r\n        return n;\r\n    }\r\n\r\n    moveTo(x: number, y: number) {\r\n        const rw = this.robotWorldHelper;\r\n        x = this.crop(x, 0, rw.worldX - 1);\r\n        y = this.crop(y, 0, rw.worldY - 1);\r\n\r\n        this.model.x = 2 * (rw.worldX - x - 1);\r\n        this.model.z = 2 * (rw.worldY - y - 1);\r\n        this.model.y = rw.getNumberOfBricks(x, y) + 1.6;\r\n\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    adjustAngle() {\r\n        this.model.transform.rotationQuaternion.setEulerAngles(0, this.direction.getAngle(), 0);\r\n    }\r\n\r\n    schritt(): boolean {\r\n        let deltas = this.direction.getDeltas();\r\n        let newX = this.x + deltas.dx;\r\n        let newY = this.y + deltas.dy;\r\n        const rw = this.robotWorldHelper;\r\n\r\n        if (newX < 0 || newX >= rw.worldX || newY < 0 || newY >= rw.worldY) {\r\n            this.interpreter.throwException(\"Der Roboter ist gegen eine Wand geprallt!\");\r\n            return false;\r\n        }\r\n\r\n        let oldHeight = rw.getNumberOfBricks(this.x, this.y);\r\n        let newHeight = rw.getNumberOfBricks(newX, newY);\r\n\r\n        if (newHeight < oldHeight - 1) {\r\n            this.interpreter.throwException(\"Der Roboter kann maximal einen Ziegel nach unten springen.\");\r\n            return false;\r\n        }\r\n\r\n        if (newHeight > oldHeight + 1) {\r\n            this.interpreter.throwException(\"Der Roboter kann maximal einen Ziegel hoch springen.\");\r\n            return false;\r\n        }\r\n\r\n        this.moveTo(newX, newY);\r\n        return true;\r\n    }\r\n\r\n    hinlegen(farbe: string): boolean {\r\n        let deltas = this.direction.getDeltas();\r\n        let newX = this.x + deltas.dx;\r\n        let newY = this.y + deltas.dy;\r\n        const rw = this.robotWorldHelper;\r\n\r\n        if (newX < 0 || newX >= rw.worldX || newY < 0 || newY >= rw.worldY) {\r\n            this.interpreter.throwException(\"Der Roboter steht direkt vor einer Wand. Da kann er keine Ziegel hinlegen.\");\r\n            return false;\r\n        }\r\n\r\n        farbe = farbe.toLocaleLowerCase();\r\n        if (!rw.gibtFarbe(farbe)) {\r\n            this.interpreter.throwException(\"Es gibt nur Ziegel der Farben \" + rw.robotCubeFactory.farben.join(\", \") + \". Die Farbe \" + farbe + \" ist nicht darunter.\");\r\n            return false;\r\n        }\r\n\r\n        if (this.hatSteine == 0) {\r\n            this.interpreter.throwException(\"Der Roboter hat keine Ziegel mehr bei sich und kann daher keinen mehr hinlegen.\");\r\n            return false;\r\n        }\r\n\r\n        if(rw.bricks[newX][newY].length >= rw.maximumHeight){\r\n            this.interpreter.throwException(\"Der Ziegelstapel darf die maximale Höhe \" + rw.maximumHeight + \" nicht überschreiten.\");\r\n            return false;\r\n        }\r\n\r\n        rw.addBrick(newX, newY, farbe);\r\n        this.hatSteine--;\r\n\r\n        return true;\r\n    }\r\n\r\n    aufheben(): boolean {\r\n        let deltas = this.direction.getDeltas();\r\n        let newX = this.x + deltas.dx;\r\n        let newY = this.y + deltas.dy;\r\n        const rw = this.robotWorldHelper;\r\n\r\n        if (newX < 0 || newX >= rw.worldX || newY < 0 || newY >= rw.worldY) {\r\n            this.interpreter.throwException(\"Der Roboter steht direkt vor einer Wand. Da kann er keinen Ziegel aufheben.\");\r\n            return false;\r\n        }\r\n\r\n        if (rw.getNumberOfBricks(newX, newY) < 1) {\r\n            this.interpreter.throwException(\"Vor dem Roboter liegt kein Ziegel, er kann daher keinen aufheben.\");\r\n            return false;\r\n        }\r\n\r\n        rw.removeBrick(newX, newY);\r\n\r\n        if (this.hatSteine < this.maxSteine) {\r\n            this.hatSteine++;\r\n        } else {\r\n            this.interpreter.throwException(\"Der Roboter kann nicht mehr Steine aufheben, da er keinen Platz mehr in seinem Rucksack hat.\");\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    markeSetzen(farbe: string) {\r\n        const rw = this.robotWorldHelper;\r\n        farbe = farbe.toLocaleLowerCase();\r\n\r\n        if (!rw.gibtFarbe(farbe)) {\r\n            this.interpreter.throwException(\"Es gibt nur Marken der Farben \" + rw.robotCubeFactory.farben.join(\", \") + \". Die Farbe \" + farbe + \" ist nicht darunter.\");\r\n            return false;\r\n        }\r\n\r\n        rw.setMarker(this.x, this.y, farbe);\r\n    }\r\n\r\n    markeLöschen() {\r\n        const rw = this.robotWorldHelper;\r\n\r\n        rw.removeMarker(this.x, this.y);\r\n    }\r\n\r\n    istWand(): boolean {\r\n        let deltas = this.direction.getDeltas();\r\n        let newX = this.x + deltas.dx;\r\n        let newY = this.y + deltas.dy;\r\n        const rw = this.robotWorldHelper;\r\n\r\n        return (newX < 0 || newX >= rw.worldX || newY < 0 || newY >= rw.worldY)\r\n\r\n    }\r\n\r\n    istZiegel(param: number | string | null): boolean {\r\n        let deltas = this.direction.getDeltas();\r\n        let newX = this.x + deltas.dx;\r\n        let newY = this.y + deltas.dy;\r\n        const rw = this.robotWorldHelper;\r\n\r\n        if (newX < 0 || newX >= rw.worldX || newY < 0 || newY >= rw.worldY) {\r\n            return false;\r\n        }\r\n\r\n        if (param == null) return rw.getBrickCount(newX, newY) > 0;\r\n\r\n        if (typeof param == \"string\") {\r\n            return rw.hasBrickColor(newX, newY, param.toLocaleLowerCase());\r\n        }\r\n\r\n        return rw.bricks[newX][newY].length == param;\r\n\r\n    }\r\n\r\n    istMarke(param: string | null): boolean {\r\n        const rw = this.robotWorldHelper;\r\n        let marke = rw.markers[this.x][this.y];\r\n        if (param == null) return marke != null;\r\n\r\n        if (typeof param == \"string\") {\r\n            return marke != null && marke.farbe == param.toLocaleLowerCase();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n\r\n}\r\n","import { FileData, WorkspaceSettings } from \"../../communication/Data.js\";\r\nimport { AccordionElement } from \"../../main/gui/Accordion.js\";\r\nimport { MainBase } from \"../../main/MainBase.js\";\r\nimport { ArrayListClass } from \"../../runtimelibrary/collections/ArrayList.js\";\r\nimport { CollectionClass } from \"../../runtimelibrary/collections/Collection.js\";\r\nimport { IterableClass } from \"../../runtimelibrary/collections/Iterable.js\";\r\nimport { IteratorClass } from \"../../runtimelibrary/collections/Iterator.js\";\r\nimport { ListClass } from \"../../runtimelibrary/collections/List.js\";\r\nimport { ListIteratorImplClass } from \"../../runtimelibrary/collections/ListIteratorImpl.js\";\r\nimport { StackClass } from \"../../runtimelibrary/collections/Stack.js\";\r\nimport { VectorClass } from \"../../runtimelibrary/collections/Vector.js\";\r\nimport { SetClass } from \"../../runtimelibrary/collections/Set.js\";\r\nimport { SetIteratorImplClass } from \"../../runtimelibrary/collections/SetIteratorImpl.js\";\r\nimport { HashSetClass } from \"../../runtimelibrary/collections/HashSet.js\";\r\nimport { LinkedHashSetClass } from \"../../runtimelibrary/collections/LinkedHashSet.js\";\r\nimport { QueueClass } from \"../../runtimelibrary/collections/Queue.js\";\r\nimport { DequeClass } from \"../../runtimelibrary/collections/Deque.js\";\r\nimport { LinkedListClass } from \"../../runtimelibrary/collections/LinkedList.js\";\r\nimport { ConsoleClass } from \"../../runtimelibrary/Console.js\";\r\nimport { Actor as ActorClass } from \"../../runtimelibrary/graphics/Actor.js\";\r\nimport { AlignmentClass } from \"../../runtimelibrary/graphics/Alignment.js\";\r\nimport { BitmapClass } from \"../../runtimelibrary/graphics/Bitmap.js\";\r\nimport { CircleClass as CircleClass } from \"../../runtimelibrary/graphics/Circle.js\";\r\nimport { SectorClass } from \"../../runtimelibrary/graphics/Sector.js\";\r\nimport { ArcClass } from \"../../runtimelibrary/graphics/Arc.js\";\r\nimport { ColorClass } from \"../../runtimelibrary/graphics/Color.js\";\r\nimport { EllipseClass } from \"../../runtimelibrary/graphics/Ellipse.js\";\r\nimport { FilledShapeClass } from \"../../runtimelibrary/graphics/FilledShape.js\";\r\nimport { CollisionPairClass, GroupClass } from \"../../runtimelibrary/graphics/Group.js\";\r\nimport { KeyClass } from \"../../runtimelibrary/graphics/Key.js\";\r\nimport { PolygonClass } from \"../../runtimelibrary/graphics/Polygon.js\";\r\nimport { RectangleClass } from \"../../runtimelibrary/graphics/Rectangle.js\";\r\nimport { RepeatTypeClass } from \"../../runtimelibrary/graphics/RepeatType.js\";\r\nimport { RoundedRectangleClass } from \"../../runtimelibrary/graphics/RoundedRectangle.js\";\r\nimport { ScaleModeClass } from \"../../runtimelibrary/graphics/ScaleMode.js\";\r\nimport { ShapeClass } from \"../../runtimelibrary/graphics/Shape.js\";\r\nimport { SoundKlass as SoundClass } from \"../../runtimelibrary/graphics/Sound.js\";\r\nimport { SpriteClass, TileClass } from \"../../runtimelibrary/graphics/Sprite.js\";\r\nimport { SpriteLibraryClass } from \"../../runtimelibrary/graphics/SpriteLibraryEnum.js\";\r\nimport { TextClass } from \"../../runtimelibrary/graphics/Text.js\";\r\nimport { WorldClass } from \"../../runtimelibrary/graphics/World.js\";\r\nimport { InputClass } from \"../../runtimelibrary/Input.js\";\r\nimport { GamepadClass } from \"../../runtimelibrary/Gamepad.js\";\r\nimport { MathClass } from \"../../runtimelibrary/Math.js\";\r\nimport { MathToolsClass } from \"../../runtimelibrary/MathToolsClass.js\";\r\nimport { PrintStreamClass, SystemClass } from \"../../runtimelibrary/System.js\";\r\nimport { KeyListener, SystemToolsClass } from \"../../runtimelibrary/SystemTools.js\";\r\nimport { Runnable, TimerClass } from \"../../runtimelibrary/Timer.js\";\r\nimport { Workspace } from \"../../workspace/Workspace.js\";\r\nimport { Error, ErrorLevel } from \"../lexer/Lexer.js\";\r\nimport { TextPosition, Token, TokenType, TextPositionWithoutLength } from \"../lexer/Token.js\";\r\nimport { Interface, Klass, Visibility } from \"../types/Class.js\";\r\nimport { booleanPrimitiveType, BooleanType, CharacterType, charPrimitiveType, doublePrimitiveType, DoubleType, floatPrimitiveType, FloatType, IntegerType, intPrimitiveType, objectType, stringPrimitiveType, voidPrimitiveType, varType } from \"../types/PrimitiveTypes.js\";\r\nimport { Attribute, Method, PrimitiveType, Type, Variable } from \"../types/Types.js\";\r\nimport { ASTNode, MethodDeclarationNode, TypeNode } from \"./AST.js\";\r\nimport { Breakpoint, Program, Statement } from \"./Program.js\";\r\nimport { SymbolTable } from \"./SymbolTable.js\";\r\nimport { MapClass } from \"../../runtimelibrary/collections/Map.js\";\r\nimport { HashMapClass } from \"../../runtimelibrary/collections/HashMap.js\";\r\nimport { TriangleClass } from \"../../runtimelibrary/graphics/Triangle.js\";\r\nimport { Main } from \"../../main/Main.js\";\r\nimport { LocalDateTimeClass, DayOfWeekEnum, MonthEnum } from \"../../runtimelibrary/graphics/LocalDateTime.js\";\r\nimport { LineClass } from \"../../runtimelibrary/graphics/Line.js\";\r\nimport { Vector2Class } from \"../../runtimelibrary/Vector2.js\";\r\nimport { MouseAdapterClass, MouseListenerInterface } from \"../../runtimelibrary/graphics/MouseListener.js\";\r\nimport { WebSocketClass } from \"../../runtimelibrary/network/WebSocket.js\";\r\nimport { WebSocketClientClass } from \"../../runtimelibrary/network/WebSocketClient.js\";\r\nimport { ProcessingClass } from \"../../runtimelibrary/graphics/Processing.js\";\r\nimport { TurtleClass } from \"../../runtimelibrary/graphics/Turtle.js\";\r\nimport { GNGZeichenfensterClass } from \"../../runtimelibrary/gng/GNGZeichenfenster.js\";\r\nimport { GNGRechteckClass } from \"../../runtimelibrary/gng/GNGRechteck.js\";\r\nimport { GNGBaseFigurClass } from \"../../runtimelibrary/gng/GNGBaseFigur.js\";\r\nimport { GNGAktionsempfaengerInterface } from \"../../runtimelibrary/gng/GNGAktionsempfaenger.js\";\r\nimport { GNGDreieckClass } from \"../../runtimelibrary/gng/GNGDreieck.js\";\r\nimport { GNGKreisClass } from \"../../runtimelibrary/gng/GNGKreis.js\";\r\nimport { GNGTurtleClass } from \"../../runtimelibrary/gng/GNGTurtle.js\";\r\nimport { GNGTextClass } from \"../../runtimelibrary/gng/GNGText.js\";\r\nimport { GNGEreignisbehandlung } from \"../../runtimelibrary/gng/GNGEreignisbehandlung.js\";\r\nimport { GNGFigurClass } from \"../../runtimelibrary/gng/GNGFigur.js\";\r\nimport { RandomClass } from \"../../runtimelibrary/Random.js\";\r\nimport { DirectionClass } from \"../../runtimelibrary/graphics/Direction.js\";\r\nimport { Patcher } from \"./Patcher.js\";\r\nimport { KeyEvent as KeyEventClass } from \"../../runtimelibrary/graphics/KeyEvent.js\";\r\nimport { Formatter } from \"../../main/gui/Formatter.js\";\r\nimport { RobotClass, RobotWorldClass } from \"../../runtimelibrary/graphics/3d/Robot.js\";\r\n\r\nexport type ExportedWorkspace = {\r\n    name: string;\r\n    modules: ExportedModule[];\r\n    settings: WorkspaceSettings;\r\n}\r\n\r\nexport type ExportedModule = {\r\n    name: string;\r\n    text: string;\r\n\r\n    is_copy_of_id?: number,\r\n    repository_file_version?: number,\r\n    identical_to_repository_version: boolean,\r\n\r\n}\r\n\r\nexport type File = {\r\n    name: string,\r\n    id?: number,\r\n    text: string,\r\n\r\n    text_before_revision: string,\r\n    submitted_date: string,\r\n    student_edited_after_revision: boolean,\r\n\r\n    is_copy_of_id?: number,\r\n    repository_file_version?: number,\r\n    identical_to_repository_version: boolean,\r\n\r\n    dirty: boolean,\r\n    saved: boolean,\r\n    version: number,\r\n    panelElement?: AccordionElement\r\n}\r\n\r\nexport type IdentifierPosition = {\r\n    position: TextPosition,\r\n    element: Type | Method | Attribute | Variable;\r\n}\r\n\r\nexport type MethodCallPosition = {\r\n    identifierPosition: TextPosition,\r\n    possibleMethods: Method[] | string, // string for print, println, ...\r\n    commaPositions: TextPosition[],\r\n    rightBracketPosition: TextPosition\r\n}\r\n\r\nexport class Module {\r\n    file: File;\r\n    static maxUriNumber: number = 0;\r\n    uri: monaco.Uri;\r\n    model: monaco.editor.ITextModel;\r\n    oldErrorDecorations: string[] = [];\r\n    lastSavedVersionId: number;\r\n    editorState: monaco.editor.ICodeEditorViewState;\r\n\r\n    isSystemModule: boolean = false;\r\n\r\n    breakpoints: Breakpoint[] = [];\r\n    breakpointDecorators: string[] = [];\r\n    decoratorIdToBreakpointMap: { [id: string]: Breakpoint } = {};\r\n\r\n    errors: Error[][] = [[], [], [], []]; // 1st pass, 2nd pass, 3rd pass\r\n\r\n    colorInformation: monaco.languages.IColorInformation[] = [];\r\n\r\n    // 1st pass: Lexer\r\n    tokenList: Token[];\r\n\r\n    // 2nd pass: ASTParser\r\n    mainProgramAst: ASTNode[];\r\n    classDefinitionsAST: ASTNode[];\r\n    typeNodes: TypeNode[];\r\n\r\n    // 3rd pass: TypeResolver fill in resolvedType in typeNodes and populate typeStore\r\n    typeStore: TypeStore;\r\n\r\n    // 4th pass: generate code and symbol tables\r\n\r\n    /*\r\n    The mainProgramAST holds statements to:\r\n    1. call static constructor of each used class\r\n    2. execute main Program\r\n    */\r\n\r\n    mainProgram?: Program;\r\n    mainProgramEnd: TextPosition;\r\n    mainSymbolTable: SymbolTable;\r\n\r\n    identifierPositions: { [line: number]: IdentifierPosition[] } = {};\r\n    methodCallPositions: { [line: number]: MethodCallPosition[] } = {};\r\n\r\n    dependsOnModules: Map<Module, boolean>;\r\n    isStartable: boolean;\r\n    dependsOnModulesWithErrors: boolean;\r\n\r\n    static uriMap: { [name: string]: number } = {};\r\n    bracketError: string;\r\n\r\n    constructor(file: File, public main: MainBase) {\r\n        if (file == null || this.main == null) return; // used by AdhocCompiler and ApiDoc\r\n\r\n        this.file = file;\r\n        // this.uri = monaco.Uri.from({ path: '/file' + (Module.maxUriNumber++) + '.learnJava', scheme: 'file' });\r\n        let path = file.name;\r\n\r\n        let uriCounter = Module.uriMap[path];\r\n        if (uriCounter == null) {\r\n            uriCounter = 0;\r\n        } else {\r\n            uriCounter++;\r\n        }\r\n        Module.uriMap[path] = uriCounter;\r\n\r\n        if (uriCounter > 0) path += \" (\" + uriCounter + \")\";\r\n        this.uri = monaco.Uri.from({ path: path, scheme: 'inmemory' });\r\n        this.model = monaco.editor.createModel(file.text, \"myJava\", this.uri);\r\n        this.model.updateOptions({ tabSize: 3, bracketColorizationOptions: {enabled: true} });\r\n        let formatter = new Formatter();\r\n\r\n        if(main.isEmbedded() && file.text != null && file.text.length > 3){\r\n            let edits = <monaco.languages.TextEdit[]>formatter.format(this.model);\r\n            this.model.applyEdits(edits);\r\n        }\r\n\r\n        this.lastSavedVersionId = this.model.getAlternativeVersionId();\r\n\r\n        let that = this;\r\n\r\n        this.model.onDidChangeContent(() => {\r\n            let versionId = that.model.getAlternativeVersionId();\r\n\r\n            if (versionId != that.lastSavedVersionId) {\r\n                that.file.dirty = true;\r\n                that.file.saved = false;\r\n                that.file.identical_to_repository_version = false;\r\n                that.lastSavedVersionId = versionId;\r\n            }\r\n\r\n            if(!that.main.isEmbedded()){\r\n                let main1: Main = <Main>main;\r\n                if(main1.workspacesOwnerId != main1.user.id){\r\n                    if(that.file.text_before_revision == null || that.file.student_edited_after_revision){\r\n                        that.file.student_edited_after_revision = false;\r\n                        that.file.text_before_revision = that.file.text;\r\n                        that.file.saved = false;\r\n                        main1.networkManager.sendUpdates(null, false);\r\n                        main1.bottomDiv.homeworkManager.showHomeWorkRevisionButton();\r\n                        main1.projectExplorer.renderHomeworkButton(that.file);\r\n                    }\r\n                } else {\r\n                    that.file.student_edited_after_revision = true;\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    toExportedModule(): ExportedModule {\r\n        return {\r\n            name: this.file.name,\r\n            text: this.getProgramTextFromMonacoModel(),\r\n            identical_to_repository_version: this.file.identical_to_repository_version,\r\n            is_copy_of_id: this.file.is_copy_of_id,\r\n            repository_file_version: this.file.repository_file_version\r\n        }\r\n    }\r\n\r\n    getMethodDeclarationAtPosition(position: { lineNumber: number; column: number; }): MethodDeclarationNode {\r\n\r\n        if(this.classDefinitionsAST == null) return null;\r\n        \r\n        for(let cd of this.classDefinitionsAST){\r\n            if(cd.type == TokenType.keywordClass || cd.type == TokenType.keywordEnum){\r\n                for(let methodAST of cd.methods){\r\n                    if(methodAST.position != null && methodAST.scopeTo != null){\r\n                        if(methodAST.position.line <= position.lineNumber && methodAST.scopeTo.line >= position.lineNumber){\r\n                            return methodAST;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        return null;\r\n    \r\n    }\r\n\r\n\r\n    static restoreFromData(f: FileData, main: MainBase): Module {\r\n\r\n        let patched = Patcher.patch(f.text);\r\n\r\n        let f1: File = {\r\n            name: f.name,\r\n            text: patched.patchedText,\r\n            text_before_revision: f.text_before_revision,\r\n            submitted_date: f.submitted_date,\r\n            student_edited_after_revision: false,\r\n            dirty: true,\r\n            saved: !patched.modified,\r\n            version: f.version,\r\n            id: f.id,\r\n            is_copy_of_id: f.is_copy_of_id,\r\n            repository_file_version: f.repository_file_version,\r\n            identical_to_repository_version: f.identical_to_repository_version\r\n        }\r\n\r\n        let m: Module = new Module(f1, main);\r\n\r\n        return m;\r\n\r\n    }\r\n\r\n    getFileData(workspace: Workspace): FileData {\r\n        let file = this.file;\r\n        let fd: FileData = {\r\n            id: file.id,\r\n            name: file.name,\r\n            text: file.text,\r\n            text_before_revision: file.text_before_revision,\r\n            submitted_date: file.submitted_date,\r\n            student_edited_after_revision: file.student_edited_after_revision,\r\n            version: file.version,\r\n            is_copy_of_id: file.is_copy_of_id,\r\n            repository_file_version: file.repository_file_version,\r\n            identical_to_repository_version: file.identical_to_repository_version,\r\n            workspace_id: workspace.id,\r\n            forceUpdate: false,\r\n            file_type: 0\r\n        }\r\n\r\n        return fd;\r\n    }\r\n\r\n    pushMethodCallPosition(identifierPosition: TextPosition, commaPositions: TextPosition[],\r\n        possibleMethods: Method[] | string, rightBracketPosition: TextPosition) {\r\n\r\n        let lines: number[] = [];\r\n        lines.push(identifierPosition.line);\r\n        for (let cp of commaPositions) {\r\n            if (lines.indexOf[cp.line] < 0) {\r\n                lines.push(cp.line);\r\n            }\r\n        }\r\n\r\n        let mcp: MethodCallPosition = {\r\n            identifierPosition: identifierPosition,\r\n            commaPositions: commaPositions,\r\n            possibleMethods: possibleMethods,\r\n            rightBracketPosition: rightBracketPosition\r\n        };\r\n\r\n        for (let line of lines) {\r\n            let mcpList = this.methodCallPositions[line];\r\n            if (mcpList == null) {\r\n                this.methodCallPositions[line] = [];\r\n                mcpList = this.methodCallPositions[line];\r\n            }\r\n            mcpList.push(mcp);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    toggleBreakpoint(lineNumber: number, rerender: boolean) {\r\n        this.getBreakpointPositionsFromEditor();\r\n        if (this.getBreakpoint(lineNumber, true) == null) {\r\n            this.setBreakpoint(lineNumber, 1);\r\n        }\r\n        if (rerender) {\r\n            this.renderBreakpointDecorators();\r\n        }\r\n    }\r\n\r\n    getBreakpoint(line: number, remove: boolean = false): Breakpoint {\r\n\r\n        for (let i = 0; i < this.breakpoints.length; i++) {\r\n            let b = this.breakpoints[i];\r\n            if (b.line == line) {\r\n                this.breakpoints.splice(i, 1);\r\n                if (b.statement != null) {\r\n                    b.statement.breakpoint = undefined;\r\n                }\r\n                return b;\r\n            }\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n\r\n    setBreakpoint(line: number, column: number): Breakpoint {\r\n\r\n        let breakpoint: Breakpoint = {\r\n            line: line,\r\n            column: column,\r\n            statement: null\r\n        }\r\n\r\n        this.attachToStatement(breakpoint);\r\n        this.breakpoints.push(breakpoint);\r\n\r\n        return breakpoint;\r\n\r\n    }\r\n\r\n    attachToStatement(breakpoint: Breakpoint, programList?: Program[]) {\r\n\r\n        if (breakpoint.statement != null) {\r\n            breakpoint.statement.breakpoint = undefined;\r\n        }\r\n\r\n        if (programList == null) programList = this.getPrograms();\r\n\r\n        let nearestStatement: Statement = null;\r\n        let nearestDistance: number = 100000;\r\n\r\n        for (let program of programList) {\r\n            for (let statement of program.statements) {\r\n\r\n                let line = statement?.position?.line;\r\n                if (line != null && line >= breakpoint.line) {\r\n                    if (line - breakpoint.line < nearestDistance) {\r\n                        nearestStatement = statement;\r\n                        nearestDistance = line - breakpoint.line;\r\n                    }\r\n\r\n                    break;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        breakpoint.statement = nearestStatement;\r\n        if (nearestStatement != null) {\r\n            nearestStatement.breakpoint = breakpoint;\r\n            // let pp = new ProgramPrinter();\r\n            // console.log(\"Attached Breakpoint line \" + breakpoint.line + \", column \" + \r\n            //     breakpoint.column + \" to statement \" + pp.print([nearestStatement]));\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    getPrograms(): Program[] {\r\n        let programList: Program[] = [];\r\n\r\n        if (this.mainProgram != null) {\r\n            programList.push(this.mainProgram);\r\n        }\r\n\r\n        if (this.typeStore != null) {\r\n\r\n            for (let type of this.typeStore.typeList) {\r\n                if (type instanceof Klass) {\r\n                    if (type.attributeInitializationProgram != null) {\r\n                        programList.push(type.attributeInitializationProgram);\r\n                    }\r\n                    for (let method of type.methods) {\r\n                        if (method.program != null) {\r\n                            programList.push(method.program);\r\n                        }\r\n                    }\r\n                    if (type.staticClass.attributeInitializationProgram != null) {\r\n                        programList.push(type.staticClass.attributeInitializationProgram);\r\n                    }\r\n                    for (let method of type.staticClass.methods) {\r\n                        if (method.program != null) {\r\n                            programList.push(method.program);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        return programList;\r\n\r\n    }\r\n\r\n    renderBreakpointDecorators() {\r\n\r\n        this.getBreakpointPositionsFromEditor();\r\n\r\n        let decorations: monaco.editor.IModelDeltaDecoration[] = [];\r\n\r\n        for (let breakpoint of this.breakpoints) {\r\n            decorations.push({\r\n                range: { startLineNumber: breakpoint.line, endLineNumber: breakpoint.line, startColumn: 1, endColumn: 1 },\r\n                options: {\r\n                    isWholeLine: true, className: \"jo_decorate_breakpoint\",\r\n                    overviewRuler: {\r\n                        color: \"#580000\",\r\n                        position: monaco.editor.OverviewRulerLane.Left\r\n                    },\r\n                    minimap: {\r\n                        color: \"#580000\",\r\n                        position: monaco.editor.MinimapPosition.Inline\r\n                    },\r\n                    marginClassName: \"jo_margin_breakpoint\",\r\n                    stickiness: monaco.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\r\n                },\r\n                //@ts-ignore\r\n                breakpoint: breakpoint\r\n            });\r\n        }\r\n\r\n        this.breakpointDecorators = this.main.getMonacoEditor().deltaDecorations(this.breakpointDecorators, decorations);\r\n\r\n        this.decoratorIdToBreakpointMap = {};\r\n        for (let i = 0; i < this.breakpointDecorators.length; i++) {\r\n            this.decoratorIdToBreakpointMap[this.breakpointDecorators[i]] = this.breakpoints[i];\r\n        }\r\n\r\n    }\r\n\r\n    getBreakpointPositionsFromEditor() {\r\n        for (let decoration of this.main.getMonacoEditor().getModel().getAllDecorations()) {\r\n            if (decoration.options.marginClassName == \"margin_breakpoint\") {\r\n                let breakpoint = this.decoratorIdToBreakpointMap[decoration.id];\r\n                if (breakpoint != null) {\r\n                    breakpoint.line = decoration.range.startLineNumber;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    findSymbolTableAtPosition(line: number, column: number) {\r\n        if (this.mainSymbolTable == null) {\r\n            return null;\r\n        }\r\n\r\n        if (line > this.mainSymbolTable.positionTo.line ||\r\n            line == this.mainSymbolTable.positionTo.line && column > this.mainSymbolTable.positionTo.column\r\n        ) {\r\n            line = this.mainSymbolTable.positionTo.line;\r\n            column = this.mainSymbolTable.positionTo.column - 1;\r\n        }\r\n\r\n        return this.mainSymbolTable.findTableAtPosition(line, column);\r\n    }\r\n\r\n    getErrorCount(): number {\r\n\r\n        let ec = 0;\r\n        for (let el of this.errors) {\r\n            el.forEach(error => ec += error.level == \"error\" ? 1 : 0);\r\n            // ec += el.length;\r\n        }\r\n\r\n        return ec;\r\n    }\r\n\r\n    hasMainProgram() {\r\n\r\n        if (this.mainProgram == null) return false;\r\n        if (this.mainProgram.statements == null) return false;\r\n        return this.mainProgram.statements.length > 2 || this.mainProgram.statements.length == 2 && this.mainProgram.statements[0].type == TokenType.callMainMethod;\r\n\r\n    }\r\n\r\n    getProgramTextFromMonacoModel(): string {\r\n        return this.model.getValue(monaco.editor.EndOfLinePreference.LF, false);\r\n    }\r\n\r\n\r\n    addIdentifierPosition(position: TextPosition, element: Type | Method | Attribute | Variable) {\r\n        let positionList: IdentifierPosition[] = this.identifierPositions[position.line];\r\n        if (positionList == null) {\r\n            positionList = [];\r\n            this.identifierPositions[position.line] = positionList;\r\n        }\r\n        positionList.push({\r\n            position: position,\r\n            element: element\r\n        });\r\n    }\r\n\r\n\r\n    getTypeAtPosition(line: number, column: number): { type: Type, isStatic: boolean } {\r\n\r\n        let positionsOnLine = this.identifierPositions[line];\r\n        if (positionsOnLine == null) return null;\r\n\r\n        let foundPosition: IdentifierPosition = null;\r\n        for (let p of positionsOnLine) {\r\n            if (column >= p.position.column && column <= p.position.column + p.position.length) {\r\n                foundPosition = p;\r\n                let element = foundPosition.element;\r\n                if (element instanceof Method) {\r\n                    return { type: element, isStatic: false };\r\n                }\r\n                // Attribute, Variable\r\n                let type: Type = (element instanceof Type) ? element : element.type;\r\n                //@ts-ignore\r\n                if (foundPosition.position.length > 0 && element.type != null) {\r\n                    //@ts-ignore\r\n                    return { type: <Type>type, isStatic: false };\r\n                }\r\n\r\n                return { type: type, isStatic: foundPosition.position.length > 0 };\r\n\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getElementAtPosition(line: number, column: number): Klass | Interface | Method | Attribute | Variable {\r\n\r\n        let positionsOnLine = this.identifierPositions[line];\r\n        if (positionsOnLine == null) return null;\r\n\r\n        let bestFoundPosition: IdentifierPosition = null;\r\n        for (let p of positionsOnLine) {\r\n            if (column >= p.position.column && column <= p.position.column + p.position.length) {\r\n\r\n                if (p.position.length > 0) {\r\n                    if (bestFoundPosition == null) {\r\n                        bestFoundPosition = p;\r\n                    } else {\r\n                        if(p.element instanceof Method && bestFoundPosition.element instanceof Klass){\r\n                            bestFoundPosition = p;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return bestFoundPosition == null ? null : <any>bestFoundPosition.element;\r\n    }\r\n\r\n    copy(): Module {\r\n        let m = new Module(this.file, this.main);\r\n        m.model = this.model;\r\n        m.mainProgram = this.mainProgram;\r\n        this.mainProgram = null;\r\n        m.mainSymbolTable = this.mainSymbolTable;\r\n        this.mainSymbolTable = null;\r\n        m.typeStore = this.typeStore;\r\n        // this.typeStore = null;\r\n        m.isStartable = this.isStartable;\r\n        m.dependsOnModulesWithErrors = this.dependsOnModulesWithErrors;\r\n\r\n        m.breakpoints = this.breakpoints;\r\n        this.breakpoints = [];\r\n        let programs = m.getPrograms();\r\n\r\n        programs.forEach((p) => p.module = m);\r\n\r\n        for (let b of m.breakpoints) {\r\n            this.breakpoints.push({\r\n                line: b.line,\r\n                column: b.column,\r\n                statement: null\r\n            });\r\n\r\n            m.attachToStatement(b, programs);\r\n\r\n        }\r\n\r\n        this.file.dirty = true;\r\n\r\n        return m;\r\n    }\r\n\r\n    clear() {\r\n\r\n        this.identifierPositions = {};\r\n\r\n        if (this.file != null && this.file.dirty) {\r\n            // Lexer\r\n            this.tokenList = null;\r\n            this.errors[0] = [];\r\n\r\n            // AST Parser\r\n            this.errors[1] = [];\r\n\r\n\r\n        }\r\n\r\n        // type resolver\r\n        this.errors[2] = [];\r\n        this.typeNodes = [];\r\n        this.typeStore = new TypeStore();\r\n\r\n        // Code generator\r\n        this.errors[3] = [];\r\n        this.mainSymbolTable = new SymbolTable(null, { line: 1, column: 1, length: 1 }, { line: 100000, column: 1, length: 0 });\r\n        this.mainProgram = null;\r\n\r\n        this.methodCallPositions = {};\r\n        this.dependsOnModules = new Map();\r\n\r\n    }\r\n\r\n    hasErrors() {\r\n\r\n        for (let el of this.errors) {\r\n            if(el.find(error => error.level == \"error\")){\r\n                return true;\r\n            }\r\n            // if (el.length > 0) {\r\n            //     return true;\r\n            // }\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    getSortedAndFilteredErrors(): Error[] {\r\n\r\n        let list: Error[] = [];\r\n\r\n        for (let el of this.errors) {\r\n            list = list.concat(el);\r\n        }\r\n\r\n        list.sort((a, b) => {\r\n            if (a.position.line > b.position.line) {\r\n                return 1;\r\n            }\r\n            if (b.position.line > a.position.line) {\r\n                return -1;\r\n            }\r\n            if (a.position.column >= b.position.column) {\r\n                return 1;\r\n            }\r\n            return -1;\r\n        });\r\n\r\n        for (let i = 0; i < list.length - 1; i++) {\r\n            let e1 = list[i];\r\n            let e2 = list[i + 1];\r\n            if (e1.position.line == e2.position.line && e1.position.column + 10 > e2.position.column) {\r\n                if(this.errorLevelCompare(e1.level, e2.level) == 1){\r\n                    list.splice(i + 1, 1);\r\n                } else {\r\n                    list.splice(i, 1);\r\n                }\r\n                i--;\r\n            }\r\n        }\r\n\r\n        return list;\r\n    }\r\n\r\n    errorLevelCompare(level1: ErrorLevel, level2: ErrorLevel): number {\r\n        if(level1 == \"error\") return 1;\r\n        if(level2 == \"error\") return 2;\r\n        if(level1 == \"warning\") return 1;\r\n        if(level2 == \"warning\") return 2;\r\n        return 1;\r\n    }\r\n\r\n    renderStartButton() {\r\n        let $buttonDiv = this.file?.panelElement?.$htmlFirstLine?.find('.jo_additionalButtonStart');\r\n        if ($buttonDiv == null) return;\r\n\r\n        $buttonDiv.find('.jo_startButton').remove();\r\n\r\n        if (this.isStartable) {\r\n            let $startButtonDiv = jQuery('<div class=\"jo_startButton img_start-dark jo_button jo_active\" title=\"Hauptprogramm in der Datei starten\"></div>');\r\n            $buttonDiv.append($startButtonDiv);\r\n            let that = this;\r\n            $startButtonDiv.on('mousedown', (e) => e.stopPropagation());\r\n            $startButtonDiv.on('click', (e) => {\r\n                e.stopPropagation();\r\n\r\n                that.main.setModuleActive(that);\r\n\r\n                that.main.getInterpreter().start();\r\n            });\r\n\r\n        } \r\n    }\r\n\r\n\r\n}\r\n\r\nexport class BaseModule extends Module {\r\n    constructor(main: MainBase) {\r\n\r\n        super({ name: \"Base Module\", text: \"\", text_before_revision: null, submitted_date: null, student_edited_after_revision: false, dirty: false, saved: true, version: 1 , identical_to_repository_version: true}, main);\r\n\r\n        this.isSystemModule = true;\r\n        this.mainProgram = null;\r\n\r\n        this.clear();\r\n\r\n\r\n        this.typeStore.addType(voidPrimitiveType);\r\n        this.typeStore.addType(intPrimitiveType);\r\n        this.typeStore.addType(floatPrimitiveType);\r\n        this.typeStore.addType(doublePrimitiveType);\r\n        this.typeStore.addType(charPrimitiveType);\r\n        this.typeStore.addType(booleanPrimitiveType);\r\n        this.typeStore.addType(stringPrimitiveType);\r\n        this.typeStore.addType(objectType);\r\n        this.typeStore.addType(varType);\r\n\r\n        this.typeStore.addType(IntegerType);\r\n        this.typeStore.addType(FloatType);\r\n        this.typeStore.addType(DoubleType);\r\n        this.typeStore.addType(CharacterType);\r\n        this.typeStore.addType(BooleanType);\r\n\r\n        // Collections Framework\r\n        this.typeStore.addType(new IteratorClass(this));\r\n        this.typeStore.addType(new IterableClass(this));\r\n        this.typeStore.addType(new CollectionClass(this));\r\n        this.typeStore.addType(new ListClass(this));\r\n        this.typeStore.addType(new ArrayListClass(this));\r\n        this.typeStore.addType(new VectorClass(this));\r\n        this.typeStore.addType(new QueueClass(this));\r\n        this.typeStore.addType(new DequeClass(this));\r\n        this.typeStore.addType(new LinkedListClass(this));\r\n        this.typeStore.addType(new StackClass(this));\r\n        this.typeStore.addType(new ListIteratorImplClass(this));\r\n        this.typeStore.addType(new SetClass(this));\r\n        this.typeStore.addType(new HashSetClass(this));\r\n        this.typeStore.addType(new LinkedHashSetClass(this));\r\n        this.typeStore.addType(new SetIteratorImplClass(this));\r\n        this.typeStore.addType(new MapClass(this));\r\n        this.typeStore.addType(new HashMapClass(this));\r\n\r\n        this.typeStore.addType(new ConsoleClass(this));\r\n        this.typeStore.addType(new MathClass(this));\r\n        this.typeStore.addType(new RandomClass(this));\r\n        this.typeStore.addType(new Vector2Class(this));\r\n        this.typeStore.addType(new MathToolsClass(this));\r\n        this.typeStore.addType(new KeyClass(this));\r\n        this.typeStore.addType(new SoundClass(this));\r\n        this.typeStore.addType(new InputClass(this));\r\n        this.typeStore.addType(new Runnable(this));\r\n        this.typeStore.addType(new TimerClass(this));\r\n        this.typeStore.addType(new ColorClass(this));\r\n        this.typeStore.addType(new ActorClass(this));\r\n        this.typeStore.addType(new DirectionClass(this));\r\n        this.typeStore.addType(new ShapeClass(this));\r\n        this.typeStore.addType(new FilledShapeClass(this));\r\n        this.typeStore.addType(new RectangleClass(this));\r\n        this.typeStore.addType(new RoundedRectangleClass(this));\r\n        this.typeStore.addType(new CircleClass(this));\r\n        this.typeStore.addType(new SectorClass(this));\r\n        this.typeStore.addType(new ArcClass(this));\r\n        this.typeStore.addType(new EllipseClass(this));\r\n        this.typeStore.addType(new BitmapClass(this));\r\n        this.typeStore.addType(new AlignmentClass(this));\r\n        this.typeStore.addType(new TextClass(this));\r\n        this.typeStore.addType(new ScaleModeClass(this));\r\n        this.typeStore.addType(new SpriteLibraryClass(this));\r\n        this.typeStore.addType(new RepeatTypeClass(this));\r\n        this.typeStore.addType(new TileClass(this));\r\n        this.typeStore.addType(new SpriteClass(this));\r\n        this.typeStore.addType(new CollisionPairClass(this));\r\n        this.typeStore.addType(new GroupClass(this));\r\n        this.typeStore.addType(new PolygonClass(this));\r\n        this.typeStore.addType(new LineClass(this));\r\n        this.typeStore.addType(new TriangleClass(this));\r\n        this.typeStore.addType(new TurtleClass(this));\r\n\r\n        this.typeStore.addType(new MouseListenerInterface(this));\r\n        this.typeStore.addType(new MouseAdapterClass(this));\r\n        this.typeStore.addType(new GamepadClass(this));\r\n        this.typeStore.addType(new WorldClass(this));\r\n        this.typeStore.addType(new ProcessingClass(this));\r\n\r\n        (<ActorClass>this.typeStore.getType(\"Actor\")).registerWorldType();\r\n\r\n\r\n        this.typeStore.addType(new PrintStreamClass(this));\r\n        this.typeStore.addType(new KeyListener(this));\r\n        this.typeStore.addType(new SystemClass(this));\r\n        this.typeStore.addType(new SystemToolsClass(this));\r\n        this.typeStore.addType(new DayOfWeekEnum(this));\r\n        this.typeStore.addType(new MonthEnum(this));\r\n        this.typeStore.addType(new LocalDateTimeClass(this));\r\n    \r\n        this.typeStore.addType(new WebSocketClientClass(this));\r\n        this.typeStore.addType(new WebSocketClass(this));\r\n\r\n        this.typeStore.addType(new RobotWorldClass(this));\r\n        this.typeStore.addType(new RobotClass(this));\r\n\r\n    \r\n\r\n        stringPrimitiveType.module = this;\r\n        // stringPrimitiveType.baseClass = <any>(this.typeStore.getType(\"Object\"));\r\n        // stringPrimitiveType.baseClass = objectType;\r\n        // IntegerType.baseClass = objectType;\r\n        // DoubleType.baseClass = objectType;\r\n        // FloatType.baseClass = objectType;\r\n        // CharacterType.baseClass = objectType;\r\n        // BooleanType.baseClass = objectType;\r\n\r\n    }\r\n\r\n    clearUsagePositions() {\r\n        for (let type of this.typeStore.typeList) {\r\n            type.clearUsagePositions();\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class GNGModule extends Module {\r\n    constructor(main: MainBase, moduleStore: ModuleStore) {\r\n\r\n        super({ name: \"Graphics and Games - Module\", text: \"\", text_before_revision: null, submitted_date: null, student_edited_after_revision: false, dirty: false, saved: true, version: 1 , identical_to_repository_version: true}, main);\r\n\r\n        this.isSystemModule = true;\r\n        this.mainProgram = null;\r\n\r\n        this.clear();\r\n\r\n        this.typeStore.addType(new GNGAktionsempfaengerInterface(this));\r\n        this.typeStore.addType(new GNGBaseFigurClass(this, moduleStore));\r\n        this.typeStore.addType(new GNGZeichenfensterClass(this, moduleStore));\r\n        this.typeStore.addType(new GNGEreignisbehandlung(this, moduleStore));\r\n        this.typeStore.addType(new GNGRechteckClass(this, moduleStore));\r\n        this.typeStore.addType(new GNGDreieckClass(this, moduleStore));\r\n        this.typeStore.addType(new GNGKreisClass(this, moduleStore));\r\n        this.typeStore.addType(new GNGTextClass(this, moduleStore));\r\n        this.typeStore.addType(new GNGTurtleClass(this, moduleStore));\r\n        this.typeStore.addType(new GNGFigurClass(this, moduleStore));\r\n        this.typeStore.addType(new KeyEventClass(this, moduleStore));\r\n\r\n    }\r\n\r\n    clearUsagePositions() {\r\n        for (let type of this.typeStore.typeList) {\r\n            type.clearUsagePositions();\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport class ModuleStore {\r\n\r\n    private modules: Module[] = [];\r\n    private moduleMap: {[name: string]: Module} = {};\r\n    private baseModule: BaseModule;\r\n\r\n    dirty: boolean = false;\r\n\r\n    constructor(private main: MainBase, withBaseModule: boolean, private additionalLibraries: string[] = []) {\r\n        if (withBaseModule) {\r\n            this.baseModule = new BaseModule(main);\r\n            this.putModule(this.baseModule);\r\n        }\r\n        \r\n        // additionalLibraries = [\"gng\"];\r\n\r\n        for(let lib of additionalLibraries){\r\n            this.addLibraryModule(lib);\r\n        }\r\n    }\r\n\r\n    addLibraryModule(identifier: string){\r\n        switch(identifier){\r\n            case \"gng\": this.putModule(new GNGModule(this.main, this));\r\n            break;\r\n        }\r\n    }\r\n\r\n    setAdditionalLibraries(additionalLibraries: string[]){\r\n\r\n        this.modules = this.modules.filter( m => (!m.isSystemModule) || m instanceof BaseModule);\r\n        this.moduleMap = {};\r\n\r\n        for(let m of this.modules){\r\n            this.moduleMap[m.file.name] =  m;\r\n        }\r\n\r\n        if(additionalLibraries != null){\r\n            for(let lib of additionalLibraries){\r\n                this.addLibraryModule(lib);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    findModuleById(module_id: number): Module {\r\n        for(let module of this.modules){\r\n            if(module.file.id == module_id) return module;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public getBaseModule() {\r\n        return this.baseModule;\r\n    }\r\n\r\n    public clearUsagePositions() {\r\n        this.baseModule.clearUsagePositions();\r\n    }\r\n\r\n    copy(): ModuleStore {\r\n        let ms: ModuleStore = new ModuleStore(this.main, true);\r\n        for (let m of this.modules) {\r\n            if (!m.isSystemModule) {\r\n                ms.putModule(m.copy());\r\n            }\r\n        }\r\n        return ms;\r\n    }\r\n\r\n    findModuleByFile(file: File) {\r\n        for (let m of this.modules) {\r\n            if (m.file == file) {\r\n                return m;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    hasErrors(): boolean {\r\n        for (let m of this.modules) {\r\n            if (m.hasErrors()) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getFirstModule(): Module {\r\n        if (this.modules.length > 0) {\r\n            for (let mo of this.modules) {\r\n                if (!mo.isSystemModule) {\r\n                    return mo;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    isDirty(): boolean {\r\n\r\n        if (this.dirty) {\r\n            this.dirty = false;\r\n            return true;\r\n        }\r\n\r\n        let dirty = false;\r\n        for (let m of this.modules) {\r\n            if (m.file.dirty) {\r\n                dirty = true;\r\n                break;\r\n            }\r\n        }\r\n        return dirty;\r\n    }\r\n\r\n\r\n    getModules(includeSystemModules: boolean, excludedModuleName?: String): Module[] {\r\n        let ret = [];\r\n        for (let m of this.modules) {\r\n            if (m.file.name != excludedModuleName) {\r\n                if (!m.isSystemModule || includeSystemModules) {\r\n                    ret.push(m);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    putModule(module: Module) {\r\n        this.modules.push(module);\r\n        this.moduleMap[module.file.name] = module;\r\n    }\r\n\r\n    removeModuleWithFile(file: File) {\r\n        for (let m of this.modules) {\r\n            if (m.file == file) {\r\n                this.removeModule(m);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    removeModule(module: Module) {\r\n\r\n        if (this.modules.indexOf(module) < 0) return;\r\n\r\n        this.modules.splice(this.modules.indexOf(module), 1);\r\n        this.moduleMap[module.file.name] = undefined;\r\n        this.dirty = true;\r\n    }\r\n\r\n    getModule(moduleName: string): Module {\r\n        return this.moduleMap[moduleName];\r\n    }\r\n\r\n    getType(identifier: string): { type: Type, module: Module } {\r\n        for (let module of this.modules) {\r\n            if (module.typeStore != null) {\r\n                let type = module.typeStore.getType(identifier);\r\n                if (type != null) {\r\n                    return { type: type, module: module }\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    getTypeCompletionItems(moduleContext: Module, rangeToReplace: monaco.IRange): monaco.languages.CompletionItem[] {\r\n\r\n        let completionItems: monaco.languages.CompletionItem[] = [];\r\n\r\n        for (let module of this.modules) {\r\n            if (module.typeStore != null) {\r\n                for (let type of module.typeStore.typeList) {\r\n                    if (module == moduleContext || (type instanceof Klass && type.visibility == Visibility.public)\r\n                        || module.isSystemModule) {\r\n\r\n                        let detail = \"Klasse\";\r\n\r\n                        if(type.documentation != null){\r\n                            detail = type.documentation;\r\n                        } else if (module.isSystemModule) {\r\n                            if (type instanceof PrimitiveType) {\r\n                                detail = \"Primitiver Datentyp\";\r\n                            } else {\r\n                                detail = \"Systemklasse\";\r\n                            }\r\n                        }\r\n\r\n                        let item = {\r\n                            label: type.identifier,\r\n                            detail: detail,\r\n                            insertText: type.identifier,\r\n                            kind: type instanceof PrimitiveType ?\r\n                                monaco.languages.CompletionItemKind.Struct : monaco.languages.CompletionItemKind.Class,\r\n                            range: rangeToReplace,\r\n                            generic: ((type instanceof Klass || type instanceof Interface) && type.typeVariables.length > 0)\r\n                        };\r\n\r\n                        completionItems.push(item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return completionItems;\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\nexport class TypeStore {\r\n\r\n    typeList: Type[] = [];\r\n    typeMap: Map<string, Type> = new Map();\r\n\r\n    addType(type: Type) {\r\n        this.typeList.push(type);\r\n        this.typeMap.set(type.identifier, type);\r\n    }\r\n\r\n    clear() {\r\n        this.typeList.length = 0;\r\n        this.typeMap.clear();\r\n    }\r\n\r\n    getType(identifier: string) {\r\n        return this.typeMap.get(identifier);\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { booleanPrimitiveType, charPrimitiveType, doublePrimitiveType, floatPrimitiveType, intPrimitiveType, stringPrimitiveType, voidPrimitiveType } from \"../compiler/types/PrimitiveTypes.js\";\r\nimport { BaseModule } from \"../compiler/parser/Module.js\";\r\nimport { Klass, Interface, Visibility } from \"../compiler/types/Class.js\";\r\nimport { Method, Type } from \"../compiler/types/Types.js\";\r\nimport { Enum } from \"../compiler/types/Enum.js\";\r\nimport { getDeclarationAsString } from \"../compiler/types/DeclarationHelper.js\";\r\nimport { defineMyJava } from \"../main/gui/MyJava.js\";\r\n\r\nexport class ApiDoc {\r\n    start() {\r\n        this.initEditor();\r\n        this.initTypes();\r\n        this.initClassDocumentation();\r\n    }\r\n\r\n    initEditor(){\r\n\r\n        defineMyJava();\r\n\r\n        monaco.editor.defineTheme('myCustomThemeDark', {\r\n            base: 'vs-dark', // can also be vs-dark or hc-black\r\n            inherit: true, // can also be false to completely replace the builtin rules\r\n            rules: [\r\n                { token: 'method', foreground: 'dcdcaa', fontStyle: 'italic' },\r\n                { token: 'print', foreground: 'dcdcaa', fontStyle: 'italic bold' },\r\n                { token: 'class', foreground: '3DC9B0' },\r\n                { token: 'number', foreground: 'b5cea8' },\r\n                { token: 'type', foreground: '499cd6' },\r\n                { token: 'identifier', foreground: '9cdcfe' },\r\n                { token: 'statement', foreground: 'bb96c0', fontStyle: 'bold' },\r\n                { token: 'keyword', foreground: '68bed4', fontStyle: 'bold' },\r\n                // { token: 'comment.js', foreground: '008800', fontStyle: 'bold italic underline' },\r\n            ],\r\n            colors: {\r\n                \"editor.background\": \"#1e1e1e\"\r\n            }\r\n        });\r\n\r\n        monaco.editor.setTheme('myCustomThemeDark');\r\n\r\n        monaco.editor.create(jQuery('#editordiv')[0], {\r\n            language: \"myJava\"\r\n        });\r\n\r\n\r\n    }\r\n\r\n    initClassDocumentation() {\r\n        let b = booleanPrimitiveType;\r\n        let basemodule: BaseModule = new BaseModule(null);\r\n        let that = this;\r\n\r\n        let typeList = basemodule.typeStore.typeList.filter((a: Type) => a.identifier != null)\r\n            .sort(\r\n                (a: Type, b: Type) => a.identifier.localeCompare(b.identifier));\r\n\r\n\r\n        typeList.filter((type) => type instanceof Klass && !(type instanceof Enum)).forEach((type: Type, index) => {\r\n            let $menuItem = jQuery('<div class=\"jo_menu-class\">' + type.identifier + '</div>');\r\n            jQuery('#classes').append($menuItem)\r\n            $menuItem.on('click', () => {\r\n                that.showAPIHelp(type);\r\n            })\r\n        });\r\n\r\n        typeList.filter((type) => type instanceof Interface).forEach((type: Type, index) => {\r\n            let $menuItem = jQuery('<div class=\"jo_menu-class\">' + type.identifier + '</div>');\r\n            jQuery('#interfaces').append($menuItem)\r\n            $menuItem.on('click', () => {\r\n                that.showAPIHelp(type);\r\n            })\r\n        });\r\n\r\n        typeList.filter((type) => type instanceof Enum).forEach((type: Type, index) => {\r\n            let $menuItem = jQuery('<div class=\"jo_menu-class\">' + type.identifier + '</div>');\r\n            jQuery('#enums').append($menuItem)\r\n            $menuItem.on('click', () => {\r\n                that.showAPIHelp(type);\r\n            })\r\n        });\r\n\r\n\r\n    }\r\n\r\n    showAPIHelp(type: Type) {\r\n        let $main = jQuery('#main');\r\n        $main.empty();\r\n\r\n        let t = <Klass | Interface | Enum>type;\r\n        let $caption = jQuery('<div class=\"jo_type\"></div>');\r\n        $main.append($caption);\r\n        monaco.editor.colorize(getDeclarationAsString(t, \"\", true), \"myJava\", {}).then(\r\n            (html) => {$caption.append(jQuery(html))}\r\n        );\r\n\r\n        if(t instanceof Klass) this.showConstructors(t);\r\n        this.showMethods(t);\r\n        if(t instanceof Klass) this.showAttributes(t);\r\n\r\n    }\r\n\r\n    showConstructors(t: Klass){\r\n        let $main = jQuery('#main');\r\n        $main.append(jQuery('<div class=\"jo_constructor-heading\">Konstruktoren:</div>'));\r\n        let methods = t.methods.filter((m) => m.isConstructor);\r\n\r\n        while(methods.length == 0 && t.baseClass != null){\r\n            t = t.baseClass;\r\n            methods = methods.concat(t.getMethods(Visibility.protected).filter((m) => m.isConstructor));\r\n        }\r\n\r\n        methods.sort((a, b) => a.identifier.localeCompare(b.identifier));\r\n\r\n        if(methods.length == 0){\r\n            $main.append(jQuery('<div class=\"jo_method\">Keine</div>'));\r\n        } else {\r\n            for(let method of methods){\r\n                let $caption = jQuery(jQuery('<div class=\"jo_method\"></div>'));\r\n                $main.append($caption);\r\n                monaco.editor.colorize(getDeclarationAsString(method, \"\", true), \"myJava\", {}).then(\r\n                    (html) => {$caption.append(jQuery(html))}\r\n                );\r\n\r\n                if(method.documentation != null && method.documentation != \"\"){\r\n                    $main.append(jQuery('<div class=\"jo_documentation\">' + method.documentation + '</div>'));\r\n                }\r\n            }\r\n        }     \r\n    }\r\n\r\n    showMethods(t: Klass | Interface | Enum){\r\n        let $main = jQuery('#main');\r\n        $main.append(jQuery('<div class=\"jo_method-heading\">Methoden:</div>'));\r\n        let methods: Method[];\r\n        if(t instanceof Interface){\r\n            methods = t.methods.slice(0);\r\n        } else {\r\n            methods = t.getMethods(Visibility.protected).filter((m) => !m.isConstructor);\r\n        }\r\n        if(t instanceof Klass && t.staticClass != null){\r\n            methods = methods.concat(t.staticClass.getMethods(Visibility.protected).filter((m) => !m.isConstructor));\r\n        }\r\n\r\n        methods.sort((a, b) => a.identifier.localeCompare(b.identifier));\r\n\r\n        if(methods.length == 0){\r\n            $main.append(jQuery('<div class=\"jo_method\">Keine</div>'));\r\n        } else {\r\n            for(let method of methods){\r\n                let $caption = jQuery(jQuery('<div class=\"jo_method\"></div>'));\r\n                $main.append($caption);\r\n                monaco.editor.colorize(getDeclarationAsString(method, \"\", true), \"myJava\", {}).then(\r\n                    (html) => {$caption.append(jQuery(html))}\r\n                );\r\n\r\n                if(method.documentation != null && method.documentation != \"\"){\r\n                    $main.append(jQuery('<div class=\"jo_documentation\">' + method.documentation + '</div>'));\r\n                }\r\n            }\r\n        }     \r\n    }\r\n\r\n    showAttributes(t: Klass){\r\n        let $main = jQuery('#main');\r\n        $main.append(jQuery('<div class=\"jo_attribute-heading\">Attribute:</div>'));\r\n        let attributes = t.getAttributes(Visibility.protected);\r\n        if(t instanceof Klass && t.staticClass != null){\r\n            attributes = attributes.concat(t.staticClass.getAttributes(Visibility.protected));\r\n        }\r\n\r\n        attributes.sort((a, b) => a.identifier.localeCompare(b.identifier));\r\n\r\n        if(attributes.length == 0){\r\n            $main.append(jQuery('<div class=\"jo_method\">Keine</div>'));\r\n        } else {\r\n            for(let attribute of attributes){\r\n                let $caption = jQuery(jQuery('<div class=\"jo_method\"></div>'));\r\n                $main.append($caption);\r\n                monaco.editor.colorize(getDeclarationAsString(attribute, \"\", true), \"myJava\", {}).then(\r\n                    (html) => {$caption.append(jQuery(html))}\r\n                );\r\n\r\n                if(attribute.documentation != null && attribute.documentation != \"\"){\r\n                    $main.append(jQuery('<div class=\"jo_documentation\">' + attribute.documentation + '</div>'));\r\n                }\r\n            }\r\n        }     \r\n    }\r\n\r\n    initTypes() {\r\n        voidPrimitiveType.init();\r\n        intPrimitiveType.init();\r\n        floatPrimitiveType.init();\r\n        doublePrimitiveType.init();\r\n        booleanPrimitiveType.init();\r\n        stringPrimitiveType.init();\r\n        charPrimitiveType.init();\r\n    }\r\n\r\n}\r\n\r\njQuery(() => { \r\n    \r\n        //@ts-ignore\r\n        window.require.config({ paths: { 'vs': 'lib/monaco-editor/dev/vs' } });\r\n        //@ts-ignore\r\n        window.require.config({\r\n            'vs/nls': {\r\n                availableLanguages: {\r\n                    '*': 'de'\r\n                }\r\n            },\r\n            ignoreDuplicateModules: [\"vs/editor/editor.main\"]\r\n        });\r\n    \r\n        //@ts-ignore\r\n        window.require(['vs/editor/editor.main'], function () {\r\n\r\n            new ApiDoc().start(); \r\n    \r\n            // main.loadWorkspace();\r\n    \r\n    \r\n        });\r\n    \r\n    \r\n    \r\n});"],"sourceRoot":""}